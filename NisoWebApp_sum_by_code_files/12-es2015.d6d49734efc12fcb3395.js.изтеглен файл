(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/FfF":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var s=i("mrSG"),a=i("fXoL"),n=i("CR6u"),o=i("EcjI"),r=i("mOee"),d=i("ZRIf"),c=i("3Pt+"),l=i("ofXK"),h=i("1kSV"),p=i("oqUd"),u=i("TTlI"),m=i("xFIz"),b=i("lp4E"),g=i("Bz/w"),f=i("lz7R");const R=["form"];function S(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",9),a.Sb(1,"div",10),a.Sb(2,"app-fi-select-dropdown-cascade",18),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().m.terCode=t})),a.Rb(),a.Rb(),a.Sb(3,"div",10),a.Sb(4,"app-fi-select-dropdown-cascade",19),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().m.distEknm=t})),a.Rb(),a.Rb(),a.Sb(5,"div",10),a.Sb(6,"app-fi-select-dropdown-cascade",20),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.cotEknm=t})),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc();a.zb(2),a.mc("ngModel",e.m.terCode)("formItemDef",e.formDefinitions[25])("name",e.formDefinitions[25].domName),a.zb(2),a.mc("ngModel",e.m.distEknm)("formItemDef",e.formDefinitions[26])("name",e.formDefinitions[26].domName),a.zb(2),a.mc("ngModel",e.model.cotEknm)("formItemDef",e.formDefinitions[27])("name",e.formDefinitions[27].domName)}}const I=function(e){return{"mb-0":e}};let y=(()=>{class e{constructor(e,t){this.formDefsGenerator=e,this.crudService=t,this.WvPopularDistrictTeritory="WvPopularDistrictTeritory",this.index="0",this.formStatusValidChanged=new a.n,this.formEmitter=new a.n,this.contactEmitter=new a.n,this.deleteRow=new a.n,this.m={},this.formValidStatus="INVALID",this.statusSubscriber=null,this.formDefinitions=[]}ngOnInit(){this.setFormDefinitions(),this.mode===n.a.READ&&(Object(o.c)(this.formDefinitions,!0),Object(o.b)(this.formDefinitions,!1),Object(o.a)(this.formDefinitions)),this.loadAddressData()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(){let e=!0,t=!1;this.mode===n.a.READ?(e=!1,t=!0,Object(o.a)(this.formDefinitions),Object(o.b)(this.formDefinitions,e)):this.mode===n.a.EDIT&&(this.setFormDefinitions(),e=!0,t=!1),Object(o.c)(this.formDefinitions,t),this.loadAddressData()}setFormDefinitions(){this.formDefinitions=this.formDefsGenerator.getFormDefinitions()}loadAddressData(){return Object(s.a)(this,void 0,void 0,(function*(){if(this.model.cotEknm){const e=(yield this.crudService.loadByFind(Object,this.WvPopularDistrictTeritory,{popEknm:this.model.cotEknm}).toPromise()).pageContent[0];this.m.distEknm=e.distEknm,this.m.terCode=e.terCode}}))}clearFilters(){this.form.reset()}getFormValue(){this.formEmitter.emit(this.form.value)}onContectChange(e){this.contactEmitter.emit(e)}onDeleteForm(){this.deleteRow.emit(this.index)}checkCoyCode(e){this.coyCode=null==e?void 0:e.coyCode2}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(r.a),a.Mb(d.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-proxy-agent-form"]],viewQuery:function(e,t){var i;1&e&&a.Nc(R,!0),2&e&&a.uc(i=a.fc())&&(t.form=i.first)},inputs:{index:"index",model:"model",mode:"mode"},outputs:{formStatusValidChanged:"formStatusValidChanged",formEmitter:"formEmitter",contactEmitter:"contactEmitter",deleteRow:"deleteRow"},features:[a.xb],decls:48,vars:38,consts:[[1,"container-fluid","border","border-primary","py-2","mb-4"],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"card"],[1,"card-header","pb-0","d-flex","justify-content-between"],[3,"ngClass"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mb-2",3,"hidden","click"],[1,"fas","fa-trash-alt"],[1,"card-body","pt-1","pb-0"],[1,"row"],[1,"col-md-4"],[3,"ngModel","formItemDef","name","ngModelChange"],[1,"card","mt-2"],[1,"card-header"],[1,"mb-0"],["labelFieldName","name","valueFieldName","coyCode2",3,"ngModel","formItemDef","name","ngModelChange","valueEmitter"],["class","row",4,"ngIf"],[1,"col-md-8"],["labelFieldName","terName","valueFieldName","terCode",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","distName","valueFieldName","distEknm",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","popName","valueFieldName","popEknm",3,"ngModel","formItemDef","name","ngModelChange"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Sb(3,"div",3),a.Sb(4,"div",4),a.Sb(5,"h6",5),a.Gc(6,"\u0414\u0410\u041d\u041d\u0418 \u0417\u0410 \u041e\u0420\u0413\u0410\u041d\u0418\u0417\u0410\u0426\u0418\u042f\u0422\u0410"),a.Rb(),a.Sb(7,"button",6),a.ec("click",(function(){return t.onDeleteForm()})),a.Nb(8,"i",7),a.Rb(),a.Rb(),a.Sb(9,"div",8),a.Sb(10,"div",9),a.Sb(11,"div",10),a.Sb(12,"app-fi-input-eik",11),a.ec("ngModelChange",(function(e){return t.model.bulstat=e})),a.Rb(),a.Rb(),a.Sb(13,"div",10),a.Sb(14,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.ornName=e})),a.Rb(),a.Rb(),a.Sb(15,"div",10),a.Sb(16,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.ornNameEn=e})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(17,"div",12),a.Sb(18,"div",13),a.Sb(19,"h6",14),a.Gc(20,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(21,"div",8),a.Sb(22,"div",9),a.Sb(23,"div",10),a.Sb(24,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.cotFirstName=e})),a.Rb(),a.Rb(),a.Sb(25,"div",10),a.Sb(26,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.cotMidName=e})),a.Rb(),a.Rb(),a.Sb(27,"div",10),a.Sb(28,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.cotLastName=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(29,"div",9),a.Sb(30,"div",10),a.Sb(31,"app-fi-input-integer",11),a.ec("ngModelChange",(function(e){return t.model.cotPhone=e})),a.Rb(),a.Rb(),a.Sb(32,"div",10),a.Sb(33,"app-fi-input-integer",11),a.ec("ngModelChange",(function(e){return t.model.cotFax=e})),a.Rb(),a.Rb(),a.Sb(34,"div",10),a.Sb(35,"app-fi-input-email",11),a.ec("ngModelChange",(function(e){return t.model.cotEmail=e})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(36,"div",12),a.Sb(37,"div",13),a.Sb(38,"h6",14),a.Gc(39,"\u0410\u0414\u0420\u0415\u0421 \u0417\u0410 \u041a\u041e\u0420\u0415\u0421\u041f\u041e\u041d\u0414\u0415\u041d\u0426\u0418\u042f"),a.Rb(),a.Rb(),a.Sb(40,"div",8),a.Sb(41,"div",9),a.Sb(42,"div",10),a.Sb(43,"app-fi-select-dropdown",15),a.ec("ngModelChange",(function(e){return t.model.coyCode=e}))("valueEmitter",(function(e){return t.checkCoyCode(e)})),a.Rb(),a.Rb(),a.Rb(),a.Ec(44,S,7,9,"div",16),a.Sb(45,"div",9),a.Sb(46,"div",17),a.Sb(47,"app-fi-input-text",11),a.ec("ngModelChange",(function(e){return t.model.cotAddress=e})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.zb(5),a.mc("ngClass",a.qc(36,I,"R"!==t.mode)),a.zb(2),a.mc("hidden","R"===t.mode),a.zb(5),a.mc("ngModel",t.model.bulstat)("formItemDef",t.formDefinitions[14])("name",t.formDefinitions[14].domName),a.zb(2),a.mc("ngModel",t.model.ornName)("formItemDef",t.formDefinitions[15])("name",t.formDefinitions[15].domName),a.zb(2),a.mc("ngModel",t.model.ornNameEn)("formItemDef",t.formDefinitions[16])("name",t.formDefinitions[16].domName),a.zb(8),a.mc("ngModel",t.model.cotFirstName)("formItemDef",t.formDefinitions[20])("name",t.formDefinitions[20].domName),a.zb(2),a.mc("ngModel",t.model.cotMidName)("formItemDef",t.formDefinitions[18])("name",t.formDefinitions[18].domName),a.zb(2),a.mc("ngModel",t.model.cotLastName)("formItemDef",t.formDefinitions[21])("name",t.formDefinitions[21].domName),a.zb(3),a.mc("ngModel",t.model.cotPhone)("formItemDef",t.formDefinitions[22])("name",t.formDefinitions[22].domName),a.zb(2),a.mc("ngModel",t.model.cotFax)("formItemDef",t.formDefinitions[23])("name",t.formDefinitions[23].domName),a.zb(2),a.mc("ngModel",t.model.cotEmail)("formItemDef",t.formDefinitions[19])("name",t.formDefinitions[19].domName),a.zb(8),a.mc("ngModel",t.model.coyCode)("formItemDef",t.formDefinitions[17])("name",t.formDefinitions[17].domName),a.zb(1),a.mc("ngIf","BG"===t.coyCode),a.zb(3),a.mc("ngModel",t.model.cotAddress)("formItemDef",t.formDefinitions[24])("name",t.formDefinitions[24].domName))},directives:[c.D,c.p,c.q,l.r,h.ab,p.a,c.o,c.r,u.a,m.a,b.a,g.a,l.u,f.a],styles:[""]}),e})()},"/fRv":function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var s=i("fXoL"),a=i("mXJ+"),n=i("n2Fg"),o=i("7n1m"),r=i("kGQT"),d=i("ZRIf"),c=i("ofXK"),l=i("1kSV");function h(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",2),s.Sb(1,"button",3),s.ec("click",(function(){return s.wc(e),s.gc().onCancel()})),s.Nb(2,"i",4),s.Gc(3," \u041e\u0442\u043a\u0430\u0437 "),s.Rb(),s.Sb(4,"button",5),s.ec("click",(function(){return s.wc(e),s.gc().onSave()})),s.Nb(5,"i",6),s.Gc(6," \u0417\u0430\u043f\u0438\u0441 \u043a\u0430\u0442\u043e \u043f\u0440\u043e\u0435\u043a\u0442 "),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(4),s.mc("disabled",!e.isFormValid)}}function p(e,t){1&e&&(s.Sb(0,"h5",7),s.Gc(1," \u0424\u041e\u0420\u041c\u0410\u0422\u0410 \u0415 \u041f\u041e\u0414\u041f\u0418\u0421\u0410\u041d\u0410!\n"),s.Rb())}function u(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",18),s.ec("click",(function(){return s.wc(e),s.gc(3).onDeleteSign()})),s.Nb(1,"i",19),s.Gc(2," \u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 "),s.Rb()}}function m(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",20),s.ec("click",(function(){return s.wc(e),s.gc(3).onActualizeEdit()})),s.Nb(1,"i",21),s.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 "),s.Rb()}}function b(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",22),s.ec("click",(function(){s.wc(e);const i=t.$implicit;return s.gc(3).onMakeTransition(i)})),s.Gc(1),s.Rb()}if(2&e){const e=t.$implicit,i=s.gc(3);s.mc("hidden",i.hiddenWhenInssued||i.stateNeedSign()&&!i.isSigned&&!i.isInnerUser)("disabled",i.statusButtonsDisabled)("ngbTooltip",e.name),s.zb(1),s.Ic(" ",e.uiButtonLabel," ")}}function g(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",23),s.ec("click",(function(){return s.wc(e),s.gc(3).onSign()})),s.Nb(1,"i",24),s.Gc(2," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 "),s.Rb()}}function f(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",25),s.ec("click",(function(){return s.wc(e),s.gc(3).onEdit()})),s.Nb(1,"i",21),s.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),s.Rb()}}function R(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",26),s.ec("click",(function(){return s.wc(e),s.gc(3).onOpenHistory()})),s.Nb(1,"i",27),s.Gc(2," \u0418\u0441\u0442\u043e\u0440\u0438\u044f "),s.Rb()}}function S(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",28),s.ec("click",(function(){s.wc(e);const t=s.gc(3);return t.onMakeTransition(t.deleteState)})),s.Nb(1,"i",29),s.Gc(2," \u0418\u0437\u0442\u0440\u0438\u0439 "),s.Rb()}}function I(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,u,3,0,"button",11),s.Ec(2,m,3,0,"button",12),s.Ec(3,b,2,4,"button",13),s.Ec(4,g,3,0,"button",14),s.Ec(5,f,3,0,"button",15),s.Ec(6,R,3,0,"button",16),s.Ec(7,S,3,0,"button",17),s.Rb()),2&e){const e=s.gc(2);s.zb(1),s.mc("ngIf",e.stateNeedSign()&&e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.stateCanBeEditedFromInnerUser()&&e.isTB(e.type)),s.zb(1),s.mc("ngForOf",e.nextStates),s.zb(1),s.mc("ngIf",e.stateNeedSign()&&!e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.stateCanBeEdited()&&!e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.isStateWithHistory()),s.zb(1),s.mc("ngIf",!e.isSigned&&e.state===e.MRO_STATUS.PROJECT&&!e.isInnerUser)}}function y(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",2),s.Sb(1,"button",8),s.ec("click",(function(){return s.wc(e),s.gc().onCancel()})),s.Nb(2,"i",9),s.Gc(3," \u041e\u0431\u0440\u0430\u0442\u043d\u043e "),s.Rb(),s.Ec(4,I,8,7,"div",10),s.Rb()}if(2&e){const e=s.gc();s.zb(4),s.mc("ngIf",e.isInUserRios||!e.isInUserRios&&2===e.roleId)}}let T=(()=>{class e{constructor(e){this.crudService=e,this.MRO_STATUS=a.a,this.saveEvent=new s.n,this.cancelEvent=new s.n,this.signEvent=new s.n,this.editEvent=new s.n,this.deleteEvent=new s.n,this.historyEvent=new s.n,this.writeOffEvent=new s.n,this.deleteSignEvent=new s.n,this.submitEvent=new s.n,this.actualizeEvent=new s.n,this.transitionEvent=new s.n,this.actualizingEditEvent=new s.n,this.isTB=r.f}ngOnInit(){this.loadDeletedState(),(this.isSigned||this.isInnerUser||!this.stateNeedSign())&&this.loadNextStates()}ngOnChanges(){(this.isSigned||this.isInnerUser||!this.stateNeedSign())&&this.loadNextStates()}loadNextStates(){this.aunId&&this.crudService.loadByParam(n.a,o.a.DOC_TRANSITION_URL,`${this.aunId}/auth?roleId=${this.roleId}`).subscribe(e=>{this.nextStates=e})}loadDeletedState(){this.crudService.loadById(n.a,n.a.publicUrl,287).subscribe(e=>{this.deleteState=e})}onSave(){this.saveEvent.emit()}onCancel(){this.cancelEvent.emit()}onSign(){this.signEvent.emit()}onActualizeEdit(){this.actualizingEditEvent.emit()}onEdit(){this.editEvent.emit()}onOpenHistory(){this.historyEvent.emit()}onDeleteSign(){this.deleteSignEvent.emit()}onMakeTransition(e){this.transitionEvent.emit(e)}stateCanBeEdited(){return this.state===a.a.PROJECT||this.state===a.a.RETURNED_FOR_CORRECTION||this.state===a.a.ACTUALIZING_PROCESS}stateNeedSign(){return this.state===a.a.PROJECT||this.state===a.a.RETURNED_FOR_CORRECTION||this.state===a.a.ACTUALIZING_PROCESS}isStateWithHistory(){return!1}stateCanBeEditedFromInnerUser(){return this.isInnerUser&&(this.state===a.a.ACTUALIZE||this.state===a.a.PROJECT_SERVANT)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-buttons-status-bar"]],inputs:{aunId:"aunId",roleId:"roleId",isInnerUser:"isInnerUser",isInUserRios:"isInUserRios",statusButtonsDisabled:"statusButtonsDisabled",hiddenWhenInssued:"hiddenWhenInssued",mode:"mode",state:"state",isFormValid:"isFormValid",isSigned:"isSigned",type:"type"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent",signEvent:"signEvent",editEvent:"editEvent",deleteEvent:"deleteEvent",historyEvent:"historyEvent",writeOffEvent:"writeOffEvent",deleteSignEvent:"deleteSignEvent",submitEvent:"submitEvent",actualizeEvent:"actualizeEvent",transitionEvent:"transitionEvent",actualizingEditEvent:"actualizingEditEvent"},features:[s.xb],decls:3,vars:3,consts:[["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-0",4,"ngIf"],["class","text-warning text-center mt-0 mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-0"],["type","button","placement","left","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","placement","top","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-plus","text-warning"],[1,"text-warning","text-center","mt-0","mb-3"],["type","button","placement","right","ngbTooltip","\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u043a\u044a\u043c \u043f\u0440\u0435\u0433\u043b\u0435\u0434","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-chevron-circle-left"],[4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","left","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","container","body",3,"hidden","disabled","ngbTooltip","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-primary mr-2","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","top","ngbTooltip","\u041e\u0442\u0432\u043e\u0440\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u0442\u0430","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","top","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","placement","left","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-remove-format","mr-1","text-danger"],["type","button","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","top","container","body",1,"btn","btn-primary","mr-2",3,"hidden","disabled","ngbTooltip","click"],["type","button","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-pen-fancy","mr-1"],["type","button","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],["type","button","placement","top","ngbTooltip","\u041e\u0442\u0432\u043e\u0440\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u0442\u0430","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-history"],["type","button","placement","top","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary",3,"click"],[1,"far","fa-trash-alt","text-danger"]],template:function(e,t){1&e&&(s.Ec(0,h,7,1,"div",0),s.Ec(1,p,2,0,"h5",1),s.Ec(2,y,5,1,"div",0)),2&e&&(s.mc("ngIf",!("R"===t.mode)),s.zb(1),s.mc("ngIf",t.isSigned&&t.stateNeedSign()&&!t.isInnerUser),s.zb(1),s.mc("ngIf","R"===t.mode))},directives:[c.u,l.ab,c.t],styles:[""]}),e})()},"0Tjd":function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var s=i("fXoL"),a=i("CR6u"),n=i("EcjI"),o=i("F7pt"),r=i("0Uwp"),d=i("ra4D"),c=i("mwl0"),l=i("ey6I"),h=i("noCF"),p=i("9zSO");let u=(()=>{class e{constructor(){}getStageFormDefinitions(e){const t=[],i=h.a.createDefaultDropDownCascadeFormItemDef();i.domId="dist"+e,i.labelText="\u041e\u0431\u043b\u0430\u0441\u0442",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",i.placeHolderText="\u041e\u0431\u043b\u0430\u0441\u0442",i.dataSource="Public/Teritory",i.searchFields=[new d.a("terName","s")],i.resultDataType=c.a,i.parentDomName=null,i.isRequired=!0,t.push(i);const s=h.a.createDefaultDropDownCascadeFormItemDef();s.domId="mun"+e,s.labelText="\u041e\u0431\u0449\u0438\u043d\u0430",s.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0449\u0438\u043d\u0430 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",s.placeHolderText="\u041e\u0431\u0449\u0438\u043d\u0430",s.dataSource="Public/District",s.searchFields=[new d.a("distName","s")],s.resultDataType=l.a,s.parentDomName="dist"+e,s.parentFieldName="terCode",s.isRequired=!0,t.push(s);const a=h.a.createDefaultDropDownCascadeFormItemDef();a.domId="set"+e,a.labelText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",a.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",a.placeHolderText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",a.dataSource="Public/Popular",a.searchFields=[new d.a("popName","s")],a.resultDataType=p.a,a.parentDomName="mun"+e,a.parentFieldName="distEknm",a.isRequired=!0,t.push(a);const n=o.a.createDefaultTextFormItemDef();n.domId="ekatte_"+e,n.labelText="\u0415\u041a\u0410\u0422\u0422\u0415",n.helpText="\u041f\u043e\u043f\u044a\u043b\u0432\u0430 \u0441\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e",n.placeHolderText="\u0415\u041a\u0410\u0422\u0422\u0415",n.readonly=!0,t.push(n);const u=o.a.createDefaultTextFormItemDef();u.domId="stage_address_"+e,u.labelText="\u0410\u0434\u0440\u0435\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430",u.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430",u.placeHolderText="\u0410\u0434\u0440\u0435\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430",u.isRequired=!0,t.push(u);const m=o.a.createDefaultTextFormItemDef();m.domId="activity_"+e,m.labelText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u0442\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442",m.placeHolderText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u0442\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442",m.isRequired=!0,t.push(m);const b=o.a.createDefaultTextFormItemDef();b.domId="installation_"+e,b.labelText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u044f\u0442\u0430",b.placeHolderText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u044f\u0442\u0430",b.isRequired=!0,t.push(b);const g=r.a.createDefaultDropDownFormItemDef();g.domId="operation_"+e,g.labelText="\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435",g.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0430 \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435",g.placeHolderText="\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435",g.isRequired=!0,t.push(g);const f=o.a.createDefaultTextFormItemDef();return f.domId="operation_name_"+e,f.labelText="\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430",f.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430",f.placeHolderText="\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430",f.isRequired=!0,t.push(f),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i("3Pt+"),b=i("1kSV"),g=i("lz7R"),f=i("TTlI"),R=i("ofXK");const S=["form"];function I(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",2),s.Sb(1,"div",14),s.Sb(2,"app-fi-input-text",12),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.mainActivity=t})),s.Rb(),s.Rb(),s.Sb(3,"div",14),s.Sb(4,"app-fi-input-text",12),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.instDesc=t})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(2),s.mc("ngModel",e.model.mainActivity)("formItemDef",e.formDefs[5])("name",e.formDefs[5].domName),s.zb(2),s.mc("ngModel",e.model.instDesc)("formItemDef",e.formDefs[6])("name",e.formDefs[6].domName)}}function y(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",2),s.Sb(1,"div",15),s.Sb(2,"app-fi-input-text",12),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.treatingCode=t})),s.Rb(),s.Rb(),s.Sb(3,"div",11),s.Sb(4,"app-fi-input-text",12),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.treatingName=t})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(2),s.mc("ngModel",e.model.treatingCode)("formItemDef",e.formDefs[7])("name",e.formDefs[7].domName),s.zb(2),s.mc("ngModel",e.model.treatingName)("formItemDef",e.formDefs[8])("name",e.formDefs[8].domName)}}let T=(()=>{class e{constructor(e){this.defService=e,this.isFull=!0,this.index=0,this.formStatusValidChanged=new s.n,this.deleteRow=new s.n,this.formValidStatus="VALID",this.statusSubscriber=null,this.formDefs=[]}ngOnChanges(){this.loadFormDef(),this.handleMode()}ngOnInit(){this.loadFormDef(),this.handleMode()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}onDeleteRow(){this.deleteRow.emit(this.index)}loadFormDef(){this.formDefs=this.defService.getStageFormDefinitions(this.index)}handleMode(){let e=!1;this.mode===a.a.READ&&(e=!0,Object(n.b)(this.formDefs,!1)),Object(n.c)(this.formDefs,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(u))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-mercury-stage"]],viewQuery:function(e,t){var i;1&e&&s.Nc(S,!0),2&e&&s.uc(i=s.fc())&&(t.form=i.first)},inputs:{isFull:"isFull",mode:"mode",index:"index",model:"model"},outputs:{formStatusValidChanged:"formStatusValidChanged",deleteRow:"deleteRow"},features:[s.xb],decls:21,vars:20,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between"],[1,"font-weight-bold"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"hidden","click"],[1,"fas","fa-trash-alt"],[1,"col-lg-4"],["labelFieldName","terName","valueFieldName","terCode",3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange"],[1,"col-md-8"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","row",4,"ngIf"],[1,"col-md-6"],[1,"col-md-4"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"div",4),s.Sb(5,"span",5),s.Gc(6),s.Rb(),s.Sb(7,"button",6),s.ec("click",(function(){return t.onDeleteRow()})),s.Nb(8,"i",7),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(9,"div",2),s.Sb(10,"div",8),s.Sb(11,"app-fi-select-dropdown-cascade",9),s.ec("ngModelChange",(function(e){return t.model.terCode=e})),s.Rb(),s.Rb(),s.Sb(12,"div",8),s.Sb(13,"app-fi-select-dropdown-cascade",10),s.ec("ngModelChange",(function(e){return t.model.distEknm=e})),s.Rb(),s.Rb(),s.Sb(14,"div",8),s.Sb(15,"app-fi-select-dropdown-cascade",10),s.ec("ngModelChange",(function(e){return t.model.popEknm=e})),s.Rb(),s.Rb(),s.Rb(),s.Sb(16,"div",2),s.Sb(17,"div",11),s.Sb(18,"app-fi-input-text",12),s.ec("ngModelChange",(function(e){return t.model.adderess=e})),s.Rb(),s.Rb(),s.Rb(),s.Ec(19,I,5,6,"div",13),s.Ec(20,y,5,6,"div",13),s.Rb()),2&e&&(s.zb(6),s.Hc(t.model.permitStage),s.zb(1),s.mc("hidden","R"===t.mode),s.zb(4),s.mc("ngModel",t.model.terCode)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),s.zb(2),s.mc("ngModel",t.model.distEknm)("formItemDef",t.formDefs[1])("labelFieldName","distName")("valueFieldName","distEknm")("name",t.formDefs[1].domName),s.zb(2),s.mc("ngModel",t.model.popEknm)("formItemDef",t.formDefs[2])("labelFieldName","popName")("valueFieldName","popEknm")("name",t.formDefs[2].domName),s.zb(3),s.mc("ngModel",t.model.adderess)("formItemDef",t.formDefs[4])("name",t.formDefs[4].domName),s.zb(1),s.mc("ngIf",t.isFull),s.zb(1),s.mc("ngIf",t.isFull))},directives:[m.D,m.p,m.q,b.ab,g.a,m.o,m.r,f.a,R.u],styles:[""]}),e})()},"1o9G":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("fXoL"),a=i("F7pt"),n=i("0Uwp"),o=i("SkKo"),r=i("CR6u"),d=i("EcjI"),c=i("ZRIf"),l=i("3Pt+"),h=i("ofXK"),p=i("Pe2L"),u=i("MxKE");const m=["form"];function b(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-fi-input-long-text",8),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).model.addressRecive=t})),s.Rb(),s.Sb(2,"div",9),s.Sb(3,"p",10),s.Gc(4," \u041a\u0410\u0422\u041e \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041c, \u0427\u0415 \u041f\u041e\u0429\u0415\u041d\u0421\u041a\u0418\u0422\u0415 \u0420\u0410\u0417\u0425\u041e\u0414\u0418 \u0421\u0410 \u0417\u0410 \u041c\u041e\u042f \u0421\u041c\u0415\u0422\u041a\u0410, \u041f\u041b\u0410\u0422\u0418\u041c\u0418 \u041f\u0420\u0418 \u041f\u041e\u041b\u0423\u0427\u0410\u0412\u0410\u041d\u0415\u0422\u041e \u041c\u0423 \u0417\u0410 \u0412\u042a\u0422\u0420\u0415\u0428\u041d\u0418 \u041f\u041e\u0429\u0415\u041d\u0421\u041a\u0418 \u041f\u0420\u0410\u0422\u041a\u0418, \u0418 \u0421\u042a\u041c \u0421\u042a\u0413\u041b\u0410\u0421\u0415\u041d \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0418\u0422\u0415 \u0414\u0410 \u0411\u042a\u0414\u0410\u0422 \u041f\u0420\u0415\u041d\u0410\u0421\u042f\u041d\u0418 \u0417\u0410 \u0421\u041b\u0423\u0416\u0415\u0411\u041d\u0418 \u0426\u0415\u041b\u0418. "),s.Rb(),s.Sb(5,"p"),s.Gc(6," \u0418\u041d\u0414\u0418\u0412\u0418\u0414\u0423\u0410\u041b\u041d\u0418\u042f\u0422 \u0410\u0414\u041c\u0418\u041d\u0418\u0421\u0422\u0420\u0410\u0422\u0418\u0412\u0415\u041d \u0410\u041a\u0422 \u0414\u0410 \u0411\u042a\u0414\u0415 \u0418\u0417\u041f\u0420\u0410\u0422\u0415\u041d: "),s.Rb(),s.Sb(7,"app-fi-input-radio-group",11),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).wayReciveAddress=t}))("valueEmitter",(function(){return s.wc(e),s.gc(2).onChangeWayReciveAddress()})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(1),s.mc("ngModel",e.model.addressRecive)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName),s.zb(6),s.mc("source",e.addressWays)("ngModel",e.wayReciveAddress)("formItemDef",e.formDefs[2])("name",e.formDefs[2].domName)}}function g(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"div",4),s.Sb(2,"input",5),s.ec("change",(function(){s.wc(e);const i=t.$implicit;return s.gc().onSelectItem(i)})),s.Rb(),s.Sb(3,"label",6),s.Gc(4),s.Rb(),s.Rb(),s.Ec(5,b,8,7,"div",7),s.Rb()}if(2&e){const e=t.$implicit,i=t.index,a=s.gc();s.zb(2),s.nc("value",e.code),s.mc("id",a.formDefs[0].domId+"-"+i+1)("name",a.formDefs[0].domName)("required",a.formDefs[0].isRequired)("disabled",a.formDefs[0].isDisabled)("checked",e.isSelected),s.zb(1),s.mc("for",a.formDefs[0].domId+"-"+i+1),s.zb(1),s.Ic(" ",e.description," "),s.zb(1),s.mc("ngIf",e.isSelected&&"10"===(null==a.model?null:a.model.wayRecive))}}let f=(()=>{class e{constructor(e){this.crudService=e,this.model={},this.formStatusValidChanged=new s.n,this.formDefs=[],this.waysRecive=[],this.addressWays=[],this.statusSubscriber=null}ngOnInit(){this.loadData(),this.loadFormDef(),this.handleMode(),this.checkStatus()}ngOnChanges(){this.handleMode(),this.checkStatus(),this.model.wayRecive&&this.formStatusValidChanged.emit("VALID")}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.onValueChange()})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}onValueChange(){this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))}handleMode(){let e=!1;this.mode===r.a.READ?e=!0:this.mode!==r.a.EDIT&&this.mode!==r.a.NEW||(e=!1),Object(d.c)(this.formDefs,e)}checkStatus(){var e,t;(null===(e=this.model)||void 0===e?void 0:e.wayRecive)&&this.waysRecive.forEach(e=>{e.code===this.model.wayRecive&&(e.isSelected=!0)}),(null===(t=this.model)||void 0===t?void 0:t.wayReciveAddress)&&this.addressWays.forEach((e,t)=>{e.code===this.model.wayReciveAddress&&(this.wayReciveAddress=this.addressWays[t],e.isSelected=!0)})}onChangeWayReciveAddress(){this.model.wayReciveAddress=this.wayReciveAddress.code}onSelectItem(e){const t=e.code;this.waysRecive.forEach(e=>{e.code===t?(e.isSelected=!0,this.model.wayRecive=e.code):e.isSelected=!1}),this.model.addressRecive=null,this.model.wayReciveAddress=null,this.addressWays.forEach(e=>{e.isSelected=!1}),this.onValueChange()}loadFormDef(){const e=a.a.createDefaultRadioGroupDef();e.domId="way_recive",e.labelText="",e.helpText="",e.isRequired=!0,this.formDefs.push(e);const t=n.a.createDefaultTextFormItemDef();t.domId="address",t.labelText="",t.isRequired=!0,this.formDefs.push(t);const i=a.a.createDefaultRadioGroupDef();i.domId="way_recive_address",i.labelText="",i.helpText="",i.isRequired=!0,this.formDefs.push(i)}loadData(){this.crudService.loadByParam(o.a,o.a.publicUrlDomain,"APP35_WAY_RECIVE").subscribe(e=>{this.loadLists(e)})}loadLists(e){e.forEach(e=>{e.code.endsWith("0")?this.waysRecive.push(e):this.addressWays.push(e)}),this.checkStatus()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-way-recive-form"]],viewQuery:function(e,t){var i;1&e&&s.Nc(m,!0),2&e&&s.uc(i=s.fc())&&(t.form=i.first)},inputs:{mode:"mode",model:"model"},outputs:{formStatusValidChanged:"formStatusValidChanged"},features:[s.xb],decls:5,vars:2,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[4,"ngFor","ngForOf"],[1,"text-danger",3,"hidden"],[1,"form-check"],["type","radio",1,"form-check-input",3,"value","id","name","required","disabled","checked","change"],[3,"for"],[4,"ngIf"],[3,"ngModel","formItemDef","name","ngModelChange"],[1,"px-4"],[1,"font-weight-bold"],["labelFieldName","description","valueFieldName","code",3,"source","ngModel","formItemDef","name","ngModelChange","valueEmitter"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Ec(2,g,6,9,"div",2),s.Sb(3,"p",3),s.Gc(4,"\u0418\u0437\u0431\u043e\u0440\u044a\u0442 \u043d\u0430 \u043d\u0430\u0447\u0438\u043d \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0432\u0430\u043d\u0435 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d"),s.Rb(),s.Rb()),2&e&&(s.zb(2),s.mc("ngForOf",t.waysRecive),s.zb(1),s.mc("hidden",t.model.wayRecive))},directives:[l.D,l.p,l.q,h.t,h.u,p.a,l.o,l.r,u.a],styles:[""]}),e})()},"2W/F":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("mrSG"),a=i("XDeO"),n=i("CwXB"),o=i("zc99");let r=(()=>{class e{constructor(e){e&&(this.pActive=e.active,this.pAddress=e.address,this.pAunId=e.aunId,this.pComments=e.comments,this.pContactPerson=e.contactPerson,this.pDateCreated=a.a.getAnyAsTimestampModel(e.dateCreated),this.pDepotClass=e.depotClass,this.pDepotType=e.depotType,this.pDescr=e.descr,this.pEmail=e.email,this.pFax=e.fax,this.pId=e.id,this.pIsDepot=e.isDepot,this.pNum=e.num,this.pPermitId=e.permitId,this.pPermitStage=e.permitStage,this.pPhone=e.phone,this.pPopEknm=e.popEknm,this.pPosition=e.position,this.pStagenum=e.stagenum,this.pTrnAseId=e.trnAseId,this.pUserCreated=e.userCreated,this.pDistEknm=e.distEknm,this.pTerCode=e.terCode,this.pStageDetails=o.a.adaptArray(e.stageDetails,n.a))}get active(){return this.pActive}set active(e){this.pActive=e}get address(){return this.pAddress}set address(e){this.pAddress=e}get aunId(){return this.pAunId}set aunId(e){this.pAunId=e}get comments(){return this.pComments}set comments(e){this.pComments=e}get contactPerson(){return this.pContactPerson}set contactPerson(e){this.pContactPerson=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get depotClass(){return this.pDepotClass}set depotClass(e){this.pDepotClass=e}get depotType(){return this.pDepotType}set depotType(e){this.pDepotType=e}get descr(){return this.pDescr}set descr(e){this.pDescr=e}get email(){return this.pEmail}set email(e){this.pEmail=e}get fax(){return this.pFax}set fax(e){this.pFax=e}get id(){return this.pId}set id(e){this.pId=e}get isDepot(){return this.pIsDepot}set isDepot(e){this.pIsDepot=e}get num(){return this.pNum}set num(e){this.pNum=e}get permitId(){return this.pPermitId}set permitId(e){this.pPermitId=e}get permitStage(){return this.pPermitStage}set permitStage(e){this.pPermitStage=e}get phone(){return this.pPhone}set phone(e){this.pPhone=e}get popEknm(){return this.pPopEknm}set popEknm(e){this.pPopEknm=e}get position(){return this.pPosition}set position(e){this.pPosition=e}get stagenum(){return this.pStagenum}set stagenum(e){this.pStagenum=e}get trnAseId(){return this.pTrnAseId}set trnAseId(e){this.pTrnAseId=e}get userCreated(){return this.pUserCreated}set userCreated(e){this.pUserCreated=e}get distEknm(){return this.pDistEknm}set distEknm(e){this.pDistEknm=e}get terCode(){return this.pTerCode}set terCode(e){this.pTerCode=e}get stageDetails(){return this.pStageDetails}set stageDetails(e){this.pStageDetails=e}}return e.url="TrnAuthorizations/stageData",e.adminUrl="TrnAuthorizations/int/stageData",e})();var d=i("Ol97"),c=i("N0QU"),l=i("NBd8"),h=i("Yru1"),p=i("YjFG"),u=i("01dd"),m=i("64a6");let b=(()=>{class e{constructor(e){e&&(this.pMetals=o.a.adaptArray(e.metals,l.a),this.pNotMetals=o.a.adaptArray(e.notMetals,l.a),this.pOthers=o.a.adaptArray(e.others,l.a),this.pTrnWasteCategoriesViews=o.a.adaptArray(e.trnWasteCategoriesViews,m.a))}get metals(){return this.pMetals}set metals(e){this.pMetals=e}get notMetals(){return this.pNotMetals}set notMetals(e){this.pNotMetals=e}get others(){return this.pOthers}set others(e){this.pOthers=e}get trnWasteCategoriesViews(){return this.pTrnWasteCategoriesViews}set trnWasteCategoriesViews(e){this.pTrnWasteCategoriesViews=e}}return e.url="TrnAuthorizations/stageData/trnAuthorizationStage",e})();var g=i("Z+Hd");class f{constructor(e){this.crudService=e}loadStagesByAunId(e,t){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.crudService.loadByParam(r,r.url,e).toPromise()).forEach(e=>{t.push(this.populateStageViewModel(e))})}))}loadDOStageData(e,t,i,a){return Object(s.a)(this,void 0,void 0,(function*(){const s=yield this.crudService.loadByParam(b,b.url,e).toPromise();t.wasteTypes=this.getWasteData(s[0].notMetals),t.typeValidity=this.getWasteValidity(t.wasteTypes),t.ochcmTypes=this.getWasteData(s[0].metals),t.addWaste=this.getWasteData(s[0].others),t.baEwc=this.getCategoryEwc(s[0].trnWasteCategoriesViews,i),t.baData=this.getCategoryData(s[0].trnWasteCategoriesViews,i),t.eeoEwc=this.getCategoryEwc(s[0].trnWasteCategoriesViews,a),t.eeoData=this.getCategoryData(s[0].trnWasteCategoriesViews,a)}))}loadStageData(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.crudService.loadByParam(l.a,l.a.urlStageId,e).toPromise();t.wasteTypes=this.getWasteData(i),t.typeValidity=this.getWasteValidity(t.wasteTypes)}))}loadTransportStageData(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.crudService.loadByParam(l.a,l.a.urlStageId,e).toPromise();t.trWasteType=this.getWasteDataAll(i),t.typesTransportValidity=this.getWasteValidity(t.trWasteType)}))}populateStageViewModel(e){return new d.a({stageDataView:this.getStageDataAsViewModel(e),wasteTypes:[],baEwc:[],baData:[],eeoEwc:[],eeoData:[],ochcmTypes:[],addWaste:[],trWasteType:[],locationValidity:!0,typeValidity:[],ochcmValidity:[],addWasteValidity:[],typesTransportValidity:[]})}getStageDataAsViewModel(e){let t={};try{null!=e.descr&&(t=JSON.parse(e.descr))}catch(i){}return new c.a({stageId:e.id,terCode:e.terCode,distEknm:e.distEknm,popEknm:e.popEknm,address:e.address,upi:t.stage_upi,plan:t.stage_plan_num,neighbourhood:t.stage_neighborhood,town:t.stage_district,other:t.stage_desc_not_reg,area:t.stage_area,isDepot:"Y"===e.isDepot,depot:e.depotType,permitStage:e.permitStage,depotClasses:this.populateDepotClasses(e.stageDetails),stageData:new u.a(e),stageDetails:e.stageDetails})}populateDepotClasses(e){const t=[];return e.forEach(e=>{t.push(e.depotClass)}),t}getWasteData(e){const t=[];return e.forEach(e=>{const i=t.find(t=>null!=t.operations&&t.operations.length>0&&e.ewc===t.operations[0].ewc&&e.wasteAmntTonns===t.operations[0].wasteAmntTonns&&e.wasteOrigin===t.operations[0].wasteOrigin);null==i?t.push(new h.a({operations:[e],status:g.a.NOT_CHANGED})):i.operations.push(e)}),t}getWasteDataAll(e){const t=[];return e.forEach(e=>{t.push(new h.a({operations:[e],status:g.a.NOT_CHANGED}))}),t}getWasteValidity(e){const t=[];return e.forEach(e=>{t.push(!0)}),t}getCategoryEwc(e,t){const i=[];return e.forEach(e=>{i.find(t=>t.ewc===e.ewc)||null!=t.find(t=>t.ewc===e.ewc)&&i.push(new p.a({ewc:e.ewc}))}),i}getCategoryData(e,t){const i=[];return e.forEach(e=>{null!=t.find(t=>t.ewc===e.ewc)&&i.push(e)}),i}}},"2z9z":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mrSG"),a=i("Qlr7"),n=i("hnrn");let o=(()=>{class e{constructor(e){e&&(this.aunId=e.aunId,this.dateCreated=new a.a(e.dateCreated),this.description=e.description,this.id=e.id,this.userCreated=e.userCreated,this.roeId=e.roeId,this.fromStateId=e.fromStateId,this.toStateId=e.toStateId,this.pCommentId=e.commentId,this.pUserComment=e.userComment)}get aunId(){return this.pAunId}set aunId(e){this.pAunId=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get description(){return this.pDescription}set description(e){this.pDescription=e}get id(){return this.pId}set id(e){this.pId=e}get userCreated(){return this.pUserCreated}set userCreated(e){this.pUserCreated=e}get roeId(){return this.pRoeId}set roeId(e){this.pRoeId=e}get fromStateId(){return this.pFromStateId}set fromStateId(e){this.pFromStateId=e}get toStateId(){return this.pToStateId}set toStateId(e){this.pToStateId=e}get commentId(){return this.pCommentId}set commentId(e){this.pCommentId=e}get userComment(){return this.pUserComment}set userComment(e){this.pUserComment=e}}return e.urlHistory="TrnAuthorizationStates/getHistoryForAuth",e.url="TrnAuthorizationStates",e.urlLastRecord="TrnAuthorizationStates/getLastRecord",Object(s.b)([Object(n.b)({alias:"aunId"})],e.prototype,"pAunId",void 0),Object(s.b)([Object(n.b)({alias:"dateCreated"})],e.prototype,"pDateCreated",void 0),Object(s.b)([Object(n.b)({alias:"description"})],e.prototype,"pDescription",void 0),Object(s.b)([Object(n.b)({alias:"id"})],e.prototype,"pId",void 0),Object(s.b)([Object(n.b)({alias:"userCreated"})],e.prototype,"pUserCreated",void 0),Object(s.b)([Object(n.b)({alias:"roeId"})],e.prototype,"pRoeId",void 0),Object(s.b)([Object(n.b)({alias:"fromStateId"})],e.prototype,"pFromStateId",void 0),Object(s.b)([Object(n.b)({alias:"toStateId"})],e.prototype,"pToStateId",void 0),Object(s.b)([Object(n.b)({alias:"commentId"})],e.prototype,"pCommentId",void 0),Object(s.b)([Object(n.b)({alias:"userComment"})],e.prototype,"pUserComment",void 0),e})()},"3ET/":function(e,t,i){"use strict";i.d(t,"a",(function(){return pe}));var s=i("mrSG"),a=i("fXoL"),n=i("4uOi"),o=function(e){return e.TEXT_FIELD="text",e.DATE_FIELD="date",e.POPULAR_FIELD="popular",e}({});let r=(()=>{class e{constructor(e){Object.assign(this,e||{}),this.pIsVisible=this.displayNumber%1==0}get id(){return this.pId}set id(e){this.pId=e}get domain(){return this.pDomain}set domain(e){this.pDomain=e}get sortNumber(){return this.pSortNumber}set sortNumber(e){this.pSortNumber=e}get displayNumber(){return this.pDisplayNumber}set displayNumber(e){this.pDisplayNumber=e}get description(){return this.pDescription}set description(e){this.pDescription=e}get isActive(){return this.pIsActive}set isActive(e){this.pIsActive=e}get note(){return this.pNote}set note(e){this.pNote=e}get uiCompnentType(){return this.pUiCompnentType}set uiCompnentType(e){this.pUiCompnentType=e}get uiComponentLabel(){return this.pUiComponentLabel}set uiComponentLabel(e){this.pUiComponentLabel=e}get visibility(){return this.pIsVisible}set visibility(e){this.pIsVisible=e}isText(){return this.uiCompnentType===o.TEXT_FIELD}isDate(){return this.uiCompnentType===o.DATE_FIELD}isPopular(){return this.uiCompnentType===o.POPULAR_FIELD}}return e.url="TcReasonTemplates",e.urlPublic="Public/TcReasonTemplates",e})();var d=i("F7pt"),c=i("0Uwp"),l=i("t8UU");let h=(()=>{class e{constructor(e){Object.assign(this,e||{})}get id(){return this.pId}set id(e){this.pId=e}get tcCommonCodesId(){return this.pTcCommonCodesId}set tcCommonCodesId(e){this.pTcCommonCodesId=e}get tcReasonTemplatesId(){return this.pTcReasonTemplatesId}set tcReasonTemplatesId(e){this.pTcReasonTemplatesId=e}get tcRegistersId(){return this.pTcRegistersId}set tcRegistersId(e){this.pTcRegistersId=e}get tcStatesId(){return this.pTcStatesId}set tcStatesId(e){this.pTcStatesId=e}}return e.url="TrnMapStateRtempl",e.urlPublic="Public/TrnMapStateRtempl",e})();var p=i("SkKo"),u=i("2z9z"),m=i("hnrn");let b=(()=>{class e{constructor(e){Object.assign(this,e||{})}get id(){return this.pId}set id(e){this.pId=e}get aunId(){return this.pAunId}set aunId(e){this.pAunId=e}get reasonCode(){return this.pReasonCode}set reasonCode(e){this.pReasonCode=e}}return e.url="TrnAunChangeReason",Object(s.b)([Object(m.b)({alias:"id"})],e.prototype,"pId",void 0),Object(s.b)([Object(m.b)({alias:"aunId"})],e.prototype,"pAunId",void 0),Object(s.b)([Object(m.b)({alias:"reasonCode"})],e.prototype,"pReasonCode",void 0),e})(),g=(()=>{class e{constructor(e){Object.assign(this,e||{})}}return e.url="TrnAunReasons",e})(),f=(()=>{class e{constructor(e){Object.assign(this,e||{})}get id(){return this.pId}set id(e){this.pId=e}get aunId(){return this.pAunId}set aunId(e){this.pAunId=e}get userCreated(){return this.pUserCreated}set userCreated(e){this.pUserCreated=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get isCurrent(){return this.pIsCurrent}set isCurrent(e){this.pIsCurrent=e}get stateId(){return this.pStateId}set stateId(e){this.pStateId=e}}return e.url="TrnAunResolutions",Object(s.b)([Object(m.b)()],e.prototype,"pId",void 0),Object(s.b)([Object(m.b)()],e.prototype,"pAunId",void 0),Object(s.b)([Object(m.b)()],e.prototype,"pUserCreated",void 0),Object(s.b)([Object(m.b)()],e.prototype,"pDateCreated",void 0),Object(s.b)([Object(m.b)()],e.prototype,"pIsCurrent",void 0),Object(s.b)([Object(m.b)()],e.prototype,"pStateId",void 0),e})();var R=i("7n1m");let S=(()=>{class e{constructor(e){this.aunReasons=e}}return Object(s.b)([Object(m.b)()],e.prototype,"aunReasons",void 0),e})(),I=(()=>{class e{constructor(e){Object.assign(this,e||{})}}return Object(s.b)([Object(m.b)()],e.prototype,"reasonCode",void 0),e})();var y=i("ZRIf"),T=i("4XRX"),E=i("ofXK"),D=i("1kSV"),v=i("3Pt+"),C=i("TTlI"),O=i("szLj"),A=i("Bz/w"),w=i("Pe2L"),M=i("sYmb");function N(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"III. \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0430\u043d\u0435\u0442\u043e \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0434\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u043f\u0440\u0438 \u0441\u043f\u0430\u0437\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0438\u0441\u043a\u0432\u0430\u043d\u0438\u044f\u0442\u0430 \u043d\u0430 \u0447\u043b. 29 \u043e\u0442 \u0417\u0423\u041e \u0438 \u043d\u0430\u0440\u0435\u0434\u0431\u0430\u0442\u0430 \u043f\u043e \u0447\u043b. 43, \u0430\u043b. 1 \u043e\u0442 \u0417\u0423\u041e "),a.Rb())}function x(e,t){if(1&e&&(a.Sb(0,"div",9),a.Ec(1,N,2,0,"h6",0),a.Rb()),2&e){const e=a.gc(2);a.zb(1),a.mc("ngIf",e.stateTypeRef.isApprove())}}function k(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"IV. \u041f\u0440\u0435\u0434\u0430\u0432\u0430\u043d\u0435\u0442\u043e \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u0432\u0430\u0449\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435, \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438 \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u043e\u0442\u043e \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0434\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u0441\u0430\u043c\u043e \u0432\u044a\u0437 \u043e\u0441\u043d\u043e\u0432\u0430 \u043d\u0430 \u043f\u0438\u0441\u043c\u0435\u043d \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0441 \u043b\u0438\u0446\u0430, \u043f\u0440\u0438\u0442\u0435\u0436\u0430\u0432\u0430\u0449\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043f\u043e \u0447\u043b. 35 \u043e\u0442 \u0417\u0423\u041e \u0437\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0441\u044a\u0441 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u043d\u0438\u044f \u043a\u043e\u0434 \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u043d\u0430\u0440\u0435\u0434\u0431\u0430\u0442\u0430 \u043f\u043e \u0447\u043b. 3 \u043e\u0442 \u0417\u0423\u041e, \u043a\u0430\u043a\u0442\u043e \u0441\u043b\u0435\u0434\u0432\u0430: "),a.Rb())}function F(e,t){if(1&e&&(a.Qb(0),a.Ec(1,k,2,0,"h6",0),a.Pb()),2&e){const e=a.gc(3);a.zb(1),a.mc("ngIf",e.stateTypeRef.isApprove())}}function V(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"\u0423\u0441\u043b\u043e\u0432\u0438\u044f, \u043f\u0440\u0438 \u043a\u043e\u0438\u0442\u043e \u0434\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438\u0442\u0435 \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 "),a.Rb())}function z(e,t){if(1&e&&(a.Qb(0),a.Ec(1,V,2,0,"h6",0),a.Pb()),2&e){const e=a.gc(3);a.zb(1),a.mc("ngIf",e.stateTypeRef.isApprove())}}function _(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"\u041f\u0440\u0438\u0447\u0438\u043d\u0438 \u0437\u0430 \u043e\u0442\u043a\u0430\u0437"),a.Rb())}function P(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"\u0423\u0441\u043b\u043e\u0432\u0438\u044f, \u043f\u0440\u0438 \u043a\u043e\u0438\u0442\u043e \u0434\u0430 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438\u0442\u0435 \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 "),a.Rb())}function j(e,t){if(1&e&&(a.Qb(0),a.Ec(1,P,2,0,"h6",0),a.Pb()),2&e){const e=a.gc(3);a.zb(1),a.mc("ngIf",e.stateTypeRef.isApprove())}}function L(e,t){if(1&e&&(a.Sb(0,"div",10),a.Sb(1,"div",11),a.Ec(2,F,2,1,"ng-container",0),a.Ec(3,z,2,1,"ng-container",0),a.Ec(4,_,2,0,"h6",0),a.Ec(5,j,2,1,"ng-container",0),a.Rb(),a.Sb(6,"div",12),a.Sb(7,"div",13),a.Sb(8,"button",14),a.Nb(9,"i",15),a.Nb(10,"i",16),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(3),t=a.gc();a.zb(2),a.mc("ngIf",t.actionType===t.APP_TYPES.M35_RD_TRANSPORT),a.zb(1),a.mc("ngIf",t.actionType===t.APP_TYPES.M35_DO),a.zb(1),a.mc("ngIf",t.stateTypeRef.isReject()),a.zb(1),a.mc("ngIf",t.actionType===t.APP_TYPES.M35_RD_TREAT),a.zb(4),a.mc("hidden",e.isExpanded("main")),a.zb(1),a.mc("hidden",!e.isExpanded("main"))}}function B(e,t){if(1&e){const e=a.Tb();a.Qb(0),a.Sb(1,"div",25),a.Sb(2,"app-fi-input-text",26),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc(2).index;return a.gc(3).tcReasonTemplateSelectedCheckboxes[i].rteParam=t})),a.Rb(),a.Rb(),a.Pb()}if(2&e){const e=a.gc(2).index,t=a.gc(3);a.zb(2),a.mc("ngModel",t.tcReasonTemplateSelectedCheckboxes[e].rteParam)("formItemDef",t.formFields["rteParam"+e])("name",null==t.formFields["rteParam"+e]?null:t.formFields["rteParam"+e].domName)}}function W(e,t){if(1&e){const e=a.Tb();a.Qb(0),a.Sb(1,"div",25),a.Sb(2,"app-fi-input-date",26),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc(2).index;return a.gc(3).tcReasonTemplateSelectedCheckboxes[i].rteParam=t})),a.Rb(),a.Rb(),a.Pb()}if(2&e){const e=a.gc(2).index,t=a.gc(3);a.zb(2),a.mc("ngModel",t.tcReasonTemplateSelectedCheckboxes[e].rteParam)("formItemDef",t.formFields["rteParam"+e])("name",null==t.formFields["rteParam"+e]?null:t.formFields["rteParam"+e].domName)}}function G(e,t){if(1&e){const e=a.Tb();a.Qb(0),a.Sb(1,"div",25),a.Sb(2,"app-fi-select-dropdown",27),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc(2).index;return a.gc(3).tcReasonTemplateSelectedCheckboxes[i].rteParam=t})),a.Rb(),a.Rb(),a.Pb()}if(2&e){const e=a.gc(2).index,t=a.gc(3);a.zb(2),a.mc("ngModel",t.tcReasonTemplateSelectedCheckboxes[e].rteParam)("formItemDef",t.formFields["rteParam"+e])("labelFieldName","cityName")("valueFieldName","cityName")("name",null==t.formFields["rteParam"+e]?null:t.formFields["rteParam"+e].domName)}}function H(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",28),a.Sb(1,"app-fi-input-long-text",26),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc(2).index;return a.gc(3).tcReasonTemplateSelectedCheckboxes[i].description=t})),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2).index,t=a.gc(3);a.zb(1),a.mc("ngModel",t.tcReasonTemplateSelectedCheckboxes[e].description)("formItemDef",t.formFields["description"+e])("name",null==t.formFields["description"+e]?null:t.formFields["description"+e].domName)}}function U(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",19),a.Sb(1,"div",20),a.Sb(2,"div",21),a.Sb(3,"input",22),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc().$implicit;return a.gc(3).showNestedCheckboxes(t,i)}))("ngModelChange",(function(t){a.wc(e);const i=a.gc().index;return a.gc(3).tcReasonTemplateSelectedCheckboxes[i].selected=t})),a.Rb(),a.Sb(4,"label",23),a.Gc(5),a.Rb(),a.Rb(),a.Rb(),a.Ec(6,B,3,3,"ng-container",0),a.Ec(7,W,3,3,"ng-container",0),a.Ec(8,G,3,5,"ng-container",0),a.Ec(9,H,2,3,"div",24),a.Rb()}if(2&e){const e=a.gc(),t=e.$implicit,i=e.index,s=a.gc(3);a.mc("ngClass",t.displayNumber%1==0?"col-lg-12":"ml-5 col-lg-11"),a.zb(3),a.mc("id",t.id)("disabled",s.isReadOnly)("name",t.id.toString())("ngModel",s.tcReasonTemplateSelectedCheckboxes[i].selected),a.zb(1),a.mc("for",t.id),a.zb(1),a.Ic(" ",t.description," "),a.zb(1),a.mc("ngIf",t.isText()&&s.tcReasonTemplateSelectedCheckboxes[i].selected),a.zb(1),a.mc("ngIf",t.isDate()&&s.tcReasonTemplateSelectedCheckboxes[i].selected),a.zb(1),a.mc("ngIf",t.isPopular()&&s.tcReasonTemplateSelectedCheckboxes[i].selected),a.zb(1),a.mc("ngIf",null==s.tcReasonTemplateSelectedCheckboxes[i]?null:s.tcReasonTemplateSelectedCheckboxes[i].selected)}}function q(e,t){if(1&e&&(a.Qb(0),a.Ec(1,U,10,11,"div",18),a.Pb()),2&e){const e=t.$implicit,i=t.index,s=a.gc(3);a.zb(1),a.mc("ngIf",s.isReadOnly?s.tcReasonTemplateSelectedCheckboxes[i].selected:e.visibility)}}function $(e,t){if(1&e&&a.Ec(0,q,2,1,"ng-container",17),2&e){const e=a.gc(2);a.mc("ngForOf",e.tcReasonTemplateCheckboxes)}}function K(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"V. \u0414\u0440\u0443\u0433\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f:"),a.Rb())}function Y(e,t){1&e&&(a.Sb(0,"h6"),a.Gc(1,"\u0414\u0440\u0443\u0433\u0438 \u043f\u0440\u0438\u0447\u0438\u043d\u0438: "),a.Rb())}function X(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",10),a.Sb(1,"div",11),a.Ec(2,K,2,0,"h6",0),a.Ec(3,Y,2,0,"h6",0),a.Rb(),a.Sb(4,"div",12),a.Sb(5,"div",13),a.Sb(6,"button",30),a.ec("click",(function(){a.wc(e),a.gc(2);const t=a.vc(3);return a.gc().addMoreRequirements(),t.expand("other")})),a.hc(7,"translate"),a.Nb(8,"i",31),a.Rb(),a.Sb(9,"button",14),a.Nb(10,"i",15),a.Nb(11,"i",16),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){a.gc(2);const e=a.vc(3),t=a.gc();a.zb(2),a.mc("ngIf",t.stateTypeRef.isApprove()),a.zb(1),a.mc("ngIf",t.stateTypeRef.isReject()),a.zb(3),a.nc("ngbTooltip",a.ic(7,6,"buttons.addRow.tooltip")),a.mc("disabled",t.isReadOnly),a.zb(4),a.mc("hidden",e.isExpanded("other")),a.zb(1),a.mc("hidden",!e.isExpanded("other"))}}function Q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",32),a.Sb(2,"div",33),a.Sb(3,"app-fi-input-long-text",26),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.notes=i})),a.Rb(),a.Rb(),a.Sb(4,"div",13),a.Sb(5,"button",34),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(4).removeRequirement(i)})),a.hc(6,"translate"),a.Nb(7,"i",35),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(4);a.zb(3),a.mc("ngModel",e.notes)("formItemDef",i.formFields["notes"+e.id])("name",null==i.formFields["notes"+e.id]?null:i.formFields["notes"+e.id].domName),a.zb(2),a.nc("ngbTooltip",a.ic(6,4,"buttons.remove.tooltip"))}}function Z(e,t){if(1&e&&a.Ec(0,Q,8,6,"div",17),2&e){const e=a.gc(3);a.mc("ngForOf",e.requirements)}}function J(e,t){1&e&&(a.Sb(0,"ngb-panel",29),a.Ec(1,X,12,8,"ng-template",5),a.Ec(2,Z,1,1,"ng-template",6),a.Rb())}function ee(e,t){if(1&e&&(a.Sb(0,"div",10),a.Sb(1,"div",11),a.Sb(2,"h6"),a.Gc(3,"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440: (\u0442\u043e\u0437\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0435 \u0432\u0438\u0434\u0438\u043c \u0441\u0430\u043c\u043e \u0437\u0430 \u0441\u043b\u0443\u0436\u0438\u0442\u0435\u043b\u0438) "),a.Rb(),a.Rb(),a.Sb(4,"div",12),a.Sb(5,"div",13),a.Sb(6,"button",14),a.Nb(7,"i",15),a.Nb(8,"i",16),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(3);a.zb(7),a.mc("hidden",e.isExpanded("comment")),a.zb(1),a.mc("hidden",!e.isExpanded("comment"))}}function te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",28),a.Sb(1,"app-fi-input-long-text",26),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(3).comment=t})),a.Rb(),a.Rb()}if(2&e){const e=a.gc(3);a.zb(1),a.mc("ngModel",e.comment)("formItemDef",e.formFields.comment)("name",null==e.formFields.comment?null:e.formFields.comment.domName)}}function ie(e,t){1&e&&(a.Sb(0,"ngb-panel",36),a.Ec(1,ee,9,2,"ng-template",5),a.Ec(2,te,2,3,"ng-template",6),a.Rb())}const se=function(e){return["main","comment",e]};function ae(e,t){if(1&e&&(a.Qb(0),a.Ec(1,x,2,1,"div",1),a.Sb(2,"ngb-accordion",2,3),a.Sb(4,"ngb-panel",4),a.Ec(5,L,11,6,"ng-template",5),a.Ec(6,$,1,1,"ng-template",6),a.Rb(),a.Ec(7,J,3,0,"ngb-panel",7),a.Ec(8,ie,3,0,"ngb-panel",8),a.Rb(),a.Pb()),2&e){const e=a.gc();a.zb(1),a.mc("ngIf",e.actionType===e.APP_TYPES.M35_RD_TRANSPORT),a.zb(1),a.mc("destroyOnHide",!1)("activeIds",a.qc(5,se,e.isReadOnly?"other":"")),a.zb(5),a.mc("ngIf",!e.isReadOnly||e.isReadOnly&&e.requirements.length),a.zb(1),a.mc("ngIf",e.isReadOnly?e.sessionService.isUserInternal()&&e.comment:e.sessionService.isUserInternal())}}function ne(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",21),a.Sb(1,"input",40),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc().index;return a.gc(2).commonCodesSelectedCheckboxes[i].selected=t})),a.Rb(),a.Sb(2,"label",23),a.Gc(3),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=e.$implicit,i=e.index,s=a.gc(2);a.zb(1),a.mc("id",t.code)("name",t.code)("ngModel",s.commonCodesSelectedCheckboxes[i].selected),a.zb(1),a.mc("for",t.code),a.zb(1),a.Ic(" ",t.description," ")}}function oe(e,t){if(1&e&&(a.Sb(0,"div",20),a.Ec(1,ne,4,5,"div",39),a.Rb()),2&e){const e=t.index,i=a.gc(2);a.zb(1),a.mc("ngIf",!i.isReadOnly||i.commonCodesSelectedCheckboxes[e].selected)}}function re(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"div",37),a.Sb(2,"h6"),a.Gc(3,"\u041f\u043e\u0440\u0430\u0434\u0438 \u043f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430:"),a.Rb(),a.Rb(),a.Ec(4,oe,2,1,"div",38),a.Pb()),2&e){const e=a.gc();a.zb(4),a.mc("ngForOf",e.commonCodesCheckboxes)}}function de(e,t){if(1&e&&(a.Sb(0,"div",10),a.Sb(1,"div",11),a.Sb(2,"h6"),a.Gc(3,"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440: (\u0442\u043e\u0437\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0435 \u0432\u0438\u0434\u0438\u043c \u0441\u0430\u043c\u043e \u0437\u0430 \u043b\u0438\u0446\u0435\u0442\u043e \u043f\u043e\u0434\u0430\u043b\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e) "),a.Rb(),a.Rb(),a.Sb(4,"div",12),a.Sb(5,"div",13),a.Sb(6,"button",14),a.Nb(7,"i",15),a.Nb(8,"i",16),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(2);a.zb(7),a.mc("hidden",e.isExpanded("return-comment")),a.zb(1),a.mc("hidden",!e.isExpanded("return-comment"))}}function ce(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",28),a.Sb(1,"app-fi-input-long-text",26),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).comment=t})),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.zb(1),a.mc("ngModel",e.comment)("formItemDef",e.formFields.comment)("name",null==e.formFields.comment?null:e.formFields.comment.domName)}}const le=function(){return["return-comment"]};function he(e,t){1&e&&(a.Qb(0),a.Sb(1,"ngb-accordion",2,3),a.Sb(3,"ngb-panel",41),a.Ec(4,de,9,2,"ng-template",5),a.Ec(5,ce,2,3,"ng-template",6),a.Rb(),a.Rb(),a.Pb()),2&e&&(a.zb(1),a.mc("destroyOnHide",!1)("activeIds",a.pc(2,le)))}let pe=(()=>{class e{constructor(e,t,i){this.detector=e,this.service=t,this.sessionService=i,this.TRANSPORT_DOMN_NAME="RD_CT_CHANGE_REASON",this.TREATMENT_DOMN_NAME="RD_CHANGE_REASON",this.APP_TYPES=n.a,this.transitionEmitter=new a.n,this.isReadOnly=!1,this.requirements=[],this.tcReasonTemplateCheckboxes=[],this.commonCodesCheckboxes=[],this.tcReasonTemplateSelectedCheckboxes=[],this.commonCodesSelectedCheckboxes=[]}ngOnInit(){this.prepareForms(),this.processCheckboxData()}ngOnChanges(e){const t=e.stateTypeRef;t&&t.currentValue&&t.previousValue&&t.currentValue.id!==t.previousValue.id&&(this.prepareForms(),this.processCheckboxData())}prepareForms(){this.clearFields(),this.formFields={},this.addFormFields(this.formFields)}addFormFields(e){const t=d.a.createDefaultTextFormItemDef();t.helpText=null,t.domId="comment",t.labelText=null,t.isDisabled=this.isReadOnly,e.comment=t}processCheckboxData(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.loadCheckboxNewData(),yield this.loadCheckBoxFilledData()}))}loadCheckboxNewData(){return Object(s.a)(this,void 0,void 0,(function*(){const e={tcStatesId:this.stateTypeRef.id,tcRegistersId:this.trnAuthRef.regId},t=yield this.service.loadByFind(h,h.urlPublic,e).toPromise().then(e=>e.pageContent);t.length&&(this.hasDescriptionFields=!!t[0].tcReasonTemplatesId,this.noAdditionalFields=!!t[0].tcCommonCodesId,this.loadCheckboxes(t))}))}loadCheckboxes(e){return Object(s.a)(this,void 0,void 0,(function*(){if(this.hasDescriptionFields){const t=e.map(e=>`i("${e.tcReasonTemplatesId}")`).join(",");yield this.service.loadByFind(r,r.urlPublic,{id:`in(${t})`}).toPromise().then(e=>this.tcReasonTemplateCheckboxes=e.pageContent.sort((e,t)=>e.sortNumber-t.sortNumber))}else if(this.noAdditionalFields){const t=e.map(e=>`i("${e.tcCommonCodesId}")`).join(",");yield this.service.loadByFind(p.a,p.a.urlPublic,{id:`in(${t})`}).toPromise().then(e=>{this.commonCodesCheckboxes=e.pageContent.sort((e,t)=>e.code.localeCompare(t.code))})}this.generateModelAndFormFields()}))}generateModelAndFormFields(){this.hasDescriptionFields?this.setDescriptionFields():this.setNoAdditionalFields()}setDescriptionFields(){this.tcReasonTemplateSelectedCheckboxes=[],Array.from(this.tcReasonTemplateCheckboxes).forEach((e,t)=>{const i=this.tcReasonTemplateSelectedCheckboxes.push({id:e.id,selected:!1,description:"",rteParam:""});let s="description"+t;const a=d.a.createDefaultTextFormItemDef();a.helpText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",a.domId=s,a.labelText=null,a.readonly=this.isReadOnly,a.isDisabled=this.isReadOnly,this.formFields[s]=a,s="rteParam"+t,e.isText()?this.addTextField(e,s):e.isDate()?this.addDateField(e,s):e.isPopular()&&(this.addRiosAddressField(s,e),this.setDefaultRiosAddress(i))}),this.detector.detectChanges()}setNoAdditionalFields(){this.commonCodesSelectedCheckboxes=[],Array.from(this.commonCodesCheckboxes).forEach(e=>this.commonCodesSelectedCheckboxes.push({id:e.code,selected:!1,code:e.code})),this.detector.detectChanges()}addTextField(e,t){const i=d.a.createDefaultTextFormItemDef();i.helpText=e.uiComponentLabel,i.domId=t,i.labelText=null,i.isRequired=!0,i.readonly=this.isReadOnly,this.formFields[t]=i}addDateField(e,t){const i=d.a.createDefaultDateFormItemDef();i.helpText=e.uiComponentLabel,i.domId=t,i.labelText=null,i.isRequired=!0,i.isDisabled=this.isReadOnly,this.formFields[t]=i}addRiosAddressField(e,t){const i=c.a.createDefaultDropDownFormItemDef();i.domId=e,i.labelText=null,i.helpText=t.uiComponentLabel,i.dataSource=l.a.url,i.resultDataType=l.a,i.isRequired=!0,i.isDisabled=!0,this.formFields[e]=i}setDefaultRiosAddress(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.service.loadByFind(l.a,l.a.publicUrl,{riosCode:this.trnAuthRef.riosvCodeN1}).toPromise().then(e=>e.pageContent.length?e.pageContent.shift():{});this.tcReasonTemplateSelectedCheckboxes[e-1].rteParam=t.cityName}))}clearFields(){this.hasDescriptionFields=!1,this.noAdditionalFields=!1,this.hasSelectedNoAdditionalFields=!1,this.hasSelectedDescriptionFields=!1}addMoreRequirements(e,t){const i=e||this.requirements.length,s="notes"+i,a=d.a.createDefaultTextFormItemDef();a.helpText=null,a.domId=s,a.labelText=null,a.readonly=this.isReadOnly,a.isDisabled=this.isReadOnly,this.formFields[s]=a,this.requirements.push({id:i,notes:t}),this.detector.detectChanges()}removeRequirement(e){this.requirements.splice(e,1)}getTransitionData(){const e=new R.a;if(e.description=this.comment,this.hasDescriptionFields){const t=this.tcReasonTemplateSelectedCheckboxes.filter(e=>e.selected).map(e=>this.buildTrnAunReasonsModel(e)),i=this.requirements.filter(e=>!!e.notes).map(e=>new g({description:e.notes,sortNumber:e.id,displayNumber:e.id}))||[];(t||i)&&(e.internalUserReasons=new S([...t,...i]))}else e.externalUserReasons=this.commonCodesSelectedCheckboxes.filter(e=>e.selected).map(e=>new I({reasonCode:e.code}));this.transitionEmitter.emit(e)}buildTrnAunReasonsModel(e){const t=this.tcReasonTemplateCheckboxes.find(t=>t.id===e.id);return new g({tcRteId:t.id,rteParam:e.rteParam,description:e.description,sortNumber:t.sortNumber,displayNumber:t.displayNumber})}loadCheckBoxFilledData(){return Object(s.a)(this,void 0,void 0,(function*(){this.isReadOnly&&(this.hasDescriptionFields?yield this.loadCheckboxWithDescriptionFilledData():this.noAdditionalFields&&(yield this.loadCheckboxOnlyFilledData()))}))}loadCheckboxOnlyFilledData(){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.service.loadByFind(b,b.url,{aunId:this.trnAuthRef.id}).toPromise().then(e=>e.pageContent.map(e=>e.reasonCode)),t=Array.from(e).map(e=>`s("${e}")`).join(","),i=this.actionType===n.a.M35_RD_TRANSPORT?this.TRANSPORT_DOMN_NAME:this.TREATMENT_DOMN_NAME;yield this.service.loadByFind(p.a,p.a.url,{domain:i,code:`in("${t}")`}).toPromise().then(e=>{this.hasSelectedNoAdditionalFields=!!e.pageContent.length,e.pageContent.forEach(e=>{const t=this.commonCodesSelectedCheckboxes.find(t=>t.code===e.code);t&&(t.selected=!0)})})}))}loadCheckboxWithDescriptionFilledData(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.loadComment(),yield this.loadParamAndDescription()}))}loadComment(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.service.loadByFind(u.a,u.a.url,{aunId:this.trnAuthRef.id,toStateId:this.trnAuthRef.stateId}).toPromise().then(e=>{e.pageContent.length&&(this.comment=e.pageContent.shift().userComment)})}))}loadParamAndDescription(){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.loadParam();e&&(yield this.loadDescription(e))}))}loadParam(){return Object(s.a)(this,void 0,void 0,(function*(){return yield this.service.loadByFind(f,f.url,{aunId:this.trnAuthRef.id}).toPromise().then(e=>{if(e.pageContent.length)return e.pageContent.sort((e,t)=>t.id-e.id).shift()})}))}loadDescription(e){return Object(s.a)(this,void 0,void 0,(function*(){yield this.service.loadByFind(g,g.url,{trnArnId:e.id}).toPromise().then(e=>{this.hasSelectedDescriptionFields=!!e.pageContent.length,e.pageContent.forEach(e=>e.tcRteId?this.setCheckboxField(e):this.setTextAreaField(e)),this.detector.detectChanges()})}))}setCheckboxField(e){const t=this.tcReasonTemplateSelectedCheckboxes.find(t=>t.id===e.tcRteId);t&&(t.selected=!0,t.description=e.description,t.rteParam=e.rteParam)}setTextAreaField(e){this.addMoreRequirements(e.displayNumber,e.description)}showNestedCheckboxes(e,t){if(t instanceof r&&t.displayNumber%1==0){let i=this.tcReasonTemplateCheckboxes.findIndex(e=>e.id===t.id)+1;for(;this.tcReasonTemplateCheckboxes[i]&&this.tcReasonTemplateCheckboxes[i].displayNumber%1!=0;)this.tcReasonTemplateCheckboxes[i].visibility=e,e||(this.tcReasonTemplateSelectedCheckboxes.find(e=>e.id===this.tcReasonTemplateCheckboxes[i].id).selected=!1),i++}}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(a.h),a.Mb(y.a),a.Mb(T.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-m35-action-form"]],inputs:{isReadOnly:"isReadOnly",actionType:"actionType",trnAuthRef:"trnAuthRef",stateTypeRef:"stateTypeRef"},outputs:{transitionEmitter:"transitionEmitter"},features:[a.xb],decls:3,vars:3,consts:[[4,"ngIf"],["class","bg-light border rounded p-2 mb-2 mt-0",4,"ngIf"],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","main"],["ngbPanelHeader",""],["ngbPanelContent",""],["id","other",4,"ngIf"],["id","comment",4,"ngIf"],[1,"bg-light","border","rounded","p-2","mb-2","mt-0"],[1,"row","d-flex"],[1,"col-md-10"],[1,"col-md-2","nav","justify-content-end"],[1,"nav-item"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-2"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"form-group"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","disabled","name","ngModel","ngModelChange"],[1,"mb-0","form",3,"for"],["class","col-lg-12",4,"ngIf"],[1,"col-lg-4"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange"],[1,"col-lg-12"],["id","other"],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"ngbTooltip","disabled","click"],[1,"fas","fa-plus"],[1,"nav","justify-content-between"],[1,"nav-item","col-lg-11"],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2","mt-3",3,"ngbTooltip","click"],[1,"fas","fa-trash-alt"],["id","comment"],[1,"bg-light","border","rounded","p-2","mb-2","mt-5"],["class","form-group",4,"ngFor","ngForOf"],["class","form-check",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"id","name","ngModel","ngModelChange"],["id","return-comment"]],template:function(e,t){1&e&&(a.Ec(0,ae,9,7,"ng-container",0),a.Ec(1,re,5,1,"ng-container",0),a.Ec(2,he,6,3,"ng-container",0)),2&e&&(a.mc("ngIf",t.isReadOnly?t.hasSelectedDescriptionFields:t.hasDescriptionFields),a.zb(1),a.mc("ngIf",t.isReadOnly?t.hasSelectedNoAdditionalFields:t.noAdditionalFields),a.zb(1),a.mc("ngIf",t.stateTypeRef.isReturn()&&(t.isReadOnly?t.sessionService.isUserExternal():t.sessionService.isUserInternal())))},directives:[E.u,D.a,D.I,D.K,D.J,D.M,E.t,E.r,v.a,v.o,v.r,C.a,O.a,A.a,w.a,D.ab],pipes:[M.d],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]}),e})()},"64a6":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mrSG"),a=i("hnrn"),n=i("Z+Hd");let o=(()=>{class e{constructor(e){e?(this.pId=null==e?void 0:e.id,this.pSwoId=null==e?void 0:e.swoId,this.pWcyId=null==e?void 0:e.wcyId,this.pEwc=null==e?void 0:e.ewc,this.pAunId=null==e?void 0:e.aunId,this.pAseId=null==e?void 0:e.aseId,this.pHomeElAppl=null==e?void 0:e.homeElAppl,this.pNonHElAppl=null==e?void 0:e.nonHElAppl,this.pStatus=null==e.id?n.a.NEW:n.a.NOT_CHANGED):this.pStatus=n.a.NEW}get id(){return this.pId}set id(e){this.pId=e}get swoId(){return this.pSwoId}set swoId(e){this.pSwoId!==e&&this.checkStatus(),this.pSwoId=e}get wcyId(){return this.pWcyId}set wcyId(e){this.pWcyId!==e&&this.checkStatus(),this.pWcyId=e}get ewc(){return this.pEwc}set ewc(e){this.pEwc!==e&&this.checkStatus(),this.pEwc=e}get aunId(){return this.pAunId}set aunId(e){this.pAunId!==e&&this.checkStatus(),this.pAunId=e}get aseId(){return this.pAseId}set aseId(e){this.pAseId!==e&&this.checkStatus(),this.pAseId=e}get homeElAppl(){return this.pHomeElAppl}set homeElAppl(e){this.pHomeElAppl!==e&&this.checkStatus(),this.pHomeElAppl=e}get nonHElAppl(){return this.pNonHElAppl}set nonHElAppl(e){this.pNonHElAppl!==e&&this.checkStatus(),this.pNonHElAppl=e}get status(){return this.pStatus}set status(e){this.pStatus=e}checkStatus(){this.status===n.a.NOT_CHANGED&&(this.status=n.a.CHANGED)}}return e.url="TrnWasteCategories",e.urlAun="TrnWasteCategories/aun",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"pId",void 0),Object(s.b)([Object(a.b)({alias:"swoId"})],e.prototype,"pSwoId",void 0),Object(s.b)([Object(a.b)({alias:"wcyId"})],e.prototype,"pWcyId",void 0),Object(s.b)([Object(a.b)({alias:"ewc"})],e.prototype,"pEwc",void 0),Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"pAunId",void 0),Object(s.b)([Object(a.b)({alias:"aseId"})],e.prototype,"pAseId",void 0),Object(s.b)([Object(a.b)({alias:"homeElAppl"})],e.prototype,"pHomeElAppl",void 0),Object(s.b)([Object(a.b)({alias:"nonHElAppl"})],e.prototype,"pNonHElAppl",void 0),e})()},"6gjo":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("mrSG"),a=i("4uOi"),n=i("C44m"),o=i("4m0f"),r=i("fXoL"),d=i("ZRIf");let c=(()=>{class e{constructor(e){this.crudService=e}loadTcRegById(e){return this.crudService.loadById(o.a,o.a.url,e).toPromise()}getRegisterCodeByApplicationType(e){let t;switch(e){case a.a.MRO_TIRES:t=n.a.MRO_TYRE;break;case a.a.MRO_BA:t=n.a.MRO_BA;break;case a.a.MRO_POLYMER_BAGS:t=n.a.MRO_BAG;break;case a.a.MRO_EEO:t=n.a.MRO_EEO;break;case a.a.MRO_OILS:t=n.a.MRO_OIL;break;case a.a.M35_DO:t=n.a.DO;break;case a.a.M35_RD_TRANSPORT:t=n.a.CT;break;case a.a.M35_RD_TREAT:t=n.a.TW;break;case a.a.M35_DO:t=n.a.DO;break;case a.a.TRADER_BROKER:t=n.a.TB;break;case a.a.MERCURY_FORMATION:t=n.a.DEO;break;case a.a.MERCURY_STORAGE:t=n.a.DTS;break;case a.a.MERCURY_TRANSFORMATION:t=n.a.DTH;break;case a.a.WASTE_END:t=n.a.WP;break;case a.a.BY_PRODUCT:t=n.a.SE}return t}getApplicationTypeByRegId(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=(yield this.loadTcRegById(e)).code;let i;switch(t){case n.a.MRO_TYRE:i=a.a.MRO_TIRES;break;case n.a.MRO_BA:i=a.a.MRO_BA;break;case n.a.MRO_BAG:i=a.a.MRO_POLYMER_BAGS;break;case n.a.MRO_EEO:i=a.a.MRO_EEO;break;case n.a.MRO_OIL:i=a.a.MRO_OILS;break;case n.a.DO:i=a.a.M35_DO;break;case n.a.CT:i=a.a.M35_RD_TRANSPORT;break;case n.a.TW:i=a.a.M35_RD_TREAT;break;case n.a.DEO:i=a.a.MERCURY_FORMATION;break;case n.a.DTS:i=a.a.MERCURY_STORAGE;break;case n.a.DTH:i=a.a.MERCURY_TRANSFORMATION;break;case n.a.T:case n.a.B:case n.a.TB:i=a.a.TRADER_BROKER;break;case n.a.SE:i=a.a.BY_PRODUCT;break;case n.a.KR:i=a.a.COMPLEX_PERMITS}return void 0===i&&(t.includes("OO")||t.includes("IND"))&&(i=a.a.OOP_IND),i}))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(d.a))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"797o":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(e=null,t=null){this.mroFulfillment=e,this.oop=t}}},"7mdj":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.id=null==e?void 0:e.id,this.aunId=null==e?void 0:e.aunId,this.lawInfo=null==e?void 0:e.lawInfo,this.resultInfo=null==e?void 0:e.resultInfo,this.refAunId=null==e?void 0:e.refAunId,this.refAunNumber=null==e?void 0:e.refAunNumber)}}return e.url="TrnWasteEndInfo",e.urlAun="TrnWasteEndInfo/getByAunId",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"aunId",void 0),Object(s.b)([Object(a.b)({alias:"lawInfo"})],e.prototype,"lawInfo",void 0),Object(s.b)([Object(a.b)({alias:"resultInfo"})],e.prototype,"resultInfo",void 0),Object(s.b)([Object(a.b)({alias:"refAunId"})],e.prototype,"refAunId",void 0),Object(s.b)([Object(a.b)({alias:"refAunNumber"})],e.prototype,"refAunNumber",void 0),e})()},AHL5:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o}));var s=i("NBd8");function a(e,t,i){const a=[];return e.forEach((e,n)=>{const o=new s.a({});o.wonId=t,o.ewc=e.ewc,i&&(o.id=i[n]),a.push(o)}),a}function n(e,t){e.forEach(e=>{e.aseId=t})}function o(e,t){e.forEach(e=>{e.aseId=t})}},ANDG:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var s=i("fXoL"),a=i("F7pt"),n=i("0Uwp"),o=i("gkfR"),r=i("CR6u"),d=i("EcjI"),c=i("ra4D"),l=i("+QWa"),h=i("ZRIf"),p=i("3Pt+"),u=i("Bz/w"),m=i("TTlI"),b=i("ofXK"),g=i("1kSV");const f=["form"];function R(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",10),s.ec("click",(function(){return s.wc(e),s.gc().onDeleteRow()})),s.Nb(1,"i",11),s.Rb()}}let S=(()=>{class e{constructor(e){this.crudService=e,this.index=0,this.mode=r.a.NEW,this.isComplex=!1,this.formStatusValidChanged=new s.n,this.wasteTypeChangedEmitter=new s.n,this.deleteRow=new s.n,this.formDefs=[],this.operations=[],this.formValidStatus="INVALID",this.statusSubscriber=null}ngOnInit(){this.loadOperations(),this.loadFormDef(),this.formStatusValidChanged.emit(this.formValidStatus)}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}onDeleteRow(){this.deleteRow.emit(this.index)}wasteTypeChanged(e){this.wasteTypeChangedEmitter.emit(e)}loadOperations(){this.crudService.loadByList(o.a,o.a.urlCodeNotIn,["\u0422\u0440\u0433","\u0411\u0440\u043e"]).subscribe(e=>{this.operations=e})}loadFormDef(){const e=Object(l.a)(),t=n.a.createDefaultDropDownFormItemDef();t.domId="operation_"+e,t.placeHolderText="\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0441 \u043e\u0442\u043f\u0430\u0434\u044a\u043a",t.labelText="",t.dataSource="Public/WasteOperations",t.resultDataType=o.a,t.searchFields=[new c.a("opNameBg","s"),new c.a("opCode","s")],t.filterClause={activityCode:this.isComplex?'in(i("4"),i("5"),i("9"))':'in(i("4"),i("5"))'},t.isRequired=!0,this.formDefs.push(t);const i=a.a.createDefaultTextFormItemDef();i.domId="operation_text_"+e,i.labelText="",i.isRequired=!1,this.formDefs.push(i),this.mode===r.a.READ&&(this.disableNonEmptyFields=!0)}set disableNonEmptyFields(e){Object(d.c)(this.formDefs,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(h.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-waste-operations"]],viewQuery:function(e,t){var i;1&e&&s.Nc(f,!0),2&e&&s.uc(i=s.fc())&&(t.form=i.first)},inputs:{index:"index",model:"model",mode:"mode",isComplex:"isComplex"},outputs:{formStatusValidChanged:"formStatusValidChanged",wasteTypeChangedEmitter:"wasteTypeChangedEmitter",deleteRow:"deleteRow"},decls:11,vars:9,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row","bg-light","border","border-secondary","mb-1"],[1,"col-lg-6"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange","valueEmitter"],[1,"col-lg-5"],[3,"ngModel","formItemDef","name","ngModelChange"],[1,"col-lg-1"],[1,"d-flex","justify-content-end"],["type","button","class","btn btn-sm btn-outline-secondary rounded-circle","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",3,"click",4,"ngIf"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[1,"fas","fa-trash-alt"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"app-fi-select-dropdown",4),s.ec("ngModelChange",(function(e){return t.model.wonId=e}))("valueEmitter",(function(e){return t.wasteTypeChanged(e)})),s.Rb(),s.Rb(),s.Sb(5,"div",5),s.Sb(6,"app-fi-input-text",6),s.ec("ngModelChange",(function(e){return t.model.wonDescr=e})),s.Rb(),s.Rb(),s.Sb(7,"div",7),s.Nb(8,"label"),s.Sb(9,"div",8),s.Ec(10,R,2,0,"button",9),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.zb(4),s.mc("ngModel",t.model.wonId)("formItemDef",t.formDefs[0])("labelFieldName","labelText")("valueFieldName","opId")("name",t.formDefs[0].domName),s.zb(2),s.mc("ngModel",t.model.wonDescr)("formItemDef",t.formDefs[1])("name",t.formDefs[1].domName),s.zb(4),s.mc("ngIf","R"!=t.mode))},directives:[p.D,p.p,p.q,u.a,p.o,p.r,m.a,b.u,g.ab],styles:[""]}),e})()},C44m:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e.R35="R35",e.TB="TB",e.RAWMB="RAWMB",e.MRO="MRO",e.OO="OO",e.IND="IND",e.DEO="DEO",e.DTH="DTH",e.DTS="DTS",e.SE="SE",e.WP="WP",e.DO="DO",e.RD="RD",e.KR="KR",e.T="T",e.B="B",e.TW="TW",e.CT="CT",e.MRO_BA="MRO_BA",e.MRO_EEO="MRO_EEO",e.MRO_OIL="MRO_OIL",e.MRO_TYRE="MRO_TYRE",e.MRO_BAG="MRO_BAG",e}({})},CCL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return Oe}));var s=i("mrSG"),a=i("fXoL"),n=i("d0z0");class o{constructor(e){e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.mroFulfillment=e.mroFulfillment,this.trademarks=e.trademarks,this.selectedCategories=e.selectedCategories,this.proxyAgents=e.proxyAgents,this.distSale=e.distSale,this.regId=e.regId,this.organization=e.organization,this.isAfr=e.isAfr,this.wasteType=e.wasteType)}}var r=i("KQ7d"),d=i("ozDz"),c=i("Hi78"),l=i("yEue"),h=i("CR6u"),p=i("4uOi"),u=i("WCP0"),m=i("pLGQ"),b=i("64a6"),g=i("v7XO"),f=i("R5sY"),R=i("GJdz"),S=i("797o"),I=function(e){return e.BA="MRO_BA",e.EEO="MRO_EEO",e.OILS="MRO_OIL",e.TIRES="MRO_TYRE",e.POLYMER_BAGS="MRO_BAG",e}({}),y=i("aTmD"),T=i("9GxP");class E{constructor(){this.toInsertTrnMroTrademarks=[],this.toDeleteTrnMroTrademarks=[],this.toEditTrnMroTrademarks=[],this.toInsertTrnWasteCategories=[],this.toDeleteTrnWasteCategories=[],this.toEditTrnWasteCategories=[],this.toInsertTrnMroRepresented=[],this.toDeleteTrnMroRepresented=[],this.toEditTrnMroRepresented=[]}hasTrademarksOperations(){return this.toInsertTrnMroTrademarks.length>0||this.toDeleteTrnMroTrademarks.length>0||this.toEditTrnMroTrademarks.length>0}hasCategoriesOperations(){return this.toInsertTrnWasteCategories.length>0||this.toDeleteTrnWasteCategories.length>0||this.toEditTrnWasteCategories.length>0}hasMroRepresentedOperations(){return this.toInsertTrnMroRepresented.length>0||this.toDeleteTrnMroRepresented.length>0||this.toEditTrnMroRepresented.length>0}}var D=i("r3es"),v=i("R5jJ"),C=i("ROb3"),O=i("4m0f"),A=function(e){return e.OCHCM="1",e.IUEEO="8",e.NUBA="3",e.IUMPS="4",e.OILS="5",e.BAGS="6",e.BIO_WASTE="7",e.TIRES="8",e}({}),w=i("sPXw"),M=i("ZRIf"),N=i("sGcX"),x=i("tyNb"),k=i("4XRX"),F=i("3Pt+"),V=i("BXZV"),z=i("1kSV"),_=i("ofXK"),P=i("d+ck"),j=i("QCcn"),L=i("QJFE"),B=i("LlKj"),W=i("Bz/w"),G=i("nI3r"),H=i("RjMn"),U=i("jmsH"),q=i("TTlI"),$=i("/FfF"),K=i("sYmb");const Y=["contactApp"],X=["address"],Q=["form"],Z=["actionList"],J=["errorLoadSwal"];function ee(e,t){if(1&e&&(a.Sb(0,"div",24),a.Sb(1,"h6",25),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",26),a.Nb(5,"i",27),a.Nb(6,"i",28),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(6);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(3),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",29),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const ie=function(e){return{"mb-0":e}};function se(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",31),a.Sb(2,"h6",32),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",33),a.Sb(6,"app-fi-select-dropdown",34),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",35),a.Nb(8,"i",27),a.Nb(9,"i",28),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(6);a.zb(2),a.mc("ngClass",a.qc(11,ie,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress"),""),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefs[6])("externalDataItems",e.addresses)("name",e.formDefs[6].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function ae(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",36,37),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function ne(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",31),a.Sb(2,"h6",32),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",33),a.Sb(5,"app-fi-select-dropdown",38),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",35),a.Nb(7,"i",27),a.Nb(8,"i",28),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(6);a.zb(2),a.mc("ngClass",a.qc(8,ie,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefs[4])("externalDataItems",e.contacts)("name",e.formDefs[4].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function oe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",39,40),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}function re(e,t){if(1&e&&(a.Sb(0,"div",24),a.Sb(1,"h6",25),a.Gc(2),a.Rb(),a.Sb(3,"div"),a.Sb(4,"button",43),a.Nb(5,"i",27),a.Nb(6,"i",28),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.gc(2),t=a.vc(6);a.zb(2),a.Hc(e.categoriesName),a.zb(3),a.mc("hidden",t.isExpanded("categories")),a.zb(1),a.mc("hidden",!t.isExpanded("categories"))}}function de(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-input-checkbox-group",44),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).model.selectedCategories=t})),a.Rb()}if(2&e){const e=a.gc(2);a.mc("source",e.categories)("ngModel",e.model.selectedCategories)("colNum",e.catColNum)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)}}function ce(e,t){1&e&&(a.Sb(0,"ngb-panel",41),a.Ec(1,re,7,3,"ng-template",8),a.Ec(2,de,1,5,"ng-template",42),a.Rb())}function le(e,t){if(1&e&&(a.Sb(0,"div",24),a.Sb(1,"h6",25),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",43),a.Nb(6,"i",27),a.Nb(7,"i",28),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(6);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.mro.eeoCategoryTitle")," "),a.zb(4),a.mc("hidden",e.isExpanded("eeo-category")),a.zb(1),a.mc("hidden",!e.isExpanded("eeo-category"))}}function he(e,t){if(1&e){const e=a.Tb();a.Sb(0,"input",52),a.ec("click",(function(){a.wc(e);const t=a.gc().$implicit;return a.gc(3).onCategoryHouseholdChecked(t)})),a.Rb()}if(2&e){const e=a.gc().$implicit,t=a.gc(3);a.mc("id",e.id+"_h")("disabled","R"===t.mode)("checked",t.isHouseholdChecked(e))}}function pe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"input",52),a.ec("click",(function(){a.wc(e);const t=a.gc().$implicit;return a.gc(3).onCategoryNonHouseholdChecked(t)})),a.Rb()}if(2&e){const e=a.gc().$implicit,t=a.gc(3);a.mc("id",e.id+"_nh")("disabled","R"===t.mode)("checked",t.isNonHouseholdChecked(e))}}function ue(e,t){if(1&e){const e=a.Tb();a.Sb(0,"tr"),a.Sb(1,"td"),a.Sb(2,"div",51),a.Sb(3,"input",52),a.ec("click",(function(){a.wc(e);const i=t.$implicit;return a.gc(3).onCategoryChecked(i)})),a.Rb(),a.Sb(4,"label",53),a.Gc(5),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"td",54),a.Ec(7,he,1,3,"input",55),a.Rb(),a.Sb(8,"td",54),a.Ec(9,pe,1,3,"input",55),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(3);a.zb(3),a.mc("id",e.id)("disabled","R"===i.mode)("checked",e.isSelected),a.zb(1),a.mc("for",e.id),a.zb(1),a.Hc(e.name),a.zb(2),a.mc("ngIf",e.isSelected),a.zb(2),a.mc("ngIf",e.isSelected)}}function me(e,t){if(1&e&&(a.Sb(0,"table",47),a.Sb(1,"thead"),a.Sb(2,"tr",48),a.Sb(3,"th",49),a.Gc(4),a.hc(5,"translate"),a.Rb(),a.Sb(6,"th",49),a.Gc(7,"\u0414\u041e\u041c\u0410\u041a\u0418\u041d\u0421\u0422\u0412\u0410"),a.Rb(),a.Sb(8,"th",49),a.Gc(9,"\u0420\u0410\u0417\u041b\u0418\u0427\u041d\u041e \u041e\u0422 \u0414\u041e\u041c\u0410\u041a\u0418\u041d\u0421\u0422\u0412\u0410"),a.Rb(),a.Rb(),a.Rb(),a.Sb(10,"tbody"),a.Ec(11,ue,10,7,"tr",50),a.Rb(),a.Rb()),2&e){const e=a.gc(2);a.zb(4),a.Ic(" ",a.ic(5,2,"applications.mro.eeoCategoryTitle")," "),a.zb(7),a.mc("ngForOf",e.categories)}}function be(e,t){1&e&&(a.Sb(0,"ngb-panel",45),a.Ec(1,le,8,5,"ng-template",8),a.Ec(2,me,12,4,"ng-template",46),a.Rb())}function ge(e,t){if(1&e&&(a.Sb(0,"div",24),a.Sb(1,"h6",25),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",26),a.Nb(5,"i",27),a.Nb(6,"i",28),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(6);a.zb(2),a.Hc(a.ic(3,3,"applications.mro.dutyWay")),a.zb(3),a.mc("hidden",e.isExpanded("mro-fulfillment")),a.zb(1),a.mc("hidden",!e.isExpanded("mro-fulfillment"))}}function fe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",58),a.Sb(1,"app-mro-fulfillment-form",59,60),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc(2).onFulfillmentValidityChange(t)})),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.zb(1),a.mc("model",e.application.mroFulfillment)("mode",e.mode)("regId",e.application.regId)("type",e.type)("oopOrgModels",e.oops)("ornId",e.application.organization.id)}}function Re(e,t){1&e&&(a.Sb(0,"ngb-panel",56),a.Ec(1,ge,7,5,"ng-template",8),a.Ec(2,fe,3,6,"ng-template",57),a.Rb())}function Se(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",24),a.Sb(1,"h6",25),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",63),a.ec("click",(function(){a.wc(e);const t=a.gc(2),i=a.vc(6);return t.onAddTradeMark(),i.expand("trademarks")})),a.hc(6,"translate"),a.Nb(7,"i",64),a.Rb(),a.Sb(8,"button",26),a.Nb(9,"i",27),a.Nb(10,"i",28),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2),t=a.vc(6);a.zb(2),a.Hc(a.ic(3,5,"applications.mro.trademarksTitle")),a.zb(3),a.nc("ngbTooltip",a.ic(6,7,"buttons.addRow.tooltip")),a.mc("hidden","R"===e.mode),a.zb(4),a.mc("hidden",t.isExpanded("trademarks")),a.zb(1),a.mc("hidden",!t.isExpanded("trademarks"))}}function Ie(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",66),a.Sb(1,"div",67),a.Sb(2,"app-fi-input-text",19),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.tradeMark=i})),a.Rb(),a.Rb(),a.Sb(3,"div",68),a.Sb(4,"button",69),a.ec("click",(function(){a.wc(e);const i=t.$implicit;return a.gc(3).onDeleteTradeMark(i)})),a.Nb(5,"i",70),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(3);a.zb(2),a.mc("ngModel",e.tradeMark)("formItemDef",i.defsGenerator.getDynamicRowTrademarksDef(e.uid,i.mode))("name",e.uid),a.zb(2),a.mc("hidden","R"===i.mode)}}function ye(e,t){if(1&e&&(a.Sb(0,"div",58),a.Ec(1,Ie,6,4,"div",65),a.Rb()),2&e){const e=a.gc(2);a.zb(1),a.mc("ngForOf",e.application.trademarks)}}function Te(e,t){1&e&&(a.Sb(0,"ngb-panel",61),a.Ec(1,Se,11,9,"ng-template",8),a.Ec(2,ye,2,1,"ng-template",62),a.Rb())}function Ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"button",75),a.ec("click",(function(){return a.wc(e),a.gc(2).onAddProxyAgent()})),a.Nb(1,"i",64),a.Rb()}if(2&e){const e=a.gc(2);a.mc("hidden","R"===e.mode)}}function De(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-proxy-agent-form",76),a.ec("deleteRow",(function(){a.wc(e);const i=t.index;return a.gc(2).onDeleteProxyAgent(i)}))("formStatusValidChanged",(function(i){a.wc(e);const s=t.index;return a.gc(2).onProxyAgentValidityChange(i,s)})),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(2);a.mc("model",e)("mode",i.mode)}}function ve(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",18),a.Sb(1,"div",71),a.Sb(2,"app-fi-input-checkbox",72),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.isAfr=t}))("checkClick",(function(t){return a.wc(e),a.gc().removeProxyAgents(t)})),a.Rb(),a.Ec(3,Ee,2,1,"button",73),a.Rb(),a.Sb(4,"div"),a.Ec(5,De,1,2,"app-proxy-agent-form",74),a.Rb(),a.Sb(6,"app-fi-input-checkbox",19),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.distSale=t})),a.Rb(),a.Rb()}if(2&e){const e=a.gc();a.zb(2),a.mc("ngModel",e.application.isAfr)("formItemDef",e.formDefs[3])("name",e.formDefs[3].domName),a.zb(1),a.mc("ngIf",e.application.isAfr),a.zb(2),a.mc("ngForOf",e.application.proxyAgents),a.zb(1),a.mc("ngModel",e.application.distSale)("formItemDef",e.formDefs[2])("name",e.formDefs[2].domName)}}const Ce=function(){return["mailing-address","mro-fulfillment","trademarks","contact-person","organization-address","categories","eeo-category"]};let Oe=(()=>{class e{constructor(e,t,i,s,n){this.defsGenerator=e,this.crudService=t,this.mmSpinnerService=i,this.router=s,this.sessionInfoService=n,this.ERROR="error",this.COLLECTIVE_SYSTEM="2",this.TYPE="type",this.BATTERIES_HEADING="\u0412\u0418\u0414 \u041d\u0410 \u0411\u0410\u0422\u0415\u0420\u0418\u0418\u0422\u0415 \u0418 \u0410\u041a\u0423\u041c\u0423\u041b\u0410\u0422\u041e\u0420\u0418\u0422\u0415, \u041a\u041e\u0418\u0422\u041e \u041b\u0418\u0426\u0415\u0422\u041e \u041f\u0423\u0421\u041a\u0410 \u041d\u0410 \u041f\u0410\u0417\u0410\u0420\u0410",this.OILS_HEADING="\u0412\u0418\u0414\u041e\u0412\u0415 \u041c\u0410\u0421\u041b\u0410 \u041f\u041e \u0421\u041c\u0418\u0421\u042a\u041b\u0410 \u041d\u0410 \xa71, \u0422.7 \u041e\u0422 \u0414\u0420 \u041d\u0410 \u041d\u0410\u0420\u0415\u0414\u0411\u0410\u0422\u0410 \u0417\u0410 \u041e\u0422\u0420\u0410\u0411\u041e\u0422\u0415\u041d\u0418\u0422\u0415 \u041c\u0410\u0421\u041b\u0410 \u0418 \u041e\u0422\u041f\u0410\u0414\u042a\u0427\u041d\u0418\u0422\u0415 \u041d\u0415\u0424\u0422\u041e\u041f\u0420\u041e\u0414\u0423\u041a\u0422\u0418, \u041a\u041e\u0418\u0422\u041e \u041b\u0418\u0426\u0415\u0422\u041e \u041f\u0423\u0421\u041a\u0410 \u041d\u0410 \u041f\u0410\u0417\u0410\u0420\u0410 (\u0412\u0421\u0415\u041a\u0418 \u0412\u0418\u0414 \u0421\u0415 \u0417\u0410\u041f\u0418\u0421\u0412\u0410 \u041d\u0410 \u041e\u0422\u0414\u0415\u041b\u0415\u041d \u0420\u0415\u0414)",this.YES="Y",this.NO="N",this.STATE="state",this.CONTACT_REG_TYPE="R",this.ADDRESS_ORN_TYPE="D",this.categories=[],this.trademarks=[],this.formDefs=[],this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.fulfillmentValidity=!1,this.model={},this.startedCategories=[],this.startedTrademarks=[],this.startedProxyAgents=[],this.contacts=[],this.addresses=[],this.isActionListReady=!1,this.isActionListSuccess=!1,this.formValidStatus="INVALID",this.statusSubscriber=null,this.mode=h.a.READ,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authLoader=new c.a(t),this.authSaver=new l.a(t)}ngOnInit(){this.loadDefs(),this.prepareApplication(),this.loadOOps(),this.handleMode(),this.setRegCode(),this.setWasteType(),this.manageCategories()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(e){var t,i,s,a,n,o,r,d;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(s=e.mode)||void 0===s?void 0:s.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(n=e.type)||void 0===n?void 0:n.firstChange)===(null===(o=e.type)||void 0===o?void 0:o.previousValue)&&(null===(r=e.aunId)||void 0===r?void 0:r.firstChange)===(null===(d=e.aunId)||void 0===d?void 0:d.previousValue)||(this.loadDefs(),this.prepareApplication(),this.loadOOps(),this.handleMode(),this.setRegCode(),this.setWasteType(),this.manageCategories())}handleMode(){switch(this.prepareApplication(),this.mode){case h.a.READ:this.isFormLoading.emit(!0),this.disableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}));break;case h.a.NEW:this.enableFields(),this.prepareApplication(),this.loadAuthBasicData();break;case h.a.EDIT:this.isFormLoading.emit(!0),this.enableFields(),this.prepareApplication(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}))}}onHeadquartersValidityChange(e){this.headquartersValidity="VALID"===e,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity="VALID"===e,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity="VALID"===e,this.setInnerFormsValidity()}onFulfillmentValidityChange(e){this.fulfillmentValidity="VALID"===e,this.setInnerFormsValidity()}onProxyAgentValidityChange(e,t){this.model.proxyAgentsValidity[t]="VALID"===e,this.setInnerFormsValidity()}areProxyAgentsValid(){var e;if(!this.model.proxyAgentsValidity)return!1;for(const t of null===(e=this.model)||void 0===e?void 0:e.proxyAgentsValidity)if(!t)return!1;return!0}setInnerFormsValidity(){this.type===p.a.MRO_POLYMER_BAGS?this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity:this.type===p.a.MRO_OILS||this.type===p.a.MRO_TIRES||this.type===p.a.MRO_BA?this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&this.fulfillmentValidity:this.type===p.a.MRO_EEO&&(this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&this.fulfillmentValidity&&this.areProxyAgentsValid()),this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}loadDefs(){this.formDefs=this.defsGenerator.getDefinitions()}loadCategories(e){e&&this.crudService.loadByParam(n.a,n.a.urlWtePublic,e).subscribe(e=>{this.categories=e,this.categories.sort((e,t)=>{const i=e.name.slice(0,1),s=t.name.slice(0,1);return"a"===e.name.slice(1,2)&&"5"===s||+i>+s?1:-1}),this.categories=this.categories.filter(e=>"5a"!==e.code)})}loadTcRegByCode(e){return this.crudService.loadByFind(O.a,O.a.publicUrl,{code:e}).toPromise()}loadContactsByOrnId(e){this.crudService.loadByParam(r.a,r.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===h.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(d.a,d.a.nonPrimaryAddressesUrl,`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===h.a.EDIT&&this.checkAddress()})}loadOOps(){return Object(s.a)(this,void 0,void 0,(function*(){this.oops=yield this.authLoader.loadOOpOrgs(this.type)}))}redirectOnError(){this.router.navigate([`${C.a.APPLICATIONS}/${C.a.MRO_VIEW}`])}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new r.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(s.a)(this,void 0,void 0,(function*(){if(e){const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new m.a({}),this.addressForm.disableNonEmptyFields=!1}))}onActionListClose(){this.responseAunId&&this.router.navigate([`${C.a.APPLICATIONS}/${C.a.AUTH_READ}`,this.type,this.responseAunId])}onCategoryChecked(e){if(e.isSelected=!e.isSelected,e.isSelected){const t=new b.a;t.homeElAppl=0,t.nonHElAppl=0,t.wcyId=e.id,this.application.selectedCategories.push(t)}else this.application.selectedCategories=this.application.selectedCategories.filter(t=>{if(t.wcyId!==e.id)return t})}onCategoryHouseholdChecked(e){this.application.selectedCategories.forEach(t=>{t.wcyId===e.id&&(t.homeElAppl=1)})}onCategoryNonHouseholdChecked(e){this.application.selectedCategories.forEach(t=>{t.wcyId===e.id&&(t.nonHElAppl=0===t.nonHElAppl?1:0)})}isHouseholdChecked(e){let t=!0;for(const i of this.application.selectedCategories)i.wcyId===e.id&&(t=0!==i.homeElAppl);return t}isNonHouseholdChecked(e){let t=!0;for(const i of this.application.selectedCategories)i.wcyId===e.id&&(t=0!==i.nonHElAppl);return t}onAddTradeMark(){null==this.application.trademarks&&(this.application.trademarks=[]);const e=new g.a({});this.application.trademarks.push(e)}onDeleteTradeMark(e){const t=this.application.trademarks.filter(t=>{if(t!==e)return t});this.application.trademarks=null!=t?t:[]}onAddProxyAgent(e){let t;null==this.application.proxyAgents&&(this.application.proxyAgents=[],this.model.proxyAgentsValidity=[]),t=new f.a(e||{}),this.application.proxyAgents.push(t),this.model.proxyAgentsValidity.push(!1),this.setInnerFormsValidity()}onDeleteProxyAgent(e){this.application.proxyAgents.splice(e,1),this.model.proxyAgentsValidity.splice(e,1),this.application.proxyAgents.length||(this.setInnerFormsValidity(),this.application.isAfr=!1)}removeProxyAgents(e){e?this.onAddProxyAgent():(this.application.proxyAgents=[],this.model.proxyAgentsValidity=[])}setProxyAgentsInvalid(e){this.model.proxyAgentsValidity=Array(e),this.model.proxyAgentsValidity.forEach(e=>{})}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadAuthBasicData(){return Object(s.a)(this,void 0,void 0,(function*(){const e=this.getUserOrganization();this.application.organization=e,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(e.id),this.fillLegalEntityData(e)}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}getUserOrganization(){return this.sessionInfoService.getOrganization()}manageCategories(){this.loadCategories(this.application.wasteType),this.setCategoriesProperties()}disableFields(){this.formDefs.forEach(e=>{e.isDisabled=!0}),this.model.responsibility=!0}enableFields(){this.formDefs.forEach(e=>{e.isDisabled=!1}),this.mode===h.a.NEW&&(this.model.responsibility=!1,this.model.contactPerson=null,this.model.mailingAddress=null),this.mode===h.a.EDIT&&(this.model.responsibility=!0)}prepareApplication(){this.application=new o({}),this.application.contact=new r.a({}),this.application.mailingAddressData=new m.a({}),this.application.legalEntity=new R.a,this.application.distSale=!1,this.application.isAfr=!1,this.application.orgAddressData=new m.a({}),this.application.mroFulfillment=new S.a,this.application.proxyAgents=[],this.application.selectedCategories=[],this.application.trademarks=[],this.application.organization=new u.a({}),this.model.tradeMarksValidity=[],this.model.proxyAgentsValidity=[],this.model.selectedCategories=[],this.mroEditModel=new E}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat?e.bulstat:e.egn,legalEntity:e.name}}fillMroFulfillmentData(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=(yield this.authLoader.loadMroFulfillmentByCode(e.mroFulfillment)).pageContent[0];let i=null;e.mroFulfillment===this.COLLECTIVE_SYSTEM&&e.uonAunId&&(i=yield this.authLoader.loadMroFulfillmentOOpByUonAunId(e.uonAunId)),this.application.mroFulfillment=new S.a(t,i||new v.a)}))}setRegCode(){return Object(s.a)(this,void 0,void 0,(function*(){let e=null;switch(this.type){case p.a.MRO_BA:e=I.BA;break;case p.a.MRO_EEO:e=I.EEO;break;case p.a.MRO_OILS:e=I.OILS;break;case p.a.MRO_POLYMER_BAGS:e=I.POLYMER_BAGS;break;case p.a.MRO_TIRES:e=I.TIRES}e&&(this.application.regId=(yield this.loadTcRegByCode(e)).pageContent[0].id)}))}setWasteType(){switch(this.type){case p.a.MRO_BA:this.application.wasteType=A.NUBA;break;case p.a.MRO_EEO:this.application.wasteType=A.IUEEO;break;case p.a.MRO_OILS:this.application.wasteType=A.OILS;break;case p.a.MRO_POLYMER_BAGS:this.application.wasteType=A.BAGS;break;case p.a.MRO_TIRES:this.application.wasteType=A.TIRES}}setCategoriesProperties(){this.type===p.a.MRO_BA?(this.catColNum=1,this.categoriesName=this.BATTERIES_HEADING):this.type===p.a.MRO_OILS&&(this.catColNum=2,this.categoriesName=this.OILS_HEADING)}checkCategories(e){return Object(s.a)(this,void 0,void 0,(function*(){this.model.selectedCategories=[],this.startedCategories=yield this.authLoader.loadAuthorizationTrnWasteCategoriesByAunId(e.id),this.categories.forEach((e,t)=>{this.startedCategories.forEach(i=>{e.id===i.wcyId&&(e.isSelected=!0,this.model.selectedCategories.push(this.categories[t]))})}),this.type===p.a.MRO_EEO&&(this.application.selectedCategories=Object(D.a)(b.a,this.startedCategories))}))}handleEEO(e){this.model.proxyAgent=!0,e.mroIsAfr===this.YES&&(this.application.isAfr=!0),e.mroIsDistSale===this.YES&&(this.application.distSale=!0)}parseCategories(){this.application.selectedCategories=[],this.model.selectedCategories.forEach(e=>{const t=new b.a({});t.homeElAppl=0,t.nonHElAppl=0,t.wcyId=e.id,this.application.selectedCategories.push(t)})}prepareCategoriesOnEdit(){this.application.selectedCategories.forEach(e=>{let t=!1;for(const i of this.startedCategories)if(e.wcyId===i.wcyId&&(e.id=i.id),e.id===i.id){e.homeElAppl===i.homeElAppl&&e.nonHElAppl===i.nonHElAppl||this.mroEditModel.toEditTrnWasteCategories.push(i),t=!0;break}t||this.mroEditModel.toInsertTrnWasteCategories.push(e)}),this.startedCategories.forEach(e=>{let t=!1;for(const i of this.application.selectedCategories)i.id===e.id&&(t=!0);t||this.mroEditModel.toDeleteTrnWasteCategories.push(e)})}prepareTrademarksOnEdit(){this.application.trademarks.forEach(e=>{let t=!1;for(const i of this.startedTrademarks)if(e.id===i.id){e.tradeMark!==i.tradeMark&&this.mroEditModel.toEditTrnMroTrademarks.push(e),t=!0;break}t||this.mroEditModel.toInsertTrnMroTrademarks.push(e)}),this.startedTrademarks.forEach(e=>{let t=!1;for(const i of this.application.trademarks)if(i.id===e.id){t=!0;break}t||this.mroEditModel.toDeleteTrnMroTrademarks.push(e)})}prepareProxyAgents(){this.application.proxyAgents.forEach(e=>{let t=!1;for(const i of this.startedProxyAgents)if(e.id===i.id){e.equals(i)||this.mroEditModel.toEditTrnMroRepresented.push(e),t=!0;break}t||this.mroEditModel.toInsertTrnMroRepresented.push(e)}),this.startedProxyAgents.forEach(e=>{let t=!1;for(const i of this.application.proxyAgents)if(i.id===e.id){t=!0;break}t||this.mroEditModel.toDeleteTrnMroRepresented.push(e)})}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const t=yield this.authLoader.loadAuthorizationById(e);this.application.id=t.id,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.mode===h.a.EDIT&&this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id),this.type!==p.a.MRO_POLYMER_BAGS&&(this.application.trademarks=(yield this.authLoader.loadAuthorizationTrademarksByAunId(t.id)).pageContent,this.startedTrademarks=Object(D.a)(g.a,this.application.trademarks),this.fillMroFulfillmentData(t)),this.type!==p.a.MRO_BA&&this.type!==p.a.MRO_OILS&&this.type!==p.a.MRO_EEO||this.checkCategories(t),this.type===p.a.MRO_EEO&&(this.handleEEO(t),this.authLoader.loadTrnMroRepreentedsByAunId(e).subscribe(e=>{this.setProxyAgentsInvalid(e.pageContent.length),this.application.proxyAgents=Object(D.a)(f.a,e.pageContent),this.startedProxyAgents=Object(D.a)(f.a,e.pageContent)}))}catch(t){console.error(t),this.errorLoadSwal.fire()}}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){console.log(this.application),this.type!==p.a.MRO_BA&&this.type!==p.a.MRO_OILS||this.parseCategories(),this.prepareSaveActions(),this.actionList.open();const e=yield this.authSaver.saveMROAuthorization(this.application,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareSaveActions(){this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",y.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",y.a.WORKING,!1)),this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),this.application.trademarks.length>0&&this.type!==p.a.MRO_POLYMER_BAGS&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0442\u044a\u0440\u0433\u043e\u0432\u0441\u043a\u0438 \u043c\u0430\u0440\u043a\u0438",y.a.WORKING,!1)),this.application.selectedCategories.length>0&&(this.type===p.a.MRO_BA||this.type===p.a.MRO_EEO||this.type===p.a.MRO_OILS)&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438",y.a.WORKING,!1)),this.application.proxyAgents.length>0&&this.type===p.a.MRO_EEO&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0437\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0447\u0443\u0436\u0434\u0435\u0441\u0442\u0440\u0430\u043d\u043d\u043e \u0434\u0440\u0443\u0436\u0435\u0441\u0442\u0432\u043e \u0432 \u0441\u0442\u0440\u0430\u043d\u0430\u0442\u0430",y.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}onEdit(){return Object(s.a)(this,void 0,void 0,(function*(){this.prepareData(),console.log(this.application),this.prepareEditActions(),this.actionList.open();const e=yield this.authSaver.editMroAuthorization(this.application,this.actions,this.mroEditModel);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareData(){this.type!==p.a.MRO_BA&&this.type!==p.a.MRO_OILS||this.parseCategories(),this.type!==p.a.MRO_BA&&this.type!==p.a.MRO_EEO&&this.type!==p.a.MRO_OILS||this.prepareCategoriesOnEdit(),this.type!==p.a.MRO_POLYMER_BAGS&&this.prepareTrademarksOnEdit(),this.application.proxyAgents.length>0&&this.type===p.a.MRO_EEO&&this.prepareProxyAgents()}prepareEditActions(){this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",y.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",y.a.WORKING,!1)),this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),this.mroEditModel.hasTrademarksOperations()&&this.type!==p.a.MRO_POLYMER_BAGS&&this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0442\u044a\u0440\u0433\u043e\u0432\u0441\u043a\u0438 \u043c\u0430\u0440\u043a\u0438",y.a.WORKING,!1)),!this.mroEditModel.hasCategoriesOperations()||this.type!==p.a.MRO_BA&&this.type!==p.a.MRO_EEO&&this.type!==p.a.MRO_OILS||this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438",y.a.WORKING,!1)),this.mroEditModel.hasMroRepresentedOperations()&&this.type===p.a.MRO_EEO&&this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0437\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0447\u0443\u0436\u0434\u0435\u0441\u0442\u0440\u0430\u043d\u043d\u043e \u0434\u0440\u0443\u0436\u0435\u0441\u0442\u0432\u043e \u0432 \u0441\u0442\u0440\u0430\u043d\u0430\u0442\u0430",y.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(w.a),a.Mb(M.a),a.Mb(N.a),a.Mb(x.c),a.Mb(k.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-mro-form"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(Y,!0),a.Nc(X,!0),a.Nc(Q,!0),a.Nc(Z,!0),a.Nc(J,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.errorLoadSwal=i.first))},inputs:{mode:"mode",type:"type",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",isSigned:"isSigned",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:27,vars:18,consts:[[1,"container-fluid","p-3"],["novalidate","",1,"was-validated"],["form","ngForm"],[3,"model","mode"],["basicInfo",""],["id","accordion",3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],["id","categories",4,"ngIf"],["id","eeo-category",4,"ngIf"],["id","mro-fulfillment",4,"ngIf"],["id","trademarks",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",3,"allowOutsideClick","showConfirmButton","icon","confirm"],["errorLoadSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""],["id","categories"],["id","categories-body","ngbPanelContent",""],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-2"],["labelFieldName","name",3,"source","ngModel","colNum","formItemDef","name","ngModelChange"],["id","eeo-category"],["id","eeo-category-body","ngbPanelContent",""],[1,"table","table-hover"],[1,"alert","alert-primary"],["scope","col"],[4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","disabled","checked","click"],[3,"for"],[1,"text-center"],["type","checkbox","class","form-check-input",3,"id","disabled","checked","click",4,"ngIf"],["id","mro-fulfillment"],["id","body","ngbPanelContent",""],[1,"card-body","py-0"],[3,"model","mode","regId","type","oopOrgModels","ornId","formStatusValidChanged"],["fulfillment",""],["id","trademarks"],["id","trademarks-body","ngbPanelContent",""],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"hidden","ngbTooltip","click"],[1,"fas","fa-plus"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-11"],[1,"col-lg-1"],["type","button d-flex justify-content-end","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","rounded-circle",2,"height","42px",3,"hidden","click"],[1,"fas","fa-trash-alt"],[1,"d-flex","justify-content-between"],[3,"ngModel","formItemDef","name","ngModelChange","checkClick"],["style","height: 30px;","class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a","container","body","placement","left",3,"hidden","click",4,"ngIf"],[3,"model","mode","deleteRow","formStatusValidChanged",4,"ngFor","ngForOf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",2,"height","30px",3,"hidden","click"],[3,"model","mode","deleteRow","formStatusValidChanged"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Nb(3,"app-basic-app-info",3,4),a.Sb(5,"ngb-accordion",5,6),a.Sb(7,"ngb-panel",7),a.Ec(8,ee,7,5,"ng-template",8),a.Ec(9,te,1,3,"ng-template",9),a.Rb(),a.Sb(10,"ngb-panel",10),a.Ec(11,se,10,13,"ng-template",8),a.Ec(12,ae,2,3,"ng-template",9),a.Rb(),a.Sb(13,"ngb-panel",11),a.Ec(14,ne,9,10,"ng-template",8),a.Ec(15,oe,2,2,"ng-template",12),a.Rb(),a.Ec(16,ce,3,0,"ngb-panel",13),a.Ec(17,be,3,0,"ngb-panel",14),a.Ec(18,Re,3,0,"ngb-panel",15),a.Ec(19,Te,3,0,"ngb-panel",16),a.Rb(),a.Ec(20,ve,7,8,"div",17),a.Nb(21,"div",18),a.Sb(22,"app-fi-input-checkbox",19),a.ec("ngModelChange",(function(e){return t.model.responsibility=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(23,"app-action-tasks-list",20,21),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(25,"swal",22,23),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb()),2&e&&(a.zb(3),a.mc("model",t.application.legalEntity)("mode",t.mode),a.zb(2),a.mc("destroyOnHide",!1)("activeIds",a.pc(17,Ce)),a.zb(11),a.mc("ngIf","ba"===t.type||"oils"===t.type),a.zb(1),a.mc("ngIf","eeo"===t.type),a.zb(1),a.mc("ngIf","polymer-bags"!==t.type),a.zb(1),a.mc("ngIf","polymer-bags"!==t.type),a.zb(1),a.mc("ngIf","eeo"===t.type),a.zb(2),a.mc("ngModel",t.model.responsibility)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),a.zb(1),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("allowOutsideClick",!1)("showConfirmButton",!0)("icon",t.ERROR))},directives:[F.D,F.p,F.q,V.a,z.a,z.I,z.K,z.J,_.u,P.a,F.o,F.r,j.a,L.a,z.M,B.a,_.r,W.a,G.a,H.a,_.t,U.a,z.ab,q.a,$.a],pipes:[K.d],styles:["[_nghost-%COMP%]     .accordion>div>#contact-person-header.card-header, [_nghost-%COMP%]     .accordion>div>#mailing-address-header.card-header{padding-bottom:0}[_nghost-%COMP%]     #accordion>div>div.card-header{padding:.5rem}[_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:1rem}"]}),e})()},CwXB:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mrSG"),a=i("hnrn"),n=i("Z+Hd");let o=(()=>{class e{constructor(e){e?(this.pId=e.id,this.pAseId=e.aseId,this.pDepotClass=e.depotClass,this.description=e.description,this.pStatus=null==e.id?n.a.NEW:n.a.NOT_CHANGED):this.pStatus=n.a.NEW}get id(){return this.pId}set id(e){this.pId=e}get aseId(){return this.pAseId}set aseId(e){this.pAseId!==e&&this.checkStatus(),this.pAseId=e}get depotClass(){return this.pDepotClass}set depotClass(e){this.pDepotClass!==e&&this.checkStatus(),this.pDepotClass=e}get description(){return this.pDescription}set description(e){this.pDescription!==e&&this.checkStatus(),this.pDescription=e}get status(){return this.pStatus}set status(e){this.pStatus=e}checkStatus(){this.status===n.a.NOT_CHANGED&&(this.status=n.a.CHANGED)}}return e.url="TrnStageDetails",e.deleteUrl="TrnStageDetails/deleteMultiple",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"pId",void 0),Object(s.b)([Object(a.b)({alias:"aseId"})],e.prototype,"pAseId",void 0),Object(s.b)([Object(a.b)({alias:"depotClass"})],e.prototype,"pDepotClass",void 0),Object(s.b)([Object(a.b)({alias:"description"})],e.prototype,"pDescription",void 0),e})()},GJdz:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(e=null,t=null){this.eik=e,this.legalEntity=t}}},Hi78:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var s=i("mrSG"),a=i("pVVs"),n=i("KQ7d"),o=i("WCP0"),r=i("ozDz"),d=i("pLGQ"),c=i("SkKo"),l=i("v7XO"),h=i("64a6"),p=i("R5sY"),u=i("R5jJ"),m=i("s71n"),b=i("P8sM"),g=i("4uOi"),f=i("NBd8"),R=i("z7lM"),S=i("Xh5w");let I=(()=>{class e{constructor(e){e&&(this.merc_stage_info=e.merc_stage_info,this.stage=e.stage)}}return e.url="TrnAuthorizations/getAuthStagesAndMercStageInfo",e})();var y=i("01dd"),T=i("xgdq"),E=i("7mdj");class D{constructor(e){this.crudService=e,this.ORN_ADDRESS_TYPE="D",this.WvPopularDistrictTeritory="Public/WvPopularDistrictTeritory",this.MRO_FULFILLMENT="MRO_FULFILLMENT"}loadAuthorizationById(e){return this.crudService.loadById(a.a,a.a.url,e).toPromise()}loadContactByCotId(e){return this.crudService.loadById(n.a,n.a.url,e).toPromise()}loadMailingAddressByAddrId(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.crudService.loadById(r.a,r.a.url,e).toPromise(),i=yield(yield this.loadRealAddressProperties(t)).pageContent[0];return this.createRealAddress(t,i)}))}createRealAddress(e,t){const i=new d.a({});return i.trnOrnAddrId=e.id,i.address=e.address,i.email=e.email,i.webpage=e.webpage,i.popEknm=t.popEknm,i.distEknm=t.distEknm,i.terCode=t.terCode,i}loadOrganizationByOrnIn(e){return this.crudService.loadById(o.a,o.a.url,e).toPromise()}loadOrganizationAddressByOrnId(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=t?r.a.byOrnUrl:r.a.nonPrimaryAddressesUrl,s=t?`${e}/R`:`${e}`,a=(yield this.crudService.loadByParam(r.a,i,s).toPromise())[0],n=(yield this.loadRealAddressProperties(a)).pageContent[0];return this.createRealAddress(a,n)}))}loadMroFulfillmentByCode(e){return this.crudService.loadByFind(c.a,c.a.urlPublic,{code:e,domain:this.MRO_FULFILLMENT}).toPromise()}loadMroFulfillmentOOpByUonAunId(e){return Object(s.a)(this,void 0,void 0,(function*(){return(yield this.crudService.loadByParam(u.a,a.a.urlPublicOOp,e).toPromise())[0]}))}loadAuthorizationTrademarksByAunId(e){return this.crudService.loadByParamInPaging(l.a,l.a.urlPublic,e,0,100).toPromise()}loadTrnMroRepreentedsByAunId(e){return this.crudService.loadByParamInPaging(p.a,p.a.urlPublic,e,0,100)}loadAuthorizationTrnWasteCategoriesByAunId(e){return this.crudService.loadByParam(h.a,h.a.urlAun,e).toPromise()}loadRealAddressProperties(e){return Object(s.a)(this,void 0,void 0,(function*(){return this.crudService.loadByFind(Object,this.WvPopularDistrictTeritory,{popEknm:e.eknm}).toPromise()}))}loadTransportationsVehicles(e){return this.crudService.loadByParamInPaging(m.a,m.a.urlAun,e,0,100).toPromise()}loadTransportationMethods(e){return this.crudService.loadByParamInPaging(b.a,b.a.urlAun,e,0,100).toPromise()}loadOOpOrgs(e){const t=this.getOrgType(e);return this.crudService.loadByParam(u.a,a.a.urlSubType,t).toPromise()}loadTraderCodes(e){return this.crudService.loadSingleObject(R.a,f.a.urlTrader,e).toPromise()}loadBrokerCodes(e){return this.crudService.loadSingleObject(R.a,f.a.urlBroker,e).toPromise()}loadAttachedDocumentMetaData(e){return this.crudService.loadByParamsInPaging(S.a,S.a.urlAunId,`aunId=${e}&offset=0&size=50`).toPromise()}loadPaymentDocument(e){return this.crudService.loadFile(S.a.url,e).toPromise()}loadStagesWithMercInfo(e){return this.crudService.loadByParam(I,I.url,e).toPromise()}loadStages(e){return this.crudService.loadByParamsInPaging(y.a,y.a.urlAun,`aunId=${e}&offset=0&size=100`).toPromise()}loadWasteEndCodes(e){return this.crudService.loadSingleObject(Object,y.a.urlWasteEndCodes,e).toPromise()}loadWasteEndInfo(e){return this.crudService.loadSingleObject(E.a,E.a.urlAun,e).toPromise()}loadTrnAunSe(e){return this.crudService.loadByFind(T.a,T.a.url,{aunId:e}).toPromise()}getOrgType(e){let t=null;switch(e){case g.a.MRO_BA:t="OO_3";break;case g.a.MRO_EEO:t="OO_2";break;case g.a.MRO_POLYMER_BAGS:t="OO_0";break;case g.a.MRO_TIRES:t="OO_5";break;case g.a.MRO_OILS:t="OO_4"}return t}}},KQW5:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("+QWa");class a{constructor(e=null,t=null,i=null){this.label=e,this.file=t,this.signFile=i,this.uid=Object(s.a)()}}},LENt:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e.METALS="metals",e.NOT_METALS="not-metals",e.ALL="all",e.RD_TREAT="rd-treat",e}({})},MVXN:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.id=e.id,this.aseId=e.aseId,this.mainActivity=e.mainActivity,this.instDesc=e.instDesc,this.treatingName=e.treatingName,this.treatingCode=e.treatingCode)}}return e.url="TrnMercStageInfo",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"aseId"})],e.prototype,"aseId",void 0),Object(s.b)([Object(a.b)({alias:"mainActivity"})],e.prototype,"mainActivity",void 0),Object(s.b)([Object(a.b)({alias:"instDesc"})],e.prototype,"instDesc",void 0),Object(s.b)([Object(a.b)({alias:"treatingName"})],e.prototype,"treatingName",void 0),Object(s.b)([Object(a.b)({alias:"treatingCode"})],e.prototype,"treatingCode",void 0),e})()},MVYl:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var s=i("fXoL"),a=i("SkKo"),n=i("CR6u"),o=i("EcjI"),r=i("9zSO"),d=i("YVnI"),c=i("8Lb4"),l=i("z9XM"),h=i("ZRIf"),p=i("3Pt+"),u=i("Bz/w"),m=i("TTlI"),b=i("ofXK"),g=i("RjMn");const f=["form"],R=["distCmp"],S=["popCmp"];function I(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",2),s.Sb(1,"div",3),s.Sb(2,"app-fi-select-dropdown",6),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.depot=t})),s.Rb(),s.Rb(),s.Sb(3,"div",8),s.Sb(4,"app-fi-input-checkbox-group",11),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.depotClasses=t})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(2),s.mc("ngModel",e.model.depot)("formItemDef",e.formDefinitions[10])("labelFieldName","description")("valueFieldName","code")("name",e.formDefinitions[10].domName),s.zb(2),s.mc("inline",!0)("source",e.depotClasses)("ngModel",e.model.depotClasses)("formItemDef",e.formDefinitions[11])("name",e.formDefinitions[11].domName)("labelFieldName","description")("valueFieldName","code")}}let y=(()=>{class e{constructor(e,t){this.formDefsGenerator=e,this.crudService=t,this.DEPOT_CLASS="DEPOT_CLASS",this.isDepot=!1,this.mode=n.a.NEW,this.formStatusValidChanged=new s.n,this.formEmitter=new s.n,this.contactEmitter=new s.n,this.districtEmitter=new s.n,this.formValidStatus="INVALID",this.statusSubscriber=null,this.formDefinitions=[],this.depotClasses=[],this.teritories=[]}set riosvCode(e){this.rios=e,this.setFormDefinitions()}set notInRiosvCode(e){this.notInRios=e,this.setFormDefinitions()}ngOnInit(){this.setFormDefinitions(),this.loadDepotClasses()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))}),this.checkRios(),this.checkIsDepot()}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}loadDepotClasses(){this.crudService.loadByParam(a.a,a.a.publicUrlDomain,this.DEPOT_CLASS).subscribe(e=>{this.depotClasses=e})}setFormDefinitions(){this.formDefinitions=this.formDefsGenerator.getLocationFormDefinitions(),null!=this.model.stageId&&(this.formDefinitions[2].filterClause={distEknm:this.model.distEknm});const e=this.getClause();e?(this.formDefinitions[1].isWhere=!0,this.formDefinitions[1].filterClause={where:e},this.distCmp&&(this.distCmp.formItemDef.isWhere=!0,this.distCmp.formItemDef.filterClause={where:e},this.distCmp.pageModel=new c.a,this.distCmp.ngOnInit())):this.distCmp&&(this.distCmp.formItemDef.isWhere=!1,this.distCmp.formItemDef.filterClause=null,this.distCmp.pageModel=new c.a,this.distCmp.ngOnInit()),this.mode===n.a.READ&&(this.disableNonEmptyFields=!0)}clearFilters(){this.form.reset()}getFormValue(){this.formEmitter.emit(this.form.value)}onContactChange(e){this.contactEmitter.emit(e)}onDistrictChange(e){if(null==e)return this.model.popEknm=null,this.districtEmitter.emit(null),this.formDefinitions[2].filterClause={distEknm:""},void this.popCmp.ngOnInit();this.crudService.loadByFind(r.a,r.a.publicUrl,{popEknm:this.model.popEknm}).subscribe(t=>{null!=t.pageContent[0]&&t.pageContent[0].distEknm!==e.distEknm&&(this.model.popEknm=null)}),this.districtEmitter.emit(e.riosCode),this.formDefinitions[2].filterClause={distEknm:e.distEknm},this.popCmp.ngOnInit()}set changeIsDepotClassEnabled(e){this.isDepot=e,this.model.isDepot=this.isDepot}set disableNonEmptyFields(e){Object(o.c)(this.formDefinitions,e)}getClause(){let e;return this.rios&&this.notInRios&&this.notInRios.length>0?e=`and(eq(v("riosCode"),s("${this.rios}")),not(in(v("riosCode"),${this.getNotInClause()})))`:this.rios?e=`eq(v("riosCode"),s("${this.rios}"))`:this.notInRios&&this.notInRios.length>0&&(e=`not(in(v("riosCode"),${this.getNotInClause()}))`),e}getNotInClause(){let e="";return this.notInRios.forEach(t=>{e.length>0&&(e+=","),e+=`s("${t}")`}),e}checkRios(){null==this.rios&&null!=this.model.distEknm&&this.crudService.loadById(d.a,d.a.url,this.model.distEknm).subscribe(e=>{this.districtEmitter.emit(e.riosCode)})}checkIsDepot(){null!=this.model&&(this.isDepot=this.model.isDepot)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(l.a),s.Mb(h.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-location-form"]],viewQuery:function(e,t){var i;1&e&&(s.Nc(f,!0),s.Nc(R,!0),s.Nc(S,!0)),2&e&&(s.uc(i=s.fc())&&(t.form=i.first),s.uc(i=s.fc())&&(t.distCmp=i.first),s.uc(i=s.fc())&&(t.popCmp=i.first))},inputs:{riosvCode:"riosvCode",notInRiosvCode:"notInRiosvCode",isDepot:"isDepot",mode:"mode",model:"model"},outputs:{formStatusValidChanged:"formStatusValidChanged",formEmitter:"formEmitter",contactEmitter:"contactEmitter",districtEmitter:"districtEmitter"},decls:27,vars:32,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row"],[1,"col-md-4"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange","valueEmitter"],["distCmp",""],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange"],["popCmp",""],[1,"col-md-8"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","row",4,"ngIf"],[3,"inline","source","ngModel","formItemDef","name","labelFieldName","valueFieldName","ngModelChange"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"app-fi-select-dropdown",4,5),s.ec("ngModelChange",(function(e){return t.model.distEknm=e}))("valueEmitter",(function(e){return t.onDistrictChange(e)})),s.Rb(),s.Rb(),s.Sb(6,"div",3),s.Sb(7,"app-fi-select-dropdown",6,7),s.ec("ngModelChange",(function(e){return t.model.popEknm=e})),s.Rb(),s.Rb(),s.Rb(),s.Sb(9,"div",2),s.Sb(10,"div",8),s.Sb(11,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.address=e})),s.Rb(),s.Rb(),s.Sb(12,"div",3),s.Sb(13,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.upi=e})),s.Rb(),s.Rb(),s.Rb(),s.Sb(14,"div",2),s.Sb(15,"div",3),s.Sb(16,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.plan=e})),s.Rb(),s.Rb(),s.Sb(17,"div",3),s.Sb(18,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.neighbourhood=e})),s.Rb(),s.Rb(),s.Sb(19,"div",3),s.Sb(20,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.town=e})),s.Rb(),s.Rb(),s.Rb(),s.Sb(21,"div",2),s.Sb(22,"div",8),s.Sb(23,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.other=e})),s.Rb(),s.Rb(),s.Sb(24,"div",3),s.Sb(25,"app-fi-input-text",9),s.ec("ngModelChange",(function(e){return t.model.area=e})),s.Rb(),s.Rb(),s.Rb(),s.Ec(26,I,5,12,"div",10),s.Rb()),2&e&&(s.zb(4),s.mc("ngModel",t.model.distEknm)("formItemDef",t.formDefinitions[1])("labelFieldName","nameBg")("valueFieldName","distEknm")("name",t.formDefinitions[1].domName),s.zb(3),s.mc("ngModel",t.model.popEknm)("formItemDef",t.formDefinitions[2])("labelFieldName","popName")("valueFieldName","popEknm")("name",t.formDefinitions[2].domName),s.zb(4),s.mc("ngModel",t.model.address)("formItemDef",t.formDefinitions[3])("name",t.formDefinitions[3].domName),s.zb(2),s.mc("ngModel",t.model.upi)("formItemDef",t.formDefinitions[4])("name",t.formDefinitions[4].domName),s.zb(3),s.mc("ngModel",t.model.plan)("formItemDef",t.formDefinitions[5])("name",t.formDefinitions[5].domName),s.zb(2),s.mc("ngModel",t.model.neighbourhood)("formItemDef",t.formDefinitions[6])("name",t.formDefinitions[6].domName),s.zb(2),s.mc("ngModel",t.model.town)("formItemDef",t.formDefinitions[7])("name",t.formDefinitions[7].domName),s.zb(3),s.mc("ngModel",t.model.other)("formItemDef",t.formDefinitions[8])("name",t.formDefinitions[8].domName),s.zb(2),s.mc("ngModel",t.model.area)("formItemDef",t.formDefinitions[9])("name",t.formDefinitions[9].domName),s.zb(1),s.mc("ngIf",t.isDepot))},directives:[p.D,p.p,p.q,u.a,p.o,p.r,m.a,b.u,g.a],styles:[""]}),e})()},MxKE:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("fXoL"),a=i("3Pt+"),n=i("F7pt"),o=i("ofXK"),r=i("sYmb");function d(e,t){if(1&e&&(s.Sb(0,"label",7),s.Gc(1),s.hc(2,"translate"),s.Rb()),2&e){const e=s.gc();s.mc("for",e.formItemDef.domId),s.zb(1),s.Hc(s.ic(2,2,e.formItemDef.labelText))}}const c=function(e){return{"form-check-inline":e}},l=function(e){return{"form-check-label":e}};function h(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",8),s.Sb(1,"input",9),s.ec("change",(function(){s.wc(e);const i=t.$implicit;return s.gc().onSelectItem(i)})),s.Rb(),s.Sb(2,"label",10),s.Gc(3),s.hc(4,"translate"),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,i=t.index,a=s.gc();s.mc("ngClass",s.qc(12,c,a.inline)),s.zb(1),s.nc("value",e[a.valueFieldName]),s.mc("id",a.formItemDef.domId+"-"+i)("name",a.formItemDef.domName+"-"+i)("required",a.formItemDef.isRequired)("disabled",a.formItemDef.isDisabled)("checked",e.isSelected),s.zb(1),s.mc("ngClass",s.qc(14,l,a.inline))("for",a.formItemDef.domId+"-"+i),s.zb(1),s.Ic(" ",s.ic(4,10,e[a.labelFieldName])," ")}}function p(e,t){1&e&&(s.Sb(0,"div",11),s.Gc(1," \u0417\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e "),s.Rb())}const u=function(e,t){return{"col-lg-6":e,"col-lg-12":t}};let m=(()=>{class e{constructor(){this.showError=!1,this.valueEmitter=new s.n,this.inline=!1,this.formItemDef=null,this.colNum=1,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new n.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}set source(e){this.src=e,null!=e&&e.length>0&&2===this.colNum&&this.divideSource()}get source(){return this.src}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){return this.formItemDef.isRequired&&!this.value?(this.showError=!0,{required:!0}):(this.showError=!1,null)}onSelectItem(e){this.value=e;const t=e[this.valueFieldName];this.source.forEach(e=>{e.isSelected=e[this.valueFieldName]===t}),this.valueEmitter.emit(this.value)}divideSource(){const e=this.getMid(this.src.length);this.secondSource=this.src.slice(e+1),this.src=this.src.slice(0,e)}getMid(e){const t=Math.floor(e/2);return e%2!=0?t:t-1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-radio-group"]],inputs:{inline:"inline",labelFieldName:"labelFieldName",valueFieldName:"valueFieldName",formItemDef:"formItemDef",value:"value",source:"source",colNum:"colNum"},outputs:{valueEmitter:"valueEmitter"},features:[s.yb([{provide:a.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:a.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:9,vars:10,consts:[[1,"form-group"],["class","mr-2",3,"for",4,"ngIf"],[1,"row"],[3,"ngClass"],["class","form-check mr-4",3,"ngClass",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",4,"ngIf"],["id","input-text-1-Help",1,"form-text","text-muted"],[1,"mr-2",3,"for"],[1,"form-check","mr-4",3,"ngClass"],["type","radio",1,"form-check-input",3,"value","id","name","required","disabled","checked","change"],[3,"ngClass","for"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Ec(1,d,3,4,"label",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Ec(4,h,5,16,"div",4),s.Rb(),s.Rb(),s.Ec(5,p,2,0,"div",5),s.Sb(6,"small",6),s.Gc(7),s.hc(8,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("ngIf",t.formItemDef.labelText),s.zb(2),s.mc("ngClass",s.rc(7,u,2===t.colNum,2!==t.colNum)),s.zb(1),s.mc("ngForOf",t.source),s.zb(1),s.mc("ngIf",t.showError),s.zb(2),s.Ic(" ",s.ic(8,5,t.formItemDef.helpText)," "))},directives:[o.u,o.r,o.t],pipes:[r.d],styles:[""]}),e})()},N0QU:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("01dd"),a=i("CwXB"),n=i("Z+Hd");class o{constructor(e){e?(this.pStageId=e.stageId,this.pTerCode=e.terCode,this.pDistEknm=e.distEknm,this.pPopEknm=e.popEknm,this.pAddress=e.address,this.pUpi=e.upi,this.pPlan=e.plan,this.pNeighbourhood=e.neighbourhood,this.pTown=e.town,this.pOther=e.other,this.pArea=e.area,this.pIsDepot=e.isDepot,this.pDepot=e.depot,this.permitStage=e.permitStage,this.pDepotClasses=null==e.depotClasses?[]:e.depotClasses,this.pStatus=null==e.stageId?n.a.NEW:n.a.NOT_CHANGED,this.pStageData=e.stageData,this.pStageDetails=e.stageDetails):(this.pDepotClasses=[],this.pStageDetails=[],this.pStatus=n.a.NEW)}get stageId(){return this.pStageId}set stageId(e){this.pStageId=e}get terCode(){return this.pTerCode}set terCode(e){this.pTerCode=e}get distEknm(){return this.pDistEknm}set distEknm(e){this.pDistEknm=e}get popEknm(){return this.pPopEknm}set popEknm(e){this.pPopEknm=e,this.pPopEknm!==e&&this.checkStatus()}get address(){return this.pAddress}set address(e){this.pAddress!==e&&this.checkStatus(),this.pAddress=e}get upi(){return this.pUpi}set upi(e){this.pUpi!==e&&this.checkStatus(),this.pUpi=e}get plan(){return this.pPlan}set plan(e){this.pPlan!==e&&this.checkStatus(),this.pPlan=e}get neighbourhood(){return this.pNeighbourhood}set neighbourhood(e){this.pNeighbourhood!==e&&this.checkStatus(),this.pNeighbourhood=e}get town(){return this.pTown}set town(e){this.pTown!==e&&this.checkStatus(),this.pTown=e}get other(){return this.pOther}set other(e){this.pOther!==e&&this.checkStatus(),this.pOther=e}get area(){return this.pArea}set area(e){this.pArea!==e&&this.checkStatus(),this.pArea=e}get isDepot(){return this.pIsDepot}set isDepot(e){this.pIsDepot=e}get depot(){return this.pDepot}set depot(e){this.pDepot=e}get depotClasses(){return this.pDepotClasses}set depotClasses(e){this.pDepotClasses=e,this.checkStatus()}get permitStage(){return this.pPermitStage}set permitStage(e){this.pPermitStage=e}get stageData(){return null==this.pStageData&&(this.pStageData=new s.a),this.pStageData.address=this.address,this.pStageData.popEknm=this.popEknm,this.pStageData.isDepot=this.isDepot?"Y":"N",this.pStageData.depotType=this.depot,this.pStageData.permitStage=this.permitStage,this.pStageData.descr=JSON.stringify({stage_upi:this.upi,stage_plan_num:this.plan,stage_neighborhood:this.neighbourhood,stage_district:this.town,stage_desc_not_reg:this.other,stage_area:this.area}),this.pStageData}get stageDetails(){return null==this.depotClasses||0===this.depotClasses.length?(this.pStageDetails&&this.pStageDetails.map(e=>{e.status=n.a.DELETED}),this.pStageDetails):null==this.pStageDetails||0===this.pStageDetails.length?(this.depotClasses&&(this.stageDetails=[],this.depotClasses.forEach(e=>{this.pStageDetails.push(new a.a({aseId:this.stageData.id,depotClass:e}))})),this.pStageDetails):(this.depotClasses.forEach(e=>{null==this.pStageDetails.find(t=>t.depotClass===e)&&this.pStageDetails.push(new a.a({aseId:this.stageData.id,depotClass:e}))}),this.pStageDetails.forEach(e=>{null==this.depotClasses.find(t=>t===e.depotClass)&&(e.status=n.a.DELETED)}),this.pStageDetails)}set stageDetails(e){this.pStageDetails=e}get status(){return this.pStatus}set status(e){this.pStatus=e}checkStatus(){this.status===n.a.NOT_CHANGED&&(this.status=n.a.CHANGED)}}},Ol97:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("N0QU"),a=i("Z+Hd"),n=i("4uOi");class o{constructor(e){this.ADD_WASTE_TC_WTE_ID=1,e?(this.stageDataView=null==e.stageDataView?new s.a:e.stageDataView,this.wasteTypes=e.wasteTypes,this.baEwc=e.baEwc,this.baData=e.baData,this.eeoEwc=e.eeoEwc,this.eeoData=e.eeoData,this.ochcmTypes=e.ochcmTypes,this.addWaste=e.addWaste,this.trWasteType=e.trWasteType,this.locationValidity=e.locationValidity,this.typeValidity=e.typeValidity,this.ochcmValidity=e.ochcmValidity,this.addWasteValidity=e.addWasteValidity,this.typesTransportValidity=e.typesTransportValidity,this.pStatus=null==e.stageDataView?a.a.NEW:a.a.NOT_CHANGED):(this.stageDataView=new s.a,this.pStatus=a.a.NEW)}get stageDataView(){return this.pStageDataView}set stageDataView(e){this.pStageDataView=e}get wasteTypes(){return this.pWasteTypes}set wasteTypes(e){this.pWasteTypes=e}get baEwc(){return this.pBaEwc}set baEwc(e){this.pBaEwc=e}get baData(){return this.pBaData}set baData(e){this.pBaData=e}get eeoEwc(){return this.pEeoEwc}set eeoEwc(e){this.pEeoEwc=e}get eeoData(){return this.pEeoData}set eeoData(e){this.pEeoData=e}get ochcmTypes(){return this.pOchcmTypes}set ochcmTypes(e){this.pOchcmTypes=e}get addWaste(){return this.pAddWaste}set addWaste(e){this.pAddWaste=e}get trWasteType(){return this.pTrWasteType}set trWasteType(e){this.pTrWasteType=e}get locationValidity(){return this.pLocationValidity}set locationValidity(e){this.pLocationValidity=e}get typeValidity(){return this.pTypeValidity}set typeValidity(e){this.pTypeValidity=e}get ochcmValidity(){return this.pOchcmValidity}set ochcmValidity(e){this.pOchcmValidity=e}get addWasteValidity(){return this.pAddWasteValidity}set addWasteValidity(e){this.pAddWasteValidity=e}get typesTransportValidity(){return this.pTypesTransportValidity}set typesTransportValidity(e){this.pTypesTransportValidity=e}get status(){return this.pStatus}set status(e){this.pStatus=e}getAllTrnStageWasteOperations(e){var t,i,s,a;let o=[];return e===n.a.M35_DO||e===n.a.M35_RD_TREAT?((null===(t=this.wasteTypes)||void 0===t?void 0:t.length)>0&&this.wasteTypes.forEach(e=>{o=o.concat(e.operations)}),(null===(i=this.ochcmTypes)||void 0===i?void 0:i.length)>0&&this.ochcmTypes.forEach(e=>{o=o.concat(e.operations)}),(null===(s=this.addWaste)||void 0===s?void 0:s.length)>0&&(this.addWaste.forEach(e=>{e.operations.forEach(e=>{e.tcWteId=this.ADD_WASTE_TC_WTE_ID})}),this.addWaste.forEach(e=>{o=o.concat(e.operations)}))):(null===(a=this.trWasteType)||void 0===a?void 0:a.length)>0&&this.trWasteType.forEach(e=>{e.operations.forEach(e=>{e.wonId=2}),o=o.concat(e.operations)}),o}getAllTrnWasteCategories(){let e=[];return this.eeoData&&(e=e.concat(this.eeoData)),this.baData&&(e=e.concat(this.baData)),e}getEditTrnStageWasteOperations(e){var t,i,s,o;let r=[];return e===n.a.M35_DO||e===n.a.M35_RD_TREAT?((null===(t=this.wasteTypes)||void 0===t?void 0:t.length)>0&&this.wasteTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(i=this.ochcmTypes)||void 0===i?void 0:i.length)>0&&this.ochcmTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(s=this.addWaste)||void 0===s?void 0:s.length)>0&&(this.addWaste.forEach(e=>{e.operations.forEach(e=>{e.tcWteId=this.ADD_WASTE_TC_WTE_ID})}),this.addWaste.forEach(e=>{r=r.concat(e.operations)}))):(null===(o=this.trWasteType)||void 0===o?void 0:o.length)>0&&this.trWasteType.forEach(e=>{e.operations.forEach(e=>{e.wonId=2}),r=r.concat(e.operations)}),r=r.filter(e=>e.status===a.a.CHANGED),r}getInsetTrnStageWasteOperations(e){var t,i,s,o;let r=[];return e===n.a.M35_DO||e===n.a.M35_RD_TREAT?((null===(t=this.wasteTypes)||void 0===t?void 0:t.length)>0&&this.wasteTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(i=this.ochcmTypes)||void 0===i?void 0:i.length)>0&&this.ochcmTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(s=this.addWaste)||void 0===s?void 0:s.length)>0&&(this.addWaste.forEach(e=>{e.operations.forEach(e=>{e.tcWteId=this.ADD_WASTE_TC_WTE_ID})}),this.addWaste.forEach(e=>{r=r.concat(e.operations)}))):(null===(o=this.trWasteType)||void 0===o?void 0:o.length)>0&&this.trWasteType.forEach(e=>{e.operations.forEach(e=>{e.wonId=2}),r=r.concat(e.operations)}),r=r.filter(e=>e.status===a.a.NEW),r}getDeleteTrnStageWasteOperations(e){var t,i,s,o;let r=[];return e===n.a.M35_DO||e===n.a.M35_RD_TREAT?((null===(t=this.wasteTypes)||void 0===t?void 0:t.length)>0&&this.wasteTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(i=this.ochcmTypes)||void 0===i?void 0:i.length)>0&&this.ochcmTypes.forEach(e=>{r=r.concat(e.operations)}),(null===(s=this.addWaste)||void 0===s?void 0:s.length)>0&&this.addWaste.forEach(e=>{r=r.concat(e.operations)})):(null===(o=this.trWasteType)||void 0===o?void 0:o.length)>0&&this.trWasteType.forEach(e=>{r=r.concat(e.operations)}),r=r.filter(e=>e.status===a.a.DELETED),r}getEditTrnWasteCategories(){let e=[];return this.eeoData&&(e=e.concat(this.eeoData)),this.baData&&(e=e.concat(this.baData)),e=e.filter(e=>e.status===a.a.CHANGED),e}getDeleteTrnWasteCategories(){let e=[];return this.eeoData&&(e=e.concat(this.eeoData)),this.baData&&(e=e.concat(this.baData)),e=e.filter(e=>e.status===a.a.DELETED),e}getInsertTrnWasteCategories(){let e=[];return this.eeoData&&(e=e.concat(this.eeoData)),this.baData&&(e=e.concat(this.baData)),e=e.filter(e=>e.status===a.a.NEW),e}getInsertStageDetails(){var e;return null===(e=this.stageDataView)||void 0===e?void 0:e.stageDetails.filter(e=>{if(e.status===a.a.NEW)return e})}getDeleteStageDetails(){var e;return null===(e=this.stageDataView)||void 0===e?void 0:e.stageDetails.filter(e=>{if(e.status===a.a.DELETED)return e})}isEdittable(e){const t=this.getEditTrnStageWasteOperations(e),i=this.getInsetTrnStageWasteOperations(e),s=this.getDeleteTrnStageWasteOperations(e);return t.length>0||i.length>0||s.length>0||this.status===a.a.CHANGED}}},P8sM:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.id=e.id,this.description=e.description,this.transportMethod=e.transportMethod,this.aunId=e.aunId)}equals(e){return this.description===e.description&&this.transportMethod===e.transportMethod}}return e.url="TrnAunTransportationMethod",e.urlAun="TrnAunTransportationMethod/aun",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"description"})],e.prototype,"description",void 0),Object(s.b)([Object(a.b)({alias:"transportMethod"})],e.prototype,"transportMethod",void 0),Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"aunId",void 0),e})()},PKP1:function(e,t,i){"use strict";i.d(t,"a",(function(){return ue}));var s=i("mrSG"),a=i("fXoL"),n=i("CR6u"),o=i("yEue"),r=i("Hi78"),d=i("KQ7d"),c=i("ozDz"),l=i("pLGQ"),h=i("GJdz"),p=i("WCP0"),u=i("YjFG"),m=i("r3es"),b=i("gkfR"),g=i("NBd8"),f=i("7mdj");class R{constructor(e){this.regCode="WP",e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.organization=e.organization,this.wasteCodes=Object(m.a)(u.a,e.wasteCodes),this.lawInfo=e.lawInfo,this.resultInfo=e.resultInfo,this.wasteOperation=e.wasteOperation,this.doc35=e.doc35,this.trnStageWasteOperationsTraderCodes=e.trnStageWasteOperationsTraderCodes,this.toDeleteWasteCodes=[],this.toInsertWasteCodes=[],this.aseId=e.aseId,this.trnWasteEndInfoId=e.trnWasteEndInfoId)}initialize(){this.contact=new d.a({}),this.mailingAddressData=new l.a({}),this.legalEntity=new h.a,this.organization=new p.a({}),this.orgAddressData=new l.a({}),this.wasteCodes=[],this.wasteOperation=new b.a({}),this.trnStageWasteOperationsTraderCodes=[]}getTrnStageWasteOperationsForInsert(){const e=[];return this.wasteCodes.forEach(t=>{const i=new g.a({wonId:this.wasteOperation.opId,ewc:t.ewc});e.push(i)}),e}getWasteEndInfoModel(){return new f.a({id:this.trnWasteEndInfoId,aunId:this.id,lawInfo:this.lawInfo,resultInfo:this.resultInfo,refAunId:+this.doc35,refAunNumber:"-"})}parseWasteEndInfoModel(e){this.lawInfo=e.lawInfo,this.resultInfo=e.resultInfo,this.doc35=e.refAunId.toString(),this.trnWasteEndInfoId=e.id}}var S=i("4m0f"),I=i("9GxP"),y=i("aTmD"),T=i("ROb3"),E=i("pVVs"),D=i("AHL5"),v=i("sGcX"),C=i("ZRIf"),O=i("z9XM"),A=i("4XRX"),w=i("tyNb"),M=i("3Pt+"),N=i("BXZV"),x=i("1kSV"),k=i("d+ck"),F=i("QCcn"),V=i("QJFE"),z=i("LlKj"),_=i("ofXK"),P=i("Bz/w"),j=i("nI3r"),L=i("TTlI"),B=i("Pe2L"),W=i("sYmb");const G=["contactApp"],H=["address"],U=["form"],q=["actionList"],$=["noActiveM35AuthsSwal"];function K(e,t){if(1&e&&(a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",28),a.Nb(5,"i",29),a.Nb(6,"i",30),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(3),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function Y(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",31),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const X=function(e){return{"mb-0":e}};function Q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",32),a.Sb(1,"div",33),a.Sb(2,"h6",34),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",35),a.Sb(6,"app-fi-select-dropdown",36),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",37),a.Nb(8,"i",29),a.Nb(9,"i",30),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.mc("ngClass",a.qc(11,X,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress"),""),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefs[7])("externalDataItems",e.addresses)("name",e.formDefs[7].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function Z(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",38,39),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function J(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",32),a.Sb(1,"div",33),a.Sb(2,"h6",34),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",35),a.Sb(5,"app-fi-select-dropdown",40),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",37),a.Nb(7,"i",29),a.Nb(8,"i",30),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.mc("ngClass",a.qc(8,X,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefs[6])("externalDataItems",e.contacts)("name",e.formDefs[6].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",41,42),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}function te(e,t){if(1&e&&(a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",28),a.Nb(5,"i",29),a.Nb(6,"i",30),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Hc(a.ic(3,3,"applications.wasteEnd.act")),a.zb(3),a.mc("hidden",e.isExpanded("act")),a.zb(1),a.mc("hidden",!e.isExpanded("act"))}}function ie(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-input-text",19),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.lawInfo=t})),a.Rb()}if(2&e){const e=a.gc();a.mc("ngModel",e.application.lawInfo)("formItemDef",e.formDefs[0])("name",e.formDefs[0].domName)}}function se(e,t){if(1&e&&(a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",28),a.Nb(5,"i",29),a.Nb(6,"i",30),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Hc(a.ic(3,3,"applications.wasteEnd.doc35")),a.zb(3),a.mc("hidden",e.isExpanded("doc-35")),a.zb(1),a.mc("hidden",!e.isExpanded("doc-35"))}}function ae(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-select-dropdown",43),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.doc35=t})),a.Rb()}if(2&e){const e=a.gc();a.mc("ngModel",e.application.doc35)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)("externalDataItems",e.activeM35Auths)}}function ne(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",44),a.ec("click",(function(){a.wc(e);const t=a.gc(),i=a.vc(5);return t.onAddWasteType(),i.expand("waste-code")})),a.hc(6,"translate"),a.Nb(7,"i",45),a.Rb(),a.Sb(8,"button",28),a.Nb(9,"i",29),a.Nb(10,"i",30),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.Ic(" ",a.ic(3,5,"applications.wasteEnd.wasteType")," "),a.zb(3),a.nc("ngbTooltip",a.ic(6,7,"buttons.addRow.tooltip")),a.mc("hidden","R"===e.mode),a.zb(4),a.mc("hidden",t.isExpanded("waste-code")),a.zb(1),a.mc("hidden",!t.isExpanded("waste-code"))}}function oe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",48),a.Sb(2,"div",49),a.Sb(3,"app-fi-select-dropdown",50),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.ewc=i})),a.Rb(),a.Rb(),a.Nb(4,"div",51),a.Sb(5,"div",52),a.Nb(6,"label"),a.Sb(7,"div",53),a.Sb(8,"button",54),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(2).onDeleteWasteType(i)})),a.Nb(9,"i",55),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(2);a.zb(3),a.mc("ngModel",e.ewc)("formItemDef",s.getCodeDef(i))("name",e.uid)}}function re(e,t){if(1&e&&(a.Sb(0,"div",46),a.Ec(1,oe,10,3,"div",47),a.Rb()),2&e){const e=a.gc();a.zb(1),a.mc("ngForOf",e.application.wasteCodes)}}function de(e,t){if(1&e&&(a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",28),a.Nb(5,"i",29),a.Nb(6,"i",30),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.activity")," "),a.zb(3),a.mc("hidden",e.isExpanded("waste-operation")),a.zb(1),a.mc("hidden",!e.isExpanded("waste-operation"))}}function ce(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",56),a.Sb(1,"div",49),a.Sb(2,"app-fi-select-dropdown",57),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.wasteOperation.opId=t})),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc();a.zb(2),a.mc("ngModel",e.application.wasteOperation.opId)("formItemDef",e.formDefs[5])("name",e.formDefs[5].domName)}}function le(e,t){if(1&e&&(a.Sb(0,"div",26),a.Sb(1,"h6",27),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",28),a.Nb(5,"i",29),a.Nb(6,"i",30),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.recivedMaterial")," "),a.zb(3),a.mc("hidden",e.isExpanded("recived-material")),a.zb(1),a.mc("hidden",!e.isExpanded("recived-material"))}}function he(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-input-long-text",19),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.resultInfo=t})),a.Rb()}if(2&e){const e=a.gc();a.mc("ngModel",e.application.resultInfo)("formItemDef",e.formDefs[2])("name",e.formDefs[2].domName)}}const pe=function(){return["organization-address","mailing-address","contact-person","act","doc-35","waste-type","activity","recived-material","waste-code","waste-operation"]};let ue=(()=>{class e{constructor(e,t,i,s,d){this.mmSpinnerService=e,this.crudService=t,this.formItemsGenerator=i,this.sessionInfoService=s,this.router=d,this.CONTACT_REG_TYPE="R",this.ADDRESS_ORN_TYPE="D",this.ERROR="error",this.formDefs=[],this.model={},this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.formValidStatus="INVALID",this.statusSubscriber=null,this.contacts=[],this.addresses=[],this.isActionListReady=!1,this.isActionListSuccess=!1,this.mode=n.a.READ,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authSaver=new o.a(t),this.authLoader=new r.a(t)}ngOnInit(){this.loadDefinitions(),this.prepareApplication(),this.handleMode(!0),this.type&&this.setRegId()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(e){var t,i,s,a,n,o,r,d;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(s=e.mode)||void 0===s?void 0:s.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(n=e.type)||void 0===n?void 0:n.firstChange)===(null===(o=e.type)||void 0===o?void 0:o.previousValue)&&(null===(r=e.aunId)||void 0===r?void 0:r.firstChange)===(null===(d=e.aunId)||void 0===d?void 0:d.previousValue)||(this.loadDefinitions(),this.prepareApplication(),this.handleMode(),this.type&&this.setRegId())}handleMode(e){switch(e&&this.loadActiveM35Auth(),this.mode){case n.a.READ:this.disableFields(),this.aunId&&(this.isFormLoading.emit(!0),this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.isFormLoading.emit(!1),this.mmSpinnerService.hideMainModalSpinner()}));break;case n.a.NEW:this.enableFields(),this.loadAuthBasicData();break;case n.a.EDIT:this.enableFields(),this.aunId&&(this.isFormLoading.emit(!0),this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.isFormLoading.emit(!1),this.mmSpinnerService.hideMainModalSpinner()}))}}loadTcRegByCode(e){return this.crudService.loadByFind(S.a,S.a.publicUrl,{code:e}).toPromise()}loadDefinitions(){this.formDefs=this.formItemsGenerator.getWasteEndDefinitions()}loadContactsByOrnId(e){this.crudService.loadByParam(d.a,d.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===n.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(c.a,c.a.nonPrimaryAddressesUrl,`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===n.a.EDIT&&this.checkAddress()})}loadActiveM35Auth(){const e=this.sessionInfoService.getOrganization().id;this.crudService.loadByParam(E.a,E.a.urlActiveM35Auths,e).subscribe(e=>{this.activeM35Auths=e,this.checkActiveAuths()})}onHeadquartersValidityChange(e){this.headquartersValidity="VALID"===e,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity="VALID"===e,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity="VALID"===e,this.setInnerFormsValidity()}setInnerFormsValidity(){this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity,this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}onAddWasteType(){null==this.application.wasteCodes&&(this.application.wasteCodes=[]),this.application.wasteCodes.push(new u.a({}))}onDeleteWasteType(e){null!=this.application.wasteCodes&&this.application.wasteCodes.splice(e,1)}getCodeDef(e){return this.formItemsGenerator.getWasteCodeDef(e)}onActionListClose(){this.responseAunId&&this.router.navigate([`${T.a.APPLICATIONS}/${T.a.AUTH_READ}`,this.type,this.responseAunId])}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new d.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(s.a)(this,void 0,void 0,(function*(){if(e){const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new l.a({}),this.addressForm.disableNonEmptyFields=!1}))}redirectOnError(){this.router.navigate([`${T.a.APPLICATIONS}`])}checkActiveAuths(){0===this.activeM35Auths.length&&this.noActiveM35AuthsSwal.fire()}getRegisterId(){return this.loadTcRegByCode("WP")}setRegId(){return Object(s.a)(this,void 0,void 0,(function*(){const e=(yield this.getRegisterId()).pageContent[0];this.application.regId=null==e?void 0:e.id}))}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadAuthBasicData(){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.getUserOrganization();this.application.organization=e,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(e.id),this.fillLegalEntityData(e)}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat?e.bulstat:e.egn,legalEntity:e.name}}getUserOrganization(){return Object(s.a)(this,void 0,void 0,(function*(){return this.sessionInfoService.getOrganization()}))}prepareApplication(){this.application=new R({}),this.application.initialize()}disableFields(){this.formDefs.forEach(e=>{e.isDisabled=!0}),this.model.responsibility=!0,this.model.declare1=!0}enableFields(){this.formDefs.forEach(e=>{e.isDisabled=!1}),this.mode===n.a.NEW&&(this.model.responsibility=!1,this.model.contactPerson=null,this.model.mailingAddress=null),this.mode===n.a.EDIT&&(this.model.responsibility=!0,this.model.declare1=!0)}parseWasteCodes(){this.application.trnStageWasteOperationsTraderCodes=Object(D.a)(this.application.wasteCodes,this.application.wasteOperation.opId)}prepareWasteCodes(){var e;null===(e=this.startedWasteCodes)||void 0===e||e.forEach(e=>{let t=!1;for(const i of this.application.trnStageWasteOperationsTraderCodes)if(e.ewc===i.ewc&&e.wonId===i.wonId){t=!0;break}t||this.application.toDeleteWasteCodes.push(e)}),this.application.trnStageWasteOperationsTraderCodes.forEach(e=>{let t=!1;if(this.startedWasteCodes)for(const i of this.startedWasteCodes)if(i.ewc===e.ewc&&i.wonId===e.wonId){t=!0;break}t||this.application.toInsertWasteCodes.push(e)})}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const t=yield this.authLoader.loadAuthorizationById(e);this.application.id=t.id,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.mode===n.a.EDIT&&this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id);const i=yield this.authLoader.loadWasteEndInfo(this.application.id);this.application.parseWasteEndInfoModel(i);const s=yield this.authLoader.loadWasteEndCodes(this.application.id);this.application.wasteCodes=Object(m.a)(u.a,s.ewcs),this.application.wasteOperation=new b.a(s.wasteOperation),this.application.aseId=s.aseId,this.startedWasteCodes=Object(D.a)(this.application.wasteCodes,this.application.wasteOperation.opId,s.trnSwoIds)}catch(t){console.error(t)}}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){this.prepareSaveActions(),this.actionList.open();const e=yield this.authSaver.saveWasteEndAuthorization(this.application,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareSaveActions(){var e;return Object(s.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",y.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",y.a.WORKING,!1)),this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),(null===(e=this.application.getTrnStageWasteOperationsForInsert())||void 0===e?void 0:e.length)>0&&this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0438 \u043a\u043e\u0434\u043e\u0432\u0435",y.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}))}onEdit(){return Object(s.a)(this,void 0,void 0,(function*(){this.parseWasteCodes(),this.prepareWasteCodes(),this.application.regId=(yield this.loadTcRegByCode(this.application.regCode)).pageContent[0].id,console.log(this.application),this.prepareEditActions(),this.actionList.open(),this.authSaver.editWasteEndAuth(this.application,this.actions).then(e=>{this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0})}))}prepareEditActions(){var e,t;return Object(s.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",y.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new I.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",y.a.WORKING,!1)),this.actions.push(new I.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),this.actions.push(new I.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0434\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",y.a.WORKING,!1)),((null===(e=this.application.toInsertWasteCodes)||void 0===e?void 0:e.length)>0||(null===(t=this.application.toDeleteWasteCodes)||void 0===t?void 0:t.length)>0)&&this.actions.push(new I.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0438 \u043a\u043e\u0434\u043e\u0432\u0435",y.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}))}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(v.a),a.Mb(C.a),a.Mb(O.a),a.Mb(A.a),a.Mb(w.c))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-waste-end"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(G,!0),a.Nc(H,!0),a.Nc(U,!0),a.Nc(q,!0),a.Nc($,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.noActiveM35AuthsSwal=i.first))},inputs:{mode:"mode",type:"type",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:39,vars:16,consts:[[1,"container-fluid","p-3"],["novalidate","",1,"was-validated"],["form","ngForm"],[3,"model"],["id","accordion",3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],["id","act"],["id","body","ngbPanelContent",""],["id","doc-35"],["id","waste-code"],["id","waste-operation"],["id","recived-material"],[1,"mt-4"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",3,"showConfirmButton","icon","confirm"],["errorLoadSwal",""],["title","\u041f\u043e\u043f\u044a\u043b\u0432\u0430\u043d\u0435\u0442\u043e \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0435 \u0437\u0430 \u041a\u0440\u0430\u0439 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u043a\u0430 \u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u044a\u043f\u043d\u043e","icon","error","text","\u0417\u0430 \u0434\u0430 \u043f\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430 \u041a\u0440\u0430\u0439 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u043a\u0430, \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u0442\u0430 \u0412\u0438 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0438\u043c\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e \u0447\u043b. 35",3,"allowOutsideClick","animation","confirm"],["noActiveM35AuthsSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""],["labelFieldName","id","valueFieldName","id",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange"],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"hidden","ngbTooltip","click"],[1,"fas","fa-plus"],[1,"card-body","py-0"],[4,"ngFor","ngForOf"],[1,"row","bg-light","border","border-secondary","mb-1"],[1,"col-lg-9"],["labelFieldName","label","valueFieldName","ewc",3,"ngModel","formItemDef","name","ngModelChange"],[1,"col-lg-2"],[1,"col-lg-1"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[1,"fas","fa-trash-alt"],[1,"row"],["labelFieldName","label","valueFieldName","opId",3,"ngModel","formItemDef","name","ngModelChange"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Nb(3,"app-basic-app-info",3),a.Sb(4,"ngb-accordion",4,5),a.Sb(6,"ngb-panel",6),a.Ec(7,K,7,5,"ng-template",7),a.Ec(8,Y,1,3,"ng-template",8),a.Rb(),a.Sb(9,"ngb-panel",9),a.Ec(10,Q,10,13,"ng-template",7),a.Ec(11,Z,2,3,"ng-template",8),a.Rb(),a.Sb(12,"ngb-panel",10),a.Ec(13,J,9,10,"ng-template",7),a.Ec(14,ee,2,2,"ng-template",11),a.Rb(),a.Sb(15,"ngb-panel",12),a.Ec(16,te,7,5,"ng-template",7),a.Ec(17,ie,1,3,"ng-template",13),a.Rb(),a.Sb(18,"ngb-panel",14),a.Ec(19,se,7,5,"ng-template",7),a.Ec(20,ae,1,4,"ng-template",8),a.Rb(),a.Sb(21,"ngb-panel",15),a.Ec(22,ne,11,9,"ng-template",7),a.Ec(23,re,2,1,"ng-template",8),a.Rb(),a.Sb(24,"ngb-panel",16),a.Ec(25,de,7,5,"ng-template",7),a.Ec(26,ce,3,3,"ng-template",8),a.Rb(),a.Sb(27,"ngb-panel",17),a.Ec(28,le,7,5,"ng-template",7),a.Ec(29,he,1,3,"ng-template",8),a.Rb(),a.Rb(),a.Nb(30,"div",18),a.Sb(31,"app-fi-input-checkbox",19),a.ec("ngModelChange",(function(e){return t.model.declare1=e})),a.Rb(),a.Sb(32,"app-fi-input-checkbox",19),a.ec("ngModelChange",(function(e){return t.model.responsibility=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(33,"app-action-tasks-list",20,21),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(35,"swal",22,23),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb(),a.Sb(37,"swal",24,25),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb()),2&e&&(a.zb(3),a.mc("model",null==t.application?null:t.application.legalEntity),a.zb(1),a.mc("destroyOnHide",!1)("activeIds",a.pc(15,pe)),a.zb(27),a.mc("ngModel",t.model.declare1)("formItemDef",t.formDefs[3])("name",t.formDefs[3].domName),a.zb(1),a.mc("ngModel",t.model.responsibility)("formItemDef",t.formDefs[4])("name",t.formDefs[4].domName),a.zb(1),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("showConfirmButton",!0)("icon",t.ERROR),a.zb(2),a.mc("allowOutsideClick",!1)("animation",!1))},directives:[M.D,M.p,M.q,N.a,x.a,x.I,x.K,x.J,k.a,M.o,M.r,F.a,V.a,x.M,z.a,_.r,P.a,j.a,L.a,x.ab,_.t,B.a],pipes:[W.d],styles:["[_nghost-%COMP%]     #accordion>div>div.card-header{padding:.5rem}[_nghost-%COMP%]     #accordion>div>#contact-person-header.card-header{padding-bottom:0}[_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:.5rem}"]}),e})()},PPGS:function(e,t,i){"use strict";i.d(t,"a",(function(){return Re}));var s=i("fXoL"),a=i("4uOi"),n=i("SkKo"),o=i("MVYl"),r=i("lJxs"),d=i("d0z0"),c=i("CR6u"),l=i("jVzX"),h=i("Ol97"),p=i("64a6"),u=i("Yru1"),m=i("Z+Hd"),b=i("LENt"),g=i("2W/F"),f=i("PSD3"),R=i.n(f),S=i("lB+K"),I=i("ZRIf"),y=i("1kSV"),T=i("ofXK"),E=i("s2qR"),D=i("sYmb");function v(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",13),s.ec("click",(function(){return s.wc(e),s.gc(3).onDeleteStage()})),s.Nb(1,"i",14),s.Rb()}}function C(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2),s.Rb(),s.Sb(3,"div"),s.Ec(4,v,2,0,"button",9),s.Sb(5,"button",10),s.Nb(6,"i",11),s.Nb(7,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){const e=s.gc(2),t=s.vc(1);s.zb(2),s.Ic("\u041f\u041b\u041e\u0429\u0410\u0414\u041a\u0410 \u2116 ",e.model.stageDataView.permitStage,""),s.zb(2),s.mc("ngIf","R"!=e.mode),s.zb(2),s.mc("hidden",t.isExpanded("stage")),s.zb(1),s.mc("hidden",!t.isExpanded("stage"))}}function O(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2,"\u041c\u0415\u0421\u0422\u041e\u041d\u0410\u0425\u041e\u0416\u0414\u0415\u041d\u0418\u0415"),s.Rb(),s.Sb(3,"div"),s.Sb(4,"button",10),s.Nb(5,"i",11),s.Nb(6,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc();const e=s.vc(1);s.zb(5),s.mc("hidden",e.isExpanded("location")),s.zb(1),s.mc("hidden",!e.isExpanded("location"))}}function A(e,t){if(1&e){const e=s.Tb();s.Sb(0,"app-location-form",22),s.ec("formStatusValidChanged",(function(t){return s.wc(e),s.gc(3).onLocationValidityChange(t)}))("districtEmitter",(function(t){return s.wc(e),s.gc(3).onDistrictChange(t)})),s.Rb()}if(2&e){const e=s.gc(3);s.mc("mode",e.mode)("model",e.model.stageDataView)("isDepot",null!=e.model.stageDataView&&e.model.stageDataView.isDepot)("riosvCode",e.riosvCode)("notInRiosvCode",e.notInRiosvCode)}}function w(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",24),s.ec("click",(function(){s.wc(e),s.gc(2);const t=s.vc(1);return s.gc(2).onAddType(),t.expand("type")})),s.hc(1,"translate"),s.Nb(2,"i",25),s.Rb()}2&e&&s.nc("ngbTooltip",s.ic(1,1,"buttons.addRow.tooltip"))}function M(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2," \u0412\u0418\u0414\u042a\u0422 (\u041a\u041e\u0414\u042a\u0422 \u0418 \u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u0415\u0422\u041e), \u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e\u0422\u041e, \u041f\u0420\u041e\u0418\u0417\u0425\u041e\u0414\u042a\u0422 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418\u0422\u0415 \u0418 \u0414\u0415\u0419\u041d\u041e\u0421\u0422\u0418\u0422\u0415 \u041f\u041e \u0422\u0420\u0415\u0422\u0418\u0420\u0410\u041d\u0415, \u0417\u0410 \u041a\u041e\u0418\u0422\u041e \u0421\u0415 \u041a\u0410\u041d\u0414\u0418\u0414\u0410\u0422\u0421\u0422\u0412\u0410 "),s.Rb(),s.Sb(3,"div"),s.Ec(4,w,3,3,"button",23),s.Sb(5,"button",10),s.Nb(6,"i",11),s.Nb(7,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc();const e=s.vc(1),t=s.gc(2);s.zb(4),s.mc("ngIf","R"!=t.mode),s.zb(2),s.mc("hidden",e.isExpanded("type")),s.zb(1),s.mc("hidden",!e.isExpanded("type"))}}function N(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-waste-group",29),s.ec("deleteRow",(function(t){return s.wc(e),s.gc(5).onDeleteType(t)}))("wasteTypeChangedEmitter",(function(t){return s.wc(e),s.gc(5).checkIfDepotClassShouldBeVisible(t)}))("wasteCodeChangedEmitter",(function(t){return s.wc(e),s.gc(5).checkIfBAorEEO(t)}))("formStatusValidChanged",(function(t){s.wc(e);const i=s.gc().index;return s.gc(4).onValidityType(t,i)})),s.Rb(),s.Nb(2,"hr",30),s.Rb()}if(2&e){const e=s.gc(),t=e.$implicit,i=e.index,a=s.gc(4);s.zb(1),s.mc("model",t)("mode",a.mode)("type",a.wasteGroupType)("index",i)("showDeleteBtn",a.showOpDeleteBtn)("isComplex","complex-permits"==a.type)}}function x(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,N,3,6,"div",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function k(e,t){if(1&e&&(s.Ec(0,x,2,1,"div",26),s.Sb(1,"div"),s.Sb(2,"h6",27),s.Gc(3,"\u0417\u0410\u0411\u0415\u041b\u0415\u0416\u041a\u0418:"),s.Rb(),s.Sb(4,"ol"),s.Sb(5,"li"),s.Gc(6," \u0412 \u043f\u043e\u043b\u0435\u0442\u043e \u041a\u041e\u0414 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u041a\u0410 \u0441\u0435 \u043f\u043e\u043f\u044a\u043b\u0432\u0430 \u043a\u043e\u0434 \u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u041d\u0430\u0440\u0435\u0434\u0431\u0430 \u043f\u043e \u0447\u043b. 3 \u043e\u0442 \u0417\u0423\u041e \u0437\u0430 \u043a\u043b\u0430\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435; "),s.Rb(),s.Sb(7,"li"),s.Gc(8," \u0412 \u043f\u043e\u043b\u0435 \u041e\u041f\u0415\u0420\u0410\u0426\u0418\u0418 \u0421 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418 \u0441\u0435 \u0438\u0437\u043f\u0438\u0441\u0432\u0430\u0442 \u0432\u0441\u0438\u0447\u043a\u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442\u0435\u0445\u043d\u0438\u0442\u0435 \u043a\u043e\u0434\u043e\u0432\u0435: "),s.Sb(9,"ul"),s.Sb(10,"li"),s.Gc(11," R3, \u0441 \u0438\u0437\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0433\u0430\u0437\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f\u0438 \u043f\u043e\u0440\u043e\u043b\u0438\u0437\u0430, \u043a\u043e\u0433\u0430\u0442\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0438\u0442\u0435, \u043e\u0431\u0440\u0430\u0437\u0443\u0432\u0430\u043d\u0438 \u043e\u0442 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0442\u0430, \u0441\u0435 \u0438\u0437\u043f\u043e\u043b\u0437\u0432\u0430\u0442 \u043a\u0430\u0442\u043e \u0445\u0438\u043c\u0438\u043a\u0430\u043b\u0438; "),s.Rb(),s.Sb(12,"li"),s.Gc(13," R5, R11, R12 \u0438 R13 \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u2116 2 \u043a\u044a\u043c \xa7 1, \u0442. 13 \u043e\u0442 \u0414\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0438\u0442\u0435 \u0440\u0430\u0437\u043f\u043e\u0440\u0435\u0434\u0431\u0438 (\u0414\u0420) \u043d\u0430 \u0417\u0423\u041e, \u0441 \u0438\u0437\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043e\u0442 \u0447\u0435\u0440\u043d\u0438 \u0438 \u0446\u0432\u0435\u0442\u043d\u0438 \u043c\u0435\u0442\u0430\u043b\u0438 (\u041e\u0426\u0427\u041c), \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043e\u0442 \u043c\u0435\u0442\u0430\u043b\u043d\u0438 \u043e\u043f\u0430\u043a\u043e\u0432\u043a\u0438, \u0438\u0437\u043b\u044f\u0437\u043b\u043e \u043e\u0442 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u0435\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u043e \u0438 \u0435\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u0432\u0430\u043d\u0435 (\u0418\u0423\u0415\u0415\u041e), \u043d\u0435\u0433\u043e\u0441\u043d\u0438 \u0437\u0430 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u0431\u0430\u0442\u0435\u0440\u0438\u0438 \u0438 \u0430\u043a\u0443\u043c\u0443\u043b\u0430\u0442\u043e\u0440\u0438 (\u041d\u0423\u0411\u0410) \u0438 \u0438\u0437\u043b\u0435\u0437\u043b\u0438 \u043e\u0442 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u043c\u043e\u0442\u043e\u0440\u043d\u0438 \u043f\u0440\u0435\u0432\u043e\u0437\u043d\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 (\u0418\u0423\u041c\u041f\u0421); "),s.Rb(),s.Sb(14,"li"),s.Gc(15," \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043e\u0431\u0435\u0437\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u0438 \u043d\u0435\u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043d\u0430 \u043c\u044f\u0441\u0442\u043e\u0442\u043e \u043d\u0430 \u043e\u0431\u0440\u0430\u0437\u0443\u0432\u0430\u043d\u0435\u0442\u043e \u0438\u043c, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438 \u0441 \u043a\u043e\u0434 D2, D3, D8, D9, D13 \u0438 D14 \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u2116 1 \u043a\u044a\u043c \xa7 1, \u0442. 11 \u043e\u0442 \u0414\u0420 \u043d\u0430 \u0417\u0423\u041e; "),s.Rb(),s.Sb(16,"li"),s.Gc(17,' \u0434\u0435\u0439\u043d\u043e\u0441\u0442, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0441 \u043a\u043e\u0434 R1 \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u2116 2 \u043a\u044a\u043c \xa7 1, \u0442. 13 \u043e\u0442 \u0414\u0420, \u043e\u0442\u043d\u0430\u0441\u044f\u0449\u0430 \u0441\u0435 \u0434\u043e \u0438\u0437\u0433\u0430\u0440\u044f\u043d\u0435 \u0441 \u043e\u043f\u043e\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0430\u0442\u0430 \u0435\u043d\u0435\u0440\u0433\u0438\u044f \u0432 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u043d\u0438 \u0437\u0430 \u0446\u0435\u043b\u0442\u0430 \u0441\u044a\u043e\u0440\u044a\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u043d\u0435\u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438, \u043f\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u0442\u043e \u0437\u0430 "\u0431\u0438\u043e\u043c\u0430\u0441\u0430" \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \xa7 1, \u0442. 1 \u043e\u0442 \u0414\u0420 \u043d\u0430 \u0417\u0423\u041e. '),s.Rb(),s.Rb(),s.Rb(),s.Sb(18,"li"),s.Gc(19," \u0412 \u0441\u043b\u0443\u0447\u0430\u0439, \u0447\u0435 \u0432 \u0434\u0430\u0434\u0435\u043d \u043a\u043e\u0434 \u0441\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438 \u043d\u044f\u043a\u043e\u043b\u043a\u043e \u0432\u0438\u0434\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438, \u0442\u043e \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0438\u0442\u0435 \u0441\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u0437\u0438\u0440\u0430\u0442 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: R12-\u0441\u043e\u0440\u0442\u0438\u0440\u0430\u043d\u0435, \u0431\u0430\u043b\u0438\u0440\u0430\u043d\u0435 \u0438 \u0442.\u043d.) "),s.Rb(),s.Rb(),s.Sb(20,"h6"),s.Gc(21," (\u0412 \u0421\u0415\u041a\u0426\u0418\u042f\u0422\u0410 \u0421\u0415 \u041e\u041f\u0418\u0421\u0412\u0410\u0422 \u0418 \u0412\u0421\u0418\u0427\u041a\u0418 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418, \u041a\u041e\u0418\u0422\u041e \u0421\u0415 \u041e\u0411\u0420\u0410\u0417\u0423\u0412\u0410\u0422 \u041d\u0410 \u041f\u041b\u041e\u0429\u0410\u0414\u041a\u0410\u0422\u0410, \u0412 \u0421\u041b\u0423\u0427\u0410\u0419, \u0427\u0415 \u0421 \u0422\u042f\u0425 \u0421\u0415 \u0418\u0417\u0412\u042a\u0420\u0428\u0412\u0410\u0422 \u041f\u041e\u0421\u041e\u0427\u0415\u041d\u0418\u0422\u0415 \u041f\u041e-\u0413\u041e\u0420\u0415 \u0414\u0415\u0419\u041d\u041e\u0421\u0422\u0418) "),s.Rb(),s.Rb()),2&e){const e=s.gc(3);s.mc("ngForOf",e.model.wasteTypes)}}function F(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2," \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u0418\u0422\u0415 \u0415\u041b\u0415\u041a\u0422\u0420\u0418\u0427\u0415\u0421\u041a\u041e \u0418 \u0415\u041b\u0415\u041a\u0422\u0420\u041e\u041d\u041d\u041e \u041e\u0411\u041e\u0420\u0423\u0414\u0412\u0410\u041d\u0415 \u0421\u042a\u0413\u041b\u0410\u0421\u041d\u041e \u0421\u042a\u041e\u0422\u0412\u0415\u0422\u041d\u0410\u0422\u0410 \u041d\u0410\u0420\u0415\u0414\u0411\u0410 \u041f\u041e \u0427\u041b. 13, \u0410\u041b.1, \u041a\u041e\u0418\u0422\u041e \u0429\u0415 \u0421\u0415 \u0422\u0420\u0415\u0422\u0418\u0420\u0410\u0422 "),s.Rb(),s.Sb(3,"div"),s.Sb(4,"button",10),s.Nb(5,"i",11),s.Nb(6,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc(2);const e=s.vc(1);s.zb(5),s.mc("hidden",e.isExpanded("categories")),s.zb(1),s.mc("hidden",!e.isExpanded("categories"))}}function V(e,t){if(1&e&&(s.Sb(0,"th",36),s.Gc(1),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.Ic(" ",e.code," ")}}function z(e,t){if(1&e&&(s.Sb(0,"td",36),s.Gc(1),s.Rb()),2&e){const e=s.gc().$implicit;s.zb(1),s.Ic(" ",e.ewc," ")}}function _(e,t){if(1&e){const e=s.Tb();s.Sb(0,"td",36),s.Sb(1,"div",39),s.Sb(2,"input",40),s.ec("click",(function(){s.wc(e);const i=t.$implicit,a=s.gc(2).$implicit;return s.gc(5).onElCategoryChecked(i,a)})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,i=s.gc(7);s.zb(2),s.mc("id",e.code)("disabled","R"===i.mode)}}function P(e,t){if(1&e&&(s.Qb(0),s.Ec(1,_,3,2,"td",37),s.Pb()),2&e){const e=s.gc(6);s.zb(1),s.mc("ngForOf",e.eeoCategories)}}function j(e,t){if(1&e&&(s.Sb(0,"tr"),s.Ec(1,z,2,1,"td",38),s.Ec(2,P,2,1,"ng-container",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status),s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function L(e,t){if(1&e&&(s.Sb(0,"li"),s.Gc(1),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.Ic(" ",e.name," ")}}function B(e,t){if(1&e&&(s.Sb(0,"div",32),s.Sb(1,"small"),s.Gc(2," (\u043f\u043e\u043f\u044a\u043b\u0432\u0430 \u0441\u0435 \u0441\u0430\u043c\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430 \u0437\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0437\u0430 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u0441 \u0438\u0437\u043b\u044f\u0437\u043b\u043e \u043e\u0442 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u0435\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u043e \u0438 \u0435\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e \u043e\u0431\u043e\u0440\u0443\u0434\u0432\u0430\u043d\u0435) "),s.Rb(),s.Rb(),s.Sb(3,"table",33),s.Sb(4,"thead",34),s.Sb(5,"tr"),s.Sb(6,"th",35),s.Gc(7," \u041a\u041e\u0414 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u041a\u0410"),s.Nb(8,"br"),s.Gc(9,"\u0421\u042a\u0413\u041b\u0410\u0421\u041d\u041e \u041d\u0410\u0420\u0415\u0414\u0411\u0410\u0422\u0410 \u041f\u041e"),s.Nb(10,"br"),s.Gc(11,"\u0427\u041b. 3 \u041e\u0422 \u0417\u0423\u041e "),s.Rb(),s.Sb(12,"th",36),s.Gc(13," \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u0418 \u0415\u041b\u0415\u041a\u0422\u0420\u0418\u0427\u0415\u0421\u041a\u041e \u0418 \u0415\u041b\u0415\u041a\u0422\u0420\u041e\u041d\u041d\u041e \u041e\u0411\u041e\u0420\u0423\u0414\u0412\u0410\u041d\u0415 "),s.Rb(),s.Rb(),s.Sb(14,"tr"),s.Ec(15,V,2,1,"th",37),s.Rb(),s.Rb(),s.Sb(16,"tbody"),s.Ec(17,j,3,2,"tr",26),s.Rb(),s.Rb(),s.Sb(18,"div"),s.Sb(19,"h6",27),s.Gc(20," \u041a\u0410\u0422\u0415\u0413\u041e\u0420\u0418\u0418 \u0415\u041b\u0415\u041a\u0422\u0420\u0418\u0427\u0415\u0421\u041a\u041e \u0418 \u0415\u041b\u0415\u041a\u0422\u0420\u041e\u041d\u041d\u041e \u041e\u0411\u041e\u0420\u0423\u0414\u0412\u0410\u041d\u0415: "),s.Rb(),s.Sb(21,"ul"),s.Ec(22,L,2,1,"li",26),s.Rb(),s.Rb()),2&e){const e=s.gc(4);s.zb(12),s.Ab("colspan",e.eeoCategories.length),s.zb(3),s.mc("ngForOf",e.eeoCategories),s.zb(2),s.mc("ngForOf",e.model.eeoEwc),s.zb(5),s.mc("ngForOf",e.eeoCategories)}}function W(e,t){1&e&&(s.Sb(0,"ngb-panel",31),s.Ec(1,F,7,2,"ng-template",5),s.Ec(2,B,23,4,"ng-template",6),s.Rb())}function G(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2," \u0412\u0418\u0414\u041e\u0412\u0415 \u0411\u0410\u0422\u0415\u0420\u0418\u0418 \u0418 \u0410\u041a\u0423\u041c\u0423\u041b\u0410\u0422\u041e\u0420\u0418 \u0421\u042a\u0413\u041b\u0410\u0421\u041d\u041e \u0421\u042a\u041e\u0422\u0412\u0415\u0422\u041d\u0410\u0422\u0410 \u041d\u0410\u0420\u0415\u0414\u0411\u0412\u0410 \u041f\u041e \u0427\u041b. 13, \u0410\u041b. 1, \u041a\u041e\u0418\u0422\u041e \u0429\u0415 \u0421\u0415 \u0422\u0420\u0415\u0422\u0418\u0420\u0410\u0422 "),s.Rb(),s.Sb(3,"div"),s.Sb(4,"button",10),s.Nb(5,"i",11),s.Nb(6,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc(2);const e=s.vc(1);s.zb(5),s.mc("hidden",e.isExpanded("ba-types")),s.zb(1),s.mc("hidden",!e.isExpanded("ba-types"))}}function H(e,t){if(1&e&&(s.Sb(0,"th",36),s.Gc(1),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.Ic(" ",e.name," ")}}function U(e,t){if(1&e&&(s.Sb(0,"td",36),s.Gc(1),s.Rb()),2&e){const e=s.gc().$implicit;s.zb(1),s.Ic(" ",e.ewc," ")}}function q(e,t){if(1&e){const e=s.Tb();s.Sb(0,"td",36),s.Sb(1,"div",39),s.Sb(2,"input",42),s.ec("click",(function(){s.wc(e);const i=t.$implicit,a=s.gc(2).$implicit;return s.gc(5).onBaCategoryChecked(i,a)})),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,i=s.gc(2).$implicit,a=s.gc(5);s.zb(2),s.mc("id",e.code)("disabled","R"===a.mode)("checked",a.isBaCkecked(e,i))}}function $(e,t){if(1&e&&(s.Qb(0),s.Ec(1,q,3,3,"td",37),s.Pb()),2&e){const e=s.gc(6);s.zb(1),s.mc("ngForOf",e.baCategories)}}function K(e,t){if(1&e&&(s.Sb(0,"tr"),s.Ec(1,U,2,1,"td",38),s.Ec(2,$,2,1,"ng-container",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status),s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function Y(e,t){if(1&e&&(s.Sb(0,"div",32),s.Sb(1,"small"),s.Gc(2," (\u043f\u043e\u043f\u044a\u043b\u0432\u0430 \u0441\u0435 \u0441\u0430\u043c\u043e \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430 \u0437\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0437\u0430 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u0441 \u043d\u0435\u0433\u043e\u0434\u043d\u0438 \u0437\u0430 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u0431\u0430\u0442\u0435\u0440\u0438\u0438 \u0438 \u0430\u043a\u0443\u043c\u0443\u043b\u0430\u0442\u043e\u0440\u0438) "),s.Rb(),s.Rb(),s.Sb(3,"table",33),s.Sb(4,"thead",34),s.Sb(5,"tr"),s.Sb(6,"th",36),s.Gc(7," \u041a\u041e\u0414 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u041a\u0410 \u0421\u042a\u0413\u041b\u0410\u0421\u041d\u041e \u041d\u0410\u0420\u0415\u0414\u0411\u0410\u0422\u0410 \u041f\u041e \u0427\u041b. 3 \u041e\u0422 \u0417\u0423\u041e "),s.Rb(),s.Ec(8,H,2,1,"th",37),s.Rb(),s.Rb(),s.Sb(9,"tbody"),s.Ec(10,K,3,2,"tr",26),s.Rb(),s.Rb()),2&e){const e=s.gc(4);s.zb(8),s.mc("ngForOf",e.baCategories),s.zb(2),s.mc("ngForOf",e.model.baEwc)}}function X(e,t){1&e&&(s.Sb(0,"ngb-panel",41),s.Ec(1,G,7,2,"ng-template",5),s.Ec(2,Y,11,2,"ng-template",6),s.Rb())}function Q(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2," \u0412\u0418\u0414\u042a\u0422 (\u041a\u041e\u0414\u042a\u0422 \u0418 \u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u0415\u0422\u041e), \u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e\u0422\u041e, \u041f\u0420\u041e\u0418\u0417\u0425\u041e\u0414\u042a\u0422 \u041d\u0410 \u041e\u0427\u0426\u041c \u0418 \u0414\u0415\u0419\u041d\u041e\u0421\u0422\u0418\u0422\u0415 \u041f\u041e \u0422\u0420\u0415\u0422\u0418\u0420\u0410\u041d\u0415, \u0417\u0410 \u041a\u041e\u0418\u0422\u041e \u0421\u0415 \u041a\u0410\u041d\u0414\u0418\u0414\u0410\u0422\u0421\u0422\u0412\u0410 "),s.Rb(),s.Sb(3,"div"),s.Sb(4,"button",10),s.Nb(5,"i",11),s.Nb(6,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc(2);const e=s.vc(1);s.zb(5),s.mc("hidden",e.isExpanded("ochcm-type")),s.zb(1),s.mc("hidden",!e.isExpanded("ochcm-type"))}}function Z(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",24),s.ec("click",(function(){s.wc(e),s.gc(2);const t=s.vc(1);return s.gc(4).onAddOchcm(),t.expand("ochcm")})),s.hc(1,"translate"),s.Nb(2,"i",25),s.Rb()}2&e&&s.nc("ngbTooltip",s.ic(1,1,"buttons.addRow.tooltip"))}function J(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2,"\u041e\u0427\u0426\u041c"),s.Rb(),s.Sb(3,"div"),s.Ec(4,Z,3,3,"button",23),s.Sb(5,"button",10),s.Nb(6,"i",11),s.Nb(7,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc();const e=s.vc(1),t=s.gc(4);s.zb(4),s.mc("ngIf","R"!=t.mode),s.zb(2),s.mc("hidden",e.isExpanded("ochcm")),s.zb(1),s.mc("hidden",!e.isExpanded("ochcm"))}}function ee(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-waste-group",48),s.ec("deleteRow",(function(t){return s.wc(e),s.gc(7).onDeleteOchcm(t)}))("formStatusValidChanged",(function(t){s.wc(e);const i=s.gc().index;return s.gc(6).onValidityOchcm(t,i)})),s.Rb(),s.Nb(2,"hr",30),s.Rb()}if(2&e){const e=s.gc(),t=e.$implicit,i=e.index,a=s.gc(6);s.zb(1),s.mc("model",t)("mode",a.mode)("type","metals")("index",i)}}function te(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,ee,3,4,"div",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function ie(e,t){if(1&e&&s.Ec(0,te,2,1,"div",26),2&e){const e=s.gc(5);s.mc("ngForOf",e.model.ochcmTypes)}}function se(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",24),s.ec("click",(function(){s.wc(e),s.gc(2);const t=s.vc(1);return s.gc(4).onAddAdditionalWaste(),t.expand("additional-waste")})),s.hc(1,"translate"),s.Nb(2,"i",25),s.Rb()}2&e&&s.nc("ngbTooltip",s.ic(1,1,"buttons.addRow.tooltip"))}function ae(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2,"\u0414\u041e\u041f\u042a\u041b\u041d\u0418\u0422\u0415\u041b\u041d\u0418 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418"),s.Rb(),s.Sb(3,"div"),s.Ec(4,se,3,3,"button",23),s.Sb(5,"button",10),s.Nb(6,"i",11),s.Nb(7,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){s.gc();const e=s.vc(1),t=s.gc(4);s.zb(4),s.mc("ngIf","R"!=t.mode),s.zb(2),s.mc("hidden",e.isExpanded("additional-waste")),s.zb(1),s.mc("hidden",!e.isExpanded("additional-waste"))}}function ne(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-waste-group",48),s.ec("deleteRow",(function(t){return s.wc(e),s.gc(7).onDeleteAdditionalWaste(t)}))("formStatusValidChanged",(function(t){s.wc(e);const i=s.gc().index;return s.gc(6).onValidityAdditionalWaste(t,i)})),s.Rb(),s.Nb(2,"hr",30),s.Rb()}if(2&e){const e=s.gc(),t=e.$implicit,i=e.index,a=s.gc(6);s.zb(1),s.mc("model",t)("mode",a.mode)("type","all")("index",i)}}function oe(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,ne,3,4,"div",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function re(e,t){if(1&e&&s.Ec(0,oe,2,1,"div",26),2&e){const e=s.gc(5);s.mc("ngForOf",e.model.addWaste)}}function de(e,t){1&e&&(s.Sb(0,"ngb-accordion",44,45),s.Sb(2,"ngb-panel",46),s.Ec(3,J,8,3,"ng-template",5),s.Ec(4,ie,1,1,"ng-template",6),s.Rb(),s.Sb(5,"ngb-panel",47),s.Ec(6,ae,8,3,"ng-template",5),s.Ec(7,re,1,1,"ng-template",6),s.Rb(),s.Rb(),s.Sb(8,"div"),s.Sb(9,"h6",27),s.Gc(10,"\u0417\u0410\u0411\u0415\u041b\u0415\u0416\u041a\u0418:"),s.Rb(),s.Sb(11,"ol"),s.Sb(12,"li"),s.Gc(13," \u0412 \u043a\u043e\u043b\u043e\u043d\u0430 1 \u0438 2 \u0441\u0435 \u043f\u043e\u043f\u044a\u043b\u0432\u0430 \u043a\u043e\u0434 \u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u041d\u0430\u0440\u0435\u0434\u0431\u0430 \u043f\u043e \u0447\u043b. 3 \u043e\u0442 \u0417\u0423\u041e \u0437\u0430 \u043a\u043b\u0430\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0441\u0430\u043c\u043e \u043d\u0430 \u041e\u0427\u0426\u041c, \u043e\u0442\u0433\u043e\u0432\u0430\u0440\u044f\u0449\u0438 \u043d\u0430 \u0434\u0435\u0444\u0438\u043d\u0438\u0446\u0438\u044f\u0442\u0430 \u0432 \xa7 1, \u0442. 19 \u0438 20 \u043e\u0442 \u0414\u0420 \u043d\u0430 \u0417\u0423\u041e; "),s.Rb(),s.Sb(14,"li"),s.Gc(15," \u0421\u043f\u0438\u0441\u044a\u043a\u044a\u0442 \u0441 \u041e\u0427\u0426\u041c \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 1.3 \u0435 \u043d\u0435\u0438\u0437\u0447\u0435\u0440\u043f\u0430\u0442\u0435\u043b\u0435\u043d \u0438 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0431\u044a\u0434\u0435 \u0434\u043e\u043f\u044a\u043b\u0432\u0430\u043d; "),s.Rb(),s.Sb(16,"li"),s.Gc(17," \u0412 \u043a\u043e\u043b\u043e\u043d\u0430 3 \u0441\u0435 \u0438\u0437\u043f\u0438\u0441\u0432\u0430\u0442 \u0432\u0441\u0438\u0447\u043a\u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442\u0435\u0445\u043d\u0438\u0442\u0435 \u043a\u043e\u0434\u043e\u0432\u0435 \u0441 \u043f\u044a\u043b\u043d\u043e\u0442\u043e \u0438\u043c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \xa7 1, \u0442. 11 \u0438 13 \u043e\u0442 \u0414\u0420 \u043d\u0430 \u0417\u0423\u041e \u043a\u0430\u0442\u043e \u0441\u0435 \u043f\u043e\u0441\u043e\u0447\u0432\u0430 \u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u0442\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442, \u043d\u0430\u043f\u0440.: \u0441\u043e\u0440\u0442\u0438\u0440\u0430\u043d\u0435, \u0431\u0430\u043b\u0438\u0440\u0430\u043d\u0435 \u0438 \u0434\u0440.; "),s.Rb(),s.Sb(18,"li"),s.Gc(19," \u0412 \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u0435 \u043f\u043e\u0441\u043e\u0447\u0432\u0430\u0442 \u0438 \u0432\u0441\u0438\u0447\u043a\u0438 \u041e\u0427\u0426\u041c, \u043a\u043e\u0438\u0442\u043e \u0441\u0435 \u043e\u0431\u0440\u0430\u0437\u0443\u0432\u0430\u0442 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430, \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430 \u0441 \u0442\u044f\u0445 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043f\u043e \u0447\u043b. 35 \u043e\u0442 \u0417\u0423\u041e, \u043f\u043e\u0434\u043b\u0435\u0436\u0430\u0449\u0438 \u043d\u0430 \u0438\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435. "),s.Rb(),s.Rb(),s.Rb()),2&e&&s.mc("destroyOnHide",!1)}function ce(e,t){1&e&&(s.Sb(0,"ngb-panel",43),s.Ec(1,Q,7,2,"ng-template",5),s.Ec(2,de,20,1,"ng-template",6),s.Rb())}function le(e,t){if(1&e&&(s.Sb(0,"ngb-accordion",15,16),s.Sb(2,"ngb-panel",17),s.Ec(3,O,7,2,"ng-template",5),s.Ec(4,A,1,5,"ng-template",6),s.Rb(),s.Sb(5,"ngb-panel",18),s.Ec(6,M,8,3,"ng-template",5),s.Ec(7,k,22,1,"ng-template",6),s.Rb(),s.Ec(8,W,3,0,"ngb-panel",19),s.Ec(9,X,3,0,"ngb-panel",20),s.Ec(10,ce,3,0,"ngb-panel",21),s.Rb()),2&e){const e=s.gc(2);s.mc("destroyOnHide",!1),s.zb(8),s.mc("ngIf","m35-do"==e.type),s.zb(1),s.mc("ngIf","m35-do"==e.type),s.zb(1),s.mc("ngIf","m35-do"==e.type)}}function he(e,t){1&e&&(s.Sb(0,"ngb-panel",4),s.Ec(1,C,8,4,"ng-template",5),s.Ec(2,le,11,4,"ng-template",6),s.Rb())}function pe(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",24),s.ec("click",(function(){s.wc(e);const t=s.gc(3),i=s.vc(1);return t.onAddTypeTransport(),i.expand("type-transport")})),s.hc(1,"translate"),s.Nb(2,"i",25),s.Rb()}2&e&&s.nc("ngbTooltip",s.ic(1,1,"buttons.addRow.tooltip"))}function ue(e,t){if(1&e&&(s.Sb(0,"div",7),s.Sb(1,"h6",8),s.Gc(2," \u0412\u0418\u0414\u042a\u0422 (\u041a\u041e\u0414\u042a\u0422 \u0418 \u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u0415\u0422\u041e), \u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e\u0422\u041e, \u041f\u0420\u041e\u0418\u0417\u0425\u041e\u0414\u042a\u0422 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418\u0422\u0415, \u0417\u0410 \u041a\u041e\u0418\u0422\u041e \u0421\u0415 \u041a\u0410\u041d\u0414\u0418\u0414\u0410\u0422\u0421\u0422\u0412\u0410 "),s.Rb(),s.Sb(3,"div"),s.Ec(4,pe,3,3,"button",23),s.Sb(5,"button",10),s.Nb(6,"i",11),s.Nb(7,"i",12),s.Rb(),s.Rb(),s.Rb()),2&e){const e=s.gc(2),t=s.vc(1);s.zb(4),s.mc("ngIf","R"!=e.mode),s.zb(2),s.mc("hidden",t.isExpanded("type-transport")),s.zb(1),s.mc("hidden",!t.isExpanded("type-transport"))}}function me(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-waste-group",50),s.ec("deleteRow",(function(t){return s.wc(e),s.gc(4).onDeleteTypeTransport(t)}))("formStatusValidChanged",(function(t){s.wc(e);const i=s.gc().index;return s.gc(3).onValidityTypeTransport(t,i)})),s.Rb(),s.Nb(2,"hr",30),s.Rb()}if(2&e){const e=s.gc(),t=e.$implicit,i=e.index,a=s.gc(3);s.zb(1),s.mc("model",t)("mode",a.mode)("index",i)("showOperations",!1)("showDeleteBtn",a.showTrDeleteBtn)}}function be(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,me,3,5,"div",28),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function ge(e,t){if(1&e&&(s.Ec(0,be,2,1,"div",26),s.Sb(1,"div"),s.Sb(2,"h6",27),s.Gc(3,"\u0417\u0410\u0411\u0415\u041b\u0415\u0416\u041a\u0418:"),s.Rb(),s.Sb(4,"ol"),s.Sb(5,"li"),s.Gc(6," \u0412 \u043f\u043e\u043b\u0435\u0442\u043e \u041a\u041e\u0414 \u041d\u0410 \u041e\u0422\u041f\u0410\u0414\u042a\u041a\u0410 \u0441\u0435 \u043f\u043e\u043f\u044a\u043b\u0432\u0430 \u043a\u043e\u0434 \u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u041d\u0430\u0440\u0435\u0434\u0431\u0430 \u043f\u043e \u0447\u043b. 3 \u043e\u0442 \u0417\u0423\u041e \u0437\u0430 \u043a\u043b\u0430\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435; "),s.Rb(),s.Rb(),s.Rb()),2&e){const e=s.gc(2);s.mc("ngForOf",e.model.trWasteType)}}function fe(e,t){1&e&&(s.Sb(0,"ngb-panel",49),s.Ec(1,ue,8,3,"ng-template",5),s.Ec(2,ge,7,1,"ng-template",6),s.Rb())}let Re=(()=>{class e{constructor(e){this.service=e,this.WASTE_TYPES="DEPOT_WASTE",this.RED="#dc3545",this.WARNING="warning",this.ERROR="error",this.index=0,this.model=new h.a,this.type=a.a.M35_DO,this.mode=c.a.NEW,this.deleteStage=new s.n,this.districtChangeEmitter=new s.n,this.formStatusValidChanged=new s.n,this.wasteTypesRequiredForDepotClass=[],this.wasteTypesRequiredForBA=[],this.wasteTypesRequiredForEEO=[],this.isValid=!1,this.isStageDataLoaded=!1,this.showOpDeleteBtn=!0,this.showTrDeleteBtn=!0,this.stageLoader=new g.a(e)}get wasteGroupType(){let e=b.a.ALL;switch(this.type){case a.a.M35_DO:e=b.a.NOT_METALS;break;case a.a.M35_RD_TREAT:e=b.a.RD_TREAT;break;case a.a.COMPLEX_PERMITS:e=b.a.ALL}return e}ngOnInit(){this.loadRequiredWasteTypes(),this.loadRequiredWasteTypesToAddDepotClass(),this.type===a.a.M35_DO&&this.loadCategories(),this.isDeleteGroupEnable(),this.isDeleteTrTypesEnable(),this.type===a.a.M35_RD_TRANSPORT&&this.setFormsValidity()}onStageOpen(e){!this.isStageDataLoaded&&null!=this.model.stageDataView.stageId&&e.nextState&&("stage"===e.panelId&&this.type!==a.a.M35_RD_TRANSPORT&&(this.type===a.a.M35_DO?(this.stageLoader.loadDOStageData(this.model.stageDataView.stageId,this.model,this.wasteTypesRequiredForBA,this.wasteTypesRequiredForEEO),this.isStageDataLoaded=!0):(this.stageLoader.loadStageData(this.model.stageDataView.stageId,this.model),this.isStageDataLoaded=!0)),"type-transport"===e.panelId&&this.type===a.a.M35_RD_TRANSPORT&&(this.stageLoader.loadTransportStageData(this.model.stageDataView.stageId,this.model),this.isStageDataLoaded=!0))}checkIfDepotClassShouldBeVisible(e){this.locationForm.changeIsDepotClassEnabled=-1!==this.wasteTypesRequiredForDepotClass.indexOf((e=e||{}).opCode)}checkIfBAorEEO(e){null!=e&&this.type===a.a.M35_DO&&(null!=this.wasteTypesRequiredForBA.find(t=>t.ewc===e.ewc)&&(null==this.model.baEwc&&(this.model.baEwc=[]),this.model.baEwc.push(e)),null!=this.wasteTypesRequiredForEEO.find(t=>t.ewc===e.ewc)&&(null==this.model.eeoEwc&&(this.model.eeoEwc=[]),this.model.eeoEwc.push(e)))}onOprStatusChange(e,t){if(null!=e&&this.type===a.a.M35_DO){if(null!=this.model.baEwc){const i=this.model.baEwc.find(t=>t.ewc=e);null!=i&&(t?i.status=t:this.model.baEwc=this.model.baEwc.filter(e=>e.ewc!==i.ewc))}if(null!=this.model.eeoEwc){const i=this.model.eeoEwc.find(t=>t.ewc=e);null!=i&&(t?i.status=t:this.model.eeoEwc=this.model.eeoEwc.filter(e=>e.ewc!==i.ewc))}}}onDistrictChange(e){this.districtChangeEmitter.emit(e)}onDeleteStage(){R.a.fire({title:S.a.TITLE_DELETE_STAGE,text:S.a.TEXT_DELETE_STAGE,footer:S.a.FOOTER_DEL_DLG,icon:this.WARNING,showConfirmButton:!0,confirmButtonText:S.a.CONFIRM_BUTTON_TEXT,showCancelButton:!0,cancelButtonText:S.a.CANCEL_BUTTON_TEXT,cancelButtonColor:this.RED,allowOutsideClick:!1}).then(e=>{e.isConfirmed&&R.a.fire({title:S.a.TITLE_DELETE_STAGE_CONFIRM,text:S.a.TEXT_DELETE_STAGE_CONFIRM,icon:this.ERROR,showConfirmButton:!0,confirmButtonText:S.a.CONFIRM_BUTTON_TEXT,showCancelButton:!0,cancelButtonText:S.a.CANCEL_BUTTON_TEXT,cancelButtonColor:this.RED,allowOutsideClick:!1}).then(e=>{e.isConfirmed&&this.deleteStage.emit(this.index)})})}onAddType(){null==this.model.wasteTypes&&(this.model.wasteTypes=[]),this.model.wasteTypes.push(new u.a),this.isDeleteGroupEnable()}onDeleteType(e){if(null==this.model.wasteTypes||this.model.wasteTypes.length<1)return;const t=this.model.wasteTypes[e];if(t.status===m.a.NEW)return this.model.wasteTypes.splice(e,1),this.model.typeValidity.splice(e,1),this.onOprStatusChange(t.operations[0].ewc),this.setFormsValidity(),void this.isDeleteGroupEnable();t.status=m.a.DELETED,this.model.typeValidity[e]=!0,t.operations.forEach(e=>{e.status=m.a.DELETED}),this.onOprStatusChange(t.operations[0].ewc,m.a.DELETED),this.setFormsValidity(),this.isDeleteGroupEnable()}onAddOchcm(){null==this.model.ochcmTypes&&(this.model.ochcmTypes=[]),this.model.ochcmTypes.push(new u.a)}onDeleteOchcm(e){if(null==this.model.ochcmTypes||this.model.ochcmTypes.length<1)return;const t=this.model.ochcmTypes[e];if(t.status===m.a.NEW)return this.model.ochcmTypes.splice(e,1),this.model.ochcmValidity.splice(e,1),void this.setFormsValidity();t.status=m.a.DELETED,this.model.ochcmValidity[e]=!0,t.operations.forEach(e=>{e.status=m.a.DELETED}),this.setFormsValidity()}onAddAdditionalWaste(){null==this.model.addWaste&&(this.model.addWaste=[]),this.model.addWaste.push(new u.a)}onDeleteAdditionalWaste(e){if(null==this.model.addWaste||this.model.addWaste.length<1)return;const t=this.model.addWaste[e];if(t.status===m.a.NEW)return this.model.addWaste.splice(e,1),this.model.addWasteValidity.splice(e,1),void this.setFormsValidity();t.status=m.a.DELETED,this.model.addWasteValidity[e]=!0,t.operations.forEach(e=>{e.status=m.a.DELETED}),this.setFormsValidity()}onElCategoryChecked(e,t){if(null==this.model.eeoData&&(this.model.eeoData=[]),null==this.model.eeoData.find(i=>i.ewc===t.ewc&&i.wcyId===e.id))this.model.eeoData.push(new p.a({ewc:t.ewc,wcyId:e.id}));else{const i=this.model.baData.findIndex(i=>i.ewc===t.ewc&&i.wcyId===e.id);this.model.baData.splice(i,1)}this.setFormsValidity()}isEEOCkecked(e,t){return this.model.eeoData.find(i=>i.ewc===t.ewc&&i.wcyId===e.id)}onBaCategoryChecked(e,t){if(null==this.model.baData&&(this.model.baData=[]),null==this.model.baData.find(i=>i.ewc===t.ewc&&i.wcyId===e.id))this.model.baData.push(new p.a({ewc:t.ewc,wcyId:e.id}));else{const i=this.model.baData.findIndex(i=>i.ewc===t.ewc&&i.wcyId===e.id);this.model.baData.splice(i,1)}this.setFormsValidity()}isBaCkecked(e,t){return this.model.baData.find(i=>i.ewc===t.ewc&&i.wcyId===e.id)}onAddTypeTransport(){null==this.model.trWasteType&&(this.model.trWasteType=[]),this.model.trWasteType.push(new u.a),this.isDeleteTrTypesEnable()}onDeleteTypeTransport(e){if(null==this.model.trWasteType||this.model.trWasteType.length<1)return;const t=this.model.trWasteType[e];if(t.status===m.a.NEW)return this.model.trWasteType.splice(e,1),this.model.typesTransportValidity.splice(e,1),this.setFormsValidity(),void this.isDeleteTrTypesEnable();t.status=m.a.DELETED,this.model.typesTransportValidity[e]=!0,t.operations.forEach(e=>{e.status=m.a.DELETED}),this.setFormsValidity(),this.isDeleteTrTypesEnable()}loadCategories(){this.loadElCategories(),this.loadBaCategories()}loadElCategories(){null==this.eeoCategories&&(this.eeoCategories=[]),this.service.loadByParam(d.a,d.a.urlWtePublic,8).subscribe(e=>{this.eeoCategories=e,this.eeoCategories.sort((e,t)=>{const i=e.name.slice(0,1),s=t.name.slice(0,1);return"a"===e.name.slice(1,2)&&"5"===s||+i>+s?1:-1}),this.eeoCategories=this.eeoCategories.filter(e=>"5a"!==e.code)})}loadBaCategories(){null==this.baCategories&&(this.baCategories=[]),this.service.loadByParam(d.a,d.a.urlWtePublic,3).subscribe(e=>{this.baCategories=e})}loadRequiredWasteTypes(){this.loadRequiredWasteTypesToAddDepotClass(),this.type===a.a.M35_DO&&(this.loadRequiredBAWasteTypes(),this.loadRequiredEEOWasteTypes())}loadRequiredWasteTypesToAddDepotClass(){this.service.loadByParam(n.a,n.a.publicUrlDomain,this.WASTE_TYPES).pipe(Object(r.a)(e=>e.map(e=>e.code))).subscribe(e=>{this.wasteTypesRequiredForDepotClass=e})}loadRequiredBAWasteTypes(){this.service.loadByFind(l.a,l.a.urlPublic,{wtCode:"03"}).subscribe(e=>{e.totalRows>0&&(this.wasteTypesRequiredForBA=this.wasteTypesRequiredForBA.concat(e.pageContent),this.wasteTypesRequiredForBA.length<e.totalRows&&this.loadRequiredBAWasteTypes())})}loadRequiredEEOWasteTypes(){this.service.loadByFind(l.a,l.a.urlPublic,{wtCode:"02"}).subscribe(e=>{e.totalRows>0&&(this.wasteTypesRequiredForEEO=this.wasteTypesRequiredForEEO.concat(e.pageContent),this.wasteTypesRequiredForEEO.length<e.totalRows&&this.loadRequiredEEOWasteTypes())})}onLocationValidityChange(e){this.model.locationValidity="VALID"===e,this.setFormsValidity()}onValidityType(e,t){const i="VALID"===e;null==this.model.typeValidity&&(this.model.typeValidity=[]),this.model.typeValidity[t]=i,this.setFormsValidity()}onValidityOchcm(e,t){const i="VALID"===e;null==this.model.ochcmValidity&&(this.model.ochcmValidity=[]),this.model.ochcmValidity[t]=i,this.setFormsValidity()}onValidityAdditionalWaste(e,t){const i="VALID"===e;null==this.model.addWasteValidity&&(this.model.addWasteValidity=[]),this.model.addWasteValidity[t]=i,this.setFormsValidity()}onValidityTypeTransport(e,t){const i="VALID"===e;null==this.model.typesTransportValidity&&(this.model.typesTransportValidity=[]),this.model.typesTransportValidity[t]=i,this.setFormsValidity()}areTypesValid(){if(null==this.model.wasteTypes||0===this.model.wasteTypes.length)return!0;let e=0;if(this.model.wasteTypes.forEach(t=>{t.status===m.a.DELETED&&e++}),null==this.model.typeValidity||0===this.model.typeValidity.length||this.model.typeValidity.length===e)return!1;for(const t of this.model.typeValidity)if(!t)return!1;return!0}areOchcmValid(){if(null==this.model.ochcmValidity)return!0;for(const e of this.model.ochcmValidity)if(!e)return!1;return!0}areAddWasteValid(){if(null==this.model.addWasteValidity)return!0;for(const e of this.model.addWasteValidity)if(!e)return!1;return!0}areBAValid(){if(null!=this.model.baEwc&&this.model.baEwc.length>0){if(null==this.model.baData)return!1;for(const e of this.model.baEwc)if(e.status!==m.a.DELETED&&null==this.model.baData.find(t=>t.ewc===e.ewc))return!1}return!0}areEEOValid(){if(null!=this.model.eeoEwc&&this.model.eeoEwc.length>0){if(null==this.model.eeoData)return!1;for(const e of this.model.eeoEwc)if(e.status!==m.a.DELETED&&null==this.model.eeoData.find(t=>t.ewc===e.ewc))return!1}return!0}areTypesTransportValid(){if(null==this.model.trWasteType||0===this.model.trWasteType.length)return!0;let e=0;if(this.model.trWasteType.forEach(t=>{t.status===m.a.DELETED&&e++}),null==this.model.typesTransportValidity||0===this.model.typesTransportValidity.length||this.model.typesTransportValidity.length===e)return!1;for(const t of this.model.typesTransportValidity)if(!t)return!1;return!0}setFormsValidity(){let e=!1;switch(this.type){case a.a.M35_DO:e=this.model.locationValidity&&this.areTypesValid()&&this.areOchcmValid()&&this.areAddWasteValid()&&this.areBAValid()&&this.areEEOValid();break;case a.a.M35_RD_TREAT:e=this.model.locationValidity&&this.areTypesValid();break;case a.a.M35_RD_TRANSPORT:e=this.areTypesTransportValid();break;case a.a.COMPLEX_PERMITS:e=this.model.locationValidity&&this.areTypesValid()}this.isValid!==e&&(this.isValid=e,this.formStatusValidChanged.emit(e?"VALID":"INVALID"))}isDeleteGroupEnable(){if(null==this.model.wasteTypes||0===this.model.wasteTypes.length)return void(this.showOpDeleteBtn=!0);let e=0;this.model.wasteTypes.forEach(t=>{t.status===m.a.DELETED&&e++}),this.showOpDeleteBtn=!(0===e&&this.model.wasteTypes.length<=1||this.model.wasteTypes.length-e<=1)}isDeleteTrTypesEnable(){if(null==this.model.trWasteType||0===this.model.trWasteType.length)return void(this.showTrDeleteBtn=!0);let e=0;this.model.trWasteType.forEach(t=>{t.status===m.a.DELETED&&e++}),this.showTrDeleteBtn=!(0===e&&this.model.trWasteType.length<=1||this.model.trWasteType.length-e<=1)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(I.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-stage-acc"]],viewQuery:function(e,t){var i;1&e&&s.Nc(o.a,!0),2&e&&s.uc(i=s.fc())&&(t.locationForm=i.first)},inputs:{index:"index",model:"model",type:"type",mode:"mode",riosvCode:"riosvCode",notInRiosvCode:"notInRiosvCode"},outputs:{deleteStage:"deleteStage",districtChangeEmitter:"districtChangeEmitter",formStatusValidChanged:"formStatusValidChanged"},decls:4,vars:3,consts:[["id","parent-accordion",3,"destroyOnHide","panelChange"],["acc","ngbAccordion"],["id","stage",4,"ngIf"],["id","type-transport",4,"ngIf"],["id","stage"],["ngbPanelHeader",""],["id","body","ngbPanelContent",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["type","button","class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430","container","body","placement","left",3,"click",4,"ngIf"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],[1,"fas","fa-trash-alt"],["id","child-accordion",3,"destroyOnHide"],["accChild","ngbAccordion"],["id","location"],["id","type"],["id","categories",4,"ngIf"],["id","ba-types",4,"ngIf"],["id","ochcm-type",4,"ngIf"],[3,"mode","model","isDepot","riosvCode","notInRiosvCode","formStatusValidChanged","districtEmitter"],["class","btn btn-sm btn-outline-secondary rounded-circle mr-2","container","body","placement","top",3,"ngbTooltip","click",4,"ngIf"],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"ngbTooltip","click"],[1,"fas","fa-plus"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"],[4,"ngIf"],[3,"model","mode","type","index","showDeleteBtn","isComplex","deleteRow","wasteTypeChangedEmitter","wasteCodeChangedEmitter","formStatusValidChanged"],[1,"border","border-primary"],["id","categories"],[1,"text-center","mb-2"],[1,"table","table-hover"],[1,"alert","alert-primary"],["rowspan","2",1,"text-center"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","disabled","click"],["id","ba-types"],["type","checkbox",1,"form-check-input",3,"id","disabled","checked","click"],["id","ochcm-type"],["id","ochcm-accordion",3,"destroyOnHide"],["accOchcm","ngbAccordion"],["id","ochcm"],["id","additional-waste"],[3,"model","mode","type","index","deleteRow","formStatusValidChanged"],["id","type-transport"],[3,"model","mode","index","showOperations","showDeleteBtn","deleteRow","formStatusValidChanged"]],template:function(e,t){1&e&&(s.Sb(0,"ngb-accordion",0,1),s.ec("panelChange",(function(e){return t.onStageOpen(e)})),s.Ec(2,he,3,0,"ngb-panel",2),s.Ec(3,fe,3,0,"ngb-panel",3),s.Rb()),2&e&&(s.mc("destroyOnHide",!1),s.zb(2),s.mc("ngIf","m35-do"==t.type||"m35-rd-treat"==t.type||"complex-permits"==t.type),s.zb(1),s.mc("ngIf","m35-rd-transport"==t.type))},directives:[y.a,T.u,y.I,y.K,y.J,y.M,y.ab,o.a,T.t,E.a],pipes:[D.d],styles:["[_nghost-%COMP%]     #parent-accordion>div>div.card-header{padding:.5rem;background-color:#cce5ff;border-bottom:solid;border-color:#007bff!important;border-width:2px}[_nghost-%COMP%]     #parent-accordion>div>div>div.card-body{padding:.5rem}[_nghost-%COMP%]     #child-accordion>div>div.card-header{padding:.5rem;background-color:#cce5ff;border-bottom:solid;border-color:#007bff!important;border-width:2px}[_nghost-%COMP%]     #child-accordion>div>div>div.card-body{padding:.5rem}"]}),e})()},Pe2L:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("fXoL"),a=i("3Pt+"),n=i("F7pt"),o=i("ofXK"),r=i("sYmb");function d(e,t){if(1&e&&(s.Sb(0,"label",9),s.Gc(1),s.hc(2,"translate"),s.Rb()),2&e){const e=s.gc();s.mc("for",e.formItemDef.domId),s.zb(1),s.Hc(s.ic(2,2,e.formItemDef.labelText))}}let c=(()=>{class e{constructor(){this.rows=0,this.formItemDef=null,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new n.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){return!this.formItemDef.isRequired||null!=e.value&&0!==e.value.length?null:{required:!0}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-long-text"]],inputs:{rows:"rows",formItemDef:"formItemDef",value:"value"},features:[s.yb([{provide:a.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:a.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:14,vars:16,consts:[[1,"form-group"],[3,"for",4,"ngIf"],[1,"input-group","mb-1"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-circle","text-dark","fi-bullet"],["aria-label","textarea",1,"form-control",3,"id","name","placeholder","required","disabled","rows","ngModel","ngModelChange"],[1,"invalid-feedback"],["id","input-text-1-Help",1,"form-text","text-muted"],[3,"for"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Ec(1,d,3,4,"label",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"span",4),s.Nb(5,"i",5),s.Rb(),s.Rb(),s.Sb(6,"textarea",6),s.ec("ngModelChange",(function(e){return t.value=e})),s.hc(7,"translate"),s.Rb(),s.Sb(8,"div",7),s.Gc(9),s.hc(10,"translate"),s.Rb(),s.Rb(),s.Sb(11,"small",8),s.Gc(12),s.hc(13,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("ngIf",t.formItemDef.labelText),s.zb(5),s.nc("placeholder",s.ic(7,10,t.formItemDef.placeHolderText)),s.mc("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("disabled",t.formItemDef.isDisabled)("rows",t.rows)("ngModel",t.value),s.zb(3),s.Ic(" ",s.ic(10,12,"fi.components.text.error")," "),s.zb(3),s.Hc(s.ic(13,14,t.formItemDef.helpText)))},directives:[o.u,a.c,a.z,a.o,a.r],pipes:[r.d],styles:[""]}),e})()},R5sY:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.id=e.id,this.aunId=e.aunId,this.bulstat=e.bulstat,this.cotAddress=e.cotAddress,this.cotEknm=e.cotEknm,this.cotEmail=e.cotEmail,this.cotFax=e.cotFax,this.cotFirstName=e.cotFirstName,this.cotLastName=e.cotLastName,this.cotMidName=e.cotMidName,this.cotPhone=e.cotPhone,this.coyCode=e.coyCode,this.dateCreated=e.dateCreated,this.ornName=e.ornName,this.ornNameEn=e.ornNameEn,this.userCreated=e.userCreated)}equals(e){const t=Object.keys(this);for(const i of t)if(this[i]!==e[i])return!1;return!0}}return e.url="TrnMroRepresented",e.urlPublic="Public/TrnMroRepresented/aun",e.urlAun="TrnMroRepresented/aun",Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"aunId",void 0),Object(s.b)([Object(a.b)({alias:"bulstat"})],e.prototype,"bulstat",void 0),Object(s.b)([Object(a.b)({alias:"cotAddress"})],e.prototype,"cotAddress",void 0),Object(s.b)([Object(a.b)({alias:"cotEknm"})],e.prototype,"cotEknm",void 0),Object(s.b)([Object(a.b)({alias:"cotEmail"})],e.prototype,"cotEmail",void 0),Object(s.b)([Object(a.b)({alias:"cotFax"})],e.prototype,"cotFax",void 0),Object(s.b)([Object(a.b)({alias:"cotFirstName"})],e.prototype,"cotFirstName",void 0),Object(s.b)([Object(a.b)({alias:"cotLastName"})],e.prototype,"cotLastName",void 0),Object(s.b)([Object(a.b)({alias:"cotMidName"})],e.prototype,"cotMidName",void 0),Object(s.b)([Object(a.b)({alias:"cotPhone"})],e.prototype,"cotPhone",void 0),Object(s.b)([Object(a.b)({alias:"coyCode"})],e.prototype,"coyCode",void 0),Object(s.b)([Object(a.b)({alias:"dateCreated"})],e.prototype,"dateCreated",void 0),Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"ornName"})],e.prototype,"ornName",void 0),Object(s.b)([Object(a.b)({alias:"ornNameEn"})],e.prototype,"ornNameEn",void 0),Object(s.b)([Object(a.b)({alias:"userCreated"})],e.prototype,"userCreated",void 0),e})()},Yru1:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("Z+Hd");class a{constructor(e){e?(this.pIndex=e.index,this.pOperations=e.operations,this.pStatus=null==e.status?s.a.NEW:e.status):this.pStatus=s.a.NEW}get index(){return this.pIndex}set index(e){this.pIndex=e}get operations(){return this.pOperations}set operations(e){this.pOperations=e}get status(){return this.pStatus}set status(e){this.pStatus=e}checkStatus(){this.status===s.a.NOT_CHANGED&&(this.status=s.a.CHANGED)}}},YwZ5:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var s=i("fXoL"),a=i("s2Vo"),n=i("n2Fg"),o=i("7n1m"),r=i("ZRIf"),d=i("ofXK"),c=i("1kSV");function l(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",7),s.ec("click",(function(){return s.wc(e),s.gc(2).onSave()})),s.Nb(1,"i",8),s.Gc(2," \u0417\u0430\u043f\u0438\u0441 \u043a\u0430\u0442\u043e \u043f\u0440\u043e\u0435\u043a\u0442 "),s.Rb()}if(2&e){const e=s.gc(2);s.mc("disabled",!e.isFormValid)}}function h(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",3),s.Sb(1,"button",4),s.ec("click",(function(){return s.wc(e),s.gc().onCancel()})),s.Nb(2,"i",5),s.Gc(3," \u041e\u0442\u043a\u0430\u0437 "),s.Rb(),s.Ec(4,l,3,1,"button",6),s.Rb()}if(2&e){const e=s.gc();s.zb(4),s.mc("ngIf",!e.state||"E"===e.mode)}}function p(e,t){1&e&&(s.Sb(0,"h5",9),s.Gc(1,"\u0424\u041e\u0420\u041c\u0410\u0422\u0410 \u0415 \u041f\u041e\u0414\u041f\u0418\u0421\u0410\u041d\u0410!"),s.Rb())}function u(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",3),s.Sb(1,"button",10),s.ec("click",(function(){return s.wc(e),s.gc(2).onRejectTransition()})),s.Nb(2,"i",11),s.Gc(3," \u041e\u0442\u043a\u0430\u0436\u0438 "),s.Rb(),s.Sb(4,"button",12),s.ec("click",(function(){return s.wc(e),s.gc(2).onProcceedTransition()})),s.Nb(5,"i",13),s.Gc(6," \u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 "),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(4),s.mc("disabled",e.statusButtonsDisabled)}}function m(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",23),s.ec("click",(function(){return s.wc(e),s.gc(4).onDeleteSign()})),s.Nb(1,"i",24),s.Gc(2," \u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 "),s.Rb()}}function b(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",25),s.ec("click",(function(){return s.wc(e),s.gc(4).onEditWhenActualizing()})),s.Nb(1,"i",26),s.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 "),s.Rb()}}function g(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",27),s.ec("click",(function(){s.wc(e);const i=t.$implicit;return s.gc(4).onMakeTransition(i)})),s.Gc(1),s.Rb()}if(2&e){const e=t.$implicit,i=s.gc(4);s.mc("hidden",i.hiddenWhenInssued)("disabled",i.statusButtonsDisabled)("ngbTooltip",e.name),s.zb(1),s.Ic(" ",e.uiButtonLabel," ")}}function f(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",28),s.ec("click",(function(){return s.wc(e),s.gc(4).onSign()})),s.Nb(1,"i",29),s.Gc(2," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 "),s.Rb()}}function R(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",30),s.ec("click",(function(){return s.wc(e),s.gc(4).onEdit()})),s.Nb(1,"i",26),s.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),s.Rb()}}function S(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",31),s.ec("click",(function(){return s.wc(e),s.gc(4).onOpenHistory()})),s.Nb(1,"i",32),s.Gc(2," \u0418\u0441\u0442\u043e\u0440\u0438\u044f "),s.Rb()}}function I(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",33),s.ec("click",(function(){s.wc(e);const t=s.gc(4);return t.onMakeTransition(t.deleteState)})),s.Nb(1,"i",34),s.Gc(2," \u0418\u0437\u0442\u0440\u0438\u0439 "),s.Rb()}}function y(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,m,3,0,"button",16),s.Ec(2,b,3,0,"button",17),s.Ec(3,g,2,4,"button",18),s.Ec(4,f,3,0,"button",19),s.Ec(5,R,3,0,"button",20),s.Ec(6,S,3,0,"button",21),s.Ec(7,I,3,0,"button",22),s.Rb()),2&e){const e=s.gc(3);s.zb(1),s.mc("ngIf",e.stateNeedSign()&&e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.isInnerUser&&(e.state===e.M35_STATUS.ACTUALIZING||e.state===e.M35_STATUS.PROJECT_EMPLOYEE)),s.zb(1),s.mc("ngForOf",e.nextStates),s.zb(1),s.mc("ngIf",e.stateNeedSign()&&!e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.stateCanBeEdited()&&!e.isSigned&&!e.isInnerUser),s.zb(1),s.mc("ngIf",e.isStateWithHistory()),s.zb(1),s.mc("ngIf",!e.isSigned&&e.state===e.M35_STATUS.PROJECT&&!e.isInnerUser)}}function T(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",3),s.Sb(1,"button",14),s.ec("click",(function(){return s.wc(e),s.gc(2).onCancel()})),s.Nb(2,"i",15),s.Gc(3," \u041e\u0431\u0440\u0430\u0442\u043d\u043e "),s.Rb(),s.Ec(4,y,8,7,"div",2),s.Rb()}if(2&e){const e=s.gc(2);s.zb(4),s.mc("ngIf",e.isInUserRios||!e.isInUserRios&&2===e.roleId)}}function E(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,u,7,1,"div",0),s.Ec(2,T,5,1,"div",0),s.Rb()),2&e){const e=s.gc();s.zb(1),s.mc("ngIf",e.inTransitionProcess),s.zb(1),s.mc("ngIf",!e.inTransitionProcess)}}let D=(()=>{class e{constructor(e){this.crudService=e,this.M35_STATUS=a.a,this.saveEvent=new s.n,this.cancelEvent=new s.n,this.signEvent=new s.n,this.editEvent=new s.n,this.historyEvent=new s.n,this.deleteSignEvent=new s.n,this.transitionEvent=new s.n,this.procceedTransitionEvent=new s.n,this.rejectTransitionEvent=new s.n,this.actualizingEditEvent=new s.n}ngOnInit(){this.loadDeletedState(),(this.isSigned||this.isInnerUser||!this.stateNeedSign())&&this.loadNextStates()}ngOnChanges(){(this.isSigned&&this.isInnerUser||!this.stateNeedSign())&&this.loadNextStates()}loadNextStates(){this.aunId&&this.crudService.loadByParam(n.a,o.a.DOC_TRANSITION_URL,`${this.aunId}/auth?roleId=${this.roleId}`).subscribe(e=>{this.nextStates=e})}loadDeletedState(){this.crudService.loadById(n.a,n.a.publicUrl,288).subscribe(e=>{this.deleteState=e})}onSave(){this.saveEvent.emit()}onCancel(){this.cancelEvent.emit()}onSign(){this.signEvent.emit()}onEdit(){this.editEvent.emit()}onEditWhenActualizing(){this.actualizingEditEvent.emit()}onOpenHistory(){this.historyEvent.emit()}onDeleteSign(){this.deleteSignEvent.emit()}onMakeTransition(e){this.transitionEvent.emit(e)}onProcceedTransition(){this.procceedTransitionEvent.emit()}onRejectTransition(){this.rejectTransitionEvent.emit()}stateCanBeEdited(){return this.state===a.a.PROJECT||this.state===a.a.RETURNED_FOR_CORRECTION||this.state===a.a.IN_ACTUALIZING_PROCCESS}stateNeedSign(){return this.state===a.a.PROJECT||this.state===a.a.RETURNED_FOR_CORRECTION||this.state===a.a.IN_ACTUALIZING_PROCCESS||this.state===a.a.IN_TERMINATION_PROCCESS}isStateWithHistory(){return!1}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(r.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-m35-buttons-status-bar"]],inputs:{mode:"mode",state:"state",isFormValid:"isFormValid",isSigned:"isSigned",aunId:"aunId",roleId:"roleId",isInnerUser:"isInnerUser",inTransitionProcess:"inTransitionProcess",isInUserRios:"isInUserRios",statusButtonsDisabled:"statusButtonsDisabled",hiddenWhenInssued:"hiddenWhenInssued"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent",signEvent:"signEvent",editEvent:"editEvent",historyEvent:"historyEvent",deleteSignEvent:"deleteSignEvent",transitionEvent:"transitionEvent",procceedTransitionEvent:"procceedTransitionEvent",rejectTransitionEvent:"rejectTransitionEvent",actualizingEditEvent:"actualizingEditEvent"},features:[s.xb],decls:3,vars:3,consts:[["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-0",4,"ngIf"],["class","text-warning text-center",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-0"],["type","button","placement","left","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","class","btn btn-primary","placement","top","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",3,"disabled","click",4,"ngIf"],["type","button","placement","top","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-plus","text-warning"],[1,"text-warning","text-center"],["type","button","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0436\u0438","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-times","text-danger","mr-1"],["type","button","placement","top","ngbTooltip","\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-check","text-success","mr-1"],["type","button","placement","right","ngbTooltip","\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u043a\u044a\u043c \u043f\u0440\u0435\u0433\u043b\u0435\u0434","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","button","class","btn btn-primary mr-2","placement","left","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","container","body",3,"hidden","disabled","ngbTooltip","click",4,"ngFor","ngForOf"],["type","button","class","btn btn-primary mr-2","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","top","ngbTooltip","\u041e\u0442\u0432\u043e\u0440\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u0442\u0430","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","top","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",3,"click",4,"ngIf"],["type","button","placement","left","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-remove-format","mr-1","text-danger"],["type","button","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","top","container","body",1,"btn","btn-primary","mr-2",3,"hidden","disabled","ngbTooltip","click"],["type","button","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-pen-fancy","mr-1"],["type","button","placement","top","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],["type","button","placement","top","ngbTooltip","\u041e\u0442\u0432\u043e\u0440\u0438 \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u0442\u0430","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-history"],["type","button","placement","top","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary",3,"click"],[1,"far","fa-trash-alt","text-danger"]],template:function(e,t){1&e&&(s.Ec(0,h,5,1,"div",0),s.Ec(1,p,2,0,"h5",1),s.Ec(2,E,3,2,"div",2)),2&e&&(s.mc("ngIf",!("R"===t.mode)),s.zb(1),s.mc("ngIf",t.isSigned&&!t.isInnerUser&&t.stateNeedSign()),s.zb(1),s.mc("ngIf","R"===t.mode))},directives:[d.u,c.ab,d.t],styles:[""]}),e})()},eVAC:function(e,t,i){"use strict";i.d(t,"a",(function(){return re}));var s=i("mrSG"),a=i("fXoL"),n=i("CR6u"),o=i("4uOi"),r=i("yEue"),d=i("Hi78"),c=i("KQ7d"),l=i("ozDz"),h=i("pLGQ"),p=i("GJdz"),u=i("Z+Hd"),m=i("01dd"),b=i("MVXN"),g=i("xMVv");class f{constructor(e){e&&(this.pId=e.id,this.pTerCode=e.terCode,this.pDistEknm=e.distEknm,this.pPopEknm=e.popEknm,this.pAdderess=e.adderess,this.pMainActivity=e.mainActivity,this.pInstDesc=e.instDesc,this.pTreatingCode=e.treatingCode,this.pTreatingName=e.treatingName,this.pPermitStage=e.permitStage,this.pMercStageId=e.mercStageId,this.pStatus=this.id?u.a.NOT_CHANGED:u.a.NEW)}get id(){return this.pId}set id(e){this.pId=e}get mercStageId(){return this.pMercStageId}set mercStageId(e){this.pMercStageId=e}get permitStage(){return this.pPermitStage}set permitStage(e){this.pPermitStage=e}get treatingName(){return this.pTreatingName}set treatingName(e){this.pTreatingName=e,this.checkStatus()}get treatingCode(){return this.pTreatingCode}set treatingCode(e){this.pTreatingCode=e,this.checkStatus()}get instDesc(){return this.pInstDesc}set instDesc(e){this.pInstDesc=e,this.checkStatus()}get mainActivity(){return this.pMainActivity}set mainActivity(e){this.pMainActivity=e,this.checkStatus()}get adderess(){return this.pAdderess}set adderess(e){this.pAdderess=e,this.checkStatus()}get popEknm(){return this.pPopEknm}set popEknm(e){this.pPopEknm=e,this.checkStatus()}get distEknm(){return this.pDistEknm}set distEknm(e){this.pDistEknm=e,this.checkStatus()}get terCode(){return this.pTerCode}set terCode(e){this.pTerCode=e,this.checkStatus()}get status(){return this.pStatus}set status(e){this.pStatus=e}static parseTrnAuthorizationStagesModelToMercuryStageModel(e,t,i){return Object(s.a)(this,void 0,void 0,(function*(){const s=(yield e.loadByFind(g.a,g.a.publicUrl,{popEknm:t.popEknm}).toPromise()).pageContent[0],a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:t.id,terCode:s.terCode,distEknm:s.distEknm,popEknm:s.popEknm,adderess:t.address,permitStage:t.permitStage},(null==i?void 0:i.id)&&{mercStageId:i.id}),(null==i?void 0:i.mainActivity)&&{mainActivity:i.mainActivity}),(null==i?void 0:i.instDesc)&&{instDesc:i.instDesc}),(null==i?void 0:i.treatingCode)&&{treatingCode:i.treatingCode}),(null==i?void 0:i.treatingName)&&{treatingName:i.treatingName});return new f(a)}))}getTrnAuthorizationStagesModel(e){return new m.a({id:this.id,popEknm:this.popEknm,address:this.adderess,permitStage:this.permitStage,num:this.permitStage,isDepot:"N",typeOfUsage:"OTHER",aunId:e})}getTrnMercStageInfo(e){return new b.a({id:this.mercStageId,instDesc:this.instDesc,treatingName:this.treatingName,treatingCode:this.treatingCode,aseId:e,mainActivity:this.mainActivity})}checkStatus(){this.pStatus===u.a.NOT_CHANGED&&(this.pStatus=u.a.CHANGED)}}var R=i("r3es"),S=i("WCP0");class I{constructor(e){e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.stages=Object(R.a)(f,e.stages),this.organization=e.organization,this.regId=e.regId)}initialize(){this.contact=new c.a({}),this.mailingAddressData=new h.a({}),this.legalEntity=new p.a,this.organization=new S.a({}),this.orgAddressData=new h.a({}),this.stages=[]}}var y=function(e){return e.MERCURY_STORAGE="DTS",e.MERCURY_FORMATION="DEO",e.MERCURY_TRANSFORMATION="DTH",e}({}),T=i("9GxP"),E=i("aTmD"),D=i("4m0f"),v=i("ROb3"),C=i("sGcX"),O=i("ZRIf"),A=i("sPXw"),w=i("4XRX"),M=i("tyNb"),N=i("3Pt+"),x=i("BXZV"),k=i("1kSV"),F=i("d+ck"),V=i("QCcn"),z=i("QJFE"),_=i("LlKj"),P=i("ofXK"),j=i("Bz/w"),L=i("nI3r"),B=i("0Tjd"),W=i("sYmb");const G=["contactApp"],H=["address"],U=["form"],q=["actionList"],$=["errorLoadSwal"];function K(e,t){if(1&e&&(a.Sb(0,"div",19),a.Sb(1,"h6",20),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",21),a.Nb(5,"i",22),a.Nb(6,"i",23),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(5);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(3),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function Y(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",24),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const X=function(e){return{"mb-0":e}};function Q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",25),a.Sb(1,"div",26),a.Sb(2,"h6",27),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",28),a.Sb(6,"app-fi-select-dropdown",29),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",30),a.Nb(8,"i",22),a.Nb(9,"i",23),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.mc("ngClass",a.qc(11,X,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress"),""),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefs[6])("externalDataItems",e.addresses)("name",e.formDefs[6].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function Z(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",31,32),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function J(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",25),a.Sb(1,"div",26),a.Sb(2,"h6",27),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",28),a.Sb(5,"app-fi-select-dropdown",33),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",30),a.Nb(7,"i",22),a.Nb(8,"i",23),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.mc("ngClass",a.qc(8,X,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefs[4])("externalDataItems",e.contacts)("name",e.formDefs[4].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",34,35),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}function te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",19),a.Sb(1,"h6",20),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",36),a.ec("click",(function(){a.wc(e);const t=a.gc(),i=a.vc(5);return t.onAddStage(),i.expand("stage")})),a.Nb(6,"i",37),a.Rb(),a.Sb(7,"button",21),a.Nb(8,"i",22),a.Nb(9,"i",23),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(5);a.zb(2),a.Hc(a.ic(3,4,"applications.mercury.thirdStageHeader")),a.zb(3),a.mc("hidden","R"===e.mode),a.zb(3),a.mc("hidden",t.isExpanded("stage")),a.zb(1),a.mc("hidden",!t.isExpanded("stage"))}}function ie(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-mercury-stage",41),a.ec("deleteRow",(function(t){return a.wc(e),a.gc(3).onDeleteStage(t)}))("formStatusValidChanged",(function(t){a.wc(e);const i=a.gc().index;return a.gc(2).onStagesValidityChange(t,i)})),a.Rb()}if(2&e){const e=a.gc(),t=e.$implicit,i=e.index,s=a.gc(2);a.mc("mode",s.mode)("model",t)("index",i)("isFull",s.isFullStage)}}function se(e,t){1&e&&a.Nb(0,"hr",42)}function ae(e,t){if(1&e&&(a.Sb(0,"div"),a.Ec(1,ie,1,4,"app-mercury-stage",39),a.Ec(2,se,1,0,"hr",40),a.Rb()),2&e){const e=t.$implicit;a.zb(1),a.mc("ngIf","DELETE"!==e.status),a.zb(1),a.mc("ngIf","DELETE"!==e.status)}}function ne(e,t){if(1&e&&a.Ec(0,ae,3,2,"div",38),2&e){const e=a.gc();a.mc("ngForOf",e.application.stages)}}const oe=function(){return["stage"]};let re=(()=>{class e{constructor(e,t,i,s,o){this.mmSpinnerService=e,this.crudService=t,this.mroDefsGenerator=i,this.sessionInfoService=s,this.router=o,this.CONTACT_REG_TYPE="R",this.ADDRESS_ORN_TYPE="D",this.VALID="VALID",this.ERROR="error",this.isStagePanelToggled=!1,this.model={},this.formDefs=[],this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.contacts=[],this.addresses=[],this.formValidStatus="INVALID",this.statusSubscriber=null,this.isActionListReady=!1,this.isActionListSuccess=!1,this.mode=n.a.READ,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authSaver=new r.a(t),this.authLoader=new d.a(t)}ngOnInit(){this.loadDefs(),this.prepareApplication(),this.setFullStage(),this.handleMode(),this.type&&this.setRegId()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(e){var t,i,s,a,n,o,r,d;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(s=e.mode)||void 0===s?void 0:s.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(n=e.type)||void 0===n?void 0:n.firstChange)===(null===(o=e.type)||void 0===o?void 0:o.previousValue)&&(null===(r=e.aunId)||void 0===r?void 0:r.firstChange)===(null===(d=e.aunId)||void 0===d?void 0:d.previousValue)||(this.loadDefs(),this.prepareApplication(),this.setFullStage(),this.handleMode(),this.type&&this.setRegId())}handleMode(){switch(this.mode){case n.a.READ:this.disableFields(),this.isFormLoading.emit(!0),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}));break;case n.a.NEW:this.enableFields(),this.loadAuthBasicData();break;case n.a.EDIT:this.enableFields(),this.isFormLoading.emit(!0),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}))}}loadTcRegByCode(e){return this.crudService.loadByFind(D.a,D.a.publicUrl,{code:e}).toPromise()}loadDefs(){this.formDefs=this.mroDefsGenerator.getDefinitions()}loadContactsByOrnId(e){this.crudService.loadByParam(c.a,c.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===n.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(l.a,l.a.nonPrimaryAddressesUrl,`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===n.a.EDIT&&this.checkAddress(),this.addresses.forEach(e=>{if(e.type!==this.ADDRESS_ORN_TYPE)return e})})}onHeadquartersValidityChange(e){this.headquartersValidity=e===this.VALID,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity=e===this.VALID,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity=e===this.VALID,this.setInnerFormsValidity()}onStagesValidityChange(e,t){this.model.stagesValidity[t]=e===this.VALID,this.setInnerFormsValidity()}areStagesValid(){if(!this.model.stagesValidity||0===this.model.stagesValidity.length)return!0;for(const e of this.model.stagesValidity)if(!e)return!1;return!0}setInnerFormsValidity(){this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&this.areStagesValid(),this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}onActionListClose(){this.responseAunId&&this.router.navigate([`${v.a.APPLICATIONS}/${v.a.AUTH_READ}`,this.type,this.responseAunId])}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new c.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(s.a)(this,void 0,void 0,(function*(){if(e){const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new h.a({}),this.addressForm.disableNonEmptyFields=!1}))}redirectOnError(){this.router.navigate([`${v.a.APPLICATIONS}`])}onAddStage(){null==this.application.stages&&(this.application.stages=[],this.model.stagesValidity=[]);const e=this.getNextStagePermit();this.application.stages.push(new f({permitStage:e})),this.model.stagesValidity.push(!1),this.areStagesValid()}onDeleteStage(e){null!=this.application.stages&&(this.application.stages[e].status=u.a.DELETED,this.model.stagesValidity[e]=!0,this.application.stages.length||this.areStagesValid())}getNextStagePermit(){if(null==this.application)return;if(null==this.application.stages||0===this.application.stages.length)return 1;let e=1;return this.application.stages.forEach(t=>{t&&(e=t.pPermitStage>=e?t.pPermitStage+1:e)}),e}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadAuthBasicData(){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.getUserOrganization();this.application.organization=e,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(e.id),this.fillLegalEntityData(e)}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat?e.bulstat:e.egn,legalEntity:e.name}}getUserOrganization(){return Object(s.a)(this,void 0,void 0,(function*(){return this.sessionInfoService.getOrganization()}))}setFullStage(){this.isFullStage=this.type!==o.a.MERCURY_STORAGE}prepareApplication(){this.application=new I({}),this.application.initialize(),this.model.stagesValidity=[]}disableFields(){this.formDefs.forEach(e=>{e.isDisabled=!0}),this.model.responsibility=!0}enableFields(){this.formDefs.forEach(e=>{e.isDisabled=!1}),this.mode===n.a.NEW&&(this.model.responsibility=!1,this.model.contactPerson=null,this.model.mailingAddress=null),this.mode===n.a.EDIT&&(this.model.responsibility=!0)}getRegisterId(){let e=null;switch(this.type){case o.a.MERCURY_TRANSFORMATION:e=y.MERCURY_TRANSFORMATION;break;case o.a.MERCURY_FORMATION:e=y.MERCURY_FORMATION;break;case o.a.MERCURY_STORAGE:e=y.MERCURY_STORAGE}return this.loadTcRegByCode(e)}setRegId(){return Object(s.a)(this,void 0,void 0,(function*(){const e=(yield this.getRegisterId()).pageContent[0];this.application.regId=null==e?void 0:e.id}))}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const t=yield this.authLoader.loadAuthorizationById(e);this.application.id=t.id,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.mode===n.a.EDIT&&this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id);let i=[];if(this.type===o.a.MERCURY_STORAGE){i=(yield this.authLoader.loadStages(this.application.id)).pageContent;for(const e of i){const t=yield f.parseTrnAuthorizationStagesModelToMercuryStageModel(this.crudService,e,void 0);this.application.stages.push(t)}}else{i=yield this.authLoader.loadStagesWithMercInfo(this.application.id);for(const e of i){const t=yield f.parseTrnAuthorizationStagesModelToMercuryStageModel(this.crudService,e.stage,e.merc_stage_info);this.application.stages.push(t)}}}catch(t){console.error(t),this.errorLoadSwal.fire()}}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){this.prepareSaveActions(),this.actionList.open();const e=yield this.authSaver.saveMercuryAuthorization(this.application,this.actions,this.type);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareSaveActions(){var e,t;return Object(s.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",E.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",E.a.WORKING,!1)),this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",E.a.WORKING,!1)),(null===(t=null===(e=this.application)||void 0===e?void 0:e.stages)||void 0===t?void 0:t.length)>0&&this.application.stages.forEach((e,t)=>{e.pStatus!==u.a.DELETED&&this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.pPermitStage}`,E.a.WORKING,!1))}),this.actionList.actionList=this.actions,this.isActionListReady=!1}))}onEdit(){return Object(s.a)(this,void 0,void 0,(function*(){this.prepareEditActions(),this.actionList.open();const e=yield this.authSaver.editMercuryAuthorization(this.application,this.type,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareEditActions(){var e,t;return Object(s.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",E.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",E.a.WORKING,!1)),this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",E.a.WORKING,!1)),(null===(t=null===(e=this.application)||void 0===e?void 0:e.stages)||void 0===t?void 0:t.length)>0&&this.application.stages.forEach((e,t)=>{this.actions.push(new T.a(e.status===u.a.DELETED?`\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.pPermitStage}`:e.status===u.a.NEW?`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.pPermitStage}`:`\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.pPermitStage}`,E.a.WORKING,!1))}),this.actionList.actionList=this.actions,this.isActionListReady=!1}))}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(C.a),a.Mb(O.a),a.Mb(A.a),a.Mb(w.a),a.Mb(M.c))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-mercury"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(G,!0),a.Nc(H,!0),a.Nc(U,!0),a.Nc(q,!0),a.Nc($,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.errorLoadSwal=i.first))},inputs:{mode:"mode",type:"type",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:24,vars:11,consts:[[1,"container-fluid","p-3"],["novalidate","",1,"was-validated"],["form","ngForm"],[3,"model"],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],["id","stage"],[1,"mt-3"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",3,"showConfirmButton","icon","confirm"],["errorLoadSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430","container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"hidden","click"],[1,"fas","fa-plus"],[4,"ngFor","ngForOf"],[3,"mode","model","index","isFull","deleteRow","formStatusValidChanged",4,"ngIf"],["class","border border-primary",4,"ngIf"],[3,"mode","model","index","isFull","deleteRow","formStatusValidChanged"],[1,"border","border-primary"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Nb(3,"app-basic-app-info",3),a.Sb(4,"ngb-accordion",4,5),a.Sb(6,"ngb-panel",6),a.Ec(7,K,7,5,"ng-template",7),a.Ec(8,Y,1,3,"ng-template",8),a.Rb(),a.Sb(9,"ngb-panel",9),a.Ec(10,Q,10,13,"ng-template",7),a.Ec(11,Z,2,3,"ng-template",8),a.Rb(),a.Sb(12,"ngb-panel",10),a.Ec(13,J,9,10,"ng-template",7),a.Ec(14,ee,2,2,"ng-template",11),a.Rb(),a.Sb(15,"ngb-panel",12),a.Ec(16,te,10,6,"ng-template",7),a.Ec(17,ne,1,1,"ng-template",8),a.Rb(),a.Rb(),a.Sb(18,"div",13),a.Sb(19,"app-fi-input-checkbox",14),a.ec("ngModelChange",(function(e){return t.model.responsibility=e})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(20,"app-action-tasks-list",15,16),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(22,"swal",17,18),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb()),2&e&&(a.zb(3),a.mc("model",t.application.legalEntity),a.zb(1),a.mc("destroyOnHide",!1)("activeIds",a.pc(10,oe)),a.zb(15),a.mc("ngModel",t.model.responsibility)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),a.zb(1),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("showConfirmButton",!0)("icon",t.ERROR))},directives:[N.D,N.p,N.q,x.a,k.a,k.I,k.K,k.J,F.a,N.o,N.r,V.a,z.a,k.M,_.a,P.r,j.a,L.a,k.ab,P.t,P.u,B.a],pipes:[W.d],styles:["[_nghost-%COMP%]     .accordion>div>#contact-person-header.card-header, [_nghost-%COMP%]     .accordion>div>#mailing-address-header.card-header{padding-bottom:0}[_nghost-%COMP%]     #accordion>div>div.card-header{padding:.5rem}[_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:1rem}"]}),e})()},jVzX:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.code=e.code,this.ewc=e.ewc,this.ewc2=e.ewc2,this.hazardous=e.hazardous,this.nameBg=e.nameBg,this.nameEn=e.nameEn,this.wtCode=e.wtCode)}get code(){return this.pCode}set code(e){this.pCode=e}get ewc(){return this.pEwc}set ewc(e){this.pEwc=e}get ewc2(){return this.pEwc2}set ewc2(e){this.pEwc2=e}get hazardous(){return this.pHazardous}set hazardous(e){this.pHazardous=e}get nameBg(){return this.pNameBg}set nameBg(e){this.pNameBg=e}get nameEn(){return this.pNameEn}set nameEn(e){this.pNameEn=e}get wtCode(){return this.pWtCode}set wtCode(e){this.pWtCode=e}get label(){return`${this.ewc}${this.hazardous} - ${this.nameBg}`}}return e.url="VwEwcWasteTypes",e.urlPublic="Public/VwEwcWasteTypes",Object(s.b)([Object(a.b)({alias:"code"})],e.prototype,"pCode",void 0),Object(s.b)([Object(a.b)({alias:"ewc"})],e.prototype,"pEwc",void 0),Object(s.b)([Object(a.b)({alias:"ewc2"})],e.prototype,"pEwc2",void 0),Object(s.b)([Object(a.b)({alias:"hazardous"})],e.prototype,"pHazardous",void 0),Object(s.b)([Object(a.b)({alias:"nameBg"})],e.prototype,"pNameBg",void 0),Object(s.b)([Object(a.b)({alias:"nameEn"})],e.prototype,"pNameEn",void 0),Object(s.b)([Object(a.b)({alias:"wtCode"})],e.prototype,"pWtCode",void 0),e})()},jmsH:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var s=i("fXoL"),a=i("F7pt"),n=i("0Uwp"),o=i("SkKo"),r=i("CR6u"),d=i("EcjI"),c=i("797o"),l=i("pVVs"),h=i("ZRIf"),p=i("3Pt+"),u=i("MxKE"),m=i("ofXK"),b=i("QJFE"),g=i("Bz/w"),f=i("TTlI");const R=["noValidIndividual"],S=["form"];function I(e,t){if(1&e){const e=s.Tb();s.Sb(0,"app-fi-select-dropdown",11),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).oop=t}))("valueEmitter",(function(t){return s.wc(e),s.gc(2).selectOpp(t)})),s.Rb()}if(2&e){const e=s.gc(2);s.mc("ngModel",e.oop)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)("externalDataItems",e.oopOrgModels)}}function y(e,t){if(1&e){const e=s.Tb();s.Sb(0,"app-fi-input-text",12),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).model.oop.label=t})),s.Rb()}if(2&e){const e=s.gc(2);s.mc("ngModel",e.model.oop.label)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)}}function T(e,t){if(1&e&&(s.Sb(0,"div",8),s.Ec(1,I,1,4,"app-fi-select-dropdown",9),s.Ec(2,y,1,3,"app-fi-input-text",10),s.Rb()),2&e){const e=s.gc();s.zb(1),s.mc("ngIf","R"!==e.mode),s.zb(1),s.mc("ngIf","R"===e.mode)}}let E=(()=>{class e{constructor(e){this.crudService=e,this.MRO_FULFILLMENT="MRO_FULFILLMENT",this.model=new c.a,this.oopOrgModels=[],this.formStatusValidChanged=new s.n,this.formDefs=[],this.mroFulfillments=[],this.oopSubTypes=[],this.statusSubscriber=null}ngOnChanges(){this.loadFormDef(),this.currType!==this.type&&(this.currType=this.type);let e=!0,t=!1;this.mode===r.a.READ?(null!==this.model.mroFulfillment&&this.checkFulfillment(),e=!1,t=!0):this.mode!==r.a.NEW&&this.mode!==r.a.EDIT||(null!==this.model.mroFulfillment&&this.checkFulfillment(),e=!0,t=!1),Object(d.b)(this.formDefs,e),Object(d.c)(this.formDefs,t),this.checkOOp()}ngOnInit(){this.loadMroFulfullments(),this.loadFormDef();let e=!0,t=!1;this.currType=this.type,this.mode===r.a.READ&&(e=!1,t=!0,this.formDefs[1].helpText=null),Object(d.b)(this.formDefs,e),Object(d.c)(this.formDefs,t),this.checkOOp()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}loadFormDef(){this.formDefs=[];const e=a.a.createDefaultRadioGroupDef();e.domId="mro_fulfillment",e.labelText="",e.helpText="",e.isRequired=!0,this.formDefs.push(e);const t=n.a.createDefaultDropDownFormItemDef();t.domId="system",t.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u043e\u043b\u0435\u043a\u0442\u0438\u0432\u043d\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u0430",t.labelText="",t.isRequired=!0,this.formDefs.push(t)}loadMroFulfullments(){this.crudService.loadByParam(o.a,o.a.publicUrlDomain,this.MRO_FULFILLMENT).subscribe(e=>{this.mroFulfillments=e})}isIndividualValid(){this.crudService.loadSingleObject(Boolean,l.a.urlCheckIndividuality,`${this.indId}/${this.ornId}`).subscribe(e=>{e.valueOf()||(this.model.mroFulfillment=null,this.model.oop=null,this.oop=null,this.mroFulfillments.forEach(e=>{e.isSelected=!1}),this.noValidIndividual.fire())})}onCheckFulfillment(e){"1"===e.code&&(this.mapRegAndIndId(),this.isIndividualValid())}selectOpp(e){this.model.oop=e}checkOOp(){var e;null===(e=this.oopOrgModels)||void 0===e||e.forEach((e,t)=>{var i;(null===(i=this.model.oop)||void 0===i?void 0:i.id)===(null==e?void 0:e.id)&&(this.oop=this.oopOrgModels[t])})}checkFulfillment(){this.mroFulfillments.forEach(e=>{e.code===this.model.mroFulfillment.code&&(e.isSelected=!0)}),this.formDefs[1].helpText=null}mapRegAndIndId(){switch(this.regId){case 9:this.indId=35;break;case 10:this.indId=34;break;case 11:this.indId=36;break;case 12:this.indId=37;break;case 13:this.indId=32}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(h.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-mro-fulfillment-form"]],viewQuery:function(e,t){var i;1&e&&(s.Nc(R,!0),s.Nc(S,!0)),2&e&&(s.uc(i=s.fc())&&(t.noValidIndividual=i.first),s.uc(i=s.fc())&&(t.form=i.first))},inputs:{mode:"mode",regId:"regId",ornId:"ornId",model:"model",type:"type",oopOrgModels:"oopOrgModels"},outputs:{formStatusValidChanged:"formStatusValidChanged"},features:[s.xb],decls:8,vars:6,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row",2,"min-height","7.8rem"],[1,"col-lg-4"],["labelFieldName","description","valueFieldName","code",3,"source","ngModel","formItemDef","name","ngModelChange","valueEmitter"],["class","col-lg-5",4,"ngIf"],["title","\u0412\u0438\u0435 \u043d\u0435 \u043f\u0440\u0438\u0442\u0435\u0436\u0430\u0432\u0430\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0437\u0430 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u043d\u043e \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f\u0442\u0430 \u0441\u0438. \u041c\u043e\u043b\u044f \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0434\u0440\u0443\u0433\u0430 \u043e\u043f\u0446\u0438\u044f.","icon","warning",3,"showConfirmButton"],["noValidIndividual",""],[1,"col-lg-5"],["labelFieldName","label",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange","valueEmitter",4,"ngIf"],[3,"ngModel","formItemDef","name","ngModelChange",4,"ngIf"],["labelFieldName","label",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange","valueEmitter"],[3,"ngModel","formItemDef","name","ngModelChange"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"app-fi-input-radio-group",4),s.ec("ngModelChange",(function(e){return t.model.mroFulfillment=e}))("valueEmitter",(function(e){return t.onCheckFulfillment(e)})),s.Rb(),s.Rb(),s.Ec(5,T,3,2,"div",5),s.Rb(),s.Rb(),s.Nb(6,"swal",6,7)),2&e&&(s.zb(4),s.mc("source",t.mroFulfillments)("ngModel",t.model.mroFulfillment)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),s.zb(1),s.mc("ngIf",!!t.model.mroFulfillment&&"2"===t.model.mroFulfillment.code),s.zb(1),s.mc("showConfirmButton",!0))},directives:[p.D,p.p,p.q,u.a,p.o,p.r,m.u,b.a,g.a,f.a],styles:[""]}),e})()},"mXJ+":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e.SILENT_AGREEMENT="TB_STATE:09",e.REJECTED="TB_STATE:08",e.RETURNED_FOR_CORRECTION="TB_STATE:07",e.WRITTEN_OFF="TB_STATE:06",e.ENTERED="TB_STATE:00",e.WRITE_OFF="TB_STATE:04",e.ACTUALIZE="TB_STATE:03",e.CORRECTION="TB_STATE:02",e.ENTRY="TB_STATE:05",e.PROJECT="TB_STATE:10",e.ACTUALIZED="TB_STATE:11",e.ACTUALIZING_PROCESS="TB_STATE:12",e.IN_SIGNING_PROCESS="TB_STATE:13",e.DELETED="TB_STATE:99",e.PROJECT_SERVANT="TB_STATE:90",e}({})},pHeu:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("F7pt"),a=i("0Uwp"),n=i("WCP0"),o=i("YjFG"),r=i("ra4D"),d=i("CR6u"),c=i("fXoL");let l=(()=>{class e{constructor(){}getDistributeComponentDefinitions(){const e=[],t=a.a.createDefaultDropDownFormItemDef();t.domId="servents",t.labelText="\u0421\u041b\u0423\u0416\u0418\u0422\u0415\u041b",t.helpText=null,t.placeHolderText="\u0421\u041b\u0423\u0416\u0418\u0422\u0415\u041b",t.isRequired=!0,e.push(t);const i=new s.a;i.domId="nameItem",i.labelText="\u0418\u043c\u0435",i.helpText="",i.isRequired=!1,i.isDisabled=!0,e.push(i);const n=new s.a;n.domId="surnameItem",n.labelText="\u041f\u0440\u0435\u0437\u0438\u043c\u0435",n.helpText="",n.isRequired=!1,n.isDisabled=!0,e.push(n);const o=new s.a;o.domId="lastnameFormItem",o.labelText="\u0424\u0430\u043c\u0438\u043b\u0438\u044f",o.helpText="",o.isRequired=!1,o.isDisabled=!0,e.push(o);const r=new s.a;r.domId="emailFormItem",r.labelText="E-MAIL",r.helpText="",r.isRequired=!1,r.isDisabled=!0,e.push(r);const d=new s.a;d.domId="riosvItem",d.labelText="\u0420\u0418\u041e\u0421\u0412",d.helpText="",d.isRequired=!1,d.isDisabled=!0,e.push(d);const c=new s.a;return c.domId="comment",c.labelText=null,c.helpText=null,c.placeHolderText="\u041a\u041e\u041c\u0415\u041d\u0422\u0410\u0420",c.isRequired=!1,c.isDisabled=!1,e.push(c),e}getTraderBrokerDefs(){const e=[],t=s.a.createDefaultCheckboxGroupDef();t.domId="typeN2",t.labelText="\u0417\u0410\u042f\u0412\u042f\u0412\u0410\u041c \u041a\u0410\u0422\u041e: ",t.helpText="",e.push(t);const i=s.a.createDefaultFileBrowseDef();i.domId="file",i.labelText="\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422 \u0417\u0410 \u041f\u041b\u0410\u0422\u0415\u041d\u0410 \u0422\u0410\u041a\u0421\u0410: ",i.helpText="",i.isRequired=!1,e.push(i);const n=new s.a;n.domId="responsibility",n.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",n.helpText="",n.isRequired=!0,e.push(n);const o=new s.a;o.domId="isNotLinked",o.labelText="\u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041c, \u0427\u0415 \u041d\u0415 \u0421\u042a\u041c \u0421\u0412\u042a\u0420\u0417\u0410\u041d\u041e \u041b\u0418\u0426\u0415 \u0421 \u041b\u0418\u0426\u0415, \u041d\u0410 \u041a\u041e\u0415\u0422\u041e \u0415 \u041e\u0422\u041a\u0410\u0417\u0410\u041d\u041e \u0412\u041f\u0418\u0421\u0412\u0410\u041d\u0415 \u0412 \u0420\u0415\u0413\u0418\u0421\u0422\u042a\u0420\u0410, \u0418\u041b\u0418 \u0421 \u041b\u0418\u0426\u0415, \u041d\u0410 \u041a\u041e\u0415\u0422\u041e \u0415 \u041f\u0420\u0415\u041a\u0420\u0410\u0422\u0415\u041d\u0410 \u0420\u0415\u0413\u0418\u0421\u0422\u0410\u0426\u0418\u042f\u0422\u0410 \u041f\u0420\u0415\u0414\u0418 \u0418\u0417\u0422\u0418\u0427\u0410\u041d\u0415\u0422\u041e \u041d\u0410 \u0415\u0414\u041d\u0410 \u0413\u041e\u0414\u0418\u041d\u0410 \u041e\u0422 \u0412\u041b\u0418\u0417\u0410\u041d\u0415\u0422\u041e \u0412 \u0421\u0418\u041b\u0410 \u041d\u0410 \u0420\u0415\u0428\u0415\u041d\u0418\u0415\u0422\u041e \u0417\u0410 \u041e\u0422\u041a\u0410\u0417 \u0418\u041b\u0418 \u041f\u0420\u0415\u041a\u0420\u0410\u0422\u042f\u0412\u0410\u041d\u0415 \u041d\u0410 \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f",o.helpText="",o.isRequired=!0,e.push(o);const r=new s.a;r.domId="isElectronicAcc",r.labelText="\u0421 \u041d\u0410\u0421\u0422\u041e\u042f\u0429\u041e\u0422\u041e \u0418\u0421\u041a\u0410\u041d\u0415 \u0416\u0415\u041b\u0410\u042f \u0414\u0410 \u041c\u0418 \u0411\u042a\u0414\u0415 \u0417\u0410\u0412\u0415\u0420\u0415\u041d\u0410 \u0417\u0410 \u0412\u041e\u0414\u0415\u041d\u0415 \u0421\u042a\u041e\u0422\u0412\u0415\u0422\u041d\u0410\u0422\u0410 \u041e\u0422\u0427\u0415\u0422\u041d\u0410 \u041a\u041d\u0418\u0413\u0410.",r.helpText="",e.push(r);const d=a.a.createDefaultDropDownFormItemDef();d.domId="contact",d.labelText=null,d.isRequired=!1,d.helpText=null,d.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",e.push(d);const c=a.a.createDefaultDropDownFormItemDef();c.domId="address",c.labelText=null,c.isRequired=!1,c.helpText=null,c.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",e.push(c);const l=s.a.createDefaultFileBrowseDef();return l.domId="sign",l.labelText="\u0415\u041b\u0415\u041a\u0422\u0420\u041e\u041d\u0415\u041d \u041f\u041e\u0414\u041f\u0418\u0421 \u0417\u0410 \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410: ",l.helpText=null,l.isRequired=!1,e.push(l),e}getDynamicRowTBDef(e,t){const i=a.a.createDefaultDropDownFormItemDef();return i.domId="operation_"+e,i.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u043e\u0434",i.labelText=null,i.isRequired=!1,i.dataSource="Public/Ewc",i.resultDataType=o.a,i.searchFields=[new r.a("ewc","s")],t===d.a.READ&&(i.isRequired=!1,i.isDisabled=!0),i}getTiresDefs(){const e=[],t=new s.a;return t.domId="responsibility",t.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",t.helpText="",t.isRequired=!0,e.push(t),e}getDynamicRowTrademarksDef(e){const t=s.a.createDefaultTextFormItemDef();return t.domId="trademark_"+e,t.placeHolderText="",t.labelText="",t.isRequired=!0,t}getOilsDefs(){const e=[],t=s.a.createDefaultCheckboxGroupDef();t.domId="oil_types",t.labelText="",t.helpText="",t.isRequired=!0,e.push(t);const i=new s.a;return i.domId="responsibility",i.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",i.helpText="",i.isRequired=!0,e.push(i),e}getServiceAuthFormDefinitions(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="by-prod-type",t.placeHolderText="\u0412\u0438\u0434 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442",t.labelText="\u0412\u0438\u0434 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442",t.isRequired=!0,e.push(t);const i=s.a.createDefaultDateFormItemDef();i.domId="date",i.placeHolderText="",i.labelText="\u0414\u0430\u0442\u0430",i.isRequired=!0,e.push(i);const o=a.a.createDefaultDropDownFormItemDef();o.domId="waste-code",o.labelText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",o.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",o.placeHolderText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",o.dataSource="TrnOrganizations",o.resultDataType=n.a,o.searchFields=[new r.a("bulstat","s")],o.isRequired=!0,e.push(o);const d=s.a.createDefaultEIKFormItemDef();d.domId="eik",d.placeHolderText="\u0415\u0418\u041a",d.labelText="\u0415\u0418\u041a",d.isRequired=!0,e.push(d);const c=s.a.createDefaultTextFormItemDef();c.domId="firm",c.placeHolderText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",c.labelText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",c.isRequired=!0,e.push(c);const l=a.a.createDefaultDropDownFormItemDef();l.domId="contact",l.labelText=null,l.helpText=null,l.placeHolderText="\u0418\u0437\u0431\u043e\u0440 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",l.isRequired=!1,e.push(l);const h=a.a.createDefaultDropDownFormItemDef();return h.domId="address",h.labelText=null,h.helpText=null,h.placeHolderText="\u0418\u0437\u0431\u043e\u0440 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",h.isRequired=!1,e.push(h),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"q/yY":function(e,t,i){"use strict";i.d(t,"a",(function(){return ve}));var s=i("mrSG"),a=i("fXoL"),n=i("WCP0"),o=i("CR6u"),r=i("Hi78"),d=i("KQ7d"),c=i("ozDz"),l=i("pLGQ"),h=i("pVVs"),p=i("GJdz"),u=i("KQW5"),m=i("YjFG"),b=i("r3es");class g{constructor(e){e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.paymentDocument=e.paymentDocument,this.organization=e.organization,this.isElectronicAcc=e.isElectronicAcc,this.traderCodes=e.traderCodes,this.brokerCodes=e.brokerCodes,this.eSign=e.eSign,this.trnStageWasteOperationsTraderCodes=Object(b.a)(m.a,e.trnStageWasteOperationsBrokerCodes),this.trnStageWasteOperationsBrokerCodes=Object(b.a)(m.a,e.trnStageWasteOperationsBrokerCodes),this.brokerAseId=e.brokerAseId,this.traderAseId=e.traderAseId,this.regCode=e.regCode,this.regId=e.regId)}static initialize(){const e=new g({});return e.regCode=null,e.regId=null,e.organization=new n.a({}),e.contact=new d.a({}),e.mailingAddressData=new l.a({}),e.legalEntity=new p.a,e.orgAddressData=new l.a({}),e.traderCodes=[],e.brokerCodes=[],e.paymentDocument=new u.a,e.eSign=new u.a,e}}class f{constructor(){this.toInsertTraderCodes=[],this.toEditTraderCodes=[],this.toDeleteTraderCodes=[],this.toInsertBrokerCodes=[],this.toEditBrokerCodes=[],this.toDeleteBrokerCodes=[],this.isNewPaymentDocument=!1}hasTraderCodes(){return this.toInsertTraderCodes.length>0||this.toEditTraderCodes.length>0||this.toDeleteTraderCodes.length>0}hasBrokerCodes(){return this.toInsertBrokerCodes.length>0||this.toEditBrokerCodes.length>0||this.toDeleteBrokerCodes.length>0}}var R=i("AHL5"),S=i("9GxP"),I=i("aTmD"),y=i("4uOi"),T=i("yEue"),E=i("ROb3"),D=i("u1cU"),v=i("4m0f"),C=i("tyNb"),O=i("pHeu"),A=i("ZRIf"),w=i("sGcX"),M=i("4XRX"),N=i("3Pt+"),x=i("ofXK"),k=i("BXZV"),F=i("1kSV"),V=i("d+ck"),z=i("QCcn"),_=i("QJFE"),P=i("LlKj"),j=i("Bz/w"),L=i("nI3r"),B=i("Mtn9"),W=i("sYmb");const G=["contactApp"],H=["address"],U=["form"],q=["actionList"],$=["errorLoadSwal"],K=["noMoreTBSwal"];function Y(e,t){if(1&e){const e=a.Tb();a.Sb(0,"label",28),a.Sb(1,"input",29),a.ec("click",(function(){a.wc(e);const i=t.$implicit,s=a.gc();return s.onCheckType(i),s.checkTypesValidity()})),a.Rb(),a.Gc(2),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc();a.mc("for",i),a.zb(1),a.mc("id",i)("checked",e.isSelected)("disabled","R"===s.mode),a.zb(1),a.Ic(" ",e.label," ")}}function X(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"h6",31),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",32),a.ec("click",(function(){return a.wc(e),a.gc().copyAddress()})),a.Gc(6," \u041a\u043e\u043f\u0438\u0440\u0430\u0439 \u0430\u0434\u0440\u0435\u0441\u0430 "),a.Rb(),a.Sb(7,"button",33),a.Nb(8,"i",34),a.Nb(9,"i",35),a.Rb(),a.Rb(),a.Rb()}if(2&e){a.gc();const e=a.vc(9);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(6),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function Q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",36),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const Z=function(e){return{"mb-0":e}};function J(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",37),a.Sb(1,"div",38),a.Sb(2,"h6",39),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",40),a.Sb(6,"app-fi-select-dropdown",41),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",42),a.Nb(8,"i",34),a.Nb(9,"i",35),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(9);a.zb(2),a.mc("ngClass",a.qc(11,Z,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress")," "),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefs[6])("externalDataItems",e.addresses)("name",e.formDefs[6].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",43,44),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",37),a.Sb(1,"div",38),a.Sb(2,"h6",39),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",40),a.Sb(5,"app-fi-select-dropdown",45),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",42),a.Nb(7,"i",34),a.Nb(8,"i",35),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(9);a.zb(2),a.mc("ngClass",a.qc(8,Z,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefs[5])("externalDataItems",e.contacts)("name",e.formDefs[5].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function ie(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",46,47),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}function se(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",49),a.Sb(1,"span"),a.Sb(2,"small"),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"button",50),a.ec("click",(function(){return a.wc(e),a.gc(2).onTransferTraderToBroker()})),a.Sb(6,"small"),a.Gc(7),a.hc(8,"translate"),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.mc("hidden","R"===e.mode),a.zb(3),a.Hc(a.ic(4,4,"applications.trader.transfer-broker")),a.zb(2),a.mc("disabled",!e.application.traderCodes||e.application.traderCodes.length<1),a.zb(2),a.Hc(a.ic(8,6,"applications.trader.transfer"))}}function ae(e,t){if(1&e&&(a.Sb(0,"div",30),a.Sb(1,"h6",31),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Ec(4,se,9,8,"div",48),a.Sb(5,"div"),a.Sb(6,"button",33),a.Nb(7,"i",34),a.Nb(8,"i",35),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.gc(),t=a.vc(9);a.zb(2),a.Hc(a.ic(3,4,"applications.trader.code-trader")),a.zb(2),a.mc("ngIf","TB"===e.application.regCode),a.zb(3),a.mc("hidden",t.isExpanded("waste-group-trader")),a.zb(1),a.mc("hidden",!t.isExpanded("waste-group-trader"))}}function ne(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",54),a.Sb(2,"app-fi-select-dropdown",55),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).selectedTraderCodeEwc=t}))("valueEmitter",(function(t){return a.wc(e),a.gc(2).onSelectCode(t,"T")})),a.Rb(),a.Rb(),a.Sb(3,"button",56),a.ec("click",(function(){a.wc(e);const t=a.gc(2);return t.onAddTCode(t.selectedTraderCode)})),a.Nb(4,"i",57),a.Gc(5," \u0414\u043e\u0431\u0430\u0432\u0438 \u043a\u043e\u0434\u0430 "),a.Rb(),a.Sb(6,"button",58),a.ec("click",(function(){return a.wc(e),a.gc(2).onAddAllCodes("T")})),a.Nb(7,"i",57),a.Gc(8," \u0414\u043e\u0431\u0430\u0432\u0438 \u0432\u0441\u0438\u0447\u043a\u0438 "),a.Rb(),a.Sb(9,"button",59),a.ec("click",(function(){return a.wc(e),a.gc(2).onRemoveAllCodes("T")})),a.Nb(10,"i",60),a.Gc(11," \u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0438 \u0432\u0441\u0438\u0447\u043a\u0438 "),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.zb(2),a.mc("ngModel",e.selectedTraderCodeEwc)("name","traderCode")("formItemDef",e.defsGenerator.getDynamicRowTBDef("1",e.mode)),a.zb(1),a.mc("disabled",!e.selectedTraderCode)}}function oe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",65),a.Sb(2,"h5"),a.Gc(3),a.Sb(4,"span",66),a.Gc(5),a.Rb(),a.Gc(6),a.Rb(),a.Rb(),a.Sb(7,"div",67),a.Sb(8,"button",68),a.ec("click",(function(){a.wc(e);const i=t.$implicit,s=t.index,n=a.gc(3);return n.onAddTCode(i),n.removeDeletedCode(s,"T")})),a.Nb(9,"i",69),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index;a.zb(3),a.Ic("",i+1,". "),a.zb(2),a.Hc(e.code),a.zb(1),a.Ic(" ",e.nameBg,"")}}function re(e,t){if(1&e&&(a.Sb(0,"div",61),a.Sb(1,"div",62),a.Sb(2,"h6",63),a.Gc(3,"\u0418\u0417\u0422\u0420\u0418\u0422\u0418 \u041a\u041e\u0414\u041e\u0412\u0415"),a.Rb(),a.Rb(),a.Ec(4,oe,10,3,"div",64),a.Rb()),2&e){const e=a.gc(2);a.zb(4),a.mc("ngForOf",e.deletedTraderCodes)}}function de(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",65),a.Sb(2,"h5"),a.Gc(3),a.Sb(4,"span",66),a.Gc(5),a.Rb(),a.Gc(6),a.Rb(),a.Rb(),a.Sb(7,"div",67),a.Sb(8,"button",71),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(3).onDeleteTCode(i)})),a.Nb(9,"i",72),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(3);a.zb(3),a.Ic("",i+1,". "),a.zb(2),a.Hc(e.code),a.zb(1),a.Ic(" ",e.nameBg,""),a.zb(2),a.mc("hidden","R"===s.mode)}}function ce(e,t){if(1&e&&(a.Sb(0,"div",61),a.Sb(1,"div",70),a.Sb(2,"h6",63),a.Gc(3,"\u0414\u041e\u0411\u0410\u0412\u0415\u041d\u0418 \u041a\u041e\u0414\u041e\u0412\u0415"),a.Rb(),a.Rb(),a.Ec(4,de,10,4,"div",64),a.Rb()),2&e){const e=a.gc(2);a.zb(4),a.mc("ngForOf",e.application.traderCodes)}}function le(e,t){if(1&e&&(a.Ec(0,ne,12,4,"div",51),a.Ec(1,re,5,1,"div",52),a.Ec(2,ce,5,1,"div",52)),2&e){const e=a.gc();a.mc("ngIf",("TB"===e.application.regCode||"T"===e.application.regCode)&&"R"!==e.mode),a.zb(1),a.mc("ngIf",e.deletedTraderCodes.length),a.zb(1),a.mc("ngIf",e.application.traderCodes.length)}}function he(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",49),a.Sb(1,"span"),a.Sb(2,"small"),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"button",50),a.ec("click",(function(){return a.wc(e),a.gc(2).onTransferBrokerToTrader()})),a.Sb(6,"small"),a.Gc(7),a.hc(8,"translate"),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.mc("hidden","R"===e.mode),a.zb(3),a.Hc(a.ic(4,4,"applications.trader.transfer-trader")),a.zb(2),a.mc("disabled",!e.application.brokerCodes||e.application.brokerCodes.length<1),a.zb(2),a.Hc(a.ic(8,6,"applications.trader.transfer"))}}function pe(e,t){if(1&e&&(a.Sb(0,"div",30),a.Sb(1,"h6",31),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Ec(4,he,9,8,"div",48),a.Sb(5,"div"),a.Sb(6,"button",33),a.Nb(7,"i",34),a.Nb(8,"i",35),a.Rb(),a.Rb(),a.Rb()),2&e){const e=a.gc(),t=a.vc(9);a.zb(2),a.Hc(a.ic(3,4,"applications.trader.code-broker")),a.zb(2),a.mc("ngIf","TB"===e.application.regCode),a.zb(3),a.mc("hidden",t.isExpanded("waste-group-broker")),a.zb(1),a.mc("hidden",!t.isExpanded("waste-group-broker"))}}function ue(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",54),a.Sb(2,"app-fi-select-dropdown",55),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).selectedBrokerCodeEwc=t}))("valueEmitter",(function(t){return a.wc(e),a.gc(2).onSelectCode(t,"B")})),a.Rb(),a.Rb(),a.Sb(3,"button",56),a.ec("click",(function(){a.wc(e);const t=a.gc(2);return t.onAddBCode(t.selectedBrokerCode)})),a.Nb(4,"i",57),a.Gc(5," \u0414\u043e\u0431\u0430\u0432\u0438 \u043a\u043e\u0434\u0430 "),a.Rb(),a.Sb(6,"button",58),a.ec("click",(function(){return a.wc(e),a.gc(2).onAddAllCodes("B")})),a.Nb(7,"i",57),a.Gc(8," \u0414\u043e\u0431\u0430\u0432\u0438 \u0432\u0441\u0438\u0447\u043a\u0438 "),a.Rb(),a.Sb(9,"button",59),a.ec("click",(function(){return a.wc(e),a.gc(2).onRemoveAllCodes("B")})),a.Nb(10,"i",60),a.Gc(11," \u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0438 \u0432\u0441\u0438\u0447\u043a\u0438 "),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.zb(2),a.mc("ngModel",e.selectedBrokerCodeEwc)("name","brokerCode")("formItemDef",e.defsGenerator.getDynamicRowTBDef("2",e.mode)),a.zb(1),a.mc("disabled",!e.selectedBrokerCode)}}function me(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",65),a.Sb(2,"h5"),a.Gc(3),a.Sb(4,"span",66),a.Gc(5),a.Rb(),a.Gc(6),a.Rb(),a.Rb(),a.Sb(7,"div",67),a.Sb(8,"button",68),a.ec("click",(function(){a.wc(e);const i=t.$implicit,s=t.index,n=a.gc(3);return n.onAddBCode(i),n.removeDeletedCode(s,"B")})),a.Nb(9,"i",69),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index;a.zb(3),a.Ic("",i+1,". "),a.zb(2),a.Hc(e.code),a.zb(1),a.Ic(" ",e.nameBg,"")}}function be(e,t){if(1&e&&(a.Sb(0,"div",61),a.Sb(1,"div",73),a.Sb(2,"h6",63),a.Gc(3,"\u0418\u0417\u0422\u0420\u0418\u0422\u0418 \u041a\u041e\u0414\u041e\u0412\u0415"),a.Rb(),a.Rb(),a.Ec(4,me,10,3,"div",64),a.Rb()),2&e){const e=a.gc(2);a.zb(4),a.mc("ngForOf",e.deletedBrokerCodes)}}function ge(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",53),a.Sb(1,"div",65),a.Sb(2,"h5"),a.Gc(3),a.Sb(4,"span",66),a.Gc(5),a.Rb(),a.Gc(6),a.Rb(),a.Rb(),a.Sb(7,"div",67),a.Sb(8,"button",71),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(3).onDeleteBCode(i)})),a.Nb(9,"i",72),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(3);a.zb(3),a.Ic("",i+1,". "),a.zb(2),a.Hc(e.code),a.zb(1),a.Ic(" ",e.nameBg,""),a.zb(2),a.mc("hidden","R"===s.mode)}}function fe(e,t){if(1&e&&(a.Sb(0,"div",61),a.Sb(1,"div",74),a.Sb(2,"h6",63),a.Gc(3,"\u0414\u041e\u0411\u0410\u0412\u0415\u041d\u0418 \u041a\u041e\u0414\u041e\u0412\u0415"),a.Rb(),a.Rb(),a.Ec(4,ge,10,4,"div",64),a.Rb()),2&e){const e=a.gc(2);a.zb(4),a.mc("ngForOf",e.application.brokerCodes)}}function Re(e,t){if(1&e&&(a.Ec(0,ue,12,4,"div",51),a.Ec(1,be,5,1,"div",52),a.Ec(2,fe,5,1,"div",52)),2&e){const e=a.gc();a.mc("ngIf",("TB"===e.application.regCode||"B"===e.application.regCode)&&"R"!==e.mode),a.zb(1),a.mc("ngIf",e.deletedBrokerCodes.length),a.zb(1),a.mc("ngIf",e.application.brokerCodes.length)}}function Se(e,t){1&e&&a.Nb(0,"div",80)}function Ie(e,t){if(1&e){const e=a.Tb();a.Sb(0,"button",81),a.ec("click",(function(){a.wc(e);const t=a.gc(2);return t.isFileRead=!1,t.tbEditModel.toDeletePaymentDocument=t.application.paymentDocumentMetaData})),a.Gc(1," \u041a\u0430\u0447\u0435\u0442\u0435 \u043d\u043e\u0432 \u0444\u0430\u0439\u043b "),a.Rb()}}function ye(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",75),a.Sb(2,"h5",76),a.Gc(3,"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u043b\u0430\u0442\u0435\u043d\u0430 \u0442\u0430\u043a\u0441\u0430:"),a.Rb(),a.Sb(4,"h5",77),a.ec("click",(function(){return a.wc(e),a.gc().downloadPaymentDocument()})),a.Gc(5),a.Rb(),a.Rb(),a.Ec(6,Se,1,0,"div",78),a.Ec(7,Ie,2,0,"button",79),a.Rb()}if(2&e){const e=a.gc();a.zb(5),a.Ic(" ",null==e.application.paymentDocumentMetaData?null:e.application.paymentDocumentMetaData.fileName,""),a.zb(1),a.mc("ngIf",e.isDownloading),a.zb(1),a.mc("ngIf","E"===e.mode)}}function Te(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-file-browse",83),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).application.eSign.file=t})),a.Rb()}if(2&e){const e=a.gc(2);a.mc("ngModel",e.application.eSign.file)("formItemDef",e.formDefs[7])("name",e.formDefs[7].domName)("showClearBtn",!1)}}function Ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",82),a.Sb(1,"div",54),a.Sb(2,"app-fi-file-browse",83),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().application.paymentDocument.file=t})),a.Rb(),a.Rb(),a.Sb(3,"div",54),a.Ec(4,Te,1,4,"app-fi-file-browse",84),a.Rb(),a.Rb()}if(2&e){const e=a.gc();a.zb(2),a.mc("ngModel",e.application.paymentDocument.file)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)("showClearBtn",!1),a.zb(2),a.mc("ngIf",!e.isInnerUser)}}const De=function(){return["contact-app","waste-group-trader","waste-group-broker","mailing-address","contact-person"]};let ve=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this.defsGenerator=t,this.crudService=i,this.mmSpinnerService=s,this.sessionInfoService=n,this.ERROR="error",this.YES="Y",this.VALID="VALID",this.INVALID="INVALID",this.TRADER="T",this.BROKER="B",this.TRADER_BROKER="TB",this.TRADER_WON_ID=36,this.BROKER_WON_ID=37,this.formDefs=[],this.model={},this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.typesValidity=!1,this.contacts=[],this.addresses=[],this.isActionListReady=!1,this.isActionListSuccess=!1,this.isDownloading=!1,this.isFileRead=!0,this.deletedTraderCodes=[],this.deletedBrokerCodes=[],this.formValidStatus=this.INVALID,this.statusSubscriber=null,this.types=[{label:"\u0422\u042a\u0420\u0413\u041e\u0412\u0415\u0426",value:this.TRADER,isSelected:!1},{label:"\u0411\u0420\u041e\u041a\u0415\u0420",value:this.BROKER,isSelected:!1}],this.allCodes=[],this.mode=o.a.READ,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authLoader=new r.a(i),this.authSaver=new T.a(i)}ngOnInit(){this.loadDefs(),this.prepareModels(),this.handleMode()}ngOnChanges(e){var t,i,s,a,n,o,r,d;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(s=e.mode)||void 0===s?void 0:s.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(n=e.type)||void 0===n?void 0:n.firstChange)===(null===(o=e.type)||void 0===o?void 0:o.previousValue)&&(null===(r=e.aunId)||void 0===r?void 0:r.firstChange)===(null===(d=e.aunId)||void 0===d?void 0:d.previousValue)||(this.loadDefs(),this.prepareModels(),this.handleMode())}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}handleType(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=this.application.regCode=(yield this.loadTcRegById(e)).pageContent[0].code;t===this.TRADER?this.types[0].isSelected=!0:t===this.BROKER?this.types[1].isSelected=!0:t===this.TRADER_BROKER&&(this.types[0].isSelected=!0,this.types[1].isSelected=!0)}))}onCheckType(e){e.isSelected=!e.isSelected,this.types[0].isSelected&&this.types[1].isSelected?this.application.regCode=this.TRADER_BROKER:this.types[0].isSelected?(this.application.regCode=this.TRADER,this.deleteAllBCodes()):this.types[1].isSelected?(this.application.regCode=this.BROKER,this.deleteAllTCodes()):(this.application.regCode=null,this.deleteAllCodes())}handleMode(){switch(this.mode){case o.a.READ:this.disableFields(),this.aunId&&(this.isFormLoading.emit(!0),this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}));break;case o.a.NEW:this.enableFields(),this.loadAuthBasicData();break;case o.a.EDIT:this.isFormLoading.emit(!0),this.enableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.isFormLoading.emit(!1),this.mmSpinnerService.hideMainModalSpinner()}))}}onHeadquartersValidityChange(e){this.headquartersValidity=e===this.VALID,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity=e===this.VALID,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity=e===this.VALID,this.setInnerFormsValidity()}checkTypesValidity(){this.typesValidity=this.isTypeChosen(),this.setInnerFormsValidity()}setInnerFormsValidity(){var e,t;this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&this.typesValidity&&(!!(null===(e=this.application.traderCodes)||void 0===e?void 0:e.length)||!!(null===(t=this.application.brokerCodes)||void 0===t?void 0:t.length)),this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}loadDefs(){this.formDefs=this.defsGenerator.getTraderBrokerDefs()}loadTcRegById(e){return this.crudService.loadByFind(v.a,v.a.publicUrl,{id:e}).toPromise()}loadTcRegByCode(e){return this.crudService.loadByFind(v.a,v.a.publicUrl,{code:e}).toPromise()}loadContactsByOrnId(e){this.crudService.loadByParam(d.a,d.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===o.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(c.a,c.a.nonPrimaryAddressesUrl,`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===o.a.EDIT&&this.checkAddress()})}loadAllEwcs(){return this.crudService.loadAll(m.a,m.a.getAllUrl).toPromise()}onOrgChanged(e){this.isInnerUser&&this.crudService.getObject(h.a.urlCheckForExistingTB,e.id).subscribe(t=>{t?this.loadAuthBasicData(e):(this.noMoreTBSwal.fire(),this.application.legalEntity={eik:null,legalEntity:null})})}redirectOnError(){this.router.navigate(this.isInnerUser?[`/${E.a.ADMIN}/${E.a.WORKSPACE}/${E.a.REGISTERIES}/${E.a.PROCESS_APP}`]:[`${E.a.APPLICATIONS}`])}onActionListClose(){if(this.respAunId){let e;this.isInnerUser&&!this.isInnerActualizing?(e=`/${E.a.ADMIN}/${E.a.WORKSPACE}/${E.a.REGISTERIES}/${E.a.REG_VIEW}`,this.router.navigate([e])):this.isInnerActualizing?(e=`/${E.a.ADMIN}/${E.a.WORKSPACE}/${E.a.AUTH_WORK}/${y.a.TRADER_BROKER}/${this.respAunId}`,this.router.navigate([e])):this.router.navigate([`${E.a.APPLICATIONS}/${E.a.AUTH_READ}`,y.a.TRADER_BROKER,this.respAunId])}}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new d.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(s.a)(this,void 0,void 0,(function*(){if(e){const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new l.a({}),this.addressForm.disableNonEmptyFields=!1}))}onAddTCode(e){null==this.application.traderCodes&&(this.application.traderCodes=[],this.model.traderCodesValidity=[]);const t=new m.a(e||{});this.application.traderCodes.find(e=>e.ewc===t.ewc)||(this.application.traderCodes.push(t),this.model.traderCodesValidity.push(!!e),this.setInnerFormsValidity())}onDeleteTCode(e){this.deletedTraderCodes.push(new m.a(this.application.traderCodes[e])),this.application.traderCodes.splice(e,1),this.model.traderCodesValidity.splice(e,1),this.application.traderCodes.length||this.setInnerFormsValidity()}onAddBCode(e){null==this.application.brokerCodes&&(this.application.brokerCodes=[],this.model.brokerCodesValidity=[]);const t=new m.a(e||{});this.application.brokerCodes.find(e=>e.ewc===t.ewc)||(this.application.brokerCodes.push(t),this.model.brokerCodesValidity.push(!!e),this.setInnerFormsValidity())}onDeleteBCode(e){this.deletedBrokerCodes.push(new m.a(this.application.brokerCodes[e])),this.application.brokerCodes.splice(e,1),this.model.brokerCodesValidity.splice(e,1),this.application.brokerCodes.length||this.setInnerFormsValidity()}onTransferTraderToBroker(){this.application.traderCodes.forEach(e=>{null!=e&&null==(null==this.application.brokerCodes?null:this.application.brokerCodes.find(t=>t.ewc===e.ewc))&&this.onAddBCode(e)})}onTransferBrokerToTrader(){this.application.brokerCodes.forEach(e=>{null!=e&&null==(null==this.application.traderCodes?null:this.application.traderCodes.find(t=>t.ewc===e.ewc))&&this.onAddTCode(e)})}deleteAllCodes(){this.deleteAllTCodes(),this.deleteAllBCodes()}deleteAllTCodes(){this.application.traderCodes=[],this.model.traderCodesValidity=[]}deleteAllBCodes(){this.application.brokerCodes=[],this.model.brokerCodesValidity=[]}removeDeletedCode(e,t){"T"===t?this.deletedTraderCodes.splice(e,1):this.deletedBrokerCodes.splice(e,1)}onAddAllCodes(e){var t;return Object(s.a)(this,void 0,void 0,(function*(){(null===(t=this.allCodes)||void 0===t?void 0:t.length)||(this.allCodes=yield this.loadAllEwcs()),"T"===e?this.application.traderCodes=this.allCodes:this.application.brokerCodes=this.allCodes,this.setInnerFormsValidity()}))}onRemoveAllCodes(e){"T"===e?this.application.traderCodes=[]:this.application.brokerCodes=[]}onSelectCode(e,t){"T"===t?this.selectedTraderCode=e:this.selectedBrokerCode=e}copyAddress(){this.application.mailingAddressData=new l.a(this.application.orgAddressData),this.application.mailingAddressData.trnOrnAddrId=null}isTypeChosen(){let e=!1;return this.types.forEach(t=>{t.isSelected&&(e=!0)}),e}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadAuthBasicData(e){return Object(s.a)(this,void 0,void 0,(function*(){let t;t=this.isInnerUser?e:yield this.getUserOrganization(),t?(this.application.organization=t,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(t.id),this.fillLegalEntityData(t)):(this.application.organization=new n.a({}),this.application.orgAddressData=new l.a({}),this.application.legalEntity=new p.a,this.application.mailingAddressData=new l.a({}),this.application.contact=new d.a({}),this.model.mailingAddress=null,this.model.contactPerson=null,this.contacts=[],this.addresses=[])}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat?e.bulstat:e.egn,legalEntity:e.name}}getUserOrganization(){return Object(s.a)(this,void 0,void 0,(function*(){return this.sessionInfoService.getOrganization()}))}disableFields(){this.formDefs.forEach(e=>{e.isDisabled=!0}),this.model.responsibility=!0,this.model.isNotLinked=!0}enableFields(){this.formDefs.forEach(e=>{e.isDisabled=!1}),this.mode===o.a.NEW&&(this.model.responsibility=!1,this.model.contactPerson=null,this.model.mailingAddress=null),this.mode===o.a.EDIT&&(this.model.responsibility=!0,this.model.isNotLinked=!0)}prepareModels(){this.application=g.initialize(),this.model.traderCodes=[],this.model.traderCodesValidity=[],this.model.brokerCodesValidity=[],this.tbEditModel=new f}parseWasteCodes(){this.application.regCode!==this.TRADER&&this.application.regCode!==this.TRADER_BROKER||(this.application.trnStageWasteOperationsTraderCodes=Object(R.a)(this.application.traderCodes,this.TRADER_WON_ID)),this.application.regCode!==this.BROKER&&this.application.regCode!==this.TRADER_BROKER||(this.application.trnStageWasteOperationsBrokerCodes=Object(R.a)(this.application.brokerCodes,this.BROKER_WON_ID))}prepareTraderCodes(){var e;null===(e=this.startedTraderCodes)||void 0===e||e.forEach(e=>{let t=!1;for(const i of this.application.trnStageWasteOperationsTraderCodes)if(e.ewc===i.ewc){t=!0;break}t||this.tbEditModel.toDeleteTraderCodes.push(e)}),this.application.trnStageWasteOperationsTraderCodes.forEach(e=>{let t=!1;if(this.startedTraderCodes)for(const i of this.startedTraderCodes)if(i.ewc===e.ewc){t=!0;break}t||this.tbEditModel.toInsertTraderCodes.push(e)})}prepareBrokerCodes(){var e;null===(e=this.startedBrokerCodes)||void 0===e||e.forEach(e=>{let t=!1;for(const i of this.application.trnStageWasteOperationsBrokerCodes)if(e.ewc===i.ewc){t=!0;break}t||this.tbEditModel.toDeleteBrokerCodes.push(e)}),this.application.trnStageWasteOperationsBrokerCodes.forEach(e=>{let t=!1;if(this.startedBrokerCodes)for(const i of this.startedBrokerCodes)if(i.ewc===e.ewc){t=!0;break}t||this.tbEditModel.toInsertBrokerCodes.push(e)})}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const t=yield this.authLoader.loadAuthorizationById(e);if(this.typesValidity=!0,this.handleType(t.regId),this.application.id=t.id,this.application.isElectronicAcc=t.isElectronicAcc===this.YES,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.mode===o.a.EDIT&&this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id),this.application.regCode===this.TRADER||this.application.regCode===this.TRADER_BROKER){const e=yield this.authLoader.loadTraderCodes(this.application.id);this.application.traderCodes=e.EWC,this.application.traderAseId=e.aseId,this.startedTraderCodes=Object(R.a)(this.application.traderCodes,this.TRADER_WON_ID,e.trnSwdIds),Object(R.b)(this.startedTraderCodes,this.application.traderAseId)}if(this.application.regCode===this.BROKER||this.application.regCode===this.TRADER_BROKER){const e=yield this.authLoader.loadBrokerCodes(this.application.id);this.application.brokerCodes=e.EWC,this.application.brokerAseId=e.aseId,this.startedBrokerCodes=Object(R.a)(this.application.brokerCodes,this.BROKER_WON_ID,e.trnSwdIds),Object(R.b)(this.startedBrokerCodes,this.application.brokerAseId)}this.application.paymentDocumentMetaData=(yield this.authLoader.loadAttachedDocumentMetaData(this.application.id)).pageContent[0],this.startedPaymentDocument=this.application.paymentDocumentMetaData,this.setInnerFormsValidity()}catch(t){console.error(t),this.errorLoadSwal.fire()}}))}downloadPaymentDocument(){return Object(s.a)(this,void 0,void 0,(function*(){this.isDownloading=!0;const e=yield this.authLoader.loadPaymentDocument(this.application.paymentDocumentMetaData.id),t=this.application.paymentDocumentMetaData.fileName;Object(D.a)(e,t),this.isDownloading=!1}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){this.parseWasteCodes(),this.application.regId=(yield this.loadTcRegByCode(this.application.regCode)).pageContent[0].id,this.prepareSaveActions(),this.actionList.open(),this.authSaver.saveTraderBrokerAuthorization(this.application,this.actions,this.isInnerUser).then(e=>{this.respAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0})}))}prepareSaveActions(){var e,t;this.actions=[],this.application.contact.id||this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",I.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",I.a.WORKING,!1)),this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",I.a.WORKING,!1)),(null===(e=this.application.traderCodes)||void 0===e?void 0:e.length)>0&&(this.application.regCode===this.TRADER||this.application.regCode===this.TRADER_BROKER)&&this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043a\u043e\u0434\u043e\u0432\u0435 \u0437\u0430 \u0442\u044a\u0440\u0433\u043e\u0432\u0435\u0446",I.a.WORKING,!1)),(null===(t=this.application.brokerCodes)||void 0===t?void 0:t.length)>0&&(this.application.regCode===this.BROKER||this.application.regCode===this.TRADER_BROKER)&&this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043a\u043e\u0434\u043e\u0432\u0435 \u0437\u0430 \u0431\u0440\u043e\u043a\u0435\u0440",I.a.WORKING,!1)),(this.application.eSign.file&&this.application.paymentDocument.file||this.application.paymentDocument.file&&this.isInnerUser)&&this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u043b\u0430\u0442\u0435\u043d\u0430 \u0442\u0430\u043a\u0441\u0430",I.a.WORKING,!1)),(new FormData).append("documant","asdf"),this.actionList.actionList=this.actions,this.isActionListReady=!1}onEdit(){return Object(s.a)(this,void 0,void 0,(function*(){this.parseWasteCodes(),this.prepareData(),this.application.regId=(yield this.loadTcRegByCode(this.application.regCode)).pageContent[0].id,this.prepareEditActions(),this.actionList.open(),this.authSaver.editTraderBrokerAuthorization(this.application,this.actions,this.tbEditModel).then(e=>{this.respAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0})}))}prepareData(){this.prepareTraderCodes(),this.prepareBrokerCodes(),this.application.paymentDocument.file&&(this.tbEditModel.isNewPaymentDocument=!0)}prepareEditActions(){this.actions=[],this.application.contact.id||this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",I.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",I.a.WORKING,!1)),this.actions.push(new S.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",I.a.WORKING,!1)),this.tbEditModel.hasTraderCodes()&&this.actions.push(new S.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043a\u043e\u0434\u043e\u0432\u0435 \u0437\u0430 \u0442\u044a\u0440\u0433\u043e\u0432\u0435\u0446",I.a.WORKING,!1)),this.tbEditModel.hasBrokerCodes()&&this.actions.push(new S.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043a\u043e\u0434\u043e\u0432\u0435 \u0437\u0430 \u0431\u0440\u043e\u043a\u0435\u0440",I.a.WORKING,!1)),this.tbEditModel.isNewPaymentDocument&&this.actions.push(new S.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u043b\u0430\u0442\u0435\u043d\u0430 \u0442\u0430\u043a\u0441\u0430",I.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(C.c),a.Mb(O.a),a.Mb(A.a),a.Mb(w.a),a.Mb(M.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-trader-brokers"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(G,!0),a.Nc(H,!0),a.Nc(U,!0),a.Nc(q,!0),a.Nc($,!0),a.Nc(K,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.errorLoadSwal=i.first),a.uc(i=a.fc())&&(t.noMoreTBSwal=i.first))},inputs:{mode:"mode",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",isInnerUser:"isInnerUser",isInnerActualizing:"isInnerActualizing",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:37,vars:25,consts:[[1,"container-fluid","p-3","pb-0"],["novalidate","",1,"was-validated"],["form","ngForm"],["for","trader","class","mr-2 mb-0",3,"for",4,"ngFor","ngForOf"],[1,"text-danger","mb-1",2,"font-size","14px",3,"hidden"],[3,"isReadonly","model","isInnerUser","orgEmitter"],["basicInfo",""],["id","accordion",3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],["id","waste-group-trader"],["id","body","ngbPanelContent",""],["id","waste-group-broker"],[4,"ngIf"],["class","row mt-2",4,"ngIf"],[1,"mb-3"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",3,"allowOutsideClick","showConfirmButton","icon","confirm"],["errorLoadSwal",""],["title","\u0412\u0435\u0447\u0435 \u0438\u043c\u0430 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430\u0449\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0430\u0449\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0437\u0430 \u0442\u0430\u0437\u0438 \u043e\u0440\u0430\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f!","icon","warning",3,"showConfirmButton"],["noMoreTBSwal",""],["for","trader",1,"mr-2","mb-0",3,"for"],["type","checkbox","required","",3,"id","checked","disabled","click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"btn","btn-sm","mr-2","btn-outline-secondary",3,"click"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""],["class","text-right",3,"hidden",4,"ngIf"],[1,"text-right",3,"hidden"],[1,"btn","btn-sm","btn-outline-secondary","ml-2",3,"disabled","click"],["class","row",4,"ngIf"],["class","card-body py-0",4,"ngIf"],[1,"row"],[1,"col-md-6"],["labelFieldName","label","valueFieldName","ewc",3,"ngModel","name","formItemDef","ngModelChange","valueEmitter"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u0438 \u043a\u043e\u0434\u0430","container","body","placement","top",1,"btn","btn-outline-secondary","mr-2",2,"height","40px",3,"disabled","click"],[1,"fas","fa-plus"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u0438 \u0432\u0441\u0438\u0447\u043a\u0438 \u043a\u043e\u0434\u043e\u0432\u0435","container","body","placement","top",1,"btn","btn-outline-secondary","mr-2",2,"height","40px",3,"click"],["ngbTooltip","\u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0438 \u043a\u043e\u0434\u043e\u0432\u0435\u0442\u0435","container","body","placement","top",1,"btn","btn-outline-secondary","mr-2",2,"height","40px",3,"click"],[1,"fas","fa-minus"],[1,"card-body","py-0"],[1,"alert","alert-danger","d-inline-block"],[1,"mb-0"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-11"],[1,"text-danger"],[1,"col-md-1"],["type","button","ngbTooltip","\u0412\u0440\u044a\u0449\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","bg-success","text-white","rounded-circle","mb-2",3,"click"],[1,"fas","fa-undo"],[1,"alert","alert-primary","d-inline-block"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","text-white","bg-danger","rounded-circle","mb-2",3,"hidden","click"],[1,"fas","fa-trash-alt"],[1,"alert","alert-danger"],[1,"alert","alert-primary"],[1,"alert","alert-primary","d-inline-block","mt-2","pb-1"],[1,"d-inline-block"],[1,"ml-3","d-inline-block","doc",3,"click"],["class","spinner-border ml-3 d-inline-block","role","status",4,"ngIf"],["class","btn btn-primary ml-3 d-inline-block",3,"click",4,"ngIf"],["role","status",1,"spinner-border","ml-3","d-inline-block"],[1,"btn","btn-primary","ml-3","d-inline-block",3,"click"],[1,"row","mt-2"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange",4,"ngIf"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Ec(3,Y,3,5,"label",3),a.Sb(4,"p",4),a.Gc(5," \u0418\u0437\u0431\u043e\u0440\u044a\u0442 \u043d\u0430 \u0442\u0438\u043f \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d "),a.Rb(),a.Sb(6,"app-basic-app-info",5,6),a.ec("orgEmitter",(function(e){return t.onOrgChanged(e)})),a.Rb(),a.Sb(8,"ngb-accordion",7,8),a.Sb(10,"ngb-panel",9),a.Ec(11,X,10,5,"ng-template",10),a.Ec(12,Q,1,3,"ng-template",11),a.Rb(),a.Sb(13,"ngb-panel",12),a.Ec(14,J,10,13,"ng-template",10),a.Ec(15,ee,2,3,"ng-template",11),a.Rb(),a.Sb(16,"ngb-panel",13),a.Ec(17,te,9,10,"ng-template",10),a.Ec(18,ie,2,2,"ng-template",14),a.Rb(),a.Sb(19,"ngb-panel",15),a.Ec(20,ae,9,6,"ng-template",10),a.Ec(21,le,3,3,"ng-template",16),a.Rb(),a.Sb(22,"ngb-panel",17),a.Ec(23,pe,9,6,"ng-template",10),a.Ec(24,Re,3,3,"ng-template",16),a.Rb(),a.Rb(),a.Ec(25,ye,8,3,"div",18),a.Ec(26,Ee,5,5,"div",19),a.Nb(27,"div",20),a.Sb(28,"app-fi-input-checkbox",21),a.ec("ngModelChange",(function(e){return t.model.responsibility=e})),a.Rb(),a.Sb(29,"app-fi-input-checkbox",21),a.ec("ngModelChange",(function(e){return t.model.isNotLinked=e})),a.Rb(),a.Sb(30,"app-fi-input-checkbox",21),a.ec("ngModelChange",(function(e){return t.application.isElectronicAcc=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(31,"app-action-tasks-list",22,23),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(33,"swal",24,25),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb(),a.Nb(35,"swal",26,27)),2&e&&(a.zb(3),a.mc("ngForOf",t.types),a.zb(1),a.mc("hidden",t.isTypeChosen()),a.zb(2),a.mc("isReadonly",!t.isInnerUser||"R"===t.mode||t.isInnerActualizing)("model",t.application.legalEntity)("isInnerUser",t.isInnerUser),a.zb(2),a.mc("destroyOnHide",!1)("activeIds",a.pc(24,De)),a.zb(17),a.mc("ngIf",("R"===t.mode||"E"===t.mode)&&t.isFileRead),a.zb(1),a.mc("ngIf","N"===t.mode||!t.isFileRead),a.zb(2),a.mc("ngModel",t.model.responsibility)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName),a.zb(1),a.mc("ngModel",t.model.isNotLinked)("formItemDef",t.formDefs[3])("name",t.formDefs[3].domName),a.zb(1),a.mc("ngModel",t.application.isElectronicAcc)("formItemDef",t.formDefs[4])("name",t.formDefs[4].domName),a.zb(1),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("allowOutsideClick",!1)("showConfirmButton",!0)("icon",t.ERROR),a.zb(2),a.mc("showConfirmButton",!0))},directives:[N.D,N.p,N.q,x.t,k.a,F.a,F.I,F.K,F.J,x.u,V.a,N.o,N.r,z.a,_.a,F.M,P.a,x.r,j.a,L.a,F.ab,B.a],pipes:[W.d],styles:["[_nghost-%COMP%]     .accordion>div>#contact-person-header.card-header, [_nghost-%COMP%]     .accordion>div>#mailing-address-header.card-header{padding-bottom:0}[_nghost-%COMP%]     #accordion>div>div.card-header, [_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:.5rem}.doc[_ngcontent-%COMP%]{color:#0080ff}.doc[_ngcontent-%COMP%]:hover{color:#fff;cursor:pointer}"]}),e})()},s2Vo:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e.PROJECT="DO_STATE:00",e.ISSUANCE="DO_STATE:01",e.DISTRIBUTED="DO_STATE:02",e.APPROVED_BY_AN_EMPLOYEE="DO_STATE:03",e.APPROVED="DO_STATE:04",e.ISSUED="DO_STATE:05",e.ACTUALIZING="DO_STATE:06",e.RETURNED_FOR_CORRECTION_BY_AN_EMPLOYEE="DO_STATE:07",e.RETURNED_FOR_CORRECTION="DO_STATE:08",e.CORRECTING="DO_STATE:09",e.SILENT_AGREEMENT="DO_STATE:10",e.DENIED_BY_AN_EMPLOYEE="DO_STATE:11",e.DENIED="DO_STATE:12",e.TERMINATION="DO_STATE:13",e.ACTUALIZED="DO_STATE:14",e.CORRECTED="DO_STATE:15",e.TERMINATED="DO_STATE:16",e.PROJECT_EMPLOYEE="DO_STATE:17",e.ALLOCATED_FOR_CORRECTION_ADJUSTMENT="DO_STATE:18",e.NON_REFUNDABLE_ISSUE_FOR_CORRECTION="DO_STATE:19",e.DISTRIBUTED_WITHOUT_RIGHT_OF_RETURN_FOR_CORRECTION="DO_STATE:20",e.APPROVED_WITHOUT_THE_RIGHT_TO_RETURN_FOR_CORRECTION_BY_AN_EMPLOYEE="DO_STATE:21",e.APPROVED_WITHOUT_RIGHT_OF_RETURN_FOR_CORRECTION="DO_STATE:22",e.NON_RETURN_UPDATE_FOR_CORRECTION="DO_STATE:23",e.RETURN_BY_AN_EMPLOYEE_WITH_AN_EXPIRED_CORRECTION_PERIOD="DO_STATE:24",e.EXPIRATION_FOR_CORRECTION_AFTER_RETURN_FOR_CORRECTION_HAS_EXPIRED="DO_STATE:25",e.DENIED_WITHOUT_THE_RIGHT_TO_RETURN_A_CORRECTION_BY_AN_EMPLOYEE="DO_STATE:26",e.REJECTED_WITHOUT_THE_RIGHT_TO_RETURN_A_CORRECTION="DO_STATE:27",e.REFUSED_BY_MANAGER="DO_STATE:28",e.TERMINATION_DENIED="DO_STATE:29",e.REFUSED_AFTER_THE_EXPIRATION_OF_THE_CORRECTION_PERIOD="DO_STATE:30",e.TAKEN_AWAY="DO_STATE:31",e.WITHDRAWAL="DO_STATE:32",e.REFUSAL_TO_WITHDRAW="DO_STATE:33",e.PROJECT_ACTUALIZATION="DO_STATE:34",e.WITHDRAWAL_FROM_AN_EMPLOYEE="DO_STATE:35",e.WITHDRAWAL_REFUSED_BY_MANAGER="DO_STATE:36",e.CONFIRMED_WITHDRAWAL_BY_MANAGER="DO_STATE:37",e.ALLOCATED_FOR_WITHDRAWAL="DO_STATE:38",e.APPROVED_WITHDRAWAL_BY_AN_EMPLOYEE="DO_STATE:39",e.REFUSAL_TO_WITHDRAW_FROM_AN_EMPLOYEE="DO_STATE:40",e.TERMINATION_DENY="DO_STATE:41",e.APPROVED_TERMINATION="DO_STATE:42",e.ALLOCATED_FOR_TERMINATION="DO_STATE:43",e.APPROVED_TERMINATION_BY_AN_EMPLOYEE="DO_STATE:44",e.DENIED_TERMINATION_BY_AN_EMPLOYEE="DO_STATE:45",e.CANCEL_TERMINATION="DO_STATE:46",e.IN_ACTUALIZING_PROCCESS="DO_STATE:47",e.IN_TERMINATION_PROCCESS="DO_STATE:48",e.DELETED="DO_STATE:99",e}({})},s2qR:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var s=i("fXoL"),a=i("F7pt"),n=i("0Uwp"),o=i("CR6u"),r=i("EcjI"),d=i("ra4D"),c=i("NBd8"),l=i("Z+Hd"),h=i("jVzX"),p=i("LENt"),u=i("+QWa"),m=i("3Pt+"),b=i("ofXK"),g=i("Bz/w"),f=i("tm+x"),R=i("TTlI"),S=i("1kSV"),I=i("ANDG"),y=i("sYmb");const T=["form"];function E(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",12),s.ec("click",(function(){return s.wc(e),s.gc().onDeleteRow()})),s.Nb(1,"i",13),s.Rb()}}function D(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",21),s.ec("click",(function(){return s.wc(e),s.gc(2).onAddOperation()})),s.hc(1,"translate"),s.Nb(2,"i",22),s.Rb()}2&e&&s.nc("ngbTooltip",s.ic(1,1,"buttons.addRow.tooltip"))}function v(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"app-waste-operations",24),s.ec("deleteRow",(function(t){return s.wc(e),s.gc(3).onDeleteOperation(t)}))("formStatusValidChanged",(function(t){s.wc(e);const i=s.gc().index;return s.gc(2).onValidityChanged(t,i)}))("wasteTypeChangedEmitter",(function(t){return s.wc(e),s.gc(3).wasteTypeChangedEmitter.emit(t)})),s.Rb(),s.Rb()}if(2&e){const e=s.gc(),t=e.$implicit,i=e.index,a=s.gc(2);s.zb(1),s.mc("model",t)("mode",a.mode)("index",i)("isComplex",a.isComplex)}}function C(e,t){if(1&e&&(s.Sb(0,"div"),s.Ec(1,v,2,4,"div",23),s.Rb()),2&e){const e=t.$implicit;s.zb(1),s.mc("ngIf","DELETE"!=e.status)}}function O(e,t){if(1&e&&(s.Sb(0,"div",14),s.Sb(1,"div",15),s.Sb(2,"div",4),s.Sb(3,"div",16),s.Sb(4,"h6",17),s.Gc(5,"\u041e\u041f\u0415\u0420\u0410\u0426\u0418\u0418 \u0421 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418/\u0414\u0415\u0419\u041d\u041e\u0421\u0422\u0418"),s.Rb(),s.Rb(),s.Sb(6,"div"),s.Ec(7,D,3,3,"button",18),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",19),s.Ec(9,C,2,1,"div",20),s.Rb(),s.Rb()),2&e){const e=s.gc();s.zb(7),s.mc("ngIf","R"!=e.mode),s.zb(2),s.mc("ngForOf",e.model.operations)}}let A=(()=>{class e{constructor(){this.index=0,this.showOperations=!0,this.showDeleteBtn=!0,this.mode=o.a.NEW,this.type=p.a.ALL,this.isComplex=!1,this.formStatusValidChanged=new s.n,this.wasteTypeChangedEmitter=new s.n,this.wasteCodeChangedEmitter=new s.n,this.deleteRow=new s.n,this.formDefs=[],this.oprIndx=-1,this.statusSubscriber=null}ngOnInit(){this.loadFormDef(),null==this.model.operations&&(this.model.operations=[new c.a])}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.setFormValidity()})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}onValidityChanged(e,t){const i="VALID"===e;null==this.oprValidity&&(this.oprValidity=[]),this.oprValidity[t]=i,this.setFormValidity()}onWasteCodeChanged(e){this.wasteCodeChangedEmitter.emit(e)}onAddOperation(){null==this.model.operations&&(this.model.operations=[]);const e=new c.a({ewc:this.model.operations[0].ewc,wasteAmntTonns:this.model.operations[0].wasteAmntTonns,wasteOrigin:this.model.operations[0].wasteOrigin});this.model.operations.push(e)}onDeleteOperation(e){if(!(null==this.model.operations||this.model.operations.length<1)){if(this.model.operations[e].status===l.a.NEW)return 1===this.model.operations.length?(this.model.operations[0].wonId=null,this.model.operations[0].wonDescr=null):(this.model.operations.splice(e,1),this.oprValidity.splice(e,1)),void this.setFormValidity();this.model.operations[e].status=l.a.DELETED,this.oprValidity[e]=!0,this.setFormValidity()}}onDeleteRow(){this.deleteRow.emit(this.index)}loadFormDef(){const e=Object(u.a)(),t=n.a.createDefaultDropDownFormItemDef();t.domId="code_"+e,t.placeHolderText="\u041a\u043e\u0434 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u043a\u0430",t.labelText="\u041a\u043e\u0434 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u043a\u0430",t.dataSource="Public/VwEwcWasteTypes",t.resultDataType=h.a,t.searchFields=[new d.a("ewc","s"),new d.a("nameBg","s"),new d.a("hazardous","s")],t.isWhere=!0;const i=this.getClause();t.filterClause={where:i},t.isRequired=!0,this.formDefs.push(t);const s=new a.a;s.domId="quantity_"+e,s.labelText="\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e (\u0442\u043e\u043d/\u0433\u043e\u0434.)",s.isRequired=!0,this.formDefs.push(s);const r=a.a.createDefaultTextFormItemDef();r.domId="origin_"+e,r.labelText="\u041f\u0440\u043e\u0438\u0437\u0445\u043e\u0434",r.isRequired=!0,this.formDefs.push(r),this.mode===o.a.READ&&(this.disableNonEmptyFields=!0)}set disableNonEmptyFields(e){Object(r.c)(this.formDefs,e)}setFormValidity(){const e=this.form&&"VALID"===this.form.status&&this.areOprValid();this.formStatusValidChanged.emit(e?"VALID":"INVALID")}areOprValid(){if(!this.showOperations)return!0;if(null==this.model.operations)return!1;let e=0;if(this.model.operations.forEach(t=>{t.status===l.a.DELETED&&e++}),null==this.oprValidity||0===this.oprValidity.length||this.oprValidity.length===e)return!1;for(const t of this.oprValidity)if(!t)return!1;return!0}getClause(){let e='ne(v("ewc"),s(" "))';switch(this.type){case p.a.RD_TREAT:e='and(or(not(in(v("wtCode"),s("01"),s("02"),s("03"),s("04"))),eq(v("wtCode"),null)),ne(v("hazardous"),s("*")))';break;case p.a.METALS:e='eq(v("wtCode"),s("01"))';break;case p.a.NOT_METALS:e='or(ne(v("wtCode"),s("01")),eq(v("wtCode"),null))'}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-waste-group"]],viewQuery:function(e,t){var i;1&e&&s.Nc(T,!0),2&e&&s.uc(i=s.fc())&&(t.form=i.first)},inputs:{index:"index",model:"model",showOperations:"showOperations",showDeleteBtn:"showDeleteBtn",mode:"mode",type:"type",isComplex:"isComplex"},outputs:{formStatusValidChanged:"formStatusValidChanged",wasteTypeChangedEmitter:"wasteTypeChangedEmitter",wasteCodeChangedEmitter:"wasteCodeChangedEmitter",deleteRow:"deleteRow"},decls:17,vars:14,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row","text-end"],[1,"col-lg-12"],[1,"d-flex","justify-content-between"],[1,"font-weight-bold"],["type","button","class","btn btn-sm btn-outline-secondary rounded-circle","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0433\u0440\u0443\u043f\u0430\u0442\u0430","container","body","placement","left",3,"click",4,"ngIf"],[1,"row"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange","valueEmitter"],[1,"col-lg-6"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","card",4,"ngIf"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0433\u0440\u0443\u043f\u0430\u0442\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[1,"fas","fa-trash-alt"],[1,"card"],[1,"card-header","py-1"],[1,"my-auto"],[1,"mt-1"],["class","btn btn-sm btn-outline-secondary rounded-circle","container","body","placement","left",3,"ngbTooltip","click",4,"ngIf"],[1,"card-body","pb-1"],[4,"ngFor","ngForOf"],["container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"ngbTooltip","click"],[1,"fas","fa-plus"],[4,"ngIf"],[3,"model","mode","index","isComplex","deleteRow","formStatusValidChanged","wasteTypeChangedEmitter"]],template:function(e,t){1&e&&(s.Sb(0,"form",0,1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"div",4),s.Sb(5,"span",5),s.Gc(6),s.Rb(),s.Ec(7,E,2,0,"button",6),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",7),s.Sb(9,"div",3),s.Sb(10,"app-fi-select-dropdown",8),s.ec("ngModelChange",(function(e){return t.model.operations[0].ewc=e}))("valueEmitter",(function(e){return t.onWasteCodeChanged(e)})),s.Rb(),s.Rb(),s.Rb(),s.Sb(11,"div",7),s.Sb(12,"div",9),s.Sb(13,"app-fi-input-float",10),s.ec("ngModelChange",(function(e){return t.model.operations[0].wasteAmntTonns=e})),s.Rb(),s.Rb(),s.Sb(14,"div",9),s.Sb(15,"app-fi-input-text",10),s.ec("ngModelChange",(function(e){return t.model.operations[0].wasteOrigin=e})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Ec(16,O,10,2,"div",11)),2&e&&(s.zb(6),s.Hc(t.index+1),s.zb(1),s.mc("ngIf","R"!=t.mode&&t.showDeleteBtn),s.zb(3),s.mc("ngModel",t.model.operations[0].ewc)("formItemDef",t.formDefs[0])("labelFieldName","label")("valueFieldName","ewc")("name",t.formDefs[0].domName),s.zb(3),s.mc("ngModel",t.model.operations[0].wasteAmntTonns)("formItemDef",t.formDefs[1])("name",t.formDefs[1].domName),s.zb(2),s.mc("ngModel",t.model.operations[0].wasteOrigin)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName),s.zb(1),s.mc("ngIf",t.showOperations))},directives:[m.D,m.p,m.q,b.u,g.a,m.o,m.r,f.a,R.a,S.ab,b.t,I.a],pipes:[y.d],styles:[""]}),e})()},s71n:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){this.id=e.id,this.atvId=e.atvId,this.aunId=e.aunId,this.brand=e.brand,this.model=e.model,this.registrationNumber=e.registrationNumber}equals(e){return this.brand===e.brand&&this.model===e.model&&this.registrationNumber===e.registrationNumber}}return e.url="TrnAunTransportationVehicle",e.urlAun="TrnAunTransportationVehicle/aun",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"atvId"})],e.prototype,"atvId",void 0),Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"aunId",void 0),Object(s.b)([Object(a.b)({alias:"brand"})],e.prototype,"brand",void 0),Object(s.b)([Object(a.b)({alias:"model"})],e.prototype,"model",void 0),Object(s.b)([Object(a.b)({alias:"registrationNumber"})],e.prototype,"registrationNumber",void 0),e})()},sPXw:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("F7pt"),a=i("0Uwp"),n=i("CR6u"),o=i("fXoL");let r=(()=>{class e{constructor(){}getDefinitions(){const e=[],t=new s.a;t.domId="responsible",t.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",t.helpText="",t.isRequired=!0,e.push(t);const i=s.a.createDefaultCheckboxGroupDef();i.domId="battery-types",i.labelText="",i.helpText="",i.placeHolderText="",i.isRequired=!1,e.push(i);const n=new s.a;n.domId="dist-sale",n.labelText="\u041f\u0440\u043e\u0434\u0430\u0436\u0431\u0430 \u043e\u0442 \u0440\u0430\u0437\u0441\u0442\u043e\u044f\u043d\u0438\u0435",n.helpText="",n.isRequired=!1,e.push(n);const o=new s.a;o.domId="proxy-agent",o.labelText="\u041f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0437\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0432\u0430\u043d\u0435 \u043d\u0430 \u0447\u0443\u0436\u0434\u0435\u0441\u0442\u0440\u0430\u043d\u043d\u043e \u0434\u0440\u0443\u0436\u0435\u0441\u0442\u0432\u043e \u0432 \u0441\u0442\u0440\u0430\u043d\u0430\u0442\u0430",o.helpText="",o.isRequired=!1,e.push(o);const r=a.a.createDefaultDropDownFormItemDef();r.domId="contact",r.labelText=null,r.isRequired=!1,r.helpText=null,r.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",e.push(r);const d=s.a.createDefaultCheckboxGroupDef();d.domId="oil_types",d.labelText="",d.helpText="",d.isRequired=!0,e.push(d);const c=s.a.createDefaultCheckboxGroupDef();return c.domId="m-address",c.labelText=null,c.helpText=null,c.isRequired=!1,c.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",e.push(c),e}getDynamicRowTrademarksDef(e,t){const i=s.a.createDefaultTextFormItemDef();return i.domId="trademark_"+e,i.placeHolderText="",i.labelText=null,i.isRequired=!0,t===n.a.READ&&(i.isDisabled=!0,i.isRequired=!1,i.helpText=null),i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"tm+x":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("fXoL"),a=i("F7pt"),n=i("3Pt+"),o=i("ofXK"),r=i("sYmb");function d(e,t){1&e&&(s.Sb(0,"div",7),s.Sb(1,"span",8),s.Nb(2,"i",9),s.Rb(),s.Rb())}let c=(()=>{class e{constructor(){this.valueEmitter=new s.n,this.step="0.001",this.formItemDef=null,this.showPrepend=!0,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new a.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){return this.valueEmitter.emit(e.value),this.formItemDef.isRequired&&(null==e.value||0===e.value.length||Number.isNaN(e.value))||this.isGreaterThanZero&&e.value<=0?{required:!0}:null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-float"]],inputs:{step:"step",isGreaterThanZero:"isGreaterThanZero",formItemDef:"formItemDef",value:"value",showPrepend:"showPrepend"},outputs:{valueEmitter:"valueEmitter"},features:[s.yb([{provide:n.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:n.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:14,vars:21,consts:[[1,"form-group"],[3,"for"],[1,"input-group","mb-1"],["class","input-group-prepend",4,"ngIf"],["type","number","aria-label","label","max","9999999999.00","autocomplete","off",1,"form-control",3,"id","name","placeholder","required","disabled","ngModel","min","step","ngModelChange"],[1,"invalid-feedback"],["id","input-text-2-Help",1,"form-text","text-muted"],[1,"input-group-prepend"],[1,"input-group-text","text-success"],[1,"fas","fa-circle","text-dark","fi-bullet"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"label",1),s.Gc(2),s.hc(3,"translate"),s.Rb(),s.Sb(4,"div",2),s.Ec(5,d,3,0,"div",3),s.Sb(6,"input",4),s.ec("ngModelChange",(function(e){return t.value=e})),s.hc(7,"translate"),s.Rb(),s.Sb(8,"div",5),s.Gc(9),s.hc(10,"translate"),s.Rb(),s.Rb(),s.Sb(11,"small",6),s.Gc(12),s.hc(13,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("for",t.formItemDef.domId),s.zb(1),s.Hc(s.ic(3,13,t.formItemDef.labelText)),s.zb(3),s.mc("ngIf",t.showPrepend),s.zb(1),s.nc("placeholder",s.ic(7,15,t.formItemDef.placeHolderText)),s.mc("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("disabled",t.formItemDef.isDisabled)("ngModel",t.value)("min",t.isGreaterThanZero?.01:0)("step",t.step),s.zb(3),s.Ic(" ",s.ic(10,17,"fi.components.float.error")," "),s.zb(3),s.Hc(s.ic(13,19,t.formItemDef.helpText)))},directives:[o.u,n.u,n.c,n.z,n.o,n.r],pipes:[r.d],styles:[""]}),e})()},vK0v:function(e,t,i){"use strict";i.d(t,"a",(function(){return Je}));var s=i("mrSG"),a=i("fXoL"),n=i("WCP0"),o=i("KQ7d"),r=i("Ol97"),d=i("CR6u"),c=i("4uOi"),l=i("ozDz"),h=i("pLGQ"),p=i("Hi78"),u=i("pVVs"),m=i("GJdz");class b{constructor(e){this.DO="\u0414\u041e",this.RD="\u0420\u0414",this.RD_TREATEMENT="TW",this.RD_TRANSPORT="CT",e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.methods=e.methods,this.ovosNumbDesc=e.ovosNumbDesc,this.saftyMeasures=e.saftyMeasures,this.docs=e.docs,this.wayRecieved=e.wayRecieved,this.addressRecieved=e.addressRecieved,this.tradeSecretsInfo=e.tradeSecretsInfo,this.isElectronicAcc=e.isElectronicAcc,this.transportationVehicles=e.transportationVehicles,this.transportationMethods=e.transportationMethods,this.organization=e.organization,this.otherDocs=e.otherDocs,this.otherDocsMetaData=e.otherDocsMetaData,this.stages=e.stages,this.regId=e.regId,this.toDeleteOtherDocs=e.toDeleteOtherDocs)}initialize(){this.legalEntity=new m.a,this.orgAddressData=new h.a({}),this.mailingAddressData=new h.a({}),this.contact=new o.a({}),this.transportationMethods=[],this.transportationVehicles=[],this.stages=[],this.otherDocs=[],this.otherDocsMetaData=[],this.toDeleteOtherDocs=[],this.docs=[],this.toDeleteTransportationVehicles=[],this.toInsertTransportationVehicles=[],this.toUpdateTransportationVehicles=[],this.toDeleteTransportationMethod=[],this.toInsertTransportationMethod=[],this.toUpdateTransportationMethods=[]}}var g=i("s71n"),f=i("SkKo"),R=i("P8sM"),S=i("KQW5"),I=i("u1cU"),y=i("2W/F"),T=i("9GxP"),E=i("aTmD"),D=i("yEue"),v=i("ROb3"),C=i("Yru1"),O=i("4m0f"),A=i("Z+Hd");let w=(()=>{class e{constructor(e){e&&(this.id=e.id,this.tcRegisters=e.tcRegisters,this.code=e.code,this.name=e.name)}}return e.url="TcAttachedDocTypes",e.urlPublic="Public/TcAttachedDocTypes",e})();var M=i("+QWa");class N{constructor(e){e&&(this.docType=e.docType,this.docMetaData=e.docMetaData,this.docFile=e.docFile,this.docSign=e.docSign,this.isSelected=!1,this.uid=Object(M.a)())}}var x=i("Xh5w"),k=i("N0QU"),F=i("r3es"),V=i("t8UU"),z=i("tyNb"),_=i("z9XM"),P=i("ZRIf"),j=i("4XRX"),L=i("sGcX"),B=i("3Pt+"),W=i("ofXK"),G=i("BXZV"),H=i("1kSV"),U=i("d+ck"),q=i("Pe2L"),$=i("QCcn"),K=i("QJFE"),Y=i("Bz/w"),X=i("LlKj"),Q=i("nI3r"),Z=i("PPGS"),J=i("TTlI"),ee=i("1o9G"),te=i("Mtn9"),ie=i("sYmb");const se=["contactApp"],ae=["address"],ne=["form"],oe=["actionList"],re=["errorLoadSwal"];function de(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Nb(1,"div",31),a.Sb(2,"div",31),a.Sb(3,"app-fi-select-dropdown",32),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().stageRiosCode=t})),a.Rb(),a.Rb(),a.Nb(4,"div",31),a.Rb()}if(2&e){const e=a.gc();a.zb(3),a.mc("ngModel",e.stageRiosCode)("formItemDef",e.formDefs[7])("name",e.formDefs[7].domName)("externalDataItems",e.transportRioses)}}function ce(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",35),a.ec("click",(function(){return a.wc(e),a.gc().copyAddress()})),a.Gc(6," \u041a\u043e\u043f\u0438\u0440\u0430\u0439 \u0430\u0434\u0440\u0435\u0441\u0430 "),a.Rb(),a.Sb(7,"button",36),a.Nb(8,"i",37),a.Nb(9,"i",38),a.Rb(),a.Rb(),a.Rb()}if(2&e){a.gc();const e=a.vc(7);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(6),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function le(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",39),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const he=function(e){return{"mb-0":e}};function pe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",40),a.Sb(1,"div",41),a.Sb(2,"h6",42),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",43),a.Sb(6,"app-fi-select-dropdown",44),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",45),a.Nb(8,"i",37),a.Nb(9,"i",38),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(7);a.zb(2),a.mc("ngClass",a.qc(11,he,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress"),""),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefs[9])("externalDataItems",e.addresses)("name",e.formDefs[9].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function ue(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",46,47),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function me(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",40),a.Sb(1,"div",41),a.Sb(2,"h6",42),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",43),a.Sb(5,"app-fi-select-dropdown",48),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",45),a.Nb(7,"i",37),a.Nb(8,"i",38),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(7);a.zb(2),a.mc("ngClass",a.qc(8,he,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefs[8])("externalDataItems",e.contacts)("name",e.formDefs[8].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function be(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",49,50),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}function ge(e,t){1&e&&(a.Sb(0,"h6",34),a.Gc(1),a.hc(2,"uppercase"),a.hc(3,"translate"),a.Rb()),2&e&&(a.zb(1),a.Ic(" ",a.ic(2,1,a.ic(3,3,"applications.m35.doLand")),""))}function fe(e,t){1&e&&(a.Sb(0,"h6",34),a.Gc(1),a.hc(2,"uppercase"),a.Rb()),2&e&&(a.zb(1),a.Ic(" ",a.ic(2,1,"\u0418\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0435 \u043d\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u043f\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0430\u043d\u0435 (\u0441\u044a\u0431\u0438\u0440\u0430\u043d\u0435 \u0438 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0430\u043d\u0435), \u0432 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \xa7 1, \u0442. 41 \u0438 43 \u043e\u0442 \u0414\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0438\u0442\u0435 \u0440\u0430\u0437\u043f\u043e\u0440\u0435\u0434\u0431\u0438 \u043d\u0430 \u0417\u0423\u041e \u043d\u0430 \u0442\u0435\u0440\u0438\u0442\u043e\u0440\u0438\u044f\u0442\u0430 \u043d\u0430 \u0446\u044f\u043b\u0430\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0430 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435, \u043f\u043e\u0441\u043e\u0447\u0435\u043d\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0430\u0442\u0430")," "))}function Re(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",33),a.Ec(1,ge,4,5,"h6",51),a.Ec(2,fe,3,3,"h6",51),a.Sb(3,"div"),a.Sb(4,"button",52),a.ec("click",(function(){a.wc(e);const t=a.gc(),i=a.vc(7);return t.onAddStage(),i.expand("landings")})),a.Nb(5,"i",53),a.Rb(),a.Sb(6,"button",36),a.Nb(7,"i",37),a.Nb(8,"i",38),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(7);a.zb(1),a.mc("ngIf",e.type!==e.APPLICATION_TYPES.M35_RD_TRANSPORT),a.zb(1),a.mc("ngIf",e.type===e.APPLICATION_TYPES.M35_RD_TRANSPORT),a.zb(2),a.mc("hidden","R"===e.mode||e.type===e.APPLICATION_TYPES.M35_RD_TRANSPORT),a.zb(3),a.mc("hidden",t.isExpanded("stages")),a.zb(1),a.mc("hidden",!t.isExpanded("stages"))}}function Se(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-stage-acc",56),a.ec("deleteStage",(function(t){return a.wc(e),a.gc(3).onDeleteStage(t)}))("formStatusValidChanged",(function(t){a.wc(e);const i=a.gc().index;return a.gc(2).onStagesValidityChange(t,i)}))("districtChangeEmitter",(function(t){return a.wc(e),a.gc(3).onDistrictChange(t)})),a.Rb()}if(2&e){const e=a.gc(),t=e.$implicit,i=e.index,s=a.gc(2);a.mc("model",t)("mode",s.mode)("index",i)("riosvCode",s.stageRiosCode)("type",s.type)("notInRiosvCode",s.notInRiosCodes)}}function Ie(e,t){if(1&e&&(a.Sb(0,"div"),a.Ec(1,Se,1,6,"app-stage-acc",55),a.Rb()),2&e){const e=t.$implicit;a.zb(1),a.mc("ngIf","DELETE"!==e.stageDataView.status)}}function ye(e,t){if(1&e&&a.Ec(0,Ie,2,1,"div",54),2&e){const e=a.gc();a.mc("ngForOf",e.application.stages)}}function Te(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"uppercase"),a.hc(4,"translate"),a.Rb(),a.Sb(5,"div"),a.Sb(6,"button",58),a.Nb(7,"i",37),a.Nb(8,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,a.ic(4,5,"applications.m35.transportTitle"))),a.zb(5),a.mc("hidden",e.isExpanded("ways")),a.zb(1),a.mc("hidden",!e.isExpanded("ways"))}}function Ee(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",70),a.Sb(1,"app-fi-input-text",23),a.ec("ngModelChange",(function(t){a.wc(e);const i=a.gc().index;return a.gc(3).application.transportationMethods[i].description=t})),a.Rb(),a.Rb()}if(2&e){const e=a.gc().index,t=a.gc(3);a.zb(1),a.mc("ngModel",t.application.transportationMethods[e].description)("formItemDef",t.waysDefs[3])("name",t.waysDefs[3].domName+"_"+e)}}function De(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",31),a.Sb(2,"input",67),a.ec("click",(function(){a.wc(e);const i=t.$implicit;return a.gc(3).checkMethod(i)})),a.Rb(),a.Sb(3,"label",68),a.Gc(4),a.Rb(),a.Rb(),a.Ec(5,Ee,2,3,"div",69),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(3);a.zb(2),a.mc("id",i)("disabled","R"===s.mode)("checked",e.isSelected),a.zb(1),a.mc("for",i),a.zb(1),a.Hc(e.description),a.zb(1),a.mc("ngIf",e.isSelected)}}function ve(e,t){if(1&e){const e=a.Tb();a.Sb(0,"tr",71),a.Sb(1,"th",72),a.Gc(2),a.Rb(),a.Sb(3,"td"),a.Sb(4,"input",73),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.brand=i})),a.Rb(),a.Rb(),a.Sb(5,"td"),a.Sb(6,"input",73),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.model=i})),a.Rb(),a.Rb(),a.Sb(7,"td"),a.Sb(8,"input",74),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.registrationNumber=i})),a.Rb(),a.Rb(),a.Sb(9,"td",75),a.Sb(10,"button",76),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(3).onDeleteVehicle(i)})),a.Nb(11,"i",77),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(3);a.zb(2),a.Hc(i+1),a.zb(2),a.mc("id","brand_"+i)("name","brand_"+i)("ngModel",e.brand)("disabled","R"===s.mode),a.zb(2),a.mc("id","model_"+i)("name","model_"+i)("ngModel",e.model)("disabled","R"===s.mode),a.zb(2),a.mc("id","regNo_"+i)("name","regNo_"+i)("disabled","R"===s.mode)("ngModel",e.registrationNumber),a.zb(2),a.mc("hidden","R"===s.mode)}}function Ce(e,t){if(1&e){const e=a.Tb();a.Ec(0,De,6,6,"div",59),a.Nb(1,"div",22),a.Sb(2,"h5",60),a.Gc(3,"\u041f\u0440\u0435\u0432\u043e\u0437\u043d\u0438\u0442\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430"),a.Rb(),a.Sb(4,"table",61),a.Sb(5,"thead"),a.Sb(6,"tr",62),a.Sb(7,"th",63),a.Gc(8,"\u2116"),a.Rb(),a.Sb(9,"th",63),a.Gc(10,"\u041c\u0410\u0420\u041a\u0410"),a.Rb(),a.Sb(11,"th",63),a.Gc(12,"\u041c\u041e\u0414\u0415\u041b"),a.Rb(),a.Sb(13,"th",63),a.Gc(14,"\u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u041e\u041d\u0415\u041d \u041d\u041e\u041c\u0415\u0420"),a.Rb(),a.Sb(15,"th",64),a.Sb(16,"button",65),a.ec("click",(function(){return a.wc(e),a.gc(2).addNewVehicle()})),a.Nb(17,"i",53),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(18,"tbody"),a.Ec(19,ve,12,14,"tr",66),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2);a.mc("ngForOf",e.methods),a.zb(16),a.mc("hidden","R"===e.mode),a.zb(3),a.mc("ngForOf",e.application.transportationVehicles)}}function Oe(e,t){1&e&&(a.Sb(0,"ngb-panel",57),a.Ec(1,Te,9,7,"ng-template",9),a.Ec(2,Ce,20,3,"ng-template",13),a.Rb())}function Ae(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",58),a.Nb(6,"i",37),a.Nb(7,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,"applications.m35.methodsTitle")),a.zb(4),a.mc("hidden",e.isExpanded("methods")),a.zb(1),a.mc("hidden",!e.isExpanded("methods"))}}function we(e,t){if(1&e){const e=a.Tb();a.Sb(0,"p",79),a.Gc(1,"(\u043e\u043f\u0438\u0441\u0432\u0430\u0442 \u0441\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0438\u0442\u0435 \u043c\u0435\u0442\u043e\u0434\u0438 \u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0437\u0430 \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0438 \u0441\u0435 \u043f\u043e\u0441\u043e\u0447\u0432\u0430 \u0432\u0438\u0434\u044a\u0442 \u0438 \u043a\u0430\u043f\u0430\u0446\u0438\u0442\u0435\u0442\u044a\u0442 \u043d\u0430 \u0441\u044a\u043e\u0440\u044a\u0436\u0435\u043d\u0438\u044f\u0442\u0430 \u0438 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0438\u0442\u0435 \u0437\u0430 \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435 \u0437\u0430 \u0432\u0441\u044f\u043a\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u043f\u043e \u043e\u0442\u0434\u0435\u043b\u043d\u043e) "),a.Rb(),a.Sb(2,"app-fi-input-long-text",23),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).application.methods=t})),a.Rb()}if(2&e){const e=a.gc(2);a.zb(2),a.mc("ngModel",e.application.methods)("formItemDef",e.formDefs[0])("name",e.formDefs[0].domName)}}function Me(e,t){1&e&&(a.Sb(0,"ngb-panel",78),a.Ec(1,Ae,8,5,"ng-template",9),a.Ec(2,we,3,3,"ng-template",13),a.Rb())}function Ne(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",58),a.Nb(6,"i",37),a.Nb(7,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,"applications.m35.casesTitle")),a.zb(4),a.mc("hidden",e.isExpanded("cases")),a.zb(1),a.mc("hidden",!e.isExpanded("cases"))}}function xe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"p",79),a.Gc(1,"\u0438\u043b\u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u0435, \u0441 \u043a\u043e\u0435\u0442\u043e \u0435 \u043f\u0440\u0435\u0446\u0435\u043d\u0435\u043d\u043e \u0434\u0430 \u043d\u0435 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u041e\u0412\u041e\u0421 \u043f\u043e \u0440\u0435\u0434\u0430 \u043d\u0430 \u0417\u0430\u043a\u043e\u043d\u0430 \u0437\u0430 \u043e\u043f\u0430\u0437\u0432\u0430\u043d\u0435 \u043d\u0430 \u043e\u043a\u043e\u043b\u043d\u0430\u0442\u0430 \u0441\u0440\u0435\u0434\u0430, \u0438/\u0438\u043b\u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u043e \u043e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430 \u0441\u044a\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442 \u043f\u043e \u0440\u0435\u0434\u0430 \u043d\u0430 \u0447\u043b. 31 \u043e\u0442 \u0417\u0430\u043a\u043e\u043d\u0430 \u0437\u0430 \u0431\u0438\u043e\u043b\u043e\u0433\u0438\u0447\u043d\u043e\u0442\u043e \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u0438\u0437\u0438\u0441\u043a\u0432\u0430\u0442 \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0442\u0430 \u0438\u043b\u0438 \u0441\u0432\u044a\u0440\u0437\u0430\u043d\u0438\u0442\u0435 \u0441 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0442\u0430 \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0435\u043a\u0442\u0438 "),a.Rb(),a.Sb(2,"app-fi-input-long-text",23),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).application.ovosNumbDesc=t})),a.Rb()}if(2&e){const e=a.gc(2);a.zb(2),a.mc("ngModel",e.application.ovosNumbDesc)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName)}}function ke(e,t){1&e&&(a.Sb(0,"ngb-panel",80),a.Ec(1,Ne,8,5,"ng-template",9),a.Ec(2,xe,3,3,"ng-template",13),a.Rb())}function Fe(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",58),a.Nb(6,"i",37),a.Nb(7,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc(2);const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,"applications.m35.descTitle")),a.zb(4),a.mc("hidden",e.isExpanded("desc")),a.zb(1),a.mc("hidden",!e.isExpanded("desc"))}}function Ve(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-input-long-text",23),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).application.saftyMeasures=t})),a.Rb()}if(2&e){const e=a.gc(2);a.mc("ngModel",e.application.saftyMeasures)("formItemDef",e.formDefs[6])("name",e.formDefs[6].domName)}}function ze(e,t){1&e&&(a.Sb(0,"ngb-panel",81),a.Ec(1,Fe,8,5,"ng-template",9),a.Ec(2,Ve,1,3,"ng-template",13),a.Rb())}function _e(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",58),a.Nb(6,"i",37),a.Nb(7,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,"applications.m35.desireTitle")),a.zb(4),a.mc("hidden",e.isExpanded("way-recive")),a.zb(1),a.mc("hidden",!e.isExpanded("way-recive"))}}function Pe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-way-recive-form",49,82),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onWayRecieveValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.model.wayRecieved)("mode",e.mode)}}function je(e,t){if(1&e&&(a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",58),a.Nb(6,"i",37),a.Nb(7,"i",38),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(7);a.zb(2),a.Hc(a.ic(3,3,"applications.m35.appsTitle")),a.zb(4),a.mc("hidden",e.isExpanded("apps")),a.zb(1),a.mc("hidden",!e.isExpanded("apps"))}}function Le(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",31),a.Sb(2,"h6",87),a.ec("click",(function(){a.wc(e);const t=a.gc(2).$implicit;return a.gc(2).downloadPaymentDocument(t.docMetaData.id,t.docMetaData.fileName)})),a.Gc(3),a.Rb(),a.Rb(),a.Sb(4,"div",88),a.Sb(5,"button",89),a.ec("click",(function(){a.wc(e);const t=a.gc(2).$implicit;return a.gc(2).toDeleteAttachedDoc(t)})),a.Gc(6,"\u041a\u0430\u0447\u0435\u0442\u0435 \u043d\u043e\u0432 \u0444\u0430\u0439\u043b"),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2).$implicit,t=a.gc(2);a.zb(3),a.Ic(" ",e.docMetaData.fileName," "),a.zb(2),a.mc("hidden","R"===t.mode)}}function Be(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-file-browse",91),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(3).$implicit.docSign=t})),a.Rb()}if(2&e){const e=a.gc(3).$implicit,t=a.gc(2);a.mc("ngModel",e.docSign)("formItemDef",t.m35DefsGenerator.getSignDef(e.uid))("name",e.uid+"_sign")("showClearBtn",!1)}}function We(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",90),a.Sb(2,"app-fi-file-browse",91),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc(2).$implicit.docFile=t})),a.Rb(),a.Rb(),a.Sb(3,"div",90),a.Ec(4,Be,1,4,"app-fi-file-browse",92),a.Rb(),a.Rb()}if(2&e){const e=a.gc(2).$implicit,t=a.gc(2);a.zb(2),a.mc("ngModel",e.docFile)("formItemDef",t.m35DefsGenerator.getOtherDocDef(e.uid))("name",e.uid+"_file")("showClearBtn",!1),a.zb(2),a.mc("ngIf",!t.isInnerUser)}}function Ge(e,t){if(1&e&&(a.Sb(0,"div"),a.Ec(1,Le,7,2,"div",3),a.Ec(2,We,5,5,"div",3),a.Rb()),2&e){const e=a.gc().$implicit,t=a.gc(2);a.zb(1),a.mc("ngIf",e.docMetaData),a.zb(1),a.mc("ngIf",!e.docMetaData&&"R"!==t.mode)}}function He(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",84),a.Sb(1,"input",85),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(2).onAppDocCheck(i)})),a.Rb(),a.Sb(2,"label",68),a.Gc(3),a.Rb(),a.Ec(4,Ge,3,2,"div",86),a.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=a.gc(2);a.zb(1),a.mc("id",e.uid)("checked",e.isSelected)("disabled","R"===s.mode||0===i),a.zb(1),a.mc("for",e.uid),a.zb(1),a.Hc(e.docType.name),a.zb(1),a.mc("ngIf",e.isSelected)}}function Ue(e,t){if(1&e&&a.Ec(0,He,5,6,"div",83),2&e){const e=a.gc();a.mc("ngForOf",null==e.application?null:e.application.docs)}}function qe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",33),a.Sb(1,"h6",34),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"div"),a.Sb(5,"button",93),a.ec("click",(function(){a.wc(e);const t=a.gc(),i=a.vc(7);return t.onAddOtherDocument(),i.expand("docs-copy")})),a.hc(6,"translate"),a.Nb(7,"i",53),a.Rb(),a.Sb(8,"button",36),a.Nb(9,"i",37),a.Nb(10,"i",38),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(7);a.zb(2),a.Hc(a.ic(3,5,"applications.m35.docsTitle")),a.zb(3),a.nc("ngbTooltip",a.ic(6,7,"buttons.addRow.tooltip")),a.mc("hidden","R"===e.mode),a.zb(4),a.mc("hidden",t.isExpanded("docs-copy")),a.zb(1),a.mc("hidden",!t.isExpanded("docs-copy"))}}function $e(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",31),a.Sb(2,"h6",87),a.ec("click",(function(){a.wc(e);const i=t.$implicit;return a.gc(2).downloadPaymentDocument(i.id,i.fileName)})),a.Gc(3),a.Rb(),a.Rb(),a.Nb(4,"div",94),a.Sb(5,"div",95),a.Sb(6,"button",96),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(2).onDeleteOtherDocumentMetaData(i)})),a.Nb(7,"i",77),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(2);a.zb(3),a.Ic(" ",e.fileName," "),a.zb(3),a.mc("hidden","R"===i.mode)}}function Ke(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-file-browse",91),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().$implicit.signFile=t})),a.Rb()}if(2&e){const e=a.gc().$implicit,t=a.gc(2);a.mc("ngModel",e.signFile)("formItemDef",t.m35DefsGenerator.getSignDef(e.uid))("name",e.uid+"_sign")("showClearBtn",!1)}}function Ye(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",30),a.Sb(1,"div",97),a.Sb(2,"app-fi-file-browse",91),a.ec("ngModelChange",(function(i){return a.wc(e),t.$implicit.file=i})),a.Rb(),a.Rb(),a.Sb(3,"div",97),a.Ec(4,Ke,1,4,"app-fi-file-browse",92),a.Rb(),a.Nb(5,"div",95),a.Sb(6,"div",95),a.Sb(7,"button",98),a.ec("click",(function(){a.wc(e);const i=t.index;return a.gc(2).onDeleteOtherDocument(i)})),a.Nb(8,"i",77),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=t.$implicit,i=a.gc(2);a.zb(2),a.mc("ngModel",e.file)("formItemDef",i.m35DefsGenerator.getOtherDocDef(e.uid))("name",e.uid+"_file")("showClearBtn",!1),a.zb(2),a.mc("ngIf",!i.isInnerUser),a.zb(3),a.mc("hidden","R"===i.mode)}}function Xe(e,t){if(1&e&&(a.Ec(0,$e,8,2,"div",59),a.Ec(1,Ye,9,6,"div",59)),2&e){const e=a.gc();a.mc("ngForOf",e.application.otherDocsMetaData),a.zb(1),a.mc("ngForOf",e.application.otherDocs)}}function Qe(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-fi-input-checkbox",23),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.docsCopy=t})),a.Rb()}if(2&e){const e=a.gc();a.mc("ngModel",e.model.docsCopy)("formItemDef",e.formDefs[3])("name",e.formDefs[3].domName)}}const Ze=function(){return["contact-app","organization-address","mailing-address","contact-person","landings","methods","cases","stages","desire","apps","desc","way-recive","ways","docs-copy"]};let Je=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this.m35DefsGenerator=t,this.crudService=i,this.sessionInfoService=s,this.mmSpinnerService=n,this.YES="Y",this.ERROR="error",this.TRANSP_METHOD="TRANSP_METHOD",this.APPLICATION_TYPES=c.a,this.applicationsDefinitions=[],this.formDefs=[],this.model={},this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.wayRecieveValidity=!1,this.areStagesValidProp=!1,this.contacts=[],this.addresses=[],this.stageRiosCode=null,this.waysDefs=[],this.formValidStatus="INVALID",this.statusSubscriber=null,this.isActionListReady=!1,this.isActionListSuccess=!1,this.mode=d.a.READ,this.areInnerFormsValid=!1,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authLoader=new p.a(i),this.stageLoader=new y.a(i),this.authSaver=new D.a(i)}ngOnInit(){this.loadTransportMethods(),this.loadDefinitions(),this.prepareApplication(),this.handleMode()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(e){var t,i,s,a,n,o,r,d;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(s=e.mode)||void 0===s?void 0:s.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(n=e.type)||void 0===n?void 0:n.firstChange)===(null===(o=e.type)||void 0===o?void 0:o.previousValue)&&(null===(r=e.roleId)||void 0===r?void 0:r.firstChange)===(null===(d=e.roleId)||void 0===d?void 0:d.previousValue)||(this.loadTransportMethods(),this.loadDefinitions(),this.prepareApplication(),this.handleMode())}handleMode(){return Object(s.a)(this,void 0,void 0,(function*(){this.mode!==d.a.READ&&this.mode!==d.a.EDIT||this.isFormLoading.emit(!0);const e=(yield this.loadAppsDefinitions()).pageContent;switch(this.prepareDocs(e),this.mode){case d.a.READ:this.disableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.setRegId(),this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}));break;case d.a.NEW:this.enableFields(),this.loadAuthBasicData(),this.onAddStage(!0),this.checkUserRiosv(),this.setRegId();break;case d.a.EDIT:this.enableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.setRegId(),this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}))}}))}onHeadquartersValidityChange(e){this.headquartersValidity="VALID"===e,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity="VALID"===e,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity="VALID"===e,this.setInnerFormsValidity()}onWayRecieveValidityChange(e){this.wayRecieveValidity="VALID"===e,this.setInnerFormsValidity()}onStagesValidityChange(e,t){const i="VALID"===e;this.model.stagesValidity[t]!==i&&(this.model.stagesValidity[t]=i,this.areStagesValid(),this.setInnerFormsValidity())}areStagesValid(){for(const e of this.model.stagesValidity)if(!e)return void(this.areStagesValidProp=!1);this.areStagesValidProp=!0}setInnerFormsValidity(){this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&this.wayRecieveValidity&&this.areStagesValidProp,this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}loadDefinitions(){this.formDefs=this.m35DefsGenerator.getRDTreatDefinistions(),this.waysDefs=this.m35DefsGenerator.getRDTransportDefinistions()}loadAppsDefinitions(){return Object(s.a)(this,void 0,void 0,(function*(){const e=(yield this.getRegisterId()).pageContent[0].id;return this.crudService.loadByFind(w,w.urlPublic,{tcRegisters:e}).toPromise()}))}loadTransportMethods(){this.crudService.loadByParam(f.a,f.a.publicUrlDomain,this.TRANSP_METHOD).subscribe(e=>{this.methods=e,this.methods.forEach(e=>{const t=new R.a;t.description="",t.transportMethod=e.code,this.application.transportationMethods.push(t)})})}loadContactsByOrnId(e){this.crudService.loadByParam(o.a,o.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===d.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(l.a,this.isInnerUser?l.a.byOrnUrl:l.a.nonPrimaryAddressesUrl,this.isInnerUser?`${e}/D`:`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===d.a.EDIT&&this.checkAddress()})}loadTcRegByCode(e){return this.crudService.loadByFind(O.a,O.a.publicUrl,{code:e}).toPromise()}getNotInRiosCodes(){return this.crudService.loadByParamsInArray(String,u.a.urlGetRios,`orgId=${this.application.organization.id}&regId=${this.application.regId}`).toPromise()}redirectOnError(){this.router.navigate(this.isInnerUser?[`/${v.a.ADMIN}/${v.a.WORKSPACE}/${v.a.REGISTERIES}/${v.a.REG_VIEW}`]:[`${v.a.APPLICATIONS}/${v.a.M35_VIEW}`])}onActionListClose(){if(this.responseAunId){let e;this.isInnerUser&&!this.isInnerActualizing?(e=`/${v.a.ADMIN}/${v.a.WORKSPACE}/${v.a.REGISTERIES}/${v.a.REG_VIEW}`,this.router.navigate([e])):this.isInnerActualizing?(e=`/${v.a.ADMIN}/${v.a.WORKSPACE}/${v.a.M35_INTERNAL_WORKER}/${this.type}/${this.responseAunId}`,this.router.navigate([e])):(e=`${v.a.APPLICATIONS}/${v.a.M35_READ}`,this.router.navigate([e,this.type,this.responseAunId]))}}checkMethod(e){e.isSelected=!e.isSelected}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new o.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(s.a)(this,void 0,void 0,(function*(){if(e){console.log(e);const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new h.a({}),this.addressForm.disableNonEmptyFields=!1}))}onAppDocCheck(e){this.application.docs[e].isSelected=!this.application.docs[e].isSelected,this.application.docs[e].docFile=null,this.application.docs[e].docSign=null,this.application.docs[e].isSelected||this.toDeleteAttachedDoc(this.application.docs[e])}onOrgChanged(e){this.loadAuthBasicData(e)}onAddStage(e){if(null==this.application.stages&&(this.application.stages=[],this.model.stagesValidity=[]),e&&0===this.application.stages.length||!e){const e=this.getNextStagePermit();this.application.stages.push(new r.a(this.type===c.a.M35_RD_TRANSPORT?{stageDataView:new k.a({permitStage:e}),trWasteType:[new C.a]}:{wasteTypes:[new C.a],stageDataView:new k.a({permitStage:e})}))}}onDeleteStage(e){null!=this.application.stages&&(this.application.stages[e].stageDataView.status=A.a.DELETED,this.model.stagesValidity[e]=!0,this.areStagesValid(),this.setInnerFormsValidity())}onDistrictChange(e){null!=this.stageRiosCode&&this.isRiosUseable()||(this.stageRiosCode=e)}isRiosUseable(){return null!=this.application.stages&&0!==this.application.stages.length&&null!=this.application.stages.find(e=>null!=e.stageDataView.distEknm)}onAddOtherDocument(){null==this.application.otherDocs&&(this.application.otherDocs=[]);const e=new S.a;this.application.otherDocs.push(e)}onDeleteOtherDocument(e){this.application.otherDocs.splice(e,1)}onDeleteOtherDocumentMetaData(e){this.application.toDeleteOtherDocs.push(this.application.otherDocsMetaData[e]),this.application.otherDocsMetaData.splice(e,1)}downloadPaymentDocument(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.authLoader.loadPaymentDocument(e);Object(I.a)(i,t)}))}addNewVehicle(){this.application.transportationVehicles.push(new g.a({}))}onDeleteVehicle(e){this.application.transportationVehicles=this.application.transportationVehicles.filter((t,i)=>{if(i!==e)return t})}copyAddress(){this.application.mailingAddressData=new h.a(this.application.orgAddressData),this.application.mailingAddressData.trnOrnAddrId=null}checkUserRiosv(){if(this.isInnerUser&&2!==this.roleId){const e=this.sessionInfoService.getRiosv();this.stageRiosCode=null==e?void 0:e.riosCode}}isExcludedDocType(e){return"DO3"===e||"D16"===e||"TW3"===e||"TW5"===e||"CT3"===e||"CT4"===e}prepareDocs(e){e.forEach(e=>{this.isExcludedDocType(e.code)||this.application.docs.push(new N({docType:e,docMetaData:null,docFile:null,docSign:null}))}),this.application.docs[0].isSelected=!0}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadAuthBasicData(e){return Object(s.a)(this,void 0,void 0,(function*(){let t;t=this.isInnerUser?e:yield this.getUserOrganization(),t?(this.application.organization=t,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(t.id,this.isInnerUser),this.fillLegalEntityData(t)):(this.application.organization=new n.a({}),this.application.orgAddressData=new h.a({}),this.application.legalEntity=new m.a,this.application.mailingAddressData=new h.a({}),this.application.contact=new o.a({}),this.model.mailingAddress=null,this.model.contactPerson=null,this.contacts=[],this.addresses=[])}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}getUserOrganization(){return Object(s.a)(this,void 0,void 0,(function*(){return this.sessionInfoService.getOrganization()}))}getFileAppDef(e,t){return this.m35DefsGenerator.getAppDocumentDef(e,t)}disableFields(){this.formDefs.forEach(e=>{e.isDisabled=!0}),this.waysDefs[3].isDisabled=!0,this.model.responsibility=!0}enableFields(){this.formDefs.forEach(e=>{e.isDisabled=!1}),this.waysDefs[3].isDisabled=!1,this.mode===d.a.NEW&&(this.model.responsibility=!1,this.model.contactPerson=null,this.model.mailingAddress=null),this.applicationsDefinitions.forEach(e=>{e.isDisabled=!1})}getRegisterId(){let e=null;switch(this.type){case c.a.M35_DO:e="DO";break;case c.a.M35_RD_TREAT:e="TW";break;case c.a.M35_RD_TRANSPORT:e="CT"}return this.loadTcRegByCode(e)}setRegId(){var e,t;return Object(s.a)(this,void 0,void 0,(function*(){const i=null===(e=(yield this.getRegisterId()).pageContent[0])||void 0===e?void 0:e.id;this.application.regId=i,this.isInnerUser||(this.notInRiosCodes=yield this.getNotInRiosCodes()),this.mode!==d.a.READ&&(this.transportRioses=(yield this.crudService.loadByFind(V.a,V.a.publicUrl,{}).toPromise()).pageContent),(null===(t=this.notInRiosCodes)||void 0===t?void 0:t.length)>0&&(this.transportRioses=this.transportRioses.filter(e=>this.riosExists(e)))}))}riosExists(e){for(const t of this.notInRiosCodes)if(e.riosCode==t)return!1;return!0}prepareApplication(){this.application=new b({}),this.application.initialize(),this.model.wayRecieved={},this.model.stagesValidity=[]}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat?e.bulstat:e.egn,legalEntity:e.name}}fillDoData(e){this.application.methods=e.wasteTreatmentMethod,this.application.saftyMeasures=e.saftyMeasuresDesc,this.application.ovosNumbDesc=e.ovosNumbDesc,this.application.tradeSecretsInfo=e.tradeSecretsInfo,this.model.docsCopy=!0}fillRDTransportData(e){return Object(s.a)(this,void 0,void 0,(function*(){this.application.transportationVehicles=(yield this.authLoader.loadTransportationsVehicles(e.id)).pageContent,this.startedTransportationVehicles=Object(F.a)(g.a,this.application.transportationVehicles);const t=(yield this.authLoader.loadTransportationMethods(e.id)).pageContent;this.startedTransportationMethods=Object(F.a)(R.a,t),this.handleTransportationMethods(t)}))}setWayRecievedModel(e){e.wayRecive&&(this.model.wayRecieved=e.wayRecive.endsWith("0")?{wayRecive:e.wayRecive}:{wayRecive:"10",wayReciveAddress:e.wayRecive,addressRecive:e.addressRecive})}handleTransportationMethods(e){this.methods.forEach(t=>{e.forEach(e=>{e.transportMethod===t.code&&(t.isSelected=!0)})}),this.application.transportationMethods.forEach(t=>{e.forEach(e=>{t.transportMethod===e.transportMethod&&(t.description=e.description)})})}parseWayRecive(){this.application.wayRecieved=this.model.wayRecieved.wayReciveAddress?this.model.wayRecieved.wayReciveAddress:this.model.wayRecieved.wayRecive,this.application.addressRecieved=this.model.wayRecieved.addressRecive}setOtherDocs(e){this.application.otherDocsMetaData=e.filter(e=>{if(!e.tcAttachedDocTypeId)return e})}mapAttachedDocs(e){this.application.docs.forEach(t=>{e.forEach(e=>{t.docType.id===e.tcAttachedDocTypeId&&(t.docMetaData=e,t.isSelected=!0)})})}toDeleteAttachedDoc(e){this.application.toDeleteOtherDocs.push(new x.a(e.docMetaData)),e.docMetaData=null}getNextStagePermit(){if(null==this.application)return;if(null==this.application.stages||0===this.application.stages.length)return 1;let e=1;return this.application.stages.forEach(t=>{t.stageDataView&&(e=t.stageDataView.permitStage>=e?t.stageDataView.permitStage+1:e)}),e}setFinalTransportationMethods(){this.application.finalTransportationMethods=this.application.transportationMethods.filter(e=>{for(const t of this.methods)if(e.transportMethod===t.code&&t.isSelected)return e}),this.mode!==d.a.READ&&this.mode!==d.a.EDIT||this.application.finalTransportationMethods.forEach((e,t)=>{this.startedTransportationMethods.forEach(i=>{if(e.transportMethod===i.transportMethod){const s=e.description;this.application.finalTransportationMethods[t]=new R.a(i),this.application.finalTransportationMethods[t].description=s}})})}prepareTransportationMethods(){this.application.finalTransportationMethods.forEach(e=>{let t=!1;for(const i of this.startedTransportationMethods)if(e.id===i.id){e.equals(i)||this.application.toUpdateTransportationMethods.push(e),t=!0;break}t||this.application.toInsertTransportationMethod.push(e)}),this.startedTransportationMethods.forEach(e=>{let t=!1;for(const i of this.application.finalTransportationMethods)if(i.id===e.id){t=!0;break}t||this.application.toDeleteTransportationMethod.push(e)})}prepareTransportationVehicles(){this.application.transportationVehicles.forEach(e=>{let t=!1;for(const i of this.startedTransportationVehicles)if(e.id===i.id){e.equals(i)||this.application.toUpdateTransportationVehicles.push(e),t=!0;break}t||this.application.toInsertTransportationVehicles.push(e)}),this.startedTransportationVehicles.forEach(e=>{let t=!1;for(const i of this.application.transportationVehicles)if(i.id===e.id){t=!0;break}t||this.application.toDeleteTransportationVehicles.push(e)})}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){try{this.transportRioses=(yield this.crudService.loadByFind(V.a,V.a.publicUrl,{}).toPromise()).pageContent;const t=yield this.authLoader.loadAuthorizationById(e);this.application.id=t.id,this.stageRiosCode=t.riosvCodeN1,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.setWayRecievedModel(t),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.mode===d.a.EDIT&&this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id,this.isInnerUser);const i=(yield this.authLoader.loadAttachedDocumentMetaData(this.application.id)).pageContent;this.setOtherDocs(i),this.mapAttachedDocs(i),this.stageLoader.loadStagesByAunId(this.application.id,this.application.stages),this.type!==c.a.M35_DO&&this.type!==c.a.M35_RD_TREAT||this.fillDoData(t),this.type===c.a.M35_RD_TRANSPORT&&this.fillRDTransportData(t),this.model.tradeSecret=!0,this.application.isElectronicAcc=t.isElectronicAcc===this.YES}catch(t){console.error(t),this.errorLoadSwal.fire()}}))}onSave(){return Object(s.a)(this,void 0,void 0,(function*(){this.parseWayRecive(),this.setFinalTransportationMethods(),this.prepareSaveActions(),this.application.riosvCodeN1=this.stageRiosCode,this.actionList.open();const e=yield this.authSaver.saveM35Authorization(this.application,this.type,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareSaveActions(){var e,t,i,a,n,o,r,d;return Object(s.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",E.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",E.a.WORKING,!1)),this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",E.a.WORKING,!1)),(null===(e=this.application)||void 0===e?void 0:e.finalTransportationMethods.length)>0&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043c\u0435\u0442\u043e\u0434\u0438 \u0437\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442",E.a.WORKING,!1)),(null===(t=this.application)||void 0===t?void 0:t.transportationVehicles.length)>0&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u0440\u0435\u0432\u043e\u0437\u043d\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430",E.a.WORKING,!1)),(null===(a=null===(i=this.application)||void 0===i?void 0:i.stages)||void 0===a?void 0:a.length)>0&&this.application.stages.forEach((e,t)=>{var i;e.stageDataView.status!==A.a.DELETED&&(this.type===c.a.M35_RD_TRANSPORT?(null===(i=e.trWasteType)||void 0===i?void 0:i.length)>0&&this.actions.push(new T.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0432\u0438\u0434\u043e\u0432\u0435 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438",E.a.WORKING,!1)):this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.stageDataView.permitStage}`,E.a.WORKING,!1)))}),(null===(o=null===(n=this.application)||void 0===n?void 0:n.docs)||void 0===o?void 0:o.length)>0&&this.application.docs.forEach(e=>{var t;e.isSelected&&e.docFile&&this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ${null===(t=e.docFile)||void 0===t?void 0:t.name}`,E.a.WORKING,!1))}),(null===(d=null===(r=this.application)||void 0===r?void 0:r.otherDocs)||void 0===d?void 0:d.length)>0&&this.application.otherDocs.forEach(e=>{var t;this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ${null===(t=e.file)||void 0===t?void 0:t.name}`,E.a.WORKING,!1))}),this.actionList.actionList=this.actions,this.isActionListReady=!1}))}onEdit(){return Object(s.a)(this,void 0,void 0,(function*(){this.parseWayRecive(),this.setFinalTransportationMethods(),this.type===c.a.M35_RD_TRANSPORT&&(this.prepareTransportationMethods(),this.prepareTransportationVehicles()),this.prepareEditActions(),this.actionList.open();const e=yield this.authSaver.editM35Authorization(this.application,this.type,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareEditActions(){var e,t,i,s,a,n,o,r,d,l,h,p,u,m,b;this.actions=[],this.application.contact.id||this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",E.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",E.a.WORKING,!1)),this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",E.a.WORKING,!1)),((null===(t=null===(e=this.application)||void 0===e?void 0:e.toDeleteTransportationMethod)||void 0===t?void 0:t.length)>0||(null===(i=this.application.toInsertTransportationMethod)||void 0===i?void 0:i.length)>0||(null===(s=this.application.toUpdateTransportationMethods)||void 0===s?void 0:s.length)>0)&&this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043c\u0435\u0442\u043e\u0434\u0438 \u0437\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442",E.a.WORKING,!1)),((null===(a=this.application.toDeleteTransportationVehicles)||void 0===a?void 0:a.length)>0||(null===(n=this.application.toInsertTransportationVehicles)||void 0===n?void 0:n.length)>0||(null===(o=this.application.toUpdateTransportationVehicles)||void 0===o?void 0:o.length)>0)&&this.actions.push(new T.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u0440\u0435\u0432\u043e\u0437\u043d\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430",E.a.WORKING,!1)),(null===(d=null===(r=this.application)||void 0===r?void 0:r.stages)||void 0===d?void 0:d.length)>0&&this.application.stages.forEach((e,t)=>{let i=null;e.stageDataView.status===A.a.DELETED&&e.stageDataView.stageId?i=`\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.stageDataView.permitStage}`:e.stageDataView.status===A.a.CHANGED?i=`\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.stageDataView.permitStage}`:e.stageDataView.status===A.a.NEW?i=`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.stageDataView.permitStage}`:e.stageDataView.status===A.a.NOT_CHANGED&&e.isEdittable(this.type)&&(i=this.type===c.a.M35_RD_TRANSPORT?"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0432\u0438\u0434\u043e\u0432\u0435 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438":`\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u2116 ${e.stageDataView.permitStage}`),i&&this.actions.push(new T.a(i,E.a.WORKING,!1))}),(null===(h=null===(l=this.application)||void 0===l?void 0:l.docs)||void 0===h?void 0:h.length)>0&&this.application.docs.forEach(e=>{var t;e.isSelected&&e.docFile&&this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ${null===(t=e.docFile)||void 0===t?void 0:t.name}`,E.a.WORKING,!1))}),(null===(u=null===(p=this.application)||void 0===p?void 0:p.otherDocs)||void 0===u?void 0:u.length)>0&&this.application.otherDocs.forEach(e=>{var t;this.actions.push(new T.a(`\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ${null===(t=e.file)||void 0===t?void 0:t.name}`,E.a.WORKING,!1))}),(null===(b=null===(m=this.application)||void 0===m?void 0:m.toDeleteOtherDocs)||void 0===b?void 0:b.length)>0&&this.application.toDeleteOtherDocs.forEach(e=>{this.actions.push(new T.a(`\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: ${null==e?void 0:e.fileName}`,E.a.WORKING,!1))}),this.actionList.actionList=this.actions,this.isActionListReady=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(z.c),a.Mb(_.a),a.Mb(P.a),a.Mb(j.a),a.Mb(L.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-m35"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(se,!0),a.Nc(ae,!0),a.Nc(ne,!0),a.Nc(oe,!0),a.Nc(re,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.errorLoadSwal=i.first))},inputs:{mode:"mode",type:"type",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",isInnerUser:"isInnerUser",roleId:"roleId",isInnerActualizing:"isInnerActualizing",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:43,vars:25,consts:[[1,"container-fluid","p-3"],["novalidate","",1,"was-validated"],["form","ngForm"],["class","row",4,"ngIf"],[3,"isReadonly","model","isInnerUser","orgEmitter"],["basicInfo",""],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],["id","stages"],["id","ways",4,"ngIf"],["id","methods",4,"ngIf"],["id","cases",4,"ngIf"],["id","desc",4,"ngIf"],["id","way-recive"],["id","apps"],["id","docs-copy"],[1,"mt-3"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","formItemDef","name","ngModelChange",4,"ngIf"],[1,"mt-4"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",3,"showConfirmButton","icon","confirm"],["errorLoadSwal",""],[1,"row"],[1,"col-md-4"],["labelFieldName","cityName","valueFieldName","riosCode",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange"],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"btn","btn-sm","mr-2","btn-outline-secondary",3,"click"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""],["class","m-0",4,"ngIf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430","container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"hidden","click"],[1,"fas","fa-plus"],[4,"ngFor","ngForOf"],[3,"model","mode","index","riosvCode","type","notInRiosvCode","deleteStage","formStatusValidChanged","districtChangeEmitter",4,"ngIf"],[3,"model","mode","index","riosvCode","type","notInRiosvCode","deleteStage","formStatusValidChanged","districtChangeEmitter"],["id","ways"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-2"],["class","row",4,"ngFor","ngForOf"],[1,"mb-1","mt-0"],[1,"table","table-hover"],[1,"alert","alert-primary","text-center"],["scope","col"],["scope","col",1,"d-flex","justify-content-end","mr-4"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u0435\u0442\u0435 \u043f\u0440\u0435\u0432\u043e\u0437\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"hidden","click"],["class","text-center",4,"ngFor","ngForOf"],["type","checkbox",1,"mr-2",3,"id","disabled","checked","click"],[3,"for"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],[1,"text-center"],["scope","row"],["type","text","required","",1,"form-control",3,"id","name","ngModel","disabled","ngModelChange"],["type","text","required","",1,"form-control",3,"id","name","disabled","ngModel","ngModelChange"],[1,"d-flex","justify-content-end","mr-4"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439\u0442\u0435 \u043f\u0440\u0435\u0432\u043e\u0437\u043d\u043e\u0442\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"hidden","click"],[1,"fas","fa-trash-alt"],["id","methods"],[1,"mt-0","mb-1"],["id","cases"],["id","desc"],["recive",""],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","checked","disabled","click"],[4,"ngIf"],[1,"doc","alert","alert-primary",3,"click"],[1,"col-md-2"],[1,"btn","btn-primary","mt-1",3,"hidden","click"],[1,"col-md-5","mb-3"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange",4,"ngIf"],["container","body","placement","top",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"hidden","ngbTooltip","click"],[1,"col-md-7"],[1,"col-md-1"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","rounded-circle","mt-1","ml-4",3,"hidden","click"],[1,"col-md-5"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","rounded-circle","mt-4","ml-4",3,"hidden","click"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Ec(3,de,5,4,"div",3),a.Sb(4,"app-basic-app-info",4,5),a.ec("orgEmitter",(function(e){return t.onOrgChanged(e)})),a.Rb(),a.Sb(6,"ngb-accordion",6,7),a.Sb(8,"ngb-panel",8),a.Ec(9,ce,10,5,"ng-template",9),a.Ec(10,le,1,3,"ng-template",10),a.Rb(),a.Sb(11,"ngb-panel",11),a.Ec(12,pe,10,13,"ng-template",9),a.Ec(13,ue,2,3,"ng-template",10),a.Rb(),a.Sb(14,"ngb-panel",12),a.Ec(15,me,9,10,"ng-template",9),a.Ec(16,be,2,2,"ng-template",13),a.Rb(),a.Sb(17,"ngb-panel",14),a.Ec(18,Re,9,5,"ng-template",9),a.Ec(19,ye,1,1,"ng-template",13),a.Rb(),a.Ec(20,Oe,3,0,"ngb-panel",15),a.Ec(21,Me,3,0,"ngb-panel",16),a.Ec(22,ke,3,0,"ngb-panel",17),a.Ec(23,ze,3,0,"ngb-panel",18),a.Sb(24,"ngb-panel",19),a.Ec(25,_e,8,5,"ng-template",9),a.Ec(26,Pe,2,2,"ng-template",13),a.Rb(),a.Sb(27,"ngb-panel",20),a.Ec(28,je,8,5,"ng-template",9),a.Ec(29,Ue,1,1,"ng-template",13),a.Rb(),a.Sb(30,"ngb-panel",21),a.Ec(31,qe,11,9,"ng-template",9),a.Ec(32,Xe,2,2,"ng-template",13),a.Rb(),a.Rb(),a.Sb(33,"div",22),a.Sb(34,"app-fi-input-checkbox",23),a.ec("ngModelChange",(function(e){return t.application.isElectronicAcc=e})),a.Rb(),a.Ec(35,Qe,1,3,"app-fi-input-checkbox",24),a.Sb(36,"app-fi-input-checkbox",23),a.ec("ngModelChange",(function(e){return t.model.tradeSecret=e})),a.Rb(),a.Sb(37,"app-fi-input-long-text",23),a.ec("ngModelChange",(function(e){return t.application.tradeSecretsInfo=e})),a.Rb(),a.Rb(),a.Rb(),a.Nb(38,"div",25),a.Rb(),a.Sb(39,"app-action-tasks-list",26,27),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(41,"swal",28,29),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb()),2&e&&(a.zb(3),a.mc("ngIf",t.type===t.APPLICATION_TYPES.M35_RD_TRANSPORT&&(!t.isInnerUser||t.isInnerUser&&2===t.roleId)),a.zb(1),a.mc("isReadonly",!t.isInnerUser||"R"===t.mode||t.isInnerActualizing)("model",t.application.legalEntity)("isInnerUser",t.isInnerUser),a.zb(2),a.mc("destroyOnHide",!1)("activeIds",a.pc(24,Ze)),a.zb(14),a.mc("ngIf",t.type===t.APPLICATION_TYPES.M35_RD_TRANSPORT),a.zb(1),a.mc("ngIf",t.type===t.APPLICATION_TYPES.M35_DO||t.type===t.APPLICATION_TYPES.M35_RD_TREAT),a.zb(1),a.mc("ngIf",t.type===t.APPLICATION_TYPES.M35_DO||t.type===t.APPLICATION_TYPES.M35_RD_TREAT),a.zb(1),a.mc("ngIf",t.type===t.APPLICATION_TYPES.M35_DO),a.zb(11),a.mc("ngModel",t.application.isElectronicAcc)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName),a.zb(1),a.mc("ngIf",t.type!==t.APPLICATION_TYPES.M35_RD_TRANSPORT),a.zb(1),a.mc("ngModel",t.model.tradeSecret)("formItemDef",t.formDefs[4])("name",t.formDefs[4].domName),a.zb(1),a.mc("ngModel",t.application.tradeSecretsInfo)("formItemDef",t.formDefs[5])("name",t.formDefs[5].domName),a.zb(2),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("showConfirmButton",!0)("icon",t.ERROR))},directives:[B.D,B.p,B.q,W.u,G.a,H.a,H.I,H.K,H.J,U.a,B.o,B.r,q.a,$.a,K.a,Y.a,H.M,X.a,W.r,Q.a,H.ab,W.t,Z.a,J.a,B.c,B.z,ee.a,te.a],pipes:[ie.d,W.I],styles:["[_nghost-%COMP%]     .accordion>div>#contact-person-header.card-header, [_nghost-%COMP%]     .accordion>div>#mailing-address-header.card-header{padding-bottom:0}[_nghost-%COMP%]     #accordion>div>div.card-header{padding:.5rem}[_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:1rem}"]}),e})()},xgdq:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("mrSG"),a=i("hnrn");let n=(()=>{class e{constructor(e){e&&(this.id=e.id,this.aunId=e.aunId,this.sideEffect=e.sideEffect,this.statementFrom=e.statementFrom)}}return e.url="TrnAunSe",Object(s.b)([Object(a.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(a.b)({alias:"aunId"})],e.prototype,"aunId",void 0),Object(s.b)([Object(a.b)({alias:"sideEffect"})],e.prototype,"sideEffect",void 0),Object(s.b)([Object(a.b)({alias:"statementFrom"})],e.prototype,"statementFrom",void 0),e})()},yEue:function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var s=i("mrSG"),a=i("pVVs"),n=i("KQ7d"),o=i("ozDz"),r=i("v7XO"),d=i("64a6"),c=i("R5sY"),l=i("hnrn");let h=(()=>{class e{constructor(e){this.id=e.id,this.tradeMark=e.tradeMark}}return Object(s.b)([Object(l.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(l.b)({alias:"tradeMark"})],e.prototype,"tradeMark",void 0),e})(),p=(()=>{class e{constructor(e){this.id=null==e?void 0:e.id,this.swoId=null==e?void 0:e.swoId,this.wcyId=null==e?void 0:e.wcyId,this.ewc=null==e?void 0:e.ewc,this.aseId=null==e?void 0:e.aseId,this.homeElAppl=null==e?void 0:e.homeElAppl,this.nonHElAppl=null==e?void 0:e.nonHElAppl}}return Object(s.b)([Object(l.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(l.b)({alias:"swoId"})],e.prototype,"swoId",void 0),Object(s.b)([Object(l.b)({alias:"wcyId"})],e.prototype,"wcyId",void 0),Object(s.b)([Object(l.b)({alias:"ewc"})],e.prototype,"ewc",void 0),Object(s.b)([Object(l.b)({alias:"aseId"})],e.prototype,"aseId",void 0),Object(s.b)([Object(l.b)({alias:"homeElAppl"})],e.prototype,"homeElAppl",void 0),Object(s.b)([Object(l.b)({alias:"nonHElAppl"})],e.prototype,"nonHElAppl",void 0),e})(),u=(()=>{class e{constructor(e){e&&(this.id=e.id,this.bulstat=e.bulstat,this.cotAddress=e.cotAddress,this.cotEknm=e.cotEknm,this.cotEmail=e.cotEmail,this.cotFax=e.cotFax,this.cotFirstName=e.cotFirstName,this.cotLastName=e.cotLastName,this.cotMidName=e.cotMidName,this.cotPhone=e.cotPhone,this.coyCode=e.coyCode,this.ornName=e.ornName,this.ornNameEn=e.ornNameEn)}}return e.url="TrnMroRepresented",Object(s.b)([Object(l.b)({alias:"bulstat"})],e.prototype,"bulstat",void 0),Object(s.b)([Object(l.b)({alias:"cotAddress"})],e.prototype,"cotAddress",void 0),Object(s.b)([Object(l.b)({alias:"cotEknm"})],e.prototype,"cotEknm",void 0),Object(s.b)([Object(l.b)({alias:"cotEmail"})],e.prototype,"cotEmail",void 0),Object(s.b)([Object(l.b)({alias:"cotFax"})],e.prototype,"cotFax",void 0),Object(s.b)([Object(l.b)({alias:"cotFirstName"})],e.prototype,"cotFirstName",void 0),Object(s.b)([Object(l.b)({alias:"cotLastName"})],e.prototype,"cotLastName",void 0),Object(s.b)([Object(l.b)({alias:"cotMidName"})],e.prototype,"cotMidName",void 0),Object(s.b)([Object(l.b)({alias:"cotPhone"})],e.prototype,"cotPhone",void 0),Object(s.b)([Object(l.b)({alias:"coyCode"})],e.prototype,"coyCode",void 0),Object(s.b)([Object(l.b)({alias:"id"})],e.prototype,"id",void 0),Object(s.b)([Object(l.b)({alias:"ornName"})],e.prototype,"ornName",void 0),Object(s.b)([Object(l.b)({alias:"ornNameEn"})],e.prototype,"ornNameEn",void 0),e})();var m=i("NBd8"),b=i("AHL5"),g=i("01dd"),f=i("wIr5"),R=i("Xh5w"),S=i("z6cu"),I=i("LRne"),y=i("cp0P"),T=i("lJxs"),E=i("JIr8"),D=i("bOdf"),v=i("lB+K"),C=i("Z+Hd"),O=i("CwXB"),A=i("4uOi"),w=i("P8sM"),M=i("s71n"),N=i("MVXN"),x=i("7mdj"),k=i("xgdq"),F=i("tk/3");class V{constructor(e){this.crudService=e,this.TRADER="Trader",this.BROKER="Broker",this.MRO="MRO",this.DOCUMENT_CONTACT_TYPE="D",this.CONTACT_ADDRESS_TYPE="A",this.YES="Y",this.NO="N",this.areTrademarksSuccess=!0,this.areCategoriesSuccess=!0,this.areMroRepresentedsSuccess=!0,this.areTraderCodesSuccess=!0,this.areBrokerCodeSuccess=!0,this.isFileUploadSuccess=!0}saveContact2(e,t,i){return this.crudService.create(n.a.url,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),this.rejectActions(i,t),Object(S.a)(e)))).toPromise()}saveMailingAddress2(e,t,i){return this.crudService.create(o.a.url,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),this.rejectActions(i,t),Object(S.a)(e)))).toPromise()}saveTrnAuthorization2(e,t,i){return this.crudService.create(a.a.url,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),this.rejectActions(i,t),Object(S.a)(e)))).toPromise()}updateTrnAuthorization(e,t,i){return this.crudService.patchById(a.a.url,e.id,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),this.rejectActions(i,t),Object(S.a)(e)))).toPromise()}updateTrnWasteEndInfo(e,t,i){return this.crudService.patchById(x.a.url,e.id,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e)))).toPromise()}saveTrademarks(e,t){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(r.a.url,e).pipe(Object(E.a)(e=>(this.areTrademarksSuccess=!1,Object(I.a)(e))))}saveTrademarks2(e,t,i,s){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(r.a.url,e).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))))}deleteTrademarks(e){const t=e.map(e=>e.id);return this.crudService.deleteMany(r.a.url,t).pipe(Object(E.a)(e=>(this.areTrademarksSuccess=!1,Object(I.a)(e))))}updateTrademarks(e){const t=e.map(e=>new h(e));return this.crudService.updateMany(r.a.url,t).pipe(Object(E.a)(e=>(this.areTrademarksSuccess=!1,Object(I.a)(e))))}saveCategories(e,t){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(d.a.url,e).pipe(Object(E.a)(e=>(this.areCategoriesSuccess=!1,Object(I.a)(e))))}saveCategories2(e,t,i,s){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(d.a.url,e).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))))}deleteCategories(e){const t=e.map(e=>e.id);return this.crudService.deleteMany(d.a.url,t).pipe(Object(E.a)(e=>(this.areCategoriesSuccess=!1,Object(I.a)(e))))}updateCategories(e){const t=e.map(e=>new p(e));return this.crudService.updateMany(d.a.url,t).pipe(Object(E.a)(e=>(this.areCategoriesSuccess=!1,Object(I.a)(e))))}saveMroRepresenteds(e,t){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(c.a.url,e).pipe(Object(E.a)(e=>(this.areMroRepresentedsSuccess=!1,Object(I.a)(e))))}saveMroRepresenteds2(e,t,i,s){return e.forEach(e=>{e.aunId=t}),this.crudService.createMany(c.a.url,e).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))))}deleteMroRepresenteds(e){const t=e.map(e=>e.id);return this.crudService.deleteMany(u.url,t).pipe(Object(E.a)(e=>(this.areMroRepresentedsSuccess=!1,Object(I.a)(e))))}updateMroRepresenteds(e){const t=e.map(e=>new u(e));return this.crudService.updateMany(u.url,t).pipe(Object(E.a)(e=>(this.areMroRepresentedsSuccess=!1,Object(I.a)(e))))}createStage(e,t){const i=new g.a({aunId:e,comments:t});return this.crudService.create(g.a.url,i).toPromise()}saveTrnStageWasteOperations(e,t,i){return Object(b.b)(e,t),this.crudService.createMany(m.a.url,e).pipe(Object(E.a)(e=>(i===this.TRADER?this.areTraderCodesSuccess=!1:this.areBrokerCodeSuccess=!1,Object(I.a)(e))))}saveWasteCodes(e,t,i){const s=new g.a({aunId:e,comments:t,permitStage:t===this.TRADER?1:2,typeOfUsage:t===this.TRADER?"TR":"BR"});return this.crudService.create(g.a.url,s).pipe(Object(E.a)(e=>(t===this.TRADER?this.areTraderCodesSuccess=!1:this.areBrokerCodeSuccess=!1,Object(I.a)(e))),Object(D.a)(e=>this.saveTrnStageWasteOperations(i,e[0].id,t)))}deleteTrnStageWasteOperations(e,t){const i=e.map(e=>e.id);return this.crudService.deleteMany(m.a.url,i).pipe(Object(E.a)(e=>(t===this.TRADER?this.areTraderCodesSuccess=!1:this.areBrokerCodeSuccess=!1,Object(I.a)(e))))}savePaymentDocyment(e){return this.crudService.create(R.a.url,e).pipe(Object(E.a)(e=>(this.isFileUploadSuccess=!1,Object(S.a)(e))))}deletePaymentDocument(e){return this.crudService.delete(R.a.url,e).pipe(Object(E.a)(e=>(this.isFileUploadSuccess=!1,Object(S.a)(e))))}saveMROAuthorization(e,t){var i,a,n;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,o=this.parseMroApplicationModelToTrnAuthorizationsModel(e);if(!o.cotId){e.contact.ornId=e.organization.id;try{const i=(yield this.saveContact2(e.contact,t,s))[0].id;o.cotId=i}catch(d){return{status:!1,aunId:null}}s++}if(!o.addrId){const i=this.prepareTrnOrnAddress(e);try{const e=(yield this.saveMailingAddress2(i,t,s))[0].id;o.addrId=e}catch(d){return{status:!1,aunId:null}}s++}try{o=(yield this.saveTrnAuthorization2(o,t,s))[0],s++}catch(d){return{status:!1,aunId:null}}const r=[];if((null===(i=e.trademarks)||void 0===i?void 0:i.length)>0){const i=this.saveTrademarks2(e.trademarks,o.id,t,s);r.push(i),s++}if((null===(a=e.selectedCategories)||void 0===a?void 0:a.length)>0){const i=this.saveCategories2(e.selectedCategories,o.id,t,s);r.push(i),s++}if((null===(n=e.proxyAgents)||void 0===n?void 0:n.length)>0){const i=this.saveMroRepresenteds2(e.proxyAgents,o.id,t,s);r.push(i),s++}return yield Object(y.a)(r).toPromise(),this.isProccessSuccess(t,o.id)}))}editMroAuthorization(e,t,i){var a,n,o,r,d,c,l,h,p;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,u=this.parseMroApplicationModelToTrnAuthorizationsModel(e);if(!u.cotId){e.contact.ornId=e.organization.id;try{u.cotId=(yield this.saveContact2(e.contact,t,s)).id}catch(b){return{status:!1,aunId:null}}s++}if(!u.addrId){const i=this.prepareTrnOrnAddress(e);try{u.addrId=(yield this.saveMailingAddress2(i,t,s)).id}catch(b){return{status:!1,aunId:null}}s++}try{u=(yield this.updateTrnAuthorization(u,t,s))[0],s++}catch(b){return{status:!1,aunId:null}}const m=[];i.hasTrademarksOperations()&&((null===(a=i.toInsertTrnMroTrademarks)||void 0===a?void 0:a.length)>0&&m.push(this.saveTrademarks(i.toInsertTrnMroTrademarks,u.id)),(null===(n=i.toEditTrnMroTrademarks)||void 0===n?void 0:n.length)>0&&m.push(this.updateTrademarks(i.toEditTrnMroTrademarks)),(null===(o=i.toDeleteTrnMroTrademarks)||void 0===o?void 0:o.length)>0&&m.push(this.deleteTrademarks(i.toDeleteTrnMroTrademarks))),i.hasCategoriesOperations()&&((null===(r=i.toInsertTrnWasteCategories)||void 0===r?void 0:r.length)>0&&m.push(this.saveCategories(i.toInsertTrnWasteCategories,u.id)),(null===(d=i.toEditTrnWasteCategories)||void 0===d?void 0:d.length)>0&&m.push(this.updateCategories(i.toEditTrnWasteCategories)),(null===(c=i.toDeleteTrnWasteCategories)||void 0===c?void 0:c.length)>0&&m.push(this.deleteCategories(i.toDeleteTrnWasteCategories))),i.hasMroRepresentedOperations()&&((null===(l=i.toInsertTrnMroRepresented)||void 0===l?void 0:l.length)>0&&m.push(this.saveMroRepresenteds(i.toInsertTrnMroRepresented,u.id)),(null===(h=i.toEditTrnMroRepresented)||void 0===h?void 0:h.length)>0&&m.push(this.updateMroRepresenteds(i.toEditTrnMroRepresented)),(null===(p=i.toDeleteTrnMroRepresented)||void 0===p?void 0:p.length)>0&&m.push(this.deleteMroRepresenteds(i.toDeleteTrnMroRepresented)));try{yield Object(y.a)(m).toPromise()}catch(b){console.error(b)}return i.hasTrademarksOperations()&&this.areTrademarksSuccess?(t[s].succeed(),s++):i.hasTrademarksOperations()&&(t[s].fail(v.a.TrnMroTrademarks_UPDATE_ERROR),s++),i.hasCategoriesOperations()&&this.areCategoriesSuccess?(t[s].succeed(),s++):i.hasCategoriesOperations()&&(t[s].fail(v.a.TrnWasteCategories_UPDATE_ERROR),s++),i.hasMroRepresentedOperations()&&this.areMroRepresentedsSuccess?(t[s].succeed(),s++):i.hasMroRepresentedOperations()&&(t[s].fail(v.a.TrnMroRepresented_UPDATE_ERROR),s++),this.isProccessSuccess(t,u.id)}))}rejectActions(e,t){for(let i=e+1;i<t.length;i++)t[i].reject()}isProccessSuccess(e,t){for(const i of e)if(i.isError)return{status:!1,aunId:t};return{status:!0,aunId:t}}parseMroApplicationModelToTrnAuthorizationsModel(e){var t,i,s,n;const o=new a.a({});return o.id=e.id,o.regId=e.regId,o.ornId=e.organization.id,o.popEknm=String(e.mailingAddressData.popEknm),o.mroFulfillment=null===(i=null===(t=e.mroFulfillment)||void 0===t?void 0:t.mroFulfillment)||void 0===i?void 0:i.code,o.uonAunId=null===(n=null===(s=e.mroFulfillment)||void 0===s?void 0:s.oop)||void 0===n?void 0:n.id,void 0===e.distSale&&null===e.distSale||(o.mroIsDistSale=e.distSale?this.YES:this.NO),void 0===e.isAfr&&null===e.isAfr||(o.mroIsAfr=e.isAfr?this.YES:this.NO),e.contact.id&&(o.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(o.addrId=e.mailingAddressData.trnOrnAddrId),o}prepareTrnOrnAddress(e){const t=new o.a({});return t.eknm=e.mailingAddressData.popEknm,t.address=e.mailingAddressData.address,t.webpage=e.mailingAddressData.webpage,t.ornId=e.organization.id,t.email=e.mailingAddressData.email,t.type=this.CONTACT_ADDRESS_TYPE,t}saveTraderBrokerAuthorization(e,t,i){var a,n,o,r,d,c;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,l=this.parseTraderBrokerApplicationModelToTrnAuthorizationsModel(e);if(!l.cotId){e.contact.ornId=e.organization.id;try{l.cotId=(yield this.saveContact2(e.contact,t,s))[0].id}catch(p){return{status:!1,aunId:null}}s++}if(!l.addrId){const i=this.prepareTrnOrnAddress(e);try{l.addrId=(yield this.saveMailingAddress2(i,t,s))[0].id}catch(p){return{status:!1,aunId:null}}s++}try{l=(yield this.saveTrnAuthorization2(l,t,s))[0],s++}catch(p){return{status:!1,aunId:null}}const h=[];if((null===(a=e.trnStageWasteOperationsTraderCodes)||void 0===a?void 0:a.length)>0){const t=this.saveWasteCodes(l.id,this.TRADER,e.trnStageWasteOperationsTraderCodes);h.push(t)}if((null===(n=e.trnStageWasteOperationsBrokerCodes)||void 0===n?void 0:n.length)>0){const t=this.saveWasteCodes(l.id,this.BROKER,e.trnStageWasteOperationsBrokerCodes);h.push(t)}if(e.eSign.file&&e.paymentDocument.file||e.paymentDocument.file&&i){const t=Object(f.b)(e.paymentDocument.file,e.eSign.file,null,l.id),i=this.savePaymentDocyment(t);h.push(i)}try{yield Object(y.a)(h).toPromise()}catch(p){}(null===(o=e.trnStageWasteOperationsTraderCodes)||void 0===o?void 0:o.length)>0&&this.areTraderCodesSuccess?(t[s].succeed(),s++):(null===(r=e.trnStageWasteOperationsTraderCodes)||void 0===r?void 0:r.length)>0&&(t[s].fail(v.a.TrnStageWasteOperations_SAVE_ERROR),s++),(null===(d=e.trnStageWasteOperationsBrokerCodes)||void 0===d?void 0:d.length)>0&&this.areBrokerCodeSuccess?(t[s].succeed(),s++):(null===(c=e.trnStageWasteOperationsBrokerCodes)||void 0===c?void 0:c.length)>0&&(t[s].fail(v.a.TrnStageWasteOperations_SAVE_ERROR),s++),e.paymentDocument.file&&this.isFileUploadSuccess?(t[s].succeed(),s++):e.paymentDocument.file&&(t[s].fail(v.a.TrnAttachedDocuments_SAVE_ERROR),s++);for(const e of t)if(e.isError)return{status:!1,aunId:l.id};return{status:!0,aunId:l.id}}))}editTraderBrokerAuthorization(e,t,i){var a,n,o,r;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,d=this.parseTraderBrokerApplicationModelToTrnAuthorizationsModel(e);if(!d.cotId){e.contact.ornId=e.organization.id;try{d.cotId=(yield this.saveContact2(e.contact,t,s)).id}catch(c){return{status:!1,aunId:null}}s++}if(!d.addrId){const i=this.prepareTrnOrnAddress(e);try{d.addrId=(yield this.saveMailingAddress2(i,t,s)).id}catch(c){return{status:!1,aunId:null}}s++}try{d=(yield this.updateTrnAuthorization(d,t,s))[0],s++}catch(c){return{status:!1,aunId:null}}if(i.hasTraderCodes()){try{let o=!1;if(!e.traderAseId){const t=(yield this.createStage(d.id,this.TRADER))[0];e.traderAseId=t.id}if((null===(a=i.toDeleteTraderCodes)||void 0===a?void 0:a.length)>0){const e=yield this.deleteTrnStageWasteOperations(i.toDeleteTraderCodes).toPromise();e instanceof F.d&&(t[s].fail(e.error.message),o=!0)}if((null===(n=i.toInsertTraderCodes)||void 0===n?void 0:n.length)>0){const a=yield this.saveTrnStageWasteOperations(i.toInsertTraderCodes,e.traderAseId).toPromise();a instanceof F.d&&(t[s].fail(a.error.message),o=!0)}!o&&t[s].succeed()}catch(c){console.log(c.error.message),t[s].fail(c.error.message)}s++}if(i.hasBrokerCodes()){try{let a=!1;if(!e.brokerAseId){const t=(yield this.createStage(d.id,this.BROKER))[0];e.brokerAseId=t.id}if((null===(o=i.toDeleteBrokerCodes)||void 0===o?void 0:o.length)>0){const e=yield this.deleteTrnStageWasteOperations(i.toDeleteBrokerCodes).toPromise();e instanceof F.d&&(t[s].fail(e.error.message),a=!0)}if((null===(r=i.toInsertBrokerCodes)||void 0===r?void 0:r.length)>0){const n=yield this.saveTrnStageWasteOperations(i.toInsertBrokerCodes,e.brokerAseId).toPromise();n instanceof F.d&&(t[s].fail(n.error.message),a=!0)}!a&&t[s].succeed()}catch(c){t[s].fail(c.error.message)}s++}if(i.isNewPaymentDocument)try{yield this.deletePaymentDocument(i.toDeletePaymentDocument.id).toPromise();const a=Object(f.b)(e.paymentDocument.file,e.eSign.file,void 0,d.id);yield this.savePaymentDocyment(a).toPromise(),t[s].succeed()}catch(c){t[s].fail(c.error.message)}for(const e of t)if(e.isError)return{status:!1,aunId:d.id};return{status:!0,aunId:d.id}}))}parseTraderBrokerApplicationModelToTrnAuthorizationsModel(e){const t=new a.a({});return t.id=e.id,t.regId=e.regId,t.ornId=e.organization.id,t.popEknm=String(e.mailingAddressData.popEknm),t.isElectronicAcc=e.isElectronicAcc?this.YES:this.NO,e.contact.id&&(t.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(t.addrId=e.mailingAddressData.trnOrnAddrId),t}saveSingleM35Stage(e,t,i,s,a){const n=e.stageDataView.stageData;return n.aunId=t,this.crudService.create(g.a.url,n).pipe(Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))),Object(D.a)(t=>{var n,o;s[a].succeed();const r=[];if((null===(o=null===(n=e.stageDataView)||void 0===n?void 0:n.stageDetails)||void 0===o?void 0:o.length)>0){e.stageDataView.stageDetails.forEach(e=>{e.aseId=t[0].id});const i=this.crudService.createMany(O.a.url,e.stageDataView.stageDetails).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));r.push(i)}const c=e.getAllTrnStageWasteOperations(i),l=e.getAllTrnWasteCategories();if((null==c?void 0:c.length)>0){Object(b.b)(c,t[0].id);const e=this.crudService.createMany(m.a.url,c).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));r.push(e)}if((null==l?void 0:l.length)>0){Object(b.c)(l,t[0].id);const e=this.crudService.createMany(d.a.url,l).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));r.push(e)}return Object(y.a)(r)}))}deleteStageCascade(e,t,i){return this.crudService.deleteById(g.a.urlDelete,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(I.a)(e))))}editSingleM35Stage(e,t,i,s,a){let n=null;switch(e.stageDataView.status){case C.a.NEW:n=this.saveSingleM35Stage(e,t,i,s,a);break;case C.a.DELETED:e.stageDataView.stageId&&(n=this.deleteStageCascade(e.stageDataView.stageId,s,a));break;case C.a.CHANGED:{const t=e.getEditTrnStageWasteOperations(i),o=e.getDeleteTrnStageWasteOperations(i),r=e.getInsetTrnStageWasteOperations(i),c=e.getEditTrnWasteCategories(),l=e.getDeleteTrnWasteCategories(),h=e.getInsertTrnWasteCategories(),p=e.getInsertStageDetails(),u=e.getDeleteStageDetails();n=this.crudService.update(g.a.url,e.stageDataView.stageId,e.stageDataView.stageData).pipe(Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))),Object(D.a)(e=>{s[a].succeed();const i=[];if((null==p?void 0:p.length)>0){p.forEach(t=>t.aseId=e[0].id);const t=this.crudService.createMany(O.a.url,p).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}if((null==u?void 0:u.length)>0){const e=this.crudService.deleteMany(O.a.url,u.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(e)}if((null==r?void 0:r.length)>0){Object(b.b)(r,e[0].id);const t=this.crudService.createMany(m.a.url,r).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}if((null==t?void 0:t.length)>0){Object(b.b)(t,e[0].id);const n=this.crudService.updateMany(m.a.url,t).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(n)}if((null==o?void 0:o.length)>0){Object(b.b)(o,e[0].id);const t=this.crudService.deleteMany(m.a.url,o.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}if((null==h?void 0:h.length)>0){Object(b.c)(h,e[0].id);const t=this.crudService.createMany(d.a.url,h).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}if((null==c?void 0:c.length)>0){Object(b.c)(c,e[0].id);const t=this.crudService.updateMany(d.a.url,c).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}if((null==l?void 0:l.length)>0){Object(b.c)(l,e[0].id);const t=this.crudService.deleteMany(d.a.url,l.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));i.push(t)}return Object(y.a)(i)}));break}case C.a.NOT_CHANGED:{s[a].succeed();const t=e.getEditTrnStageWasteOperations(i),o=e.getDeleteTrnStageWasteOperations(i),r=e.getInsetTrnStageWasteOperations(i),c=e.getEditTrnWasteCategories(),l=e.getDeleteTrnWasteCategories(),h=e.getInsertTrnWasteCategories(),p=e.getInsertStageDetails(),u=e.getInsertStageDetails(),g=[];if((null==p?void 0:p.length)>0){p.forEach(t=>t.aseId=e.stageDataView.stageId);const t=this.crudService.createMany(O.a.url,p).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}if((null==u?void 0:u.length)>0){const e=this.crudService.deleteMany(O.a.url,u.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(e)}if((null==r?void 0:r.length)>0){Object(b.b)(r,e.stageDataView.stageId);const t=this.crudService.createMany(m.a.url,r).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}if((null==t?void 0:t.length)>0){Object(b.b)(t,e.stageDataView.stageId);const i=this.crudService.updateMany(m.a.url,t).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(i)}if((null==o?void 0:o.length)>0){Object(b.b)(o,e.stageDataView.stageId);const t=this.crudService.deleteMany(m.a.url,o.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}if((null==h?void 0:h.length)>0){Object(b.c)(h,e.stageDataView.stageId);const t=this.crudService.createMany(d.a.url,h).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}if((null==c?void 0:c.length)>0){Object(b.c)(c,e.stageDataView.stageId);const t=this.crudService.updateMany(d.a.url,c).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}if((null==l?void 0:l.length)>0){Object(b.c)(l,e.stageDataView.stageId);const t=this.crudService.deleteMany(d.a.url,l.map(e=>e.id)).pipe(Object(T.a)(e=>(s[a].isError||s[a].succeed(),e)),Object(E.a)(e=>(s[a].fail(e.error.message),Object(I.a)(e))));g.push(t)}n=Object(y.a)(g)}}return n}saveFile(e,t,i){return this.crudService.create(R.a.url,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e))))}deleteFile(e,t,i){return this.crudService.deleteById(R.a.url,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e))))}saveStages(e,t,i,a,n){return Object(s.a)(this,void 0,void 0,(function*(){const s=[];for(const o of e){const e=this.saveSingleM35Stage(o,t,i,a,n);e&&(s.push(e),n++)}return Object(y.a)(s).toPromise()}))}saveFiles(e,t,i,a,n){return Object(s.a)(this,void 0,void 0,(function*(){const s=[];return e.forEach(e=>{if(e.isSelected&&e.docFile){const t=Object(f.b)(e.docFile,e.docSign,null,i,null,null,e.docType.id),o=this.saveFile(t,a,n);o&&(s.push(o),n++)}}),t.forEach(e=>{const t=Object(f.b)(e.file,e.signFile,null,i),o=this.saveFile(t,a,n);o&&(s.push(o),n++)}),Object(y.a)(s).toPromise()}))}editStages(e,t,i,a,n){return Object(s.a)(this,void 0,void 0,(function*(){for(const o of e)if(o.isEdittable(i)){try{yield this.editSingleM35Stage(o,t,i,a,n).toPromise()}catch(s){console.error(s)}n++}return n}))}editDocs(e,t,i,s,a,n){const o=[];i.forEach((e,t)=>{const i=this.deleteFile(e.id,a,n);i&&(o.push(i),n++)});const r=[];t.forEach(e=>{if(e.isSelected&&e.docFile){const t=Object(f.b)(e.docFile,e.docSign,null,s,null,null,e.docType.id),i=this.saveFile(t,a,n);i&&(r.push(i),n++)}}),e.forEach((e,t)=>{const i=Object(f.b)(e.file,e.signFile,null,s),o=this.saveFile(i,a,n);o&&(r.push(o),n++)});const d=[...o,...r];return Object(y.a)(d).toPromise()}saveTransportationMethods(e,t,i,s){return e.forEach(e=>e.aunId=t),this.crudService.createMany(w.a.url,e).pipe(Object(T.a)(e=>(i[s].isError||i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(S.a)(e)))).toPromise()}saveTransportationVehicles(e,t,i,s){return e.forEach(e=>e.aunId=t),this.crudService.createMany(M.a.url,e).pipe(Object(T.a)(e=>(i[s].isError||i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(S.a)(e)))).toPromise()}deleteTransportationMethods(e,t,i){return this.crudService.deleteMany(w.a.url,e.map(e=>e.id)).pipe(Object(T.a)(e=>(t[i].isError||t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e)))).toPromise()}deleteTransportationVehicles(e,t,i){return this.crudService.deleteMany(M.a.url,e.map(e=>e.id)).pipe(Object(T.a)(e=>(t[i].isError||t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e)))).toPromise()}updateTransportationMethods(e,t,i){return this.crudService.updateMany(w.a.url,e).pipe(Object(T.a)(e=>(t[i].isError||t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e)))).toPromise()}updateTransportationVehicles(e,t,i){return this.crudService.updateMany(M.a.url,e).pipe(Object(T.a)(e=>(t[i].isError||t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(S.a)(e)))).toPromise()}saveM35Authorization(e,t,i){var a,n,o,r,d;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,c=this.parseM35ApplicationModelToTrnAuthorizationsModel(e);if(!c.cotId){e.contact.ornId=e.organization.id;try{c.cotId=(yield this.saveContact2(e.contact,i,s))[0].id}catch(l){return{status:!1,aunId:null}}s++}if(!c.addrId){const t=this.prepareTrnOrnAddress(e);try{c.addrId=(yield this.saveMailingAddress2(t,i,s))[0].id}catch(l){return{status:!1,aunId:null}}s++}try{c=(yield this.saveTrnAuthorization2(c,i,s))[0]}catch(l){return{status:!1,aunId:null}}if(s++,t===A.a.M35_RD_TRANSPORT){if((null===(a=e.finalTransportationMethods)||void 0===a?void 0:a.length)>0){try{yield this.saveTransportationMethods(e.finalTransportationMethods,c.id,i,s)}catch(l){console.error(l)}s++}if((null===(n=e.transportationVehicles)||void 0===n?void 0:n.length)>0){try{yield this.saveTransportationVehicles(e.transportationVehicles,c.id,i,s)}catch(l){console.error(l)}s++}}if((null===(o=e.stages)||void 0===o?void 0:o.length)>0)try{yield this.saveStages(e.stages,c.id,t,i,s),s+=e.stages.length}catch(l){console.error(l)}if((null===(r=e.docs)||void 0===r?void 0:r.length)>0||(null===(d=e.otherDocs)||void 0===d?void 0:d.length)>0)try{yield this.saveFiles(e.docs,e.otherDocs,c.id,i,s)}catch(l){console.error(l)}return this.isProccessSuccess(i,c.id)}))}editM35Authorization(e,t,i){var a,n,o,r,d,c,l,h,p,u,m,b,g;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,f=this.parseM35ApplicationModelToTrnAuthorizationsModel(e);if(!f.cotId){e.contact.ornId=e.organization.id;try{f.cotId=(yield this.saveContact2(e.contact,i,s))[0].id}catch(R){return{status:!1,aunId:null}}s++}if(!f.addrId){const t=this.prepareTrnOrnAddress(e);try{f.addrId=(yield this.saveMailingAddress2(t,i,s))[0].id}catch(R){return{status:!1,aunId:null}}s++}try{f=(yield this.updateTrnAuthorization(f,i,s))[0],s++}catch(R){return{status:!1,aunId:null}}if(t===A.a.M35_RD_TRANSPORT){try{(null===(a=e.toInsertTransportationMethod)||void 0===a?void 0:a.length)>0&&(yield this.saveTransportationMethods(e.toInsertTransportationMethod,f.id,i,s)),(null===(n=e.toDeleteTransportationMethod)||void 0===n?void 0:n.length)>0&&(yield this.deleteTransportationMethods(e.toDeleteTransportationMethod,i,s)),(null===(o=e.toUpdateTransportationMethods)||void 0===o?void 0:o.length)>0&&(yield this.updateTransportationMethods(e.toUpdateTransportationMethods,i,s)),((null===(r=e.toInsertTransportationMethod)||void 0===r?void 0:r.length)>0||(null===(d=e.toDeleteTransportationMethod)||void 0===d?void 0:d.length)>0||(null===(c=e.toUpdateTransportationMethods)||void 0===c?void 0:c.length)>0)&&s++}catch(R){console.error(R)}try{(null===(l=e.toInsertTransportationVehicles)||void 0===l?void 0:l.length)>0&&(yield this.saveTransportationVehicles(e.toInsertTransportationVehicles,f.id,i,s)),(null===(h=e.toUpdateTransportationVehicles)||void 0===h?void 0:h.length)>0&&(yield this.updateTransportationVehicles(e.toUpdateTransportationVehicles,i,s)),(null===(p=e.toDeleteTransportationVehicles)||void 0===p?void 0:p.length)>0&&(yield this.deleteTransportationVehicles(e.toDeleteTransportationVehicles,i,s)),((null===(u=e.toInsertTransportationVehicles)||void 0===u?void 0:u.length)>0||(null===(m=e.toDeleteTransportationVehicles)||void 0===m?void 0:m.length)>0||(null===(b=e.toUpdateTransportationVehicles)||void 0===b?void 0:b.length)>0)&&s++}catch(R){console.error(R)}}if((null===(g=e.stages)||void 0===g?void 0:g.length)>0)try{s=yield this.editStages(e.stages,f.id,t,i,s)}catch(R){console.error(R)}try{yield this.editDocs(e.otherDocs,e.docs,e.toDeleteOtherDocs,f.id,i,s)}catch(R){console.error(R)}return this.isProccessSuccess(i,f.id)}))}parseM35ApplicationModelToTrnAuthorizationsModel(e){const t=new a.a({});return t.id=e.id,t.riosvCodeN1=e.riosvCodeN1,t.regId=e.regId,t.ornId=e.organization.id,t.popEknm=String(e.mailingAddressData.popEknm),t.isElectronicAcc=e.isElectronicAcc?this.YES:this.NO,t.wasteTreatmentMethod=e.methods,t.ovosNumbDesc=e.ovosNumbDesc,t.saftyMeasuresDesc=e.saftyMeasures,t.wayRecive=e.wayRecieved,t.addressRecive=e.addressRecieved,t.tradeSecretsInfo=e.tradeSecretsInfo,e.contact.id&&(t.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(t.addrId=e.mailingAddressData.trnOrnAddrId),t}deleteMercuryStage(e,t,i){return this.crudService.deleteById(g.a.urlDelete,e).pipe(Object(T.a)(e=>(t[i].succeed(),e)),Object(E.a)(e=>(t[i].fail(e.error.message),Object(I.a)(e))))}saveSingleMercuryStage(e,t,i,s,a){const n=e.getTrnAuthorizationStagesModel(t);let o=null;return o=a===A.a.MERCURY_STORAGE?this.crudService.create(g.a.url,n).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e)))):this.crudService.create(g.a.url,n).pipe(Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))),Object(D.a)(t=>{const a=e.getTrnMercStageInfo(t[0].id);return this.crudService.create(N.a.url,a).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))))})),o}editSingleMercuryStage(e,t,i,s,a){let n=null;switch(e.status){case C.a.NEW:n=this.saveSingleMercuryStage(e,t,i,s,a);break;case C.a.DELETED:n=this.deleteMercuryStage(e.id,i,s);break;case C.a.CHANGED:{const o=e.getTrnAuthorizationStagesModel(t);n=a===A.a.MERCURY_STORAGE?this.crudService.updateById(g.a.url,e.id,o).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e)))):this.crudService.updateById(g.a.url,e.id,o).pipe(Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))),Object(D.a)(t=>{const a=e.getTrnMercStageInfo(t[0].id);return this.crudService.patchById(N.a.url,a.id,a).pipe(Object(T.a)(e=>(i[s].succeed(),e)),Object(E.a)(e=>(i[s].fail(e.error.message),Object(I.a)(e))))}))}}return n}saveMercuryStages(e,t,i,s,a){const n=[];return e.forEach(e=>{const o=this.saveSingleMercuryStage(e,t,i,s,a);n.push(o),s++}),Object(y.a)(n).toPromise()}editMercuryStages(e,t,i,s,a){const n=[];return e.forEach(e=>{const o=this.editSingleMercuryStage(e,t,i,s,a);o&&(n.push(o),s++)}),Object(y.a)(n).toPromise()}saveMercuryAuthorization(e,t,i){return Object(s.a)(this,void 0,void 0,(function*(){let s=0,a=this.parseMercuryApplicationModelToTrnAuthorizationsModel(e);if(!a.cotId){e.contact.ornId=e.organization.id;try{a.cotId=(yield this.saveContact2(e.contact,t,s)).id}catch(n){return console.error(n),{status:!1,aunId:null}}s++}if(!a.addrId){const i=this.prepareTrnOrnAddress(e);try{a.addrId=(yield this.saveMailingAddress2(i,t,s)).id}catch(n){return console.error(n),{status:!1,aunId:null}}s++}try{a=(yield this.saveTrnAuthorization2(a,t,s))[0],s++}catch(n){return console.error(n),{status:!1,aunId:null}}try{yield this.saveMercuryStages(e.stages,a.id,t,s,i)}catch(n){console.error(n)}return this.isProccessSuccess(t,a.id)}))}editMercuryAuthorization(e,t,i){return Object(s.a)(this,void 0,void 0,(function*(){let s=0,a=this.parseMercuryApplicationModelToTrnAuthorizationsModel(e);if(!a.cotId){e.contact.ornId=e.organization.id;try{a.cotId=(yield this.saveContact2(e.contact,i,s)).id}catch(n){return{status:!1,aunId:null}}s++}if(!a.addrId){const t=this.prepareTrnOrnAddress(e);try{a.addrId=(yield this.saveMailingAddress2(t,i,s)).id}catch(n){return{status:!1,aunId:null}}s++}try{a=(yield this.updateTrnAuthorization(a,i,s))[0],s++}catch(n){return{status:!1,aunId:null}}try{yield this.editMercuryStages(e.stages,a.id,i,s,t)}catch(o){}return this.isProccessSuccess(i,a.id)}))}parseMercuryApplicationModelToTrnAuthorizationsModel(e){const t=new a.a({});return t.id=e.id,t.regId=e.regId,t.ornId=e.organization.id,t.popEknm=String(e.mailingAddressData.popEknm),e.contact.id&&(t.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(t.addrId=e.mailingAddressData.trnOrnAddrId),t}saveSWOs(e,t,i,s){const a=new g.a({aunId:e});return this.crudService.create(g.a.url,a).pipe(Object(D.a)(e=>(t.forEach(t=>t.aseId=e[0].id),this.crudService.createMany(m.a.url,t).pipe(Object(T.a)(e=>(s[i].succeed(),e)),Object(E.a)(e=>(s[i].fail(e.error.message),Object(I.a)(e)))))),Object(E.a)(e=>(s[i].fail(e.error.message),Object(I.a)(e)))).toPromise()}saveWasteEndInfo(e,t,i){return this.crudService.create(x.a.url,e).pipe(Object(T.a)(e=>(i[t].succeed(),e)),Object(E.a)(e=>(i[t].fail(e.error.message),Object(I.a)(e)))).toPromise()}saveWasteEndAuthorization(e,t){return Object(s.a)(this,void 0,void 0,(function*(){let i=0,s=this.parseWasteEndApplicationModelToTrnAuthorizationsModel(e);if(!s.cotId){e.contact.ornId=e.organization.id;try{s.cotId=(yield this.saveContact2(e.contact,t,i))[0].id}catch(a){return console.error(a),{status:!1,aunId:null}}i++}if(!s.addrId){const n=this.prepareTrnOrnAddress(e);try{s.addrId=(yield this.saveMailingAddress2(n,t,i))[0].id}catch(a){return console.error(a),{status:!1,aunId:null}}i++}try{s=(yield this.saveTrnAuthorization2(s,t,i))[0],e.id=s.id,i++}catch(a){return console.error(a),{status:!1,aunId:null}}try{yield this.saveWasteEndInfo(e.getWasteEndInfoModel(),i,t),i++}catch(a){console.error(a)}try{const a=e.getTrnStageWasteOperationsForInsert();(null==a?void 0:a.length)>0&&(yield this.saveSWOs(s.id,a,i,t))}catch(a){console.error(a)}return this.isProccessSuccess(t,s.id)}))}editWasteEndAuth(e,t){var i,a;return Object(s.a)(this,void 0,void 0,(function*(){let s=0,n=this.parseWasteEndApplicationModelToTrnAuthorizationsModel(e);if(!n.cotId){e.contact.ornId=e.organization.id;try{n.cotId=(yield this.saveContact2(e.contact,t,s))[0].id}catch(o){return{status:!1,aunId:null}}s++}if(!n.addrId){const i=this.prepareTrnOrnAddress(e);try{n.addrId=(yield this.saveMailingAddress2(i,t,s))[0].id}catch(o){return{status:!1,aunId:null}}s++}try{n=(yield this.updateTrnAuthorization(n,t,s))[0],s++}catch(o){return{status:!1,aunId:null}}try{this.updateTrnWasteEndInfo(e.getWasteEndInfoModel(),t,s),s++}catch(o){console.error(o)}if(e.toDeleteWasteCodes.length>0||e.toInsertWasteCodes.length>0){try{if(!e.aseId){const t=(yield this.createStage(n.id,this.TRADER))[0];e.aseId=t.id}(null===(i=e.toDeleteWasteCodes)||void 0===i?void 0:i.length)>0&&(yield this.deleteTrnStageWasteOperations(e.toDeleteWasteCodes).toPromise()),(null===(a=e.toInsertWasteCodes)||void 0===a?void 0:a.length)>0&&(yield this.saveTrnStageWasteOperations(e.toInsertWasteCodes,e.aseId).toPromise()),t[s].succeed()}catch(o){t[s].fail(o.error.message)}s++}return this.isProccessSuccess(t,n.id)}))}parseWasteEndApplicationModelToTrnAuthorizationsModel(e){const t=new a.a({});return t.id=e.id,t.regId=e.regId,t.ornId=e.organization.id,t.popEknm=String(e.mailingAddressData.popEknm),e.contact.id&&(t.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(t.addrId=e.mailingAddressData.trnOrnAddrId),t}saveTrnAunSe(e,t,i){return this.crudService.create(k.a.url,e).pipe(Object(T.a)(e=>(i[t].succeed(),e)),Object(E.a)(e=>(i[t].fail(e.error.message),this.rejectActions(t,i),Object(S.a)(e)))).toPromise()}saveByProductAuthorization(e,t){return Object(s.a)(this,void 0,void 0,(function*(){let i=0,s=this.parseByProductApplicationModelToTrnAuthorizationsModel(e);if(!s.cotId){e.contact.ornId=e.organization.id;try{s.cotId=(yield this.saveContact2(e.contact,t,i))[0].id}catch(a){return console.error(a),{status:!1,aunId:null}}i++}if(!s.addrId){const n=this.prepareTrnOrnAddress(e);try{s.addrId=(yield this.saveMailingAddress2(n,t,i))[0].id}catch(a){return console.error(a),{status:!1,aunId:null}}i++}try{s=(yield this.saveTrnAuthorization2(s,t,i))[0],e.id=s.id,i++}catch(a){return console.error(a),{status:!1,aunId:null}}try{const s=e.getTrnAunSeModel();yield this.saveTrnAunSe(s,i,t)}catch(a){console.error(a)}return i++,this.isProccessSuccess(t,s.id)}))}parseByProductApplicationModelToTrnAuthorizationsModel(e){const t=new a.a({});return t.id=e.id,t.regId=e.regId,t.ornId=e.organization.id,t.popEknm=String(e.mailingAddressData.popEknm),t.riosvCodeN1=e.riosCode,e.contact.id&&(t.cotId=e.contact.id),e.mailingAddressData.trnOrnAddrId&&(t.addrId=e.mailingAddressData.trnOrnAddrId),t}}},z9XM:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i("F7pt"),a=i("0Uwp"),n=i("gkfR"),o=i("YjFG"),r=i("noCF"),d=i("9zSO"),c=i("SkKo"),l=i("ra4D"),h=i("CR6u"),p=i("+QWa"),u=i("YVnI"),m=i("fXoL");let b=(()=>{class e{constructor(){}getByProductDefinitions(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="by-prod-type",t.placeHolderText="\u0412\u0438\u0434 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442",t.labelText="\u0412\u0438\u0434 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442",t.isRequired=!0,e.push(t);const i=s.a.createDefaultDateFormItemDef();i.domId="date",i.placeHolderText="",i.labelText="\u0414\u0430\u0442\u0430",i.isRequired=!0,e.push(i);const n=a.a.createDefaultDropDownFormItemDef();n.domId="contact",n.labelText=null,n.isRequired=!1,n.helpText=null,n.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",e.push(n);const o=a.a.createDefaultDropDownFormItemDef();return o.domId="address",o.labelText=null,o.isRequired=!1,o.helpText=null,o.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",e.push(o),e}getRDTreatDefinistions(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="methods",t.labelText="",t.helpText="",t.isRequired=!0,e.push(t);const i=s.a.createDefaultTextFormItemDef();i.domId="cases",i.labelText="",i.helpText="",i.isRequired=!0,e.push(i);const n=new s.a;n.domId="check1",n.labelText="\u0421 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u043e\u0442\u043e \u0438\u0441\u043a\u0430\u043d\u0435 \u0436\u0435\u043b\u0430\u044f \u0434\u0430 \u043c\u0438 \u0431\u044a\u0434\u0435 \u0437\u0430\u0432\u0435\u0440\u0435\u043d\u0430 \u0437\u0430 \u0432\u043e\u0434\u0435\u043d\u0435 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u043d\u0430\u0442\u0430 \u043e\u0442\u0447\u0435\u0442\u043d\u0430 \u043a\u043d\u0438\u0433\u0430.",n.helpText="",n.isRequired=!0,e.push(n);const o=new s.a;o.domId="check2",o.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u043a\u043e\u043f\u0438\u044f \u043d\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0435\u043d\u0438\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438 \u043f\u043e \u0442. 4 \u043e\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u0442\u0430 \u043a\u044a\u043c \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e \u0441\u0435 \u043d\u0430\u043c\u0438\u0440\u0430\u0442 \u043d\u0430 \u0432\u0441\u044f\u043a\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u043d\u0430 \u0434\u0440\u0443\u0436\u0435\u0441\u0442\u0432\u043e\u0442\u043e \u0438 \u0449\u0435 \u0431\u044a\u0434\u0430\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u044f\u043d\u0438 \u043f\u0440\u0438 \u043f\u043e\u0438\u0441\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438 \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u0438\u0437\u0438\u0441\u043a\u0432\u0430\u043d\u0438\u044f\u0442\u0430 \u043d\u0430 \u0447\u043b. 8, \u0430\u043b. 2, \u0442. 7 \u043e\u0442 \u0417\u0423\u041e.",o.helpText="",o.isRequired=!0,e.push(o);const r=new s.a;r.domId="check3",r.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u0441\u043b\u0435\u0434\u043d\u0430\u0442\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0435 \u0442\u044a\u0440\u0433\u043e\u0432\u0441\u043a\u0430 \u0442\u0430\u0439\u043d\u0430 \u0438 \u043c\u043e\u0436\u0435 \u0434\u0430 \u0441\u0435 \u0438\u0437\u043f\u043e\u043b\u0437\u0432\u0430 \u0441\u0430\u043c\u043e \u043e\u0442 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u043d\u0438\u0442\u0435 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0442\u043d\u0438 \u043e\u0440\u0433\u0430\u043d\u0438, \u0432\u044a\u0432 \u0432\u0440\u044a\u0437\u043a\u0430 \u0441 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0442\u0435\u0445\u043d\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u043e\u043c\u043e\u0449\u0438\u044f:",r.helpText="",r.isRequired=!0,e.push(r);const d=s.a.createDefaultTextFormItemDef();d.domId="declare",d.labelText="",d.helpText="",d.isRequired=!1,e.push(d);const c=s.a.createDefaultTextFormItemDef();c.domId="desc",c.labelText="",c.helpText="",c.isRequired=!0,e.push(c);const l=a.a.createDefaultDropDownFormItemDef();l.domId="rios",l.labelText="",l.helpText="",l.placeHolderText="\u0420\u0418\u041e\u0421\u0412",l.dataSource="Rios",l.isRequired=!0,e.push(l);const h=a.a.createDefaultDropDownFormItemDef();h.domId="contact",h.labelText=null,h.isRequired=!1,h.helpText=null,h.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",e.push(h);const p=a.a.createDefaultDropDownFormItemDef();return p.domId="address",p.labelText=null,p.isRequired=!1,p.helpText=null,p.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",e.push(p),e}getRDTreatApplicationsDefinitions(){const e=[],t=new s.a;t.domId="app1",t.labelText="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u043b\u0430\u0442\u0435\u043d\u0430 \u0442\u0430\u043a\u0441\u0430;",t.helpText="",t.isRequired=!0,e.push(t);const i=new s.a;i.domId="app2",i.labelText="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u0440\u0430\u0432\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0442 \u043d\u0430 \u0447\u0443\u0436\u0434\u0435\u0441\u0442\u0440\u0430\u043d\u043d\u043e \u043b\u0438\u0446\u0435, \u0438\u0437\u0434\u0430\u0434\u0435\u043d \u0432 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u043d\u043e\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u043e\u0434\u0430\u0442\u0435\u043b\u0441\u0442\u0432\u043e \u043d\u0430 \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f, \u0434\u043e \u0442\u0440\u0438 \u043c\u0435\u0441\u0435\u0446\u0430 \u043f\u0440\u0435\u0434\u0438 \u043f\u043e\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e;",i.helpText="",i.isRequired=!1,e.push(i);const a=new s.a;a.domId="app3",a.labelText="\u0423\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u043f\u043e \u0447\u043b. 87, \u0430\u043b. 6 \u043e\u0442 \u0414\u0430\u043d\u044a\u0447\u043d\u043e-\u043e\u0441\u0438\u0433\u0443\u0440\u0438\u0442\u0435\u043b\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0443\u0430\u043b\u0435\u043d \u043a\u043e\u0434\u0435\u043a\u0441 \u0437\u0430 \u043b\u0438\u043f\u0441\u0430 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f;",a.helpText="",a.isRequired=!1,e.push(a);const n=new s.a;n.domId="app4",n.labelText='\u0417\u0430\u044f\u0432\u0435\u043d\u043e (\u043e\u0442 \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f "\u0432\u044f\u0440\u043d\u043e \u0441 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430") \u043a\u043e\u043f\u0438\u0435 \u043e\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043e\u0441\u0442 \u0438\u043b\u0438 \u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0437\u0430 \u043d\u0430\u0435\u043c, \u043f\u0440\u0438\u0434\u0440\u0443\u0436\u0435\u043d \u0441 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043e\u0441\u0442 \u043d\u0430 \u0438\u043c\u043e\u0442\u0430, \u0438\u0437\u0434\u0430\u0434\u0435\u043d \u043e\u0442 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0442\u043d\u0438\u0442\u0435 \u0441\u043b\u0443\u0436\u0431\u0438, \u043d\u0430 \u0447\u0438\u044f\u0442\u043e \u0442\u0435\u0440\u0438\u0442\u043e\u0440\u0438\u044f \u0435 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0430 \u043e\u0431\u0435\u043a\u0442\u0430, \u0438\u043c\u043e\u0442\u0430, \u043f\u043b\u0430\u043d\u043e\u0441\u043d\u0438\u043c\u0430\u0447\u043d\u0438\u044f \u043d\u043e\u043c\u0435\u0440 \u0438 \u0434\u0440\u0443\u0433\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438, \u043a\u043e\u0433\u0430\u0442\u043e \u0438\u043c\u043e\u0442\u0430 \u0435 \u0438\u0437\u0432\u044a\u043d \u0440\u0435\u0433\u0443\u043b\u0430\u0446\u0438\u044f;',n.helpText="",n.isRequired=!1,e.push(n);const o=new s.a;return o.domId="app5",o.labelText="\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u043e\u0441\u0438\u0442\u0435\u043b, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u043e\u0442\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435.",o.helpText="",o.isRequired=!1,e.push(o),e}getDynamicRowOtherDocumentDef(e){const t=new s.a;return t.domId="doc_"+e,t.placeHolderText="\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",t.labelText="",t.isRequired=!1,t}getAppDocumentDef(e,t){const i=new s.a;return i.domId="file_"+e,i.placeHolderText=null,i.labelText=null,i.isRequired=!0,t===h.a.READ&&(i.isDisabled=!0,i.isRequired=!1,i.readonly=!0),i}getRDTransportDefinistions(){const e=[],t=new s.a;t.domId="wayItem1",t.labelText="\u043f\u043e \u0448\u043e\u0441\u0435",t.helpText="",t.isRequired=!1,e.push(t);const i=new s.a;i.domId="wayItem2",i.labelText="\u0436\u0435\u043b\u0435\u0437\u043e\u043f\u044a\u0442\u0435\u043d \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442",i.helpText="",i.isRequired=!1,e.push(i);const a=new s.a;a.domId="wayItem3",a.labelText="\u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u0432\u044a\u0432 \u0432\u043e\u0434\u043d\u0438 \u043e\u0431\u0435\u043a\u0442\u0438",a.helpText="",a.isRequired=!1,e.push(a);const n=new s.a;n.domId="wayTextItem1",n.labelText=null,n.helpText="",n.isRequired=!1,e.push(n);const o=new s.a;o.domId="wayTextItem2",o.labelText=null,o.helpText="",o.isRequired=!1,e.push(o);const r=new s.a;return r.domId="wayTextItem3",r.labelText=null,r.helpText="",r.isRequired=!1,e.push(r),e}getDOApplicationsDefinitions(){const e=[],t=new s.a;t.domId="app1",t.labelText="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u043b\u0430\u0442\u0435\u043d\u0430 \u0442\u0430\u043a\u0441\u0430;",t.helpText="",t.isRequired=!0,e.push(t);const i=new s.a;i.domId="app2",i.labelText="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043f\u0440\u0430\u0432\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0442 \u043d\u0430 \u0447\u0443\u0436\u0434\u0435\u0441\u0442\u0440\u0430\u043d\u043d\u043e \u043b\u0438\u0446\u0435, \u0438\u0437\u0434\u0430\u0434\u0435\u043d \u0432 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u043d\u043e\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u043e\u0434\u0430\u0442\u0435\u043b\u0441\u0442\u0432\u043e \u043d\u0430 \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f, \u0434\u043e \u0442\u0440\u0438 \u043c\u0435\u0441\u0435\u0446\u0430 \u043f\u0440\u0435\u0434\u0438 \u043f\u043e\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e;",i.helpText="",i.isRequired=!1,e.push(i);const a=new s.a;a.domId="app3",a.labelText="\u0423\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u043f\u043e \u0447\u043b. 87, \u0430\u043b. 6 \u043e\u0442 \u0414\u0430\u043d\u044a\u0447\u043d\u043e-\u043e\u0441\u0438\u0433\u0443\u0440\u0438\u0442\u0435\u043b\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0443\u0430\u043b\u0435\u043d \u043a\u043e\u0434\u0435\u043a\u0441 \u0437\u0430 \u043b\u0438\u043f\u0441\u0430 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f;",a.helpText="",a.isRequired=!1,e.push(a);const n=new s.a;n.domId="app4",n.labelText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u043c\u0435\u0442\u043e\u0434\u0430 \u0437\u0430 \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438\u0442\u0435;",n.helpText="",n.isRequired=!1,e.push(n);const o=new s.a;o.domId="app5",o.labelText="\u041f\u0440\u043e\u0435\u043a\u0442 \u0437\u0430 \u0440\u0435\u043a\u0443\u043b\u0442\u0438\u0432\u0430\u0446\u0438\u044f, \u043c\u0435\u0440\u043a\u0438 \u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0437\u0430 \u0437\u0430\u043a\u0440\u0438\u0432\u0430\u043d\u0435 \u0438 \u0437\u0430 \u0441\u043b\u0435\u0434\u0435\u043a\u0441\u043f\u043b\u043e\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0438\u0442\u0435 \u0437\u0430 \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0438\u043c\u043e; ",o.helpText="",o.isRequired=!1,e.push(o);const r=new s.a;r.domId="app6",r.labelText="\u0412 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u0438\u0437\u0438\u0441\u043a\u0432\u0430 - \u0445\u0438\u0433\u0438\u0435\u043d\u043d\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0437\u0430 \u0441\u043f\u0430\u0437\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0438\u0441\u043a\u0432\u0430\u043d\u0438\u044f\u0442\u0430 \u043d\u0430 \u043d\u0430\u0440\u0435\u0434\u0431\u0430\u0442\u0430 \u043f\u043e \u0447\u043b. 43, \u0430\u043b. 3, \u0438\u0437\u0434\u0430\u0434\u0435\u043d\u043e \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u043d\u0430 \u0437\u0434\u0440\u0430\u0432\u043d\u0430 \u0438\u043d\u0441\u043f\u0435\u043a\u0446\u0438\u044f (\u0420\u0417\u0418) - \u0437\u0430 \u043b\u0438\u0446\u0430\u0442\u0430, \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0449\u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u0441 \u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043e\u0442 \u0445\u0443\u043c\u0430\u043d\u043d\u0430\u0442\u0430 \u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0430 \u0438\u043b\u0438 \u0441\u0432\u044a\u0440\u0437\u0430\u043d\u0430 \u0441 \u0442\u044f\u0445 \u0438\u0437\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0441\u043a\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u0440\u0438\u0442\u043e\u0440\u0438\u044f\u0442\u0430 \u043d\u0430 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u043d\u0430\u0442\u0430 \u0438\u043d\u0441\u043f\u0435\u043a\u0446\u0438\u044f, \u0438\u043b\u0438 \u043e\u0442 \u043c\u0438\u043d\u0438\u0441\u0442\u044a\u0440\u0430 \u043d\u0430 \u0437\u0434\u0440\u0430\u0432\u0435\u043e\u043f\u0430\u0437\u0432\u0430\u043d\u0435\u0442\u043e - \u043a\u043e\u0433\u0430\u0442\u043e \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438\u0442\u0435 \u0441\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0442 \u043d\u0430 \u0442\u0435\u0440\u0438\u0442\u043e\u0440\u0438\u0438\u0442\u0435 \u043d\u0430 \u043f\u043e\u0432\u0435\u0447\u0435 \u043e\u0442 \u0435\u0434\u043d\u0430 \u0420\u0417\u0418; ",r.helpText="",r.isRequired=!1,e.push(r);const d=new s.a;d.domId="app7",d.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0430\u0446\u0438\u044f \u043e\u0442 \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f, \u0447\u0435 \u043d\u0435 \u0435 \u0441\u0432\u044a\u0440\u0437\u0430\u043d\u043e \u043b\u0438\u0446\u0435 \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \u0442\u043e\u0437\u0438 \u0437\u0430\u043a\u043e\u043d \u0441 \u043b\u0438\u0446\u0435, \u043d\u0430 \u043a\u043e\u0435\u0442\u043e \u0435 \u043e\u0442\u043d\u0435\u0442\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435\u0442\u043e \u0438\u043b\u0438 \u043c\u0443 \u0435 \u043e\u0442\u043a\u0430\u0437\u0430\u043d\u043e \u0438\u0437\u0434\u0430\u0432\u0430\u043d\u0435\u0442\u043e \u0438\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u0442\u043e \u043d\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u0438 \u0438\u0437\u0442\u0438\u0447\u0430\u043d\u0435\u0442\u043e \u043d\u0430 \u0435\u0434\u043d\u0430 \u0433\u043e\u0434\u0438\u043d\u0430 \u043e\u0442 \u043e\u0442\u043d\u0435\u043c\u0430\u043d\u0435\u0442\u043e \u0438\u043b\u0438 \u043e\u0442\u043a\u0430\u0437\u0430; ",d.helpText="",d.isRequired=!1,e.push(d);const c=new s.a;c.domId="app8",c.labelText="\u0412 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u0438\u0437\u0438\u0441\u043a\u0432\u0430 - \u043f\u043b\u0430\u043d \u0437\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b \u043d\u0430 \u0434\u0435\u043f\u0430 \u0437\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438, \u043d\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0438 \u0437\u0430 \u0438\u0437\u0433\u0430\u0440\u044f\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0438 \u043d\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0438 \u0437\u0430 \u0441\u044a\u0432\u043c\u0435\u0441\u0442\u043d\u043e \u0438\u0437\u0433\u0430\u0440\u044f\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438;",c.helpText="",c.isRequired=!1,e.push(c);const l=new s.a;l.domId="app9",l.labelText="\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0438\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0435\u043d\u043e \u043e\u0442 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0442\u0435\u043d \u043e\u0440\u0433\u0430\u043d \u043a\u043e\u043f\u0438\u0435 - \u0438\u0437\u0432\u0430\u0434\u043a\u0430 \u043e\u0442 \u0432\u043b\u044f\u0437\u044a\u043b \u0432 \u0441\u0438\u043b\u0430 \u043f\u043e\u0434\u0440\u043e\u0431\u0435\u043d \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435\u043d \u043f\u043b\u0430\u043d, \u0430 \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043f\u043e \u0447\u043b. 38, \u0430\u043b. 1 \u043e\u0442 \u0417\u0423\u041e \u0438 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u0438\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0435\u043d\u043e \u043e\u0442 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0442\u043d\u0438\u044f \u043e\u0440\u0433\u0430\u043d \u043a\u043e\u043f\u0438\u0435 - \u0438\u0437\u0432\u0430\u0434\u043a\u0430 \u043e\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u0430\u0449 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435\u043d \u043f\u043b\u0430\u043d \u0438\u043b\u0438 \u0434\u0440\u0443\u0433 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442, \u0432 \u043a\u043e\u0439\u0442\u043e \u0435 \u043f\u043e\u0441\u043e\u0447\u0435\u043d\u043e \u0440\u0430\u0437\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u0442\u043e \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0438\u044f \u0438\u043c\u043e\u0442, \u0434\u043e\u043a\u0430\u0437\u0432\u0430\u0449, \u0447\u0435 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430 \u043e\u0442\u0433\u043e\u0432\u0430\u0440\u044f \u043d\u0430 \u0438\u0437\u0438\u0441\u043a\u0432\u0430\u043d\u0438\u044f\u0442\u0430 \u043d\u0430 \u0447\u043b. 38, \u0430\u043b. 1 \u043e\u0442 \u0417\u0423\u041e; ",l.helpText="",l.isRequired=!1,e.push(l);const h=new s.a;h.domId="app10",h.labelText="\u0417\u0430\u0432\u0435\u0440\u0435\u043d\u043e (\u043e\u0442 \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f \u201c\u0432\u044f\u0440\u043d\u043e \u0441 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430\u201d) \u043a\u043e\u043f\u0438\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043e\u0441\u0442 \u0438\u043b\u0438 \u043d\u0430 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u0437\u0430 \u043d\u0430\u0435\u043c, \u043f\u0440\u0438\u0434\u0440\u0443\u0436\u0435\u043d \u0441 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043e\u0441\u0442 \u043d\u0430 \u0438\u043c\u043e\u0442\u0430, \u0438\u0437\u0434\u0430\u0434\u0435\u043d \u043e\u0442 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0442\u043d\u0438\u0442\u0435 \u0441\u043b\u0443\u0436\u0431\u0438, \u043d\u0430 \u0447\u0438\u044f\u0442\u043e \u0442\u0435\u0440\u0438\u0442\u043e\u0440\u0438\u044f \u0435 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430\u0442\u0430, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0430 \u043e\u0431\u0435\u043a\u0442\u0430, \u0438\u043c\u043e\u0442\u0430, \u043f\u043b\u0430\u043d\u043e\u0441\u043d\u0438\u043c\u0430\u0447\u043d\u0438\u044f \u043d\u043e\u043c\u0435\u0440 \u0438 \u0434\u0440\u0443\u0433\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438, \u043a\u043e\u0433\u0430\u0442\u043e \u0438\u043c\u043e\u0442\u044a\u0442 \u0435 \u0438\u0437\u0432\u044a\u043d \u0440\u0435\u0433\u0443\u043b\u0430\u0446\u0438\u044f; ",h.helpText="",h.isRequired=!1,e.push(h);const p=new s.a;p.domId="app11",p.labelText="\u0412 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u0438\u0437\u0438\u0441\u043a\u0432\u0430 - \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0437\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0440\u0430\u0437\u043c\u0435\u0440 \u043d\u0430 \u043e\u0442\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f\u0442\u0430 \u0437\u0430 \u0435\u0434\u0438\u043d \u0442\u043e\u043d \u0434\u0435\u043f\u043e\u043d\u0438\u0440\u0430\u043d \u043e\u0442\u043f\u0430\u0434\u044a\u043a \u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0430 \u043d\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043e\u0431\u0435\u0437\u043f\u0435\u0447\u0435\u043d\u0438\u0435\u0442\u043e \u0441\u044a\u0433\u043b\u0430\u0441\u043d\u043e \u0447\u043b. 60 \u043e\u0442 \u0417\u0423\u041e \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u043f\u043e \u043e\u0431\u0435\u0437\u0432\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u043e\u043f\u0430\u0441\u043d\u0438 \u0438/\u0438\u043b\u0438 \u043d\u0435\u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0447\u0440\u0435\u0437 \u0434\u0435\u043f\u043e\u043d\u0438\u0440\u0430\u043d\u0435; ",p.helpText="",p.isRequired=!1,e.push(p);const u=new s.a;u.domId="app12",u.labelText="\u0411\u0430\u043d\u043a\u043e\u0432\u0430 \u0433\u0430\u0440\u0430\u043d\u0446\u0438\u044f \u043f\u043e \u0447\u043b. 60, \u0430\u043b. 2, \u0442. 3 \u043e\u0442 \u0417\u0423\u041e, \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043a\u043e\u0433\u0430\u0442\u043e \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f\u0442 \u0435 \u0438\u0437\u0431\u0440\u0430\u043b \u0442\u0430\u0437\u0438 \u0444\u043e\u0440\u043c\u0430 \u043d\u0430 \u043e\u0431\u0435\u0437\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430\u043d\u0435 \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u043f\u043e \u043e\u0431\u0435\u0437\u0432\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u043e\u043f\u0430\u0441\u043d\u0438 \u0438/\u0438\u043b\u0438 \u043d\u0435\u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0447\u0440\u0435\u0437 \u0434\u0435\u043f\u043e\u043d\u0438\u0440\u0430\u043d\u0435; ",u.helpText="",u.isRequired=!1,e.push(u);const m=new s.a;m.domId="app13",m.labelText="\u0414\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0441\u0442\u0432\u0430 \u0437\u0430 \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0430\u0442\u0430 \u0441\u0442\u0435\u043f\u0435\u043d \u043d\u0430 \u0435\u043d\u0435\u0440\u0433\u0438\u0439\u043d\u0430 \u0435\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442 \u0437\u0430 \u0438\u043d\u0441\u0442\u0430\u043b\u0430\u0446\u0438\u0438\u0442\u0435 \u0437\u0430 \u0438\u0437\u0433\u0430\u0440\u044f\u043d\u0435 \u043d\u0430 \u0442\u0432\u044a\u0440\u0434\u0438 \u0431\u0438\u0442\u043e\u0432\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f\u0442 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430 \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043e\u043f\u043e\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0441 \u043a\u043e\u0434 R1; ",m.helpText="",m.isRequired=!1,e.push(m);const b=new s.a;b.domId="app14",b.labelText="\u0412 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435 \u043a\u043e\u0433\u0430\u0442\u043e \u0441\u0435 \u0438\u0437\u0438\u0441\u043a\u0432\u0430 \u2013 \u043e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430 \u043f\u0440\u0438\u043b\u0430\u0433\u0430\u043d\u0435 \u043d\u0430 \u043d\u0430\u0439-\u0434\u043e\u0431\u0440\u0438\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u043d\u0438 \u0442\u0435\u0445\u043d\u0438\u043a\u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0438\u0442\u0435, \u043a\u043e\u0433\u0430\u0442\u043e \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f\u0442 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430 \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0441\u043c\u0435\u0441\u0432\u0430\u043d\u0435 \u043d\u0430 \u043e\u043f\u0430\u0441\u043d\u0438 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043f\u043e \u0447\u043b. 8, \u0430\u043b. 3, \u0442. 3 \u043e\u0442 \u0417\u0423\u041e \u0438/\u0438\u043b\u0438 \u0437\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u0442. 13. ",b.helpText="",b.isRequired=!1,e.push(b);const g=new s.a;g.domId="app15",g.labelText="\u041b\u0438\u0446\u0430\u0442\u0430, \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u0449\u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u0441 \u041e\u0427\u0426\u041c, \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044f\u0442 \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b \u043d\u0430 \u0431\u0430\u043d\u043a\u043e\u0432\u0430 \u0433\u0430\u0440\u0430\u043d\u0446\u0438\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440 \u043d\u0430 25 000 \u043b\u0432. \u0438 \u0434\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u043e \u043f\u043e 5 000 \u043b\u0432. \u0437\u0430 \u0432\u0441\u044f\u043a\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0430, \u043d\u0430 \u043a\u043e\u044f\u0442\u043e \u0441\u0435 \u043f\u0440\u0435\u0434\u0432\u0438\u0436\u0434\u0430 \u0434\u0430 \u0431\u044a\u0434\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043d\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0442\u0430. ",g.helpText="",g.isRequired=!1,e.push(g);const f=new s.a;return f.domId="app16",f.labelText="\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u0435\u043d \u043d\u043e\u0441\u0438\u0442\u0435\u043b, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u043e\u0442\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435; ",f.helpText="",f.isRequired=!1,e.push(f),e}getLocationFormDefinitions(e){const t=Object(p.a)(),i=[],n=r.a.createDefaultDropDownFormItemDef();n.domId="loc_ter"+t,n.labelText="\u041e\u0431\u043b\u0430\u0441\u0442",n.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",n.placeHolderText="\u041e\u0431\u043b\u0430\u0441\u0442",n.isRequired=!0,i.push(n);const o=r.a.createDefaultDropDownFormItemDef();o.domId="loc_dist"+t,o.labelText="\u041e\u0431\u0449\u0438\u043d\u0430 (\u041e\u0431\u043b\u0430\u0441\u0442)",o.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0449\u0438\u043d\u0430 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",o.placeHolderText="\u041e\u0431\u0449\u0438\u043d\u0430",o.isRequired=!0,o.dataSource=u.a.publicUrl,o.searchFields=[new l.a("nameBg","s")],o.resultDataType=u.a,i.push(o);const h=r.a.createDefaultDropDownFormItemDef();h.domId="loc_pop"+t,h.labelText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",h.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",h.placeHolderText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",h.dataSource=d.a.publicUrl,h.searchFields=[new l.a("popName","s")],h.resultDataType=d.a,h.isRequired=!0,h.isWhere=!1,h.filterClause={distEknm:""},i.push(h);const m=s.a.createDefaultTextFormItemDef();m.domId="loc_address"+t,m.labelText="\u0410\u0434\u0440\u0435\u0441",m.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",m.placeHolderText="\u0410\u0434\u0440\u0435\u0441",m.isRequired=!0,i.push(m);const b=new s.a;b.domId="loc_upi"+t,b.labelText="\u0423\u041f\u0418 \u2116",b.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0423\u041f\u0418 \u2116",b.placeHolderText="\u0423\u041f\u0418 \u2116",b.isRequired=!1,i.push(b);const g=new s.a;g.domId="loc_plan"+t,g.labelText="\u041f\u043b\u0430\u043d\u043e\u0441\u043d\u0438\u043c\u0430\u0447\u0435\u043d \u2116",g.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043f\u043b\u0430\u043d\u043e\u0441\u043d\u0438\u043c\u0430\u0447\u0435\u043d \u2116",g.placeHolderText="\u041f\u043b\u0430\u043d\u043e\u0441\u043d\u0438\u043c\u0430\u0447\u0435\u043d \u2116",g.isRequired=!1,i.push(g);const f=new s.a;f.domId="loc_neigh"+t,f.labelText="\u041a\u0432\u0430\u0440\u0442\u0430\u043b",f.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043a\u0432\u0430\u0440\u0442\u0430\u043b",f.placeHolderText="\u041a\u0432\u0430\u0440\u0442\u0430\u043b",f.isRequired=!1,i.push(f);const R=new s.a;R.domId="loc_town"+t,R.labelText="\u0413\u0440./\u0421./\u041e\u0411\u0429",R.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0413\u0440./\u0421./\u041e\u0411\u0429",R.placeHolderText="\u0413\u0440./\u0421./\u041e\u0411\u0429",R.isRequired=!1,i.push(R);const S=new s.a;S.domId="loc_data"+t,S.labelText="\u0414\u0440\u0443\u0433\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438, \u043a\u043e\u0433\u0430\u0442\u043e \u0438\u043c\u043e\u0442\u044a\u0442 \u0435 \u0438\u0437\u0432\u044a\u043d \u0440\u0435\u0433\u0443\u043b\u0430\u0446\u0438\u044f",S.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0434\u0440\u0443\u0433\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438",S.placeHolderText="\u0414\u0440\u0443\u0433\u0438 \u043e\u043f\u0438\u0441\u0430\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438",S.isRequired=!1,i.push(S);const I=new s.a;I.domId="loc_area"+t,I.labelText="\u041f\u043b\u043e\u0449 (\u043a\u0432.\u043c.)",I.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043f\u043b\u043e\u0449",I.placeHolderText="\u041f\u043b\u043e\u0449 (\u043a\u0432.\u043c.)",I.isRequired=!1,i.push(I);const y=a.a.createDefaultDropDownFormItemDef();y.domId="loc_depot"+t,y.labelText="\u0412\u0438\u0434 \u043d\u0430 \u0434\u0435\u043f\u043e",y.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0432\u0438\u0434 \u043d\u0430 \u0434\u0435\u043f\u043e",y.placeHolderText="\u0412\u0438\u0434 \u043d\u0430 \u0434\u0435\u043f\u043e",y.dataSource=c.a.urlPublic,y.resultDataType=c.a,y.searchFields=[new l.a("description","s")],y.filterClause={domain:"DEPOT_TYPE"},y.isWhere=!1,y.isRequired=!0,i.push(y);const T=a.a.createDefaultDropDownFormItemDef();return T.domId="depot-classes"+t,T.labelText="\u041a\u043b\u0430\u0441 \u043d\u0430 \u0434\u0435\u043f\u043e",T.helpText="",T.isRequired=!0,i.push(T),i}getMercuryCheckboxesDefinitions(){const e=[],t=new s.a;t.domId="check1",t.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0441\u044a\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043e\u0442 \u0436\u0438\u0432\u0430\u043a.",t.helpText="",t.isRequired=!1,e.push(t);const i=new s.a;i.domId="check2",i.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043c \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0432\u0430\u043d\u0435 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438 \u043e\u0442 \u0436\u0438\u0432\u0430\u043a.",i.helpText="",i.isRequired=!1,e.push(i);const a=new s.a;a.domId="check3",a.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u0441\u044a\u043c \u0438\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0432 \u043f\u0440\u043e\u043c\u0438\u0448\u043b\u0435\u043d\u0438\u0442\u0435 \u043e\u0442\u0440\u0430\u0441\u043b\u0438, \u043f\u043e\u0441\u043e\u0447\u0435\u043d\u0438 \u0432 \u0447\u043b. 11, \u0431\u0443\u043a\u0432\u0438 \u0430), \u0431) \u0438 \u0432) \u043e\u0442 \u0420\u0435\u0433\u043b\u0430\u043c\u0435\u043d\u0442 (\u0415\u0421) 2017/852 ",a.helpText="",a.isRequired=!1,e.push(a);const n=new s.a;return n.domId="check4",n.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",n.helpText="",n.isRequired=!0,e.push(n),e}getWasteEndDefinitions(){const e=[],t=new s.a;t.domId="act",t.labelText="\u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u0415 \u041d\u0410 \u0410\u041a\u0422\u0410",t.helpText="",t.isRequired=!0,e.push(t);const i=a.a.createDefaultDropDownFormItemDef();i.domId="docNo",i.labelText="\u041d\u041e\u041c\u0415\u0420 \u041d\u0410 \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422 \u041f\u041e \u0427\u041b. 35 \u0417\u0423\u041e, \u0421\u042a\u0413\u041b\u0410\u0421\u041d\u041e \u041a\u041e\u0419\u0422\u041e \u0417\u0410\u042f\u0412\u0418\u0422\u0415\u041b\u042f \u0418\u0417\u0412\u042a\u0420\u0428\u0412\u0410 \u0414\u0415\u0419\u041d\u041e\u0421\u0422 \u0421 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418",i.helpText="",i.isRequired=!0,e.push(i);const o=new s.a;o.domId="material",o.labelText="\u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u0415 \u041d\u0410 \u041f\u041e\u041b\u0423\u0427\u0410\u0412\u0410\u041d \u041c\u0410\u0422\u0415\u0420\u0418\u0410\u041b",o.helpText="",o.isRequired=!0,e.push(o);const r=new s.a;r.domId="check4",r.labelText="\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043c, \u0447\u0435 \u0432 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441 \u0435 \u0432\u044a\u0432\u0435\u0434\u0435\u043d\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u043e \u0441\u043c\u0438\u0441\u044a\u043b\u0430 \u043d\u0430 \u0430\u043a\u0442\u043e\u0432\u0435\u0442\u0435 \u043d\u0430 \u0415\u0432\u0440\u043e\u043f\u0435\u0439\u0441\u043a\u0430\u0442\u0430 \u043a\u043e\u043c\u0438\u0441\u0438\u044f, \u043f\u0440\u0438\u0435\u0442\u0438 \u0432 \u0441\u044a\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0441 \u0447\u043b. 6, \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444 2 \u043e\u0442 \u0414\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 2008/98/\u0415\u041e.",r.helpText="",r.isRequired=!0,e.push(r);const d=new s.a;d.domId="check2",d.labelText="\u0418\u0417\u0412\u0415\u0421\u0422\u041d\u0410 \u041c\u0418 \u0415 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0410\u0422\u0410 \u041e\u0422\u0413\u041e\u0412\u041e\u0420\u041d\u041e\u0421\u0422 \u041f\u041e \u0427\u041b. 313 \u041e\u0422 \u041d\u0410\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u041d\u0418\u042f \u041a\u041e\u0414\u0415\u041a\u0421 \u0417\u0410 \u0414\u0415\u041a\u041b\u0410\u0420\u0418\u0420\u0410\u041d\u0415 \u041d\u0410 \u041d\u0415\u0412\u0415\u0420\u041d\u0418 \u0414\u0410\u041d\u041d\u0418.",d.helpText="",d.isRequired=!0,e.push(d);const c=a.a.createDefaultDropDownFormItemDef();c.domId="activity_code",c.labelText="\u041a\u041e\u0414 \u041d\u0410 \u0414\u0415\u0419\u041d\u041e\u0421\u0422",c.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u043e\u0434 \u043d\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442 \u043f\u043e \u043e\u043f\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435",c.dataSource=n.a.publicUrl,c.resultDataType=n.a,c.searchFields=[new l.a("opCode","s")],c.isRequired=!0,e.push(c);const h=a.a.createDefaultDropDownFormItemDef();h.domId="contact",h.labelText=null,h.isRequired=!1,h.helpText=null,h.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",e.push(h);const p=a.a.createDefaultDropDownFormItemDef();return p.domId="address",p.labelText=null,p.isRequired=!1,p.helpText=null,p.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",e.push(p),e}getWasteCodeDef(e){const t=a.a.createDefaultDropDownFormItemDef();return t.domId="waste_code_"+e,t.labelText="\u041a\u041e\u0414 \u041d\u0410 \u0412\u0425\u041e\u0414\u042f\u0429\u0418\u0422\u0415 \u041e\u0422\u041f\u0410\u0414\u042a\u0426\u0418",t.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u043e\u0434 \u043d\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0442\u0435 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438",t.isRequired=!0,t.dataSource=o.a.publicUrl,t.resultDataType=o.a,t.searchFields=[new l.a("code","s")],t}getOtherDocDef(e){const t=new s.a;return t.domId="file"+e,t.labelText="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442",t.helpText=null,t.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0444\u0430\u0439\u043b",t.isRequired=!1,t}getSignDef(e){const t=new s.a;return t.domId="sign"+e,t.labelText="\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u0435\u043d \u043f\u043e\u0434\u043f\u0438\u0441 \u0437\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",t.helpText=null,t.placeHolderText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0444\u0430\u0439\u043b",t.isRequired=!1,t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);