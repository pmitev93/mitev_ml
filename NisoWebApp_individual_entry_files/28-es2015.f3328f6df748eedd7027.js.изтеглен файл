(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{MxKE:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("3Pt+"),l=i("F7pt"),o=i("ofXK"),r=i("sYmb");function c(e,t){if(1&e&&(n.Sb(0,"label",7),n.Gc(1),n.hc(2,"translate"),n.Rb()),2&e){const e=n.gc();n.mc("for",e.formItemDef.domId),n.zb(1),n.Hc(n.ic(2,2,e.formItemDef.labelText))}}const a=function(e){return{"form-check-inline":e}},d=function(e){return{"form-check-label":e}};function u(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",8),n.Sb(1,"input",9),n.ec("change",(function(){n.wc(e);const i=t.$implicit;return n.gc().onSelectItem(i)})),n.Rb(),n.Sb(2,"label",10),n.Gc(3),n.hc(4,"translate"),n.Rb(),n.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=n.gc();n.mc("ngClass",n.qc(12,a,s.inline)),n.zb(1),n.nc("value",e[s.valueFieldName]),n.mc("id",s.formItemDef.domId+"-"+i)("name",s.formItemDef.domName+"-"+i)("required",s.formItemDef.isRequired)("disabled",s.formItemDef.isDisabled)("checked",e.isSelected),n.zb(1),n.mc("ngClass",n.qc(14,d,s.inline))("for",s.formItemDef.domId+"-"+i),n.zb(1),n.Ic(" ",n.ic(4,10,e[s.labelFieldName])," ")}}function b(e,t){1&e&&(n.Sb(0,"div",11),n.Gc(1," \u0417\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e "),n.Rb())}const m=function(e,t){return{"col-lg-6":e,"col-lg-12":t}};let f=(()=>{class e{constructor(){this.showError=!1,this.valueEmitter=new n.n,this.inline=!1,this.formItemDef=null,this.colNum=1,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new l.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}set source(e){this.src=e,null!=e&&e.length>0&&2===this.colNum&&this.divideSource()}get source(){return this.src}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){return this.formItemDef.isRequired&&!this.value?(this.showError=!0,{required:!0}):(this.showError=!1,null)}onSelectItem(e){this.value=e;const t=e[this.valueFieldName];this.source.forEach(e=>{e.isSelected=e[this.valueFieldName]===t}),this.valueEmitter.emit(this.value)}divideSource(){const e=this.getMid(this.src.length);this.secondSource=this.src.slice(e+1),this.src=this.src.slice(0,e)}getMid(e){const t=Math.floor(e/2);return e%2!=0?t:t-1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-fi-input-radio-group"]],inputs:{inline:"inline",labelFieldName:"labelFieldName",valueFieldName:"valueFieldName",formItemDef:"formItemDef",value:"value",source:"source",colNum:"colNum"},outputs:{valueEmitter:"valueEmitter"},features:[n.yb([{provide:s.n,useExisting:Object(n.S)(()=>e),multi:!0},{provide:s.m,useExisting:Object(n.S)(()=>e),multi:!0}])],decls:9,vars:10,consts:[[1,"form-group"],["class","mr-2",3,"for",4,"ngIf"],[1,"row"],[3,"ngClass"],["class","form-check mr-4",3,"ngClass",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",4,"ngIf"],["id","input-text-1-Help",1,"form-text","text-muted"],[1,"mr-2",3,"for"],[1,"form-check","mr-4",3,"ngClass"],["type","radio",1,"form-check-input",3,"value","id","name","required","disabled","checked","change"],[3,"ngClass","for"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Ec(1,c,3,4,"label",1),n.Sb(2,"div",2),n.Sb(3,"div",3),n.Ec(4,u,5,16,"div",4),n.Rb(),n.Rb(),n.Ec(5,b,2,0,"div",5),n.Sb(6,"small",6),n.Gc(7),n.hc(8,"translate"),n.Rb(),n.Rb()),2&e&&(n.zb(1),n.mc("ngIf",t.formItemDef.labelText),n.zb(2),n.mc("ngClass",n.rc(7,m,2===t.colNum,2!==t.colNum)),n.zb(1),n.mc("ngForOf",t.source),n.zb(1),n.mc("ngIf",t.showError),n.zb(2),n.Ic(" ",n.ic(8,5,t.formItemDef.helpText)," "))},directives:[o.u,o.r,o.t],pipes:[r.d],styles:[""]}),e})()},jtLl:function(e,t,i){"use strict";i.d(t,"a",(function(){return F}));var n=i("F7pt"),s=i("PSD3"),l=i.n(s),o=i("lB+K");class r{constructor(e){e&&(this.modalTitle=e.modalTitle||"\u041f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0435 \u0438 \u043f\u043e\u0434\u0430\u0432\u0430\u043d\u0435",this.downloadFileText=e.downloadFileText||"\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441",this.downloadFileBtnText=e.downloadFileBtnText||"\u0421\u0432\u0430\u043b\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430",this.uploadSignedFileText=e.uploadSignedFileText||"\u041a\u0430\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0444\u0430\u0439\u043b \u0441 \u043f\u043e\u0434\u043f\u0438\u0441",this.uploadSignedFileBtnText=e.uploadSignedFileBtnText||"\u041f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0435",this.onSignAlertTitle=e.onSignAlertTitle||"\u041f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0435",this.onSignAlertText=e.onSignAlertText||"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430 \u0435 \u043d\u0435\u043e\u0431\u0440\u0430\u0442\u0438\u043c\u0430, \u0436\u0435\u043b\u0430\u0435\u0442\u0435 \u043b\u0438 \u0434\u0430 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0438\u0442\u0435?",this.successMessge=e.successMessge||"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430 \u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!",this.errorMessage=e.errorMessage||"\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0435!")}get modalTitle(){return this.pModalTitle}set modalTitle(e){this.pModalTitle=e}get downloadFileText(){return this.pDownloadFileText}set downloadFileText(e){this.pDownloadFileText=e}get downloadFileBtnText(){return this.pDownloadFileBtnText}set downloadFileBtnText(e){this.pDownloadFileBtnText=e}get uploadSignedFileText(){return this.pUploadSignedFileText}set uploadSignedFileText(e){this.pUploadSignedFileText=e}get uploadSignedFileBtnText(){return this.pUploadSignedFileBtnText}set uploadSignedFileBtnText(e){this.pUploadSignedFileBtnText=e}get onSignAlertTitle(){return this.pOnSignAlertTitle}set onSignAlertTitle(e){this.pOnSignAlertTitle=e}get onSignAlertText(){return this.pOnSignAlertText}set onSignAlertText(e){this.pOnSignAlertText=e}get successMessge(){return this.pSuccessMessge}set successMessge(e){this.pSuccessMessge=e}get errorMessage(){return this.pErrorMessage}set errorMessage(e){this.pErrorMessage=e}}var c=i("u1cU"),a=i("XDeO"),d=i("fXoL"),u=i("1kSV"),b=i("ZRIf"),m=i("sGcX"),f=i("3Pt+"),h=i("ofXK"),g=i("Mtn9"),p=i("sYmb");const S=["signModal"];function T(e,t){1&e&&(d.Sb(0,"button",11),d.Nb(1,"i",12),d.Rb())}function v(e,t){if(1&e){const e=d.Tb();d.Sb(0,"div",13),d.Sb(1,"fieldset",14),d.Sb(2,"h5",15),d.Gc(3),d.Rb(),d.Sb(4,"div",16),d.Sb(5,"div",17),d.Nb(6,"div",18),d.Sb(7,"button",19),d.ec("click",(function(){return d.wc(e),d.gc(2).onDownload()})),d.Nb(8,"i",20),d.Sb(9,"span",21),d.Gc(10),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Nb(11,"hr"),d.Sb(12,"h5",15),d.Gc(13),d.Rb(),d.Sb(14,"div",22),d.Sb(15,"div",23),d.Sb(16,"app-fi-file-browse",24),d.ec("ngModelChange",(function(t){return d.wc(e),d.gc(2).signFile=t})),d.Rb(),d.Rb(),d.Sb(17,"button",25),d.ec("click",(function(){return d.wc(e),d.gc(2).onSubmit()})),d.Nb(18,"i",26),d.Gc(19),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&e){d.gc();const e=d.vc(1),t=d.gc();d.zb(1),d.mc("disabled",t.working),d.zb(2),d.Ic("1. ",t.defModel.downloadFileText,""),d.zb(3),d.mc("hidden",!0),d.zb(4),d.Hc(t.defModel.downloadFileBtnText),d.zb(3),d.Ic("2. ",t.defModel.uploadSignedFileText,""),d.zb(3),d.mc("ngModel",t.signFile)("name",t.fileDef.domId)("formItemDef",t.fileDef)("showClearBtn",!1),d.zb(1),d.mc("disabled",!e.valid),d.zb(2),d.Ic(" ",t.defModel.uploadSignedFileBtnText," ")}}function w(e,t){if(1&e){const e=d.Tb();d.Sb(0,"div",27),d.Sb(1,"div",28),d.Sb(2,"small",29),d.Sb(3,"b"),d.Gc(4),d.hc(5,"translate"),d.Rb(),d.Rb(),d.Sb(6,"button",30),d.ec("click",(function(){return d.wc(e),d.gc(2).removeAlert()})),d.Sb(7,"span",31),d.Gc(8,"\xd7"),d.Rb(),d.Rb(),d.Rb(),d.Sb(9,"small"),d.Gc(10),d.Rb(),d.Rb()}if(2&e){const e=d.gc(2);d.zb(4),d.Hc(d.ic(5,2,"messages.alerts.error")),d.zb(6),d.Ic(" ",e.error," ")}}function x(e,t){if(1&e&&(d.Sb(0,"div",13),d.Sb(1,"h5",32),d.Gc(2),d.Rb(),d.Rb()),2&e){const e=d.gc(2);d.zb(2),d.Hc(e.defModel.successMessge)}}function R(e,t){if(1&e){const e=d.Tb();d.Sb(0,"form",1,2),d.Sb(2,"div",3),d.Sb(3,"h4",4),d.Gc(4),d.Rb(),d.Sb(5,"div"),d.Ec(6,T,2,0,"button",5),d.Sb(7,"button",6),d.ec("click",(function(){return d.wc(e),d.gc().close()})),d.Nb(8,"i",7),d.Rb(),d.Rb(),d.Rb(),d.Ec(9,v,20,11,"div",8),d.Sb(10,"div",9),d.Ec(11,w,11,4,"div",10),d.Rb(),d.Ec(12,x,3,1,"div",8),d.Rb()}if(2&e){const e=d.gc();d.zb(4),d.Hc(e.defModel.modalTitle),d.zb(2),d.mc("ngIf",e.working),d.zb(1),d.mc("disabled",e.working),d.zb(2),d.mc("ngIf",!e.isReady),d.zb(2),d.mc("ngIf",e.error),d.zb(1),d.mc("ngIf",e.isReady)}}let F=(()=>{class e{constructor(e,t,i){this.modalService=e,this.crudService=t,this.mmSpinner=i,this.SYSTEM_CLOSE="system close",this.RED="#dc3545",this.WARNING="warning",this.modalDlg=null,this.isReady=!1,this.working=!1,this.defModel=new r({})}ngOnInit(){this.loadDefs()}open(){this.removeAlert(),this.modalDlg=this.modalService.open(this.signModal,{keyboard:!1,backdrop:"static",size:"lg"})}close(){null!=this.modalDlg&&(this.modalDlg.close(this.SYSTEM_CLOSE),this.modalDlg=null,this.signFile=null,this.isReady&&location.reload())}onDownload(){this.removeAlert(),this.url&&(this.working=!0,this.crudService.loadFileForSign(this.url).subscribe(e=>{const t="doc_"+a.a.getDateTimeAsString()+".pdf";Object(c.a)(e,t),this.working=!1},e=>{this.error=o.a.DOWNLOAD_ERROR,this.working=!1}))}onSubmit(){this.signModal&&this.url&&l.a.fire({title:this.defModel.onSignAlertTitle,text:this.defModel.onSignAlertText,icon:this.WARNING,showConfirmButton:!0,confirmButtonText:o.a.CONFIRM_BUTTON_TEXT,showCancelButton:!0,cancelButtonText:o.a.CANCEL_BUTTON_TEXT,cancelButtonColor:this.RED,allowOutsideClick:!1}).then(e=>{if(e.isConfirmed){const e=new FormData;e.append("signature",this.signFile),this.working=!0,this.crudService.saveData(this.url,e).subscribe(e=>{this.working=!1,this.isReady=!0},e=>{this.working=!1,this.error=o.a.SIGN_ERROR})}})}removeAlert(){this.error=null}getBrowseInputDef(){const e=new n.a;return e.domId="file",e.helpText=null,e.labelText=null,e.isRequired=!0,e}loadDefs(){this.fileDef=this.getBrowseInputDef()}}return e.\u0275fac=function(t){return new(t||e)(d.Mb(u.t),d.Mb(b.a),d.Mb(m.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-main-sign-modal"]],viewQuery:function(e,t){var i;1&e&&d.Nc(S,!0),2&e&&d.uc(i=d.fc())&&(t.signModal=i.first)},inputs:{defModel:"defModel",url:"url"},decls:2,vars:0,consts:[["signModal",""],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],["type","button","class","btn btn-outline-primary mr-2","placement","left","ngbTooltip","\u0418\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u0441\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",4,"ngIf"],["type","button",1,"btn","btn-outline-danger","ml-auto",3,"disabled","click"],[1,"fas","fa-times"],["class","modal-body",4,"ngIf"],[1,"modal-footer","d-block"],["class","alert alert-danger alert-dismissable mx-0 my-2",4,"ngIf"],["type","button","placement","left","ngbTooltip","\u0418\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u0441\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",1,"btn","btn-outline-primary","mr-2"],[1,"fas","fa-spinner","fa-spin"],[1,"modal-body"],[3,"disabled"],[1,"mr-2","mb-3"],[1,"d-flex"],[1,"ml-auto"],["role","status",1,"spinner-border",3,"hidden"],["type","button",1,"btn","btn-primary","ml-2","mb-2",3,"click"],[1,"fas","fa-file-download","ml-2","mr-2"],[1,"mr-2"],[1,"d-flex","mb-3"],[1,"col-md-8"],[3,"ngModel","name","formItemDef","showClearBtn","ngModelChange"],["type","button",1,"btn","btn-primary","ml-auto",3,"disabled","click"],[1,"fas","fa-pen-fancy","mr-1"],[1,"alert","alert-danger","alert-dismissable","mx-0","my-2"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"text-success"]],template:function(e,t){1&e&&d.Ec(0,R,13,6,"ng-template",null,0,d.Fc)},directives:[f.D,f.p,f.q,h.u,u.ab,g.a,f.o,f.r],pipes:[p.d],styles:[""]}),e})()},zc99:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(){}static adaptArray(e,t){const i=[];return e.forEach(e=>{i.push(new t(e))}),i}}}}]);