(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"Dcx/":function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var o=i("mrSG"),n=i("fXoL"),r=i("4m0f"),a=i("R5jJ"),s=i("pVVs"),l=i("C44m"),c=i("hnrn");let d=(()=>{class e{constructor(e){this.code=null==e?void 0:e.code,this.distEknm=null==e?void 0:e.distEknm,this.mroFulfillment=null==e?void 0:e.mroFulfillment,this.ornId=null==e?void 0:e.ornId,this.popEknm=null==e?void 0:e.popEknm,this.stateId=null==e?void 0:e.stateId,this.terCode=null==e?void 0:e.terCode,this.wcyId=null==e?void 0:e.wcyId,this.riosvCodeN1=null==e?void 0:e.riosvCodeN1,this.uonAunId=null==e?void 0:e.uonAunId,this.wayRecive=null==e?void 0:e.wayRecive}}return Object(o.b)([Object(c.b)({alias:"code"})],e.prototype,"code",void 0),Object(o.b)([Object(c.b)({alias:"distEknm"})],e.prototype,"distEknm",void 0),Object(o.b)([Object(c.b)({alias:"mroFulfillment"})],e.prototype,"mroFulfillment",void 0),Object(o.b)([Object(c.b)({alias:"ornId"})],e.prototype,"ornId",void 0),Object(o.b)([Object(c.b)({alias:"popEknm"})],e.prototype,"popEknm",void 0),Object(o.b)([Object(c.b)({alias:"stateId"})],e.prototype,"stateId",void 0),Object(o.b)([Object(c.b)({alias:"terCode"})],e.prototype,"terCode",void 0),Object(o.b)([Object(c.b)({alias:"wcyId"})],e.prototype,"wcyId",void 0),Object(o.b)([Object(c.b)({alias:"riosvCodeN1"})],e.prototype,"riosvCodeN1",void 0),Object(o.b)([Object(c.b)({alias:"uonAunId"})],e.prototype,"uonAunId",void 0),Object(o.b)([Object(c.b)({alias:"wayRecive"})],e.prototype,"wayRecive",void 0),e})();var m=i("F7pt"),u=i("0Uwp"),f=i("noCF"),b=i("ey6I"),p=i("9zSO"),h=i("SkKo"),g=i("d0z0"),S=i("t8UU"),v=i("mwl0"),D=i("ra4D"),I=i("n2Fg");let w=(()=>{class e{constructor(){}getDefinitions(){const e=[],t=f.a.createDefaultDropDownCascadeFormItemDef();t.domId="terCode",t.labelText="\u041e\u0431\u043b\u0430\u0441\u0442",t.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442",t.placeHolderText="\u041e\u0431\u043b\u0430\u0441\u0442",t.isRequired=!1,t.parentDomName=null,t.dataSource="Public/Teritory",t.resultDataType=v.a,t.searchFields=[new D.a("terName","s")];const i=f.a.createDefaultDropDownCascadeFormItemDef();i.domId="distEknm",i.labelText="\u041e\u0431\u0449\u0438\u043d\u0430",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0449\u0438\u043d\u0430",i.placeHolderText="\u041e\u0431\u0449\u0438\u043d\u0430",i.isRequired=!1,i.parentDomName="terCode",i.parentFieldName="terCode",i.dataSource="Public/District",i.resultDataType=b.a,i.searchFields=[new D.a("distName","s")];const o=f.a.createDefaultDropDownCascadeFormItemDef();o.domId="popEknm",o.labelText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",o.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",o.placeHolderText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",o.isRequired=!1,o.parentDomName="distEknm",o.parentFieldName="distEknm",o.dataSource="Public/Popular",o.resultDataType=p.a,o.searchFields=[new D.a("popName","s")];const n=m.a.createDefaultDatePeriodFormItemDef();n.domId="datePeriod",n.labelText="\u041f\u0435\u0440\u0438\u043e\u0434 \u043d\u0430 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435",n.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u043d\u0430 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435",n.placeHolderText="\u041f\u0435\u0440\u0438\u043e\u0434 \u043d\u0430 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435",n.isRequired=!1,n.isDisabled=!1;const r=u.a.createDefaultDropDownFormItemDef();r.domId="stateId",r.labelText="\u0421\u044a\u0441\u0442\u043e\u044f\u043d\u0438\u0435",r.placeHolderText="\u0421\u044a\u0441\u0442\u043e\u044f\u043d\u0438\u0435",r.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u044a\u0441\u0442\u043e\u044f\u043d\u0438\u0435",r.dataSource="Public/TcStates",r.resultDataType=I.a,r.searchFields=[new D.a("name","s")],r.isWhere=!1,r.filterClause={code:'like(s("%TB%"))'},r.isRequired=!1;const a=u.a.createDefaultDropDownFormItemDef();a.domId="code",a.labelText="\u0422\u0438\u043f \u0440\u0435\u0433\u0438\u0441\u0442\u044a\u0440",a.placeHolderText="\u0422\u0438\u043f \u0440\u0435\u0433\u0438\u0441\u0442\u044a\u0440",a.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u0438\u043f \u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u044a\u0440\u0430",a.isRequired=!1;const s=u.a.createDefaultDropDownFormItemDef();s.domId="wcyId",s.labelText="\u0412\u0438\u0434 \u0415\u0415\u041e",s.placeHolderText="\u0412\u0438\u0434 \u0415\u0415\u041e",s.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0432\u0438\u0434 \u043d\u0430 \u0415\u0415\u041e",s.dataSource="TcWasteCategories",s.resultDataType=g.a,s.searchFields=[new D.a("description","s")],s.isWhere=!1,s.filterClause={wteId:'eq(i("8"))'},s.isRequired=!1;const l=u.a.createDefaultDropDownFormItemDef();l.domId="wcyId",l.labelText="\u0412\u0438\u0434 \u043d\u0430 \u0431\u0430\u0442\u0435\u0440\u0438\u0438\u0442\u0435",l.placeHolderText="\u0412\u0438\u0434 \u043d\u0430 \u0431\u0430\u0442\u0435\u0440\u0438\u0438\u0442\u0435",l.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0432\u0438\u0434 \u043d\u0430 \u0431\u0430\u0442\u0435\u0440\u0438\u0438\u0442\u0435",l.dataSource="Public/TcWasteCategories",l.resultDataType=g.a,l.searchFields=[new D.a("description","s")],l.isWhere=!1,l.filterClause={wteId:'eq(i("3"))'},l.isRequired=!1;const c=u.a.createDefaultDropDownFormItemDef();c.domId="mroFulfillment",c.labelText="\u041d\u0430\u0447\u0438\u043d \u043d\u0430 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f\u0442\u0430",c.placeHolderText="\u041d\u0430\u0447\u0438\u043d \u043d\u0430 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f\u0442\u0430",c.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0447\u0438\u043d \u043d\u0430 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u0438\u044f\u0442\u0430",c.dataSource="TcCommonCodes",c.resultDataType=h.a,c.searchFields=[new D.a("description","s")],c.isWhere=!1,c.filterClause={domain:'eq(s("MRO_FULFILLMENT"))'},c.isRequired=!1;const d=u.a.createDefaultDropDownFormItemDef();d.domId="riosvCodeN1",d.labelText="\u0420\u0418\u041e\u0421\u0412",d.placeHolderText="\u0420\u0418\u041e\u0421\u0412",d.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0420\u0418\u041e\u0421\u0412",d.dataSource="Public/Rios",d.resultDataType=S.a,d.searchFields=[new D.a("cityName","s")],d.isRequired=!1;const w=u.a.createDefaultDropDownFormItemDef();return w.domId="uonAunId",w.labelText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u043f\u043e\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435",w.placeHolderText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u043f\u043e\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435",w.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e \u043e\u043f\u043e\u043b\u0437\u043e\u0442\u0432\u043e\u0440\u044f\u0432\u0430\u043d\u0435",w.isRequired=!1,e.push(t),e.push(i),e.push(o),e.push(n),e.push(r),e.push(s),e.push(l),e.push(c),e.push(d),e.push(a),e.push(w),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=i("ZRIf"),y=i("4XRX"),T=i("3Pt+"),O=i("lz7R"),E=i("Ofwd"),C=i("Bz/w"),F=i("ofXK");const M=["form"];function N(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",6),n.Sb(1,"app-fi-select-dropdown",15),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.riosv=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.model.riosv)("formItemDef",e.formDefinitions[8])("name",e.formDefinitions[8].domName)}}function A(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",6),n.Sb(1,"app-fi-select-dropdown",16),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.mroFulfillment=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.model.mroFulfillment)("formItemDef",e.formDefinitions[7])("name",e.formDefinitions[7].domName)}}function x(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",6),n.Sb(1,"app-fi-select-dropdown",17),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.oopOrg=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.model.oopOrg)("formItemDef",e.formDefinitions[10])("name",e.formDefinitions[10].domName)("externalDataItems",e.oopOrgModels)}}function k(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",6),n.Sb(1,"app-fi-select-dropdown",12),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.category=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.model.category)("formItemDef",e.formDefinitions[5])("name",e.formDefinitions[5].domName)}}function z(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",6),n.Sb(1,"app-fi-select-dropdown",12),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.category=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.model.category)("formItemDef",e.formDefinitions[6])("name",e.formDefinitions[6].domName)}}let V=(()=>{class e{constructor(e,t,i){this.formDefsGenerator=e,this.crudService=t,this.sessionInfo=i,this.M35_TYPES=[{code:"DO",name:"\u0414\u0435\u0439\u043d\u043e\u0441\u0442\u0438 \u0441 \u043e\u0442\u043f\u0430\u0434\u044a\u0446\u0438"},{code:"CT",name:"\u0420\u0414 - \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"},{code:"TW",name:"\u0420\u0414 - \u0442\u0440\u0435\u0442\u0438\u0440\u0430\u043d\u0435"}],this.formEmitter=new n.n,this.formStatusValidChanged=new n.n,this.formDefinitions=[],this.model={},this.authTypes=[],this.formValidStatus="INVALID",this.statusSubscriber=null}ngOnInit(){this.loadDefs(),this.loadTypes()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}loadDefs(){this.formDefinitions=this.formDefsGenerator.getDefinitions()}loadTypes(){"mro"===this.type?this.crudService.loadByFind(r.a,r.a.publicUrl,{parentId:8}).subscribe(e=>{this.authTypes=e.pageContent}):(this.authTypes=this.M35_TYPES,this.formDefinitions[4].filterClause={code:'like(s("%DO%"))'})}loadOOps(e){return this.crudService.loadByParam(a.a,s.a.urlSubType,e).toPromise()}getFormValue(){const e=this.form.value;this.form.value.datePeriod&&(e.dateFrom=this.form.value.datePeriod[0]),this.form.value.datePeriod&&(e.dateTo=this.form.value.datePeriod[1]),delete e.datePeriod,e.ornId=this.sessionInfo.getOrganization().id,e.code||(e.code="mro"===this.type?"MRO_BA,MRO_EEO,MRO_OIL,MRO_TYRE,MRO_BAG":"DO,CT,TW");const t=new d(e),i=this.prepareFilters(t);this.formEmitter.emit(i)}clearFilters(){this.form.reset()}onTypeChange(){this.model.regType&&this.getOOpOrgs(this.model.regType)}getOOpOrgs(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.getOrgType(e);t&&(this.oopOrgModels=yield this.loadOOps(t))}))}getOrgType(e){let t=null;switch(e){case l.a.MRO_BA:t="OO_3";break;case l.a.MRO_EEO:t="OO_2";break;case l.a.MRO_BAG:t="OO_0";break;case l.a.MRO_TYRE:t="OO_5";break;case l.a.MRO_OIL:t="OO_4"}return t}prepareFilters(e){let t="";const i=Object.keys(e);for(const o of i)e[o]&&(t=t.concat(`${o}=${e[o]}&`));return t=t.slice(0,-1),t}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(w),n.Mb(R.a),n.Mb(y.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-view-form"]],viewQuery:function(e,t){var i;1&e&&n.Nc(M,!0),2&e&&n.uc(i=n.fc())&&(t.form=i.first)},inputs:{title:"title",type:"type"},outputs:{formEmitter:"formEmitter",formStatusValidChanged:"formStatusValidChanged"},decls:28,vars:25,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-center"],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"mb-1"],[1,"row"],[1,"col-lg-4"],["labelFieldName","terName","valueFieldName","terCode",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","distName","valueFieldName","distEknm",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","popName","valueFieldName","popEknm",3,"ngModel","formItemDef","name","ngModelChange"],[1,"col-lg-8"],[3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","name","valueFieldName","id",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","name","valueFieldName","code",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange","valueEmitter"],["class","col-lg-4",4,"ngIf"],["labelFieldName","cityName","valueFieldName","riosCode",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","description","valueFieldName","code",3,"ngModel","formItemDef","name","ngModelChange"],["labelFieldName","label","valueFieldName","id",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"h2",1),n.Gc(2),n.Rb(),n.Sb(3,"form",2,3),n.Sb(5,"p",4),n.Gc(6,"\u0422\u044a\u0440\u0441\u0435\u043d\u0435 \u0432 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f"),n.Rb(),n.Sb(7,"div",5),n.Sb(8,"div",6),n.Sb(9,"app-fi-select-dropdown-cascade",7),n.ec("ngModelChange",(function(e){return t.model.reCode=e})),n.Rb(),n.Rb(),n.Sb(10,"div",6),n.Sb(11,"app-fi-select-dropdown-cascade",8),n.ec("ngModelChange",(function(e){return t.model.distEknm=e})),n.Rb(),n.Rb(),n.Sb(12,"div",6),n.Sb(13,"app-fi-select-dropdown-cascade",9),n.ec("ngModelChange",(function(e){return t.model.popEknm=e})),n.Rb(),n.Rb(),n.Rb(),n.Sb(14,"div",5),n.Sb(15,"div",10),n.Sb(16,"app-fi-input-date-period",11),n.ec("ngModelChange",(function(e){return t.model.valDateRange=e})),n.Rb(),n.Rb(),n.Sb(17,"div",6),n.Sb(18,"app-fi-select-dropdown",12),n.ec("ngModelChange",(function(e){return t.model.state=e})),n.Rb(),n.Rb(),n.Rb(),n.Sb(19,"div",5),n.Sb(20,"div",6),n.Sb(21,"app-fi-select-dropdown",13),n.ec("ngModelChange",(function(e){return t.model.regType=e}))("valueEmitter",(function(){return t.onTypeChange()})),n.Rb(),n.Rb(),n.Ec(22,N,2,3,"div",14),n.Ec(23,A,2,3,"div",14),n.Ec(24,x,2,4,"div",14),n.Rb(),n.Sb(25,"div",5),n.Ec(26,k,2,3,"div",14),n.Ec(27,z,2,3,"div",14),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.zb(2),n.Hc(t.title),n.zb(7),n.mc("ngModel",t.model.reCode)("formItemDef",t.formDefinitions[0])("name",t.formDefinitions[0].domName),n.zb(2),n.mc("ngModel",t.model.distEknm)("formItemDef",t.formDefinitions[1])("name",t.formDefinitions[1].domName),n.zb(2),n.mc("ngModel",t.model.popEknm)("formItemDef",t.formDefinitions[2])("name",t.formDefinitions[2].domName),n.zb(3),n.mc("ngModel",t.model.valDateRange)("formItemDef",t.formDefinitions[3])("name",t.formDefinitions[3].domName),n.zb(2),n.mc("ngModel",t.model.state)("formItemDef",t.formDefinitions[4])("name",t.formDefinitions[4].domName),n.zb(3),n.mc("ngModel",t.model.regType)("formItemDef",t.formDefinitions[9])("name",t.formDefinitions[9].domName)("externalDataItems",t.authTypes),n.zb(1),n.mc("ngIf","m35"==t.type),n.zb(1),n.mc("ngIf","mro"==t.type&&t.model.regType),n.zb(1),n.mc("ngIf","2"===t.model.mroFulfillment),n.zb(2),n.mc("ngIf","MRO_EEO"===t.model.regType),n.zb(1),n.mc("ngIf","MRO_BA"===t.model.regType))},directives:[T.D,T.p,T.q,O.a,T.o,T.r,E.a,C.a,F.u],styles:[""]}),e})()},Dkvv:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var o=i("mrSG"),n=i("fXoL"),r=i("ROb3"),a=i("pVVs"),s=i("n2Fg"),l=i("4m0f"),c=i("t8UU"),d=i("tyNb"),m=i("6gjo"),u=i("ZRIf"),f=i("sGcX"),b=i("1kSV"),p=i("ofXK"),h=i("QJFE"),g=i("sYmb");const S=["successSwal"],v=["errorSwal"],D=["noFoundSwal"];function I(e,t){1&e&&(n.Sb(0,"h6"),n.Gc(1,"\u041d\u042f\u041c\u0410 \u041d\u0410\u041c\u0415\u0420\u0415\u041d\u0418 \u0414\u0410\u041d\u041d\u0418"),n.Rb())}function w(e,t){if(1&e&&(n.Sb(0,"h6"),n.Gc(1),n.hc(2,"uppercase"),n.Rb()),2&e){const e=n.gc();n.zb(1),n.Hc(n.ic(2,1,"\u041e\u0431\u0449\u0438\u044f\u0442 \u0431\u0440\u043e\u0439 \u043d\u0430 \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0435 \u0435 "+e.resultAuths.length))}}function R(e,t){1&e&&(n.Sb(0,"th",17),n.Gc(1,"\u0420\u0418\u041e\u0421\u0412"),n.Rb())}function y(e,t){if(1&e&&(n.Sb(0,"td"),n.Gc(1),n.Rb()),2&e){const e=n.gc().$implicit;n.zb(1),n.Hc(e.riosv)}}function T(e,t){if(1&e){const e=n.Tb();n.Sb(0,"tr"),n.Sb(1,"th",20),n.Gc(2),n.Rb(),n.Sb(3,"td"),n.Gc(4),n.Rb(),n.Sb(5,"td"),n.Gc(6),n.Rb(),n.Sb(7,"td"),n.Gc(8),n.Rb(),n.Ec(9,y,2,1,"td",5),n.Sb(10,"td"),n.Sb(11,"button",21),n.ec("click",(function(){n.wc(e);const i=t.$implicit;return n.gc(2).onViewAuth(i)})),n.Gc(12,"\u041f\u0420\u0415\u0413\u041b\u0415\u0414"),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=t.$implicit,i=t.index,o=n.gc(2);n.zb(2),n.Hc(i+1),n.zb(2),n.Hc(e.authNum),n.zb(2),n.Hc(e.type),n.zb(2),n.Hc(e.state),n.zb(1),n.mc("ngIf","m35"===o.type)}}function O(e,t){if(1&e&&(n.Sb(0,"table",15),n.Sb(1,"thead"),n.Sb(2,"tr",16),n.Sb(3,"th",17),n.Gc(4,"\u2116"),n.Rb(),n.Sb(5,"th",17),n.Gc(6,"\u0420-\u041d\u0418\u0415 \u2116"),n.Rb(),n.Sb(7,"th",17),n.Gc(8,"\u0422\u0418\u041f"),n.Rb(),n.Sb(9,"th",17),n.Gc(10,"\u0421\u042a\u0421\u0422\u041e\u042f\u041d\u0418\u0415"),n.Rb(),n.Ec(11,R,2,0,"th",18),n.Sb(12,"th",17),n.Gc(13,"\u0414\u0415\u0419\u0421\u0422\u0412\u0418\u042f"),n.Rb(),n.Rb(),n.Rb(),n.Sb(14,"tbody"),n.Ec(15,T,13,5,"tr",19),n.Rb(),n.Rb()),2&e){const e=n.gc();n.zb(11),n.mc("ngIf","m35"===e.type),n.zb(4),n.mc("ngForOf",e.resultAuths)}}let E=(()=>{class e{constructor(e,t,i,o,r){this.router=e,this.route=t,this.typesMapper=i,this.crudService=o,this.mmSpinnerService=r,this.RED="#b30000",this.WARNING="warning",this.SUCCESS="success",this.ERROR="error",this.resultAuths=[],this.isLoaded=!1,this.clearEvent=new n.n,this.searchEvent=new n.n}ngOnInit(){}onClickSearch(){this.resultAuths=[],this.isLoaded=!1,this.searchEvent.emit()}onClickClear(){this.isLoaded=!1,this.clearEvent.emit()}loadViewData(e){return Object(o.a)(this,void 0,void 0,(function*(){this.mmSpinnerService.showMainModalSpinner();try{const t=yield this.crudService.loadByParamsInArray(a.a,a.a.urlAuthForReview,e).toPromise();if(0===(null==t?void 0:t.length))return this.noFoundSwal.fire(),this.isLoaded=!0,void this.mmSpinnerService.hideMainModalSpinner();for(const e of t){let t,i;e.stateId&&(t=(yield this.crudService.loadById(s.a,s.a.publicUrl,e.stateId).toPromise()).name),e.regId&&(i=yield this.crudService.loadById(l.a,l.a.url,e.regId).toPromise());const o=i.name,n=e.id,r=e.regId;let a=null;e.riosvCodeN1&&(a=(yield this.crudService.loadById(c.a,c.a.url,e.riosvCodeN1).toPromise()).cityName),this.resultAuths.push(new C({state:t,type:o,riosv:a,authNum:e.authNum,id:n,regId:r}))}this.successSwal.fire(),this.isLoaded=!0}catch(t){console.error(t),this.errorSwal.fire()}this.mmSpinnerService.hideMainModalSpinner()}))}onViewAuth(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.typesMapper.getApplicationTypeByRegId(e.regId);"mro"===this.type?this.router.navigate([`${r.a.APPLICATIONS}/${r.a.AUTH_READ}`,t,e.id]):"m35"===this.type&&this.router.navigate([`${r.a.APPLICATIONS}/${r.a.M35_READ}`,t,e.id])}))}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(d.c),n.Mb(d.a),n.Mb(m.a),n.Mb(u.a),n.Mb(f.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-display-view-info"]],viewQuery:function(e,t){var i;1&e&&(n.Nc(S,!0),n.Nc(v,!0),n.Nc(D,!0)),2&e&&(n.uc(i=n.fc())&&(t.successSwal=i.first),n.uc(i=n.fc())&&(t.errorSwal=i.first),n.uc(i=n.fc())&&(t.noFoundSwal=i.first))},inputs:{isFormValid:"isFormValid",type:"type"},outputs:{clearEvent:"clearEvent",searchEvent:"searchEvent"},decls:22,vars:16,consts:[[1,"container-fluid","p-3"],[1,"nav","justify-content-between","border","border-primary","alert-primary","p-2"],[1,"nav-item"],["type","button","placement","bottom","ngbTooltip","\u0418\u0437\u0447\u0438\u0441\u0442\u0432\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0444\u0438\u043b\u0442\u0440\u0438","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-filter","mr-2","text-warning"],[4,"ngIf"],["type","button","placement","left","ngbTooltip","\u0422\u044a\u0440\u0441\u0438 \u043f\u043e \u0437\u0430\u0434\u0430\u0434\u0435\u043d\u0438 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438","container","body",1,"btn","btn-primary","mb-1",3,"disabled","click"],[1,"fas","fa-search","mr-1"],["class","mt-3 table table-sm table-hover border border-primary",4,"ngIf"],["title","\u0414\u0430\u043d\u043d\u0438\u0442\u0435 \u0441\u0430 \u0437\u0430\u0440\u0435\u0434\u0435\u043d\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e",3,"animation","icon"],["successSwal",""],["title","\u041d\u044f\u043c\u0430 \u043d\u0430\u043c\u0435\u0440\u0435\u043d\u0438 \u0434\u0430\u043d\u043d\u0438",3,"animation","icon"],["noFoundSwal",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0442\u044a\u0440\u0441\u0435\u043d\u0435 \u043d\u0430 \u0434\u0430\u043d\u043d\u043d\u0438",3,"animation","icon"],["errorSwal",""],[1,"mt-3","table","table-sm","table-hover","border","border-primary"],[1,"table-primary"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-sm","btn-link",3,"click"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"ul",1),n.Sb(2,"li",2),n.Sb(3,"button",3),n.ec("click",(function(){return t.onClickClear()})),n.Nb(4,"i",4),n.Gc(5),n.hc(6,"translate"),n.Rb(),n.Rb(),n.Sb(7,"li",2),n.Ec(8,I,2,0,"h6",5),n.Ec(9,w,3,3,"h6",5),n.Rb(),n.Sb(10,"li",2),n.Sb(11,"button",6),n.ec("click",(function(){return t.onClickSearch()})),n.Nb(12,"i",7),n.Gc(13),n.hc(14,"translate"),n.Rb(),n.Rb(),n.Rb(),n.Ec(15,O,16,2,"table",8),n.Rb(),n.Nb(16,"swal",9,10),n.Nb(18,"swal",11,12),n.Nb(20,"swal",13,14)),2&e&&(n.zb(5),n.Ic(" ",n.ic(6,12,"publicRegisters.clear-btn")," "),n.zb(3),n.mc("ngIf",t.isLoaded&&0===(null==t.resultAuths?null:t.resultAuths.length)),n.zb(1),n.mc("ngIf",t.isLoaded&&(null==t.resultAuths?null:t.resultAuths.length)>0),n.zb(2),n.mc("disabled",!t.isFormValid),n.zb(2),n.Ic(" ",n.ic(14,14,"publicRegisters.search-btn")," "),n.zb(2),n.mc("ngIf",t.isLoaded&&(null==t.resultAuths?null:t.resultAuths.length)>0),n.zb(1),n.mc("animation",!1)("icon",t.SUCCESS),n.zb(2),n.mc("animation",!1)("icon",t.WARNING),n.zb(2),n.mc("animation",!1)("icon",t.ERROR))},directives:[b.ab,p.u,h.a,p.t],pipes:[g.d,p.I],styles:[""]}),e})();class C{constructor(e){e&&(this.id=e.id,this.authNum=e.authNum,this.state=e.state,this.type=e.type,this.riosv=e.riosv,this.regId=e.regId)}}},KbO1:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var o=i("fXoL"),n=i("F7pt"),r=i("lB+K"),a=i("XDeO"),s=i("u1cU"),l=i("7n1m"),c=i("mXJ+"),d=i("1kSV"),m=i("ZRIf"),u=i("QJFE"),f=i("3Pt+"),b=i("ofXK"),p=i("Mtn9"),h=i("Pe2L");const g=["signModal"],S=["onSubmitSwal"];function v(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div"),o.Sb(1,"app-fi-input-long-text",23),o.ec("ngModelChange",(function(t){return o.wc(e),o.gc(2).writeOffReason=t})),o.Rb(),o.Nb(2,"hr"),o.Rb()}if(2&e){const e=o.gc(2);o.zb(1),o.mc("ngModel",e.writeOffReason)("name",e.writeOffDef.domId)("formItemDef",e.writeOffDef)}}function D(e,t){1&e&&o.Nb(0,"div",24)}function I(e,t){if(1&e){const e=o.Tb();o.Sb(0,"form",3,4),o.Sb(2,"div",5),o.Sb(3,"h4",6),o.Gc(4),o.Rb(),o.Sb(5,"button",7),o.ec("click",(function(){return o.wc(e),o.gc().close()})),o.Nb(6,"i",8),o.Rb(),o.Rb(),o.Sb(7,"div",9),o.Ec(8,v,3,3,"div",10),o.Sb(9,"h5",11),o.Gc(10,"1. \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0434\u0430\u043d\u043d\u0438 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441"),o.Rb(),o.Sb(11,"div",12),o.Sb(12,"div",13),o.Ec(13,D,1,0,"div",14),o.Sb(14,"button",15),o.ec("click",(function(){return o.wc(e),o.gc().downloadDocument()})),o.Nb(15,"i",16),o.Sb(16,"span",17),o.Gc(17,"\u0421\u0432\u0430\u043b\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Nb(18,"hr"),o.Sb(19,"h5",11),o.Gc(20,"2. \u041a\u0430\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0435\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u0435\u043d \u043f\u043e\u0434\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 (.p7s \u0444\u0430\u0439\u043b)"),o.Rb(),o.Sb(21,"div",18),o.Sb(22,"div",19),o.Sb(23,"app-fi-file-browse",20),o.ec("ngModelChange",(function(t){return o.wc(e),o.gc().signFile=t})),o.Rb(),o.Rb(),o.Sb(24,"button",21),o.ec("click",(function(){return o.wc(e),o.gc().onSign()})),o.Nb(25,"i",22),o.Gc(26," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e "),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=o.vc(1),t=o.gc();o.zb(4),o.Hc(t.title),o.zb(4),o.mc("ngIf",(null==t.state?null:t.state.code)===t.MRO_STATE.ENTERED),o.zb(5),o.mc("ngIf",t.isDownloading),o.zb(10),o.mc("ngModel",t.signFile)("name",t.fileDef.domId)("formItemDef",t.fileDef)("showClearBtn",!1),o.zb(1),o.mc("disabled",!e.valid)}}let w=(()=>{class e{constructor(e,t){this.modalService=e,this.crudService=t,this.MRO_STATE=c.a,this.TXT_MESSAGES=r.a,this.SYSTEM_CLOSE="system close",this.RED="#dc3545",this.WARNING="warning",this.BACK_MESSAGE="\u0412\u044a\u0440\u043d\u0435\u0442\u0435 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e \u0432 \u0441\u0442\u0430\u0442\u0443\u0441",this.modalDlg=null,this.title="\u041f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",this.isDownloading=!1,this.submitEvent=new o.n}ngOnInit(){this.loadDefs()}open(){this.modalDlg=this.modalService.open(this.signModal,{keyboard:!1,backdrop:"static",size:"lg"})}close(){null!=this.modalDlg&&(this.modalDlg.close(this.SYSTEM_CLOSE),this.modalDlg=null,this.signFile=null)}onSign(){this.onSubmitSwal.fire()}onSubmitConfirmed(){this.submitEvent.emit(this.signFile),this.close()}downloadDocument(){const e=`${l.a.DOC_TRANSITION_PRFIX_URL}${this.aunId}${l.a.DOC_TRANSITION_POSTFIX_URL}`;this.isDownloading=!0,this.crudService.loadFileForSign(e).subscribe(e=>{const t="doc_"+a.a.getDateTimeAsString()+".pdf";Object(s.a)(e,t),this.isDownloading=!1},()=>{this.isDownloading=!1})}getBrowseInputDef(){const e=new n.a;return e.domId="file",e.helpText=null,e.labelText=null,e.isRequired=!0,e}getWriteOffReasonInputDef(){const e=new n.a;return e.domId="writeOff",e.helpText=null,e.labelText="\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0437\u0430 \u043e\u0442\u043f\u0438\u0441\u0432\u0430\u043d\u0435",e.isRequired=!0,e}loadDefs(){this.fileDef=this.getBrowseInputDef(),this.writeOffDef=this.getWriteOffReasonInputDef()}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(d.t),o.Mb(m.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-sign-modal"]],viewQuery:function(e,t){var i;1&e&&(o.Nc(g,!0),o.Nc(S,!0)),2&e&&(o.uc(i=o.fc())&&(t.signModal=i.first),o.uc(i=o.fc())&&(t.onSubmitSwal=i.first))},inputs:{aunId:"aunId",state:"state"},outputs:{submitEvent:"submitEvent"},decls:4,vars:11,consts:[["signModal",""],[3,"showConfirmButton","title","text","icon","showCancelButton","allowOutsideClick","confirmButtonText","cancelButtonText","cancelButtonColor","confirm"],["onSubmitSwal",""],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],["type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[4,"ngIf"],[1,"mr-2","mb-3"],[1,"d-flex"],[1,"ml-auto"],["class","spinner-border","role","status",4,"ngIf"],["type","button",1,"btn","btn-primary","ml-2","mb-2",3,"click"],[1,"fas","fa-file-download","ml-2","mr-2"],[1,"mr-2"],[1,"d-flex","mb-3"],[1,"col-md-8"],[3,"ngModel","name","formItemDef","showClearBtn","ngModelChange"],["type","button",1,"btn","btn-primary","ml-auto",3,"disabled","click"],[1,"fas","fa-pen-fancy","mr-1"],[3,"ngModel","name","formItemDef","ngModelChange"],["role","status",1,"spinner-border"]],template:function(e,t){1&e&&(o.Ec(0,I,27,8,"ng-template",null,0,o.Fc),o.Sb(2,"swal",1,2),o.ec("confirm",(function(){return t.onSubmitConfirmed()})),o.Rb()),2&e&&(o.zb(2),o.mc("showConfirmButton",!0)("title",t.TXT_MESSAGES.TITLE_WRITE_SUBMIT_AUTH)("text",t.TXT_MESSAGES.TEXT_PROCCEED)("icon",t.WARNING)("showConfirmButton",!0)("showCancelButton",!0)("allowOutsideClick",!1)("confirmButtonText",t.TXT_MESSAGES.CONFIRM_BUTTON_TEXT)("cancelButtonText",t.TXT_MESSAGES.CANCEL_BUTTON_TEXT)("cancelButtonColor",t.RED)("icon",t.WARNING))},directives:[u.a,f.D,f.p,f.q,b.u,p.a,f.o,f.r,h.a],styles:[""]}),e})()},"M+Ib":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var o=i("fXoL"),n=i("Dcx/"),r=i("Dkvv");const a=["form"],s=["view"];let l=(()=>{class e{constructor(){this.VALID="VALID"}ngOnInit(){}onClear(){this.form.clearFilters()}onSearch(){this.form.getFormValue()}onSubmitForm(e){this.view.loadViewData(e)}setFormValidity(e){this.isFormValid=e===this.VALID}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["app-m35-view"]],viewQuery:function(e,t){var i;1&e&&(o.Nc(a,!0),o.Nc(s,!0)),2&e&&(o.uc(i=o.fc())&&(t.form=i.first),o.uc(i=o.fc())&&(t.view=i.first))},decls:6,vars:1,consts:[[1,"mt-3"],["title","\u0422\u044a\u0440\u0441\u0435\u043d\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438 \u043f\u043e \u0447\u043b. 35","type","m35",3,"formEmitter","formStatusValidChanged"],["form",""],[1,"mt-2"],["type","m35",3,"isFormValid","clearEvent","searchEvent"],["view",""]],template:function(e,t){1&e&&(o.Nb(0,"div",0),o.Sb(1,"app-view-form",1,2),o.ec("formEmitter",(function(e){return t.onSubmitForm(e)}))("formStatusValidChanged",(function(e){return t.setFormValidity(e)})),o.Rb(),o.Nb(3,"div",3),o.Sb(4,"app-display-view-info",4,5),o.ec("clearEvent",(function(){return t.onClear()}))("searchEvent",(function(){return t.onSearch()})),o.Rb()),2&e&&(o.zb(4),o.mc("isFormValid",t.isFormValid))},directives:[n.a,r.a],styles:[""]}),e})()},uAs8:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var o=i("fXoL"),n=i("Dcx/"),r=i("Dkvv");const a=["form"],s=["view"];let l=(()=>{class e{constructor(){this.VALID="VALID"}ngOnInit(){}onClear(){this.form.clearFilters()}onSearch(){this.form.getFormValue()}onSubmitForm(e){this.view.loadViewData(e)}setFormValidity(e){this.isFormValid=e===this.VALID}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["app-mro-view"]],viewQuery:function(e,t){var i;1&e&&(o.Nc(a,!0),o.Nc(s,!0)),2&e&&(o.uc(i=o.fc())&&(t.form=i.first),o.uc(i=o.fc())&&(t.view=i.first))},decls:6,vars:1,consts:[[1,"mt-3"],["title","\u0422\u044a\u0440\u0441\u0435\u043d\u0435 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438 \u0437\u0430 \u041c\u0420\u041e","type","mro",3,"formEmitter","formStatusValidChanged"],["form",""],[1,"mt-2"],["type","mro",3,"isFormValid","clearEvent","searchEvent"],["view",""]],template:function(e,t){1&e&&(o.Nb(0,"div",0),o.Sb(1,"app-view-form",1,2),o.ec("formEmitter",(function(e){return t.onSubmitForm(e)}))("formStatusValidChanged",(function(e){return t.setFormValidity(e)})),o.Rb(),o.Nb(3,"div",3),o.Sb(4,"app-display-view-info",4,5),o.ec("clearEvent",(function(){return t.onClear()}))("searchEvent",(function(){return t.onSearch()})),o.Rb()),2&e&&(o.zb(4),o.mc("isFormValid",t.isFormValid))},directives:[n.a,r.a],styles:[""]}),e})()}}]);