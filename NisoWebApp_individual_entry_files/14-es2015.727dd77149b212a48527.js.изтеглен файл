(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/iu+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("XDeO");let n=(()=>{class e{constructor(e){e&&(this.id=e.id,this.dateCreated=s.a.getAnyAsTimestampModel(e.dateCreated),this.email=e.email,this.firstName=e.firstName,this.midName=e.midName,this.lastName=e.lastName,this.roleDescription=e.roleDescription,this.statusDescription=e.statusDescription,this.roleId=e.roleId,this.statusCode=e.statusCode,this.userId=e.userId,this.isSigned=e.isSigned,this.pIsSignedLabel="Y"===e.isSigned?"\u0414\u0430":"\u041d\u0435"),this.isSelected=!1}get id(){return this.pId}set id(e){this.pId=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get email(){return this.pEmail}set email(e){this.pEmail=e}get firstName(){return this.pFirstName}set firstName(e){this.pFirstName=e}get midName(){return this.pMidName}set midName(e){this.pMidName=e}get lastName(){return this.pLastName}set lastName(e){this.pLastName=e}get roleDescription(){return this.pRoleDescription}set roleDescription(e){this.pRoleDescription=e}get statusDescription(){return this.pStatusDescription}set statusDescription(e){this.pStatusDescription=e}get roleId(){return this.pRoleId}set roleId(e){this.pRoleId=e}get statusCode(){return this.pStatusCode}set statusCode(e){this.pStatusCode=e}get userId(){return this.pUserId}set userId(e){this.pUserId=e}get isSigned(){return this.pIsSigned}set isSigned(e){this.pIsSigned=e}get isSignedLabel(){return this.pIsSignedLabel}set isSignedLabel(e){this.pIsSignedLabel=e}get isSelected(){return this.pIsSelected}set isSelected(e){this.pIsSelected=e}}return e.url="TrnUserOrganization/getFilteredUserOrganizationInfo",e.stageUrl="TrnUserOrganization/getUserOrganizationInfoByOrgId",e})()},"122/":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("F7pt"),n=i("0Uwp"),o=i("fXoL");let a=(()=>{class e{constructor(){}getUserRegFormModel(e){const t=[];return this.userRegForm(e,t),t}getOrgRegFormModel(e){const t=[],i=s.a.createDefaultTextFormItemDef();i.domId="organizationName_"+e,i.labelText="fi.organization.label",i.helpText="fi.organization.help",i.pattern="[\u0410-\u042f\u0430-\u044f\\d\\s-]{1,250}",i.isRequired=!0,t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="organizationNameEn_"+e,n.labelText="fi.organizationEn.label",n.helpText="fi.organizationEn.help",n.pattern="[A-Za-z\\d\\s-]{1,250}",n.isRequired=!1,t.push(n);const o=s.a.createDefaultEIKFormItemDef();return o.domId="eik_"+e,o.labelText="fi.eik.label",o.helpText="fi.eik.help",o.isRequired=!0,t.push(o),t}getContactsRegFormModel(e){const t=[],i=s.a.createDefaultTextFormItemDef();i.domId="fName_"+e,i.labelText="fi.person.fName.label",i.helpText="fi.person.fName.help",i.isRequired=!0,t.push(i);const o=s.a.createDefaultTextFormItemDef();o.domId="sName_"+e,o.labelText="fi.person.sName.label",o.helpText="fi.person.sName.help",o.isRequired=!1,t.push(o);const a=s.a.createDefaultTextFormItemDef();a.domId="lName_"+e,a.labelText="fi.person.lName.label",a.helpText="fi.person.lName.help",a.isRequired=!0,t.push(a);const r=n.a.createDefaultDropDownFormItemDef();r.domId="eknm_"+e,r.labelText="fi.eknm.label",r.helpText="fi.eknm.help",r.isRequired=!0,t.push(r);const c=s.a.createDefaultTextFormItemDef();c.domId="address_"+e,c.labelText="fi.address.label",c.helpText="fi.address.help",c.isRequired=!0,t.push(c);const d=s.a.createDefaultTextFormItemDef();d.domId="phone_"+e,d.labelText="fi.phone.label",d.helpText="fi.phone.help",d.pattern="[\\d.,+-]{1,100}",d.isRequired=!1,t.push(d);const l=s.a.createDefaultTextFormItemDef();l.domId="fax_"+e,l.labelText="fi.fax.label",l.helpText="fi.fax.help",l.pattern="[\\d.,+-]{1,100}",l.isRequired=!1,t.push(l);const m=s.a.createDefaultEmailFormItemDef();return m.domId="email_"+e,m.labelText="fi.email.label",m.helpText="fi.email.help",m.isRequired=!0,t.push(m),t}getChangePassFormModel(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="old_password",t.labelText="fi.oldPassword.label",t.helpText="fi.oldPassword.help",t.isRequired=!0,e.push(t);const i=s.a.createDefaultPasswordFormItemDef();i.domId="new_password",i.labelText="fi.newPassword.label",i.helpText="fi.newPassword.help",i.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>/?])\\S{8,35}$",i.isRequired=!0,e.push(i);const n=s.a.createDefaultPasswordFormItemDef();return n.domId="confirm_pwd",n.labelText="fi.confirmNewPass.label",n.helpText="fi.confirmNewPass.help",n.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>\\/?])\\S{8,35}$",n.isRequired=!0,e.push(n),e}getResetPassFormModel(){const e=[],t=s.a.createDefaultEmailFormItemDef();return t.domId="email",t.labelText="fi.email.label",t.helpText="fi.email.help",t.isRequired=!0,e.push(t),e}getResetPassPageModel(){const e=[],t=s.a.createDefaultPasswordFormItemDef();t.domId="new_password",t.labelText="fi.newPassword.label",t.helpText="fi.newPassword.help",t.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>/?])\\S{8,35}$",t.isRequired=!0,e.push(t);const i=s.a.createDefaultPasswordFormItemDef();return i.domId="confirm_pwd",i.labelText="fi.confirmNewPass.label",i.helpText="fi.confirmNewPass.help",i.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>\\/?])\\S{8,35}$",i.isRequired=!0,e.push(i),e}userRegForm(e,t){const i=s.a.createDefaultTextFormItemDef();i.domId="fName_"+e,i.labelText="fi.person.fName.label",i.helpText="fi.person.fName.help",i.isRequired=!0,t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="sName_"+e,n.labelText="fi.person.sName.label",n.helpText="fi.person.sName.help",n.isRequired=!1,t.push(n);const o=s.a.createDefaultTextFormItemDef();o.domId="lName_"+e,o.labelText="fi.person.lName.label",o.helpText="fi.person.lName.help",o.isRequired=!0,t.push(o);const a=s.a.createDefaultEmailFormItemDef();a.domId="email_"+e,a.labelText="fi.email.labelSysNotif",a.helpText="fi.email.help",a.isRequired=!0,t.push(a);const r=s.a.createDefaultTextFormItemDef();r.domId="egn_"+e,r.labelText="fi.egn.label",r.helpText="fi.egn.help",r.isRequired=!0,t.push(r);const c=new s.a;c.domId="loginUserPass_"+e,c.labelText="fi.loginType.userPass",c.isRequired=!1,t.push(c);const d=s.a.createDefaultTextFormItemDef();d.domId="username_"+e,d.labelText="fi.username.label",d.helpText="fi.username.help",d.pattern="[a-z\\d-]{8,25}",d.isRequired=!0,t.push(d);const l=s.a.createDefaultPasswordFormItemDef();l.domId="password_"+e,l.labelText="fi.password.label",l.helpText="fi.password.help",l.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>/?])\\S{8,35}$",l.isRequired=!0,t.push(l);const m=s.a.createDefaultPasswordFormItemDef();m.domId="confirm_pwd_"+e,m.labelText="fi.confirmPass.label",m.helpText="fi.confirmPass.help",m.pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_\\+\\-=\\[\\]{};':\"\\|,.<>\\/?])\\S{8,35}$",m.isRequired=!0,t.push(m);const u=new s.a;u.domId="loginSign_"+e,u.labelText="fi.loginType.sign",u.isRequired=!1,t.push(u);const b=s.a.createDefaultTextFormItemDef();b.domId="lnch_"+e,b.labelText="fi.lnch.label",b.helpText="fi.lnch.help",b.isRequired=!0,t.push(b)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"34DR":function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var s=i("mrSG"),n=i("mdCJ"),o=i("KQ7d"),a=i("lJxs"),r=i("JIr8"),c=i("lB+K"),d=i("cp0P"),l=i("LRne"),m=i("ozDz"),u=i("Xh5w"),b=i("wIr5"),f=i("WCP0"),h=i("4WaZ"),p=i("hnrn");let g=(()=>{class e{constructor(e){e&&(this.email=e.email,this.notes=e.notes,this.orgId=e.orgId,this.roleId=e.roleId,this.status=e.status,this.trnUsrOrgId=e.trnUsrOrgId)}get email(){return this.pEmail}set email(e){this.pEmail=e}get notes(){return this.pNotes}set notes(e){this.pNotes=e}get orgId(){return this.pOrgId}set orgId(e){this.pOrgId=e}get roleId(){return this.pRoleId}set roleId(e){this.pRoleId=e}get status(){return this.pStatus}set status(e){this.pStatus=e}get trnUsrOrgId(){return this.pTrnUsrOrgId}set trnUsrOrgId(e){this.pTrnUsrOrgId=e}}return e.url="TrnUserOrganization/updateFromOutsideUser",Object(s.b)([Object(p.b)({alias:"email"})],e.prototype,"pEmail",void 0),Object(s.b)([Object(p.b)({alias:"notes"})],e.prototype,"pNotes",void 0),Object(s.b)([Object(p.b)({alias:"orgId"})],e.prototype,"pOrgId",void 0),Object(s.b)([Object(p.b)({alias:"roleId"})],e.prototype,"pRoleId",void 0),Object(s.b)([Object(p.b)({alias:"status"})],e.prototype,"pStatus",void 0),Object(s.b)([Object(p.b)({alias:"trnUsrOrgId"})],e.prototype,"pTrnUsrOrgId",void 0),e})();class D{constructor(e){this.crudService=e,this.isFileOperationsSuccess=!0,this.isContactsOpSuccess=!0,this.isAddressOpSuccess=!0,this.isHeadquartersOpSuccess=!0}insertData(e,t,i,o){return Object(s.a)(this,void 0,void 0,(function*(){const s=new n.a(e.org),a=e.contacts,r=this.getAddresModel(e.address),l=this.getAddresModel(e.headquarters),m=e.docs;if(s)try{"I"===i&&(s.name=s.fullName),e.org.id=(yield this.saveTrnOrganization(s))[0].id,t[0].succeed()}catch(f){t[0].fail(f.error.message);for(let e=1;e<t.length;e++)t[e].reject();return!1}const u=[];if(a&&a.length>0&&e.org.id){a.forEach(t=>{t.ornId=e.org.id});const i=this.saveContacts(a,t);u.push(i)}if(r&&e.org.id){r.ornId=e.org.id,l.type=h.a.MAILING_ADDRESS;const i=this.saveAddress(r,h.a.MAILING_ADDRESS,t);u.push(i)}if(l&&e.org.id){l.type=h.a.ORG_ADDRESS,l.ornId=e.org.id;const i=this.saveAddress(l,h.a.ORG_ADDRESS,t);u.push(i)}return m&&m.length>0&&e.org.id&&!o&&m.forEach(t=>{const i=Object(b.b)(t.file,t.signedDoc,t.descr,void 0,void 0,e.org.id),s=this.saveDoc(i);u.push(s)}),0===u.length?(t[1].fail(c.a.CONTACTS_OPERATION_ERROR),t[2].fail(c.a.TrnOrnAddresses_SAVE_ERROR),t[3].fail(c.a.TrnOrnAddresses_SAVE_ERROR),t[4].fail(c.a.FILES_OPERATION_ERROR),this.isProccessSuccess(t)):(yield Object(d.a)(u).toPromise(),this.isContactsOpSuccess?t[1].succeed():(t[1].fail(c.a.CONTACTS_OPERATION_ERROR),this.isContactsOpSuccess=!0),this.isAddressOpSuccess?t[2].succeed():(t[2].fail(c.a.TrnOrnAddresses_SAVE_ERROR),this.isAddressOpSuccess=!0),this.isHeadquartersOpSuccess?t[3].succeed():(t[3].fail(c.a.TrnOrnAddresses_SAVE_ERROR),this.isHeadquartersOpSuccess=!0),o||(this.isFileOperationsSuccess?t[4].succeed():(t[4].fail(this.fileErrorMsg?this.fileErrorMsg:c.a.FILES_OPERATION_ERROR),this.fileErrorMsg=null,this.isFileOperationsSuccess=!0)),this.isProccessSuccess(t))}))}updateAllData(e,t,i,n){return Object(s.a)(this,void 0,void 0,(function*(){const s=this.getOrganizationForPatch(e.org),o=e.contacts,a=this.getAddresModel(e.address),r=this.getAddresModel(e.headquarters),l=e.docs,m=e.docsForDelete,u=e.contactsForDelete;if(null==s||null==s.id){t[0].fail(c.a.TrnOrganizations_UPDATE_ERROR);for(let e=1;e<t.length;e++)t[e].reject();return!1}const f=[];if(s&&s.id){"I"===i&&(s.name=s.fullName);const e=this.patchTrnOrganization(s,t);f.push(e)}if(o&&o.length>0&&e.org.id){const i=[],s=[];if(o.forEach(t=>{t.ornId=e.org.id,null==t.id?i.push(t):s.push(t)}),s.length>0){const e=this.updateContacts(s,t);f.push(e)}if(i.length>0){const e=this.saveContacts(i,t);f.push(e)}}if(u&&u.length>0){const e=this.deleteContacts(u,t);f.push(e)}if(a&&e.org.id){let i;a.ornId=e.org.id,a.type=h.a.MAILING_ADDRESS,i=null!=a.id?this.patchAddress(a,h.a.MAILING_ADDRESS,t):this.saveAddress(a,h.a.MAILING_ADDRESS,t),f.push(i)}if(r&&e.org.id){let i;r.type=h.a.ORG_ADDRESS,r.ornId=e.org.id,i=null!=r.id?this.patchAddress(r,h.a.ORG_ADDRESS,t):this.saveAddress(r,h.a.ORG_ADDRESS,t),f.push(i)}return l&&l.length>0&&e.org.id&&!n&&l.forEach(t=>{const i=Object(b.b)(t.file,t.signedDoc,t.descr,void 0,void 0,e.org.id),s=this.saveDoc(i);f.push(s)}),m&&m.length>0&&!n&&m.forEach(e=>{const t=this.deleteDoc(e);f.push(t)}),yield Object(d.a)(f).toPromise(),this.isContactsOpSuccess?t[1].succeed():(t[1].fail(c.a.CONTACTS_OPERATION_ERROR),this.isContactsOpSuccess=!0),this.isAddressOpSuccess?t[2].succeed():(t[2].fail(c.a.TrnOrnAddresses_UPDATE_ERROR),this.isAddressOpSuccess=!0),this.isHeadquartersOpSuccess?t[3].succeed():(t[3].fail(c.a.TrnOrnAddresses_UPDATE_ERROR),this.isHeadquartersOpSuccess=!0),n||(this.isFileOperationsSuccess?t[4].succeed():(t[4].fail(this.fileErrorMsg?this.fileErrorMsg:c.a.FILES_OPERATION_ERROR),this.fileErrorMsg=null,this.isFileOperationsSuccess=!0)),this.isProccessSuccess(t)}))}updateData(e,t,i,n){return Object(s.a)(this,void 0,void 0,(function*(){const i=this.getOrganizationForPatch(e.org),s=e.contacts,o=this.getAddresModel(e.address),a=this.getAddresModel(e.headquarters),r=e.docs,l=e.docsForDelete,m=e.contactsForDelete;if(null==i||null==i.id){t[0].fail(c.a.TrnOrganizations_UPDATE_ERROR);for(let e=1;e<t.length;e++)t[e].reject();return!1}const u=[];if(s&&s.length>0&&e.org.id){const i=[],n=[];if(s.forEach(t=>{t.ornId=e.org.id,null==t.id?i.push(t):n.push(t)}),n.length>0){const e=this.updateContacts(n,t);u.push(e)}if(i.length>0){const e=this.saveContacts(i,t);u.push(e)}}if(m&&m.length>0){const e=this.deleteContacts(m,t);u.push(e)}if(o&&e.org.id){let i;o.ornId=e.org.id,o.type=h.a.MAILING_ADDRESS,i=null!=o.id?this.patchAddress(o,h.a.MAILING_ADDRESS,t):this.saveAddress(o,h.a.MAILING_ADDRESS,t),u.push(i)}if(a&&e.org.id){let i;a.type=h.a.ORG_ADDRESS,a.ornId=e.org.id,i=null!=a.id?this.patchAddress(a,h.a.ORG_ADDRESS,t):this.saveAddress(a,h.a.ORG_ADDRESS,t),u.push(i)}return r&&r.length>0&&e.org.id&&!n&&r.forEach(t=>{const i=Object(b.b)(t.file,t.signedDoc,t.descr,void 0,void 0,e.org.id),s=this.saveDoc(i);u.push(s)}),l&&l.length>0&&!n&&l.forEach(e=>{const t=this.deleteDoc(e);u.push(t)}),yield Object(d.a)(u).toPromise(),this.isContactsOpSuccess?t[0].succeed():(t[0].fail(c.a.CONTACTS_OPERATION_ERROR),this.isContactsOpSuccess=!0),this.isAddressOpSuccess?t[1].succeed():(t[1].fail(c.a.TrnOrnAddresses_UPDATE_ERROR),this.isAddressOpSuccess=!0),this.isHeadquartersOpSuccess?t[2].succeed():(t[2].fail(c.a.TrnOrnAddresses_UPDATE_ERROR),this.isHeadquartersOpSuccess=!0),n||(this.isFileOperationsSuccess?t[3].succeed():(t[3].fail(this.fileErrorMsg?this.fileErrorMsg:c.a.FILES_OPERATION_ERROR),this.fileErrorMsg=null,this.isFileOperationsSuccess=!0)),this.isProccessSuccess(t)}))}updateUserOrgRel(e,t,i){return Object(s.a)(this,void 0,void 0,(function*(){const s=new g(e),n=e.file,o=e.signedFile;if(null==s||null==s.trnUsrOrgId){t[0].fail(c.a.TrnUserOrganization_UPDATE_ERROR);for(let e=1;e<t.length;e++)t[e].reject();return!1}const a=(yield this.updateRelation(s,t))[0].id,r=[];if(a&&i){const e=Object(b.b)(n,o,void 0,void 0,void 0,void 0,void 0,a),t=this.saveDoc(e);r.push(t)}return yield Object(d.a)(r).toPromise(),i&&(this.isFileOperationsSuccess?t[1].succeed():(t[1].fail(this.fileErrorMsg?this.fileErrorMsg:c.a.TrnAttachedDocuments_SAVE_ERROR),this.fileErrorMsg=null,this.isFileOperationsSuccess=!0)),this.isProccessSuccess(t)}))}deleteDocument(e){return this.crudService.deleteById(u.a.url,e)}saveTrnOrganization(e){return this.crudService.create(n.a.url,e).toPromise()}patchTrnOrganization(e,t){return this.crudService.patchById(f.a.url,e.id,e).pipe(Object(a.a)(e=>(t[0].succeed(),e)),Object(r.a)(e=>(t[0].fail(c.a.TrnOrganizations_UPDATE_ERROR),Object(l.a)(e))))}saveContacts(e,t){return this.crudService.createMany(o.a.url,e).pipe(Object(r.a)(e=>(this.isContactsOpSuccess=!1,Object(l.a)(e))))}updateContacts(e,t){return this.crudService.updateMany(o.a.url,e).pipe(Object(r.a)(e=>(this.isContactsOpSuccess=!1,Object(l.a)(e))))}deleteContacts(e,t){return this.crudService.deleteMany(o.a.url,e).pipe(Object(r.a)(e=>(this.isContactsOpSuccess=!1,Object(l.a)(e))))}saveAddress(e,t,i){return this.crudService.create(m.a.url,e).pipe(Object(r.a)(e=>(t===h.a.MAILING_ADDRESS?this.isAddressOpSuccess=!1:this.isHeadquartersOpSuccess=!1,Object(l.a)(e))))}updateAddress(e,t,i){return this.crudService.updateById(m.a.url,e.id,e).pipe(Object(a.a)(e=>(t===h.a.MAILING_ADDRESS?i[2].succeed():i[3].succeed(),e)),Object(r.a)(e=>(t===h.a.MAILING_ADDRESS?i[2].fail(c.a.TrnOrnAddresses_UPDATE_ERROR):i[3].fail(c.a.TrnOrnAddresses_UPDATE_ERROR),Object(l.a)(e))))}patchAddress(e,t,i){const s=e.id;return e.id=void 0,this.crudService.patchById(m.a.url,s,e).pipe(Object(r.a)(e=>(t===h.a.MAILING_ADDRESS?this.isAddressOpSuccess=!1:this.isHeadquartersOpSuccess=!1,Object(l.a)(e))))}saveDoc(e){return this.crudService.create(u.a.url,e).pipe(Object(r.a)(t=>{var i;this.isFileOperationsSuccess=!1;const s=e.get("document").name,n=null===(i=null==t?void 0:t.error)||void 0===i?void 0:i.systemMessage,o=s&&n?`${s} - ${n}`:null;return o&&(this.fileErrorMsg?this.fileErrorMsg+=`. ${o}`:this.fileErrorMsg=o),Object(l.a)(t)}))}deleteDoc(e){return this.crudService.deleteById(u.a.url,e).pipe(Object(r.a)(e=>{var t;this.isFileOperationsSuccess=!1;const i=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.systemMessage;return this.fileErrorMsg?this.fileErrorMsg+=i?`. ${i}`:`. ${c.a.TrnAttachedDocuments_DELETE_ERROR}`:this.fileErrorMsg=c.a.TrnAttachedDocuments_DELETE_ERROR,Object(l.a)(e)}))}isProccessSuccess(e){for(const t of e)if(t.isError)return!1;return!0}getAddresModel(e){const t=new m.a;return t.id=e.trnOrnAddrId,t.type=e.type,t.eknm=e.popEknm,t.address=e.address,t.webpage=e.webpage,t}getOrganizationForPatch(e){const t=new f.a;return t.id=e.id,t.name=e.name,t.firstName=e.firstName,t.midName=e.midName,t.lastName=e.lastName,t}updateRelation(e,t){return this.crudService.updateCurrentData(g.url,e).pipe(Object(a.a)(e=>(t[0].succeed(),e)),Object(r.a)(e=>{var i;const s=null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message;return t[0].fail(s||c.a.TrnUserOrganization_UPDATE_ERROR),Object(l.a)(e)})).toPromise()}}},"8rWM":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("MCtz");function n(e,t,i,n){if(e.length){t=[];let a=Object.keys(e[0]||{});return a=n?a.filter(e=>o(e,n)).sort((e,t)=>n.indexOf(e)-n.indexOf(t)):a.filter(e=>!o(e,i)),a.forEach(e=>{const i=new s.a;i.dataSourceFieldName=e,i.columnLabel=e,t.push(i)}),t}}function o(e,t){return t.some(t=>t===e)}},A3dt:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("fXoL"),n=i("3Pt+"),o=i("F7pt"),a=i("c1/s"),r=i("sYmb");const c=["inputComponent"];let d=(()=>{class e{constructor(){this.errorMessage="",this.valueEmitter=new s.n,this.formItemDef=null,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new o.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){const t=e.value;if(this.formItemDef.isRequired&&(null==t||0===t.length))return this.inputComponent.nativeElement.setCustomValidity("error"),this.errorMessage="fi.lnch.error.required",{required:!0};const i=a.a.validate(t,this.formItemDef.isRequired);return i.status?(this.inputComponent.nativeElement.setCustomValidity(""),this.errorMessage="",this.valueEmitter.emit(t),null):(this.inputComponent.nativeElement.setCustomValidity("error"),this.errorMessage=i.message,{lnch:!0})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-lnch"]],viewQuery:function(e,t){var i;1&e&&s.Nc(c,!0),2&e&&s.uc(i=s.fc())&&(t.inputComponent=i.first)},inputs:{formItemDef:"formItemDef",value:"value"},outputs:{valueEmitter:"valueEmitter"},features:[s.yb([{provide:n.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:n.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:17,vars:18,consts:[[1,"form-group"],[3,"for"],[1,"input-group","mb-1"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-circle","text-dark","fi-bullet"],["type","text","aria-label","label","autocomplete","off",1,"form-control",3,"id","name","placeholder","required","ngModel","readOnly","ngModelChange"],["inputComponent",""],["id","inv",1,"invalid-feedback"],["id","input-text-1-Help",1,"form-text","text-muted"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"label",1),s.Gc(2),s.hc(3,"translate"),s.Rb(),s.Sb(4,"div",2),s.Sb(5,"div",3),s.Sb(6,"span",4),s.Nb(7,"i",5),s.Rb(),s.Rb(),s.Sb(8,"input",6,7),s.ec("ngModelChange",(function(e){return t.value=e})),s.hc(10,"translate"),s.Rb(),s.Sb(11,"div",8),s.Gc(12),s.hc(13,"translate"),s.Rb(),s.Rb(),s.Sb(14,"small",9),s.Gc(15),s.hc(16,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("for",t.formItemDef.domId),s.zb(1),s.Hc(s.ic(3,10,t.formItemDef.labelText)),s.zb(6),s.nc("placeholder",s.ic(10,12,t.formItemDef.placeHolderText)),s.mc("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("ngModel",t.value)("readOnly",t.formItemDef.readonly),s.zb(4),s.Ic(" ",s.ic(13,14,t.errorMessage)," "),s.zb(3),s.Hc(s.ic(16,16,t.formItemDef.helpText)))},directives:[n.c,n.z,n.o,n.r],pipes:[r.d],styles:[""]}),e})()},BYCZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("F7pt"),n=i("noCF"),o=i("ey6I"),a=i("9zSO"),r=i("mwl0"),c=i("jRw1"),d=i("0Uwp"),l=i("ra4D"),m=i("+QWa"),u=i("YQDf"),b=i("SkKo"),f=i("fXoL");let h=(()=>{class e{constructor(){}getIndividualDefsModel(e){const t=[],i=s.a.createDefaultTextFormItemDef();i.domId="ind_fName",i.labelText="fi.person.fName.label",i.placeHolderText="fi.person.fName.placeholder",i.helpText="fi.person.fName.help",i.isRequired=!0,e&&"Y"===e&&(i.isDisabled=!0),t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="ind_sName",n.labelText="fi.person.sName.label",n.placeHolderText="fi.person.sName.placeholder",n.helpText="fi.person.sName.help",n.isRequired=!1,e&&"Y"===e&&(n.isDisabled=!0),t.push(n);const o=s.a.createDefaultTextFormItemDef();o.domId="ind_lName",o.labelText="fi.person.lName.label",o.placeHolderText="fi.person.lName.placeholder",o.helpText="fi.person.lName.help",o.isRequired=!0,e&&"Y"===e&&(o.isDisabled=!0),t.push(o);const a=s.a.createDefaultTextFormItemDef();a.domId="ind_uin",a.labelText="fi.uin.labelFull",a.helpText="",a.isRequired=!0,a.isDisabled=!0,t.push(a);const r=s.a.createDefaultEmailFormItemDef();return r.domId="ind_email",r.labelText="\u0418\u043c\u0435\u0439\u043b \u043d\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0449 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e\u0442\u043e \u043b\u0438\u0446\u0435",r.placeHolderText="fi.email.placeholder",r.helpText="fi.email.help",r.isRequired=!0,t.push(r),t}getLegalEntityDefsModel(e){const t=[],i=s.a.createDefaultTextFormItemDef();i.domId="le_name",i.labelText="applications.debtors.legalEntity.shortName",i.placeHolderText="applications.debtors.legalEntity.shortName",i.isRequired=!0,e&&"Y"===e&&(i.isDisabled=!0),t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="le_eik",n.labelText="applications.debtors.legalEntity.shortEik",n.helpText="",n.isRequired=!0,n.isDisabled=!0,t.push(n);const o=s.a.createDefaultTextFormItemDef();o.domId="doc_decr",o.labelText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",o.placeHolderText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",o.isRequired=!0,t.push(o);const a=new s.a;a.domId="doc",a.placeHolderText="\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",a.labelText="",a.isRequired=!0,t.push(a);const r=s.a.createDefaultEmailFormItemDef();return r.domId="le_email",r.labelText="\u0418\u043c\u0435\u0439\u043b \u043d\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0449 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e\u0442\u043e \u043b\u0438\u0446\u0435",r.placeHolderText="fi.email.placeholder",r.helpText="fi.email.help",r.isRequired=!0,t.push(r),t}getDocumentDef(e,t){const i=s.a.createDefaultFileBrowseDef();return i.domId="D"===t?"doc_"+e:"signed_doc"+e,i.labelText="D"===t?"\u0424\u0430\u0439\u043b":"\u0424\u0430\u0439\u043b, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u0438\u044f\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",i.isRequired=!0,i}getDocDescrDef(e){const t=s.a.createDefaultTextFormItemDef();return t.domId="doc_decr_"+e,t.labelText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",t.placeHolderText="\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",t.isRequired=!0,t}getInvitationDefModel(){const e=[],t=s.a.createDefaultEmailFormItemDef();t.domId="send_email",t.labelText="profile.invitation.email",t.placeHolderText="fi.email.placeholder",t.helpText="fi.email.help",t.isRequired=!0,e.push(t);const i=s.a.createDefaultEmailFormItemDef();i.domId="search_email",i.labelText="profile.invitation.email",i.helpText="fi.email.help",e.push(i);const n=s.a.createDefaultDatePeriodFormItemDef();return n.domId="period",n.labelText="profile.invitation.searchPeriod",e.push(n),e}getReSendBtnDef(){const e=new c.a;return e.colHeader="\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",e.showIcon=!1,e.labelText="\u0418\u0437\u043f\u0440\u0430\u0442\u0438 \u043e\u0442\u043d\u043e\u0432\u043e",e.tooltipText="\u0418\u0437\u043f\u0440\u0430\u0442\u0438",e}getUserOrgAccessDefModel(e){const t=[],i=s.a.createDefaultRadioGroupDef();i.domId="type_radio",i.labelText="",i.helpText="",i.isRequired=!0,t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="egn",n.labelText="\u0415\u0413\u041d/\u041b\u041d\u0427 \u041d\u0410 \u0417\u0410\u0414\u042a\u041b\u0416\u0415\u041d\u041e \u041b\u0418\u0426\u0415",n.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0436\u0435\u043b\u0430\u043d\u043e\u0442\u043e \u043e\u0442 \u0412\u0430\u0441 \u043b\u0438\u0446\u0435 \u0438 \u043d\u0430\u0442\u0438\u0441\u043d\u0435\u0442\u0435 \u0431\u0443\u0442\u043e\u043d\u0430 \u0437\u0430 \u0442\u044a\u0440\u0441\u0435\u043d\u0435, \u0437\u0430 \u0434\u0430 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0438\u0442\u0435",n.isRequired=!0,t.push(n);const o=s.a.createDefaultTextFormItemDef();o.domId="eik",o.labelText="applications.debtors.legalEntity.eik",o.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0436\u0435\u043b\u0430\u043d\u0430\u0442\u0430 \u043e\u0442 \u0412\u0430\u0441 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0438 \u043d\u0430\u0442\u0438\u0441\u043d\u0435\u0442\u0435 \u0431\u0443\u0442\u043e\u043d\u0430 \u0437\u0430 \u0442\u044a\u0440\u0441\u0435\u043d\u0435, \u0437\u0430 \u0434\u0430 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0438\u0442\u0435",o.isRequired=!0,t.push(o);const a=s.a.createDefaultTextFormItemDef();a.domId="legal_entity_name",a.labelText="applications.debtors.legalEntity.name",a.helpText="",a.isRequired=!1,a.isDisabled=!0,t.push(a);const r=s.a.createDefaultEmailFormItemDef();r.domId="email",r.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u0438\u043c\u0435\u0439\u043b",r.placeHolderText="fi.email.placeholder",r.helpText="fi.email.help",r.isRequired=!0,t.push(r);const c=d.a.createDefaultDropDownFormItemDef();return c.domId="role",c.labelText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",c.placeHolderText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",c.isRequired=!0,c.dataSource=u.a.publicUrl,c.resultDataType=u.a,c.searchFields=[new l.a("description","s")],c.isWhere=!1,c.filterClause=e?{flagIntOut:"E"}:{name:"worker"},t.push(c),t}getEditEmailBtnDef(){const e=new c.a;return e.colHeader="\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f",e.showIcon=!0,e.icon="fas fa-pencil-alt",e.tooltipText="\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f",e.rowCondition=!0,e.conditionField="pInvStatusOrgDescription",e.conditionValue=["\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u0430 - \u0430\u043a\u0442\u0438\u0432\u043d\u0430","\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430 - \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u0430","\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u0430 - \u0430\u043a\u0442\u0438\u0432\u043d\u0430"],e}getEditEmailDefModel(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="org_id",t.labelText="\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e \u043b\u0438\u0446\u0435",t.helpText="",t.isRequired=!1,t.isDisabled=!0,e.push(t);const i=s.a.createDefaultTextFormItemDef();i.domId="org_name",i.labelText="\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e \u043b\u0438\u0446\u0435",i.helpText="",i.isRequired=!1,i.isDisabled=!0,e.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="role",n.labelText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",n.helpText="",n.isRequired=!1,n.isDisabled=!0,e.push(n);const o=s.a.createDefaultEmailFormItemDef();return o.domId="email",o.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u0438\u043c\u0435\u0439\u043b",o.helpText="fi.email.help",o.isRequired=!0,e.push(o),e}getEditRoleDefModel(e){const t=[],i=s.a.createDefaultTextFormItemDef();i.domId="org_id",i.labelText="\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e \u043b\u0438\u0446\u0435",i.helpText="",i.isRequired=!1,i.isDisabled=!0,t.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="org_name",n.labelText="\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u0434\u044a\u043b\u0436\u0435\u043d\u043e \u043b\u0438\u0446\u0435",n.helpText="",n.isRequired=!1,n.isDisabled=!0,t.push(n);const o=d.a.createDefaultDropDownFormItemDef();o.domId="role",o.labelText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",o.placeHolderText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",o.isRequired=!0,o.dataSource=u.a.publicUrl,o.resultDataType=u.a,o.searchFields=[new l.a("description","s")],o.isWhere=!1,o.filterClause=e?{flagIntOut:"E"}:{name:"worker"},t.push(o);const a=s.a.createDefaultEmailFormItemDef();return a.domId="email",a.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u0438\u043c\u0435\u0439\u043b",a.helpText="fi.email.help",a.isRequired=!0,a.isDisabled=!0,t.push(a),t}getMngUserOrgAccDefModel(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="search_fName",t.labelText="fi.person.fName.label",t.helpText="fi.person.fName.help",t.isRequired=!1,e.push(t);const i=s.a.createDefaultTextFormItemDef();i.domId="search_sName",i.labelText="fi.person.sName.label",i.helpText="fi.person.sName.help",i.isRequired=!1,e.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="search_lName",n.labelText="fi.person.lName.label",n.helpText="fi.person.lName.help",n.isRequired=!1,e.push(n);const o=d.a.createDefaultDropDownFormItemDef();o.domId="search_role",o.labelText="\u0417\u0430\u044f\u0432\u0435\u043d\u0430 \u0440\u043e\u043b\u044f",o.placeHolderText="\u0417\u0430\u044f\u0432\u0435\u043d\u0430 \u0440\u043e\u043b\u044f",o.isRequired=!1,o.dataSource=u.a.publicUrl,o.resultDataType=u.a,o.searchFields=[new l.a("description","s")],o.isWhere=!1,o.filterClause={flagIntOut:"E"},e.push(o);const a=d.a.createDefaultDropDownFormItemDef();a.domId="search_status",a.labelText="\u0421\u0442\u0430\u0442\u0443\u0441",a.placeHolderText="\u0421\u0442\u0430\u0442\u0443\u0441",a.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441",a.dataSource=b.a.urlPublic,a.resultDataType=b.a,a.searchFields=[new l.a("description","s")],a.isWhere=!1,a.filterClause={domain:'eq(s("INV_STATUS_ORG"))'},a.isRequired=!1,e.push(a);const r=s.a.createDefaultDatePeriodFormItemDef();return r.domId="search_period",r.labelText="\u041f\u0435\u0440\u0438\u043e\u0434 \u043d\u0430 \u043f\u043e\u0434\u0430\u0432\u0430\u043d\u0435 (\u043e\u0442-\u0434\u043e)",e.push(r),e}getEditAccessBtnDef(){const e=new c.a;return e.colHeader="\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",e.showIcon=!1,e.labelText="\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",e.tooltipText="\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",e.rowCondition=!0,e.conditionField="pStatusDescription",e.conditionValue=["\u041e\u0434\u043e\u0431\u0440\u0435\u043d\u0430","\u0427\u0430\u043a\u0430\u0449\u0430 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0435","\u041f\u0440\u0435\u043a\u0440\u0430\u0442\u0435\u043d\u0430"],e}getUserOrgRelExDefs(e,t){const i=[],n=s.a.createDefaultTextFormItemDef();n.domId="firstName",n.labelText="fi.person.fName.label",n.isRequired=!0,n.isDisabled=!0,i.push(n);const o=s.a.createDefaultTextFormItemDef();o.domId="midName",o.labelText="fi.person.sName.label",o.isRequired=!0,o.isDisabled=!0,i.push(o);const a=s.a.createDefaultTextFormItemDef();a.domId="lastName",a.labelText="fi.person.lName.label",a.isRequired=!0,a.isDisabled=!0,i.push(a);const r=s.a.createDefaultEmailFormItemDef();r.domId="email",r.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u0438\u043c\u0435\u0439\u043b",r.helpText="",r.isRequired=!0,r.isDisabled=!0,i.push(r);const c=d.a.createDefaultEmailFormItemDef();c.domId="current_status",c.labelText="\u0421\u0442\u0430\u0442\u0443\u0441",r.helpText="",c.isRequired=!0,c.isDisabled=!0,i.push(c);const m=d.a.createDefaultDropDownFormItemDef();m.domId="role",m.labelText="\u0417\u0430\u044f\u0432\u0435\u043d\u0430 \u0440\u043e\u043b\u044f",m.isRequired=!0,m.placeHolderText="\u0417\u0430\u044f\u0432\u0435\u043d\u0430 \u0440\u043e\u043b\u044f",m.dataSource=u.a.publicUrl,m.resultDataType=u.a,m.searchFields=[new l.a("description","s")],m.isWhere=!1,m.filterClause={flagIntOut:"E"},m.isDisabled=!t,i.push(m);const f=s.a.createDefaultFileBrowseDef();f.domId="upload_doc",f.labelText="\u041f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e",f.isRequired=!1,i.push(f);const h=s.a.createDefaultFileBrowseDef();h.domId="signed_doc",h.labelText="\u0424\u0430\u0439\u043b, \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u0449 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0432\u0430\u043d\u043e\u0442\u043e \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e",h.isRequired=!1,i.push(h);const p=d.a.createDefaultDropDownFormItemDef();p.domId="new_status",p.labelText="\u041e\u0431\u043d\u043e\u0432\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0430",p.isRequired=!1,p.placeHolderText="\u041e\u0431\u043d\u043e\u0432\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0430",p.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441",p.dataSource=b.a.urlPublic,p.resultDataType=b.a,p.searchFields=[new l.a("description","s")],p.isWhere=!1;let g="";switch(e){case"01":g='in(s("02"),s("03"))';break;case"02":g='eq(s("04"))';break;default:g='ne(s(" "))'}p.filterClause={domain:'eq(s("INV_STATUS_ORG"))',code:g},p.isDisabled="03"===e||"04"===e,i.push(p);const D=s.a.createDefaultTextFormItemDef();return D.domId="note",D.labelText="\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430 \u043e\u0442\u043a\u0430\u0437",D.isRequired=!1,D.isDisabled="03"===e||"04"===e,i.push(D),i}getUserOrgRelInDefs(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="firstName",t.labelText="fi.person.fName.label",t.isRequired=!0,t.isDisabled=!0,e.push(t);const i=s.a.createDefaultTextFormItemDef();i.domId="midName",i.labelText="fi.person.sName.label",i.isRequired=!0,i.isDisabled=!0,e.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="lastName",n.labelText="fi.person.lName.label",n.isRequired=!0,n.isDisabled=!0,e.push(n);const o=s.a.createDefaultEmailFormItemDef();o.domId="email",o.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u0438\u043c\u0435\u0439\u043b",o.helpText="",o.isRequired=!0,o.isDisabled=!0,e.push(o);const a=d.a.createDefaultDropDownFormItemDef();a.domId="current_status",a.labelText="\u0421\u0442\u0430\u0442\u0443\u0441",a.isRequired=!0,a.isDisabled=!0,e.push(a);const r=d.a.createDefaultDropDownFormItemDef();r.domId="role",r.labelText="\u0417\u0430\u044f\u0432\u0435\u043d\u0430 \u0440\u043e\u043b\u044f",r.isRequired=!0,r.isDisabled=!0,e.push(r);const c=s.a.createDefaultFileBrowseDef();c.domId="upload_doc",c.labelText="\u041f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e",c.helpText="",c.isRequired=!1,e.push(c);const l=new s.a;l.domId="download_doc",l.labelText="\u041f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e",e.push(l);const m=d.a.createDefaultDropDownFormItemDef();m.domId="new_status",m.labelText="\u041e\u0431\u043d\u043e\u0432\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0430",m.isRequired=!0,e.push(m);const u=s.a.createDefaultTextFormItemDef();return u.domId="note",u.labelText="\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430 \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",u.isRequired=!0,e.push(u),e}getMngStagesDefModel(){const e=[],t=s.a.createDefaultTextFormItemDef();t.domId="search_fName",t.labelText="fi.person.fName.label",t.helpText="fi.person.fName.help",t.isRequired=!1,e.push(t);const i=s.a.createDefaultTextFormItemDef();i.domId="search_sName",i.labelText="fi.person.sName.label",i.helpText="fi.person.sName.help",i.isRequired=!1,e.push(i);const n=s.a.createDefaultTextFormItemDef();n.domId="search_lName",n.labelText="fi.person.lName.label",n.helpText="fi.person.lName.help",n.isRequired=!1,e.push(n);const o=d.a.createDefaultDropDownFormItemDef();return o.domId="search_role",o.labelText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",o.placeHolderText="\u0420\u043e\u043b\u044f \u0432 \u0435\u043a\u0438\u043f\u0430",o.isRequired=!1,o.dataSource=u.a.publicUrl,o.resultDataType=u.a,o.searchFields=[new l.a("description","s")],o.isWhere=!1,o.filterClause={flagIntOut:"E",name:'ne(s("admin_profile"))'},e.push(o),e}getSearchStageDefModel(){const e=Object(m.a)(),t=[],i=d.a.createDefaultDropDownFormItemDef();i.domId="dismPermits_"+e,i.labelText="\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u043d\u043e \u2116",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u043d\u043e",t.push(i);const c=n.a.createDefaultDropDownCascadeFormItemDef();c.domId="dist_"+e,c.labelText="\u041e\u0431\u043b\u0430\u0441\u0442",c.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",c.dataSource=r.a.publicUrl,c.searchFields=[new l.a("terName","s")],c.resultDataType=r.a,c.parentDomName=null,c.isDisabled=!1,t.push(c);const u=n.a.createDefaultDropDownCascadeFormItemDef();u.domId="mun_"+e,u.labelText="\u041e\u0431\u0449\u0438\u043d\u0430",u.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0449\u0438\u043d\u0430 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",u.dataSource=o.a.publicUrl,u.searchFields=[new l.a("distName","s")],u.resultDataType=o.a,u.parentDomName="dist_"+e,u.parentFieldName="terCode",u.isDisabled=!1,t.push(u);const b=n.a.createDefaultDropDownCascadeFormItemDef();b.domId="set_"+e,b.labelText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",b.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",b.dataSource=a.a.publicUrl,b.searchFields=[new l.a("popName","s")],b.resultDataType=a.a,b.parentDomName="mun_"+e,b.parentFieldName="distEknm",b.isDisabled=!1,t.push(b);const f=s.a.createDefaultTextFormItemDef();return f.domId="address_"+e,f.labelText="\u0410\u0434\u0440\u0435\u0441",f.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",f.isRequired=!1,f.isDisabled=!1,t.push(f),t}getWotSearchStageDefModel(){const e=Object(m.a)(),t=[],i=d.a.createDefaultDropDownFormItemDef();i.domId="ewc_"+e,i.labelText="\u0420\u0430\u0431\u043e\u0442\u0435\u043d \u043b\u0438\u0441\u0442 - \u041a\u043e\u0434 \u043d\u0430 \u043e\u0442\u043f\u0430\u0434\u044a\u043a\u0430",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u043e\u0434",t.push(i);const c=n.a.createDefaultDropDownCascadeFormItemDef();c.domId="dist_"+e,c.labelText="\u041e\u0431\u043b\u0430\u0441\u0442",c.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",c.dataSource=r.a.publicUrl,c.searchFields=[new l.a("terName","s")],c.resultDataType=r.a,c.parentDomName=null,c.isDisabled=!1,t.push(c);const u=n.a.createDefaultDropDownCascadeFormItemDef();u.domId="mun_"+e,u.labelText="\u041e\u0431\u0449\u0438\u043d\u0430",u.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0449\u0438\u043d\u0430 \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",u.dataSource=o.a.publicUrl,u.searchFields=[new l.a("distName","s")],u.resultDataType=o.a,u.parentDomName="dist_"+e,u.parentFieldName="terCode",u.isDisabled=!1,t.push(u);const b=n.a.createDefaultDropDownCascadeFormItemDef();b.domId="set_"+e,b.labelText="\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e",b.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043e \u043c\u044f\u0441\u0442\u043e \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",b.dataSource=a.a.publicUrl,b.searchFields=[new l.a("popName","s")],b.resultDataType=a.a,b.parentDomName="mun_"+e,b.parentFieldName="distEknm",b.isDisabled=!1,t.push(b);const f=s.a.createDefaultTextFormItemDef();return f.domId="address_"+e,f.labelText="\u0410\u0434\u0440\u0435\u0441",f.helpText="\u0412\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",f.isRequired=!1,f.isDisabled=!1,t.push(f),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=f.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Jrli:function(e,t,i){"use strict";i.d(t,"a",(function(){return G}));var s=i("fXoL"),n=i("xtxY"),o=i("CR6u"),a=i("lB+K"),r=i("mrSG"),c=i("hnrn");let d=(()=>{class e{constructor(e){Object.assign(this,e||{})}get firstName(){return this.pFirstName}set firstName(e){this.pFirstName=e}get secondName(){return this.pSecondName}set secondName(e){this.pSecondName=e}get familyName(){return this.pFamilyName}set familyName(e){this.pFamilyName=e}get email(){return this.pEmail}set email(e){this.pEmail=e}get username(){return this.pUsername}set username(e){this.pUsername=e}get password(){return this.pPassword}set password(e){this.pPassword=e}get egn(){return this.pEgn}set egn(e){this.pEgn=e}get lnc(){return this.pLnc}set lnc(e){this.pLnc=e}}return e.urlRegistration="TrnUsers/register",e.urlActivation="TrnUsers/activation",Object(r.b)([Object(c.b)({alias:"firstName"})],e.prototype,"pFirstName",void 0),Object(r.b)([Object(c.b)({alias:"secondName"})],e.prototype,"pSecondName",void 0),Object(r.b)([Object(c.b)({alias:"familyName"})],e.prototype,"pFamilyName",void 0),Object(r.b)([Object(c.b)({alias:"email"})],e.prototype,"pEmail",void 0),Object(r.b)([Object(c.b)({alias:"username"})],e.prototype,"pUsername",void 0),Object(r.b)([Object(c.b)({alias:"password"})],e.prototype,"pPassword",void 0),Object(r.b)([Object(c.b)({alias:"egn"})],e.prototype,"pEgn",void 0),Object(r.b)([Object(c.b)({alias:"lnc"})],e.prototype,"pLnc",void 0),e})(),l=(()=>{class e{constructor(e){Object.assign(this,e||{})}get credType(){return this.pCredType}set credType(e){this.pCredType=e}get identifierNo(){return this.pIdentifierNo}set identifierNo(e){this.pIdentifierNo=e}get passwd(){return this.pPasswd}set passwd(e){this.pPasswd=e}}return e.url="TrnUserCredentials",Object(r.b)([Object(c.b)({alias:"credType"})],e.prototype,"pCredType",void 0),Object(r.b)([Object(c.b)({alias:"identifierNo"})],e.prototype,"pIdentifierNo",void 0),Object(r.b)([Object(c.b)({alias:"passwd"})],e.prototype,"pPasswd",void 0),e})();var m=i("122/"),u=i("qW6x"),b=i("dEii"),f=i("sGcX"),h=i("ZRIf"),p=i("4XRX"),g=i("3Pt+"),D=i("ofXK"),S=i("TTlI"),I=i("lp4E"),v=i("d+ck"),R=i("qHdK"),T=i("1kSV"),w=i("rC+L"),N=i("RP2b"),y=i("/PdQ"),E=i("A3dt"),x=i("sYmb");const O=["form"],C=["changePassModal"];function M(e,t){1&e&&(s.Sb(0,"h6"),s.Gc(1,"\u041e\u0421\u041d\u041e\u0412\u041d\u0418 \u0414\u0410\u041d\u041d\u0418 \u0417\u0410 \u041f\u041e\u0422\u0420\u0415\u0411\u0418\u0422\u0415\u041b\u0421\u041a\u0418 \u041f\u0420\u041e\u0424\u0418\u041b"),s.Rb())}function F(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",13),s.Sb(1,"button",14),s.ec("click",(function(){return s.wc(e),s.gc().onSaveUserData()})),s.hc(2,"translate"),s.Gc(3),s.hc(4,"translate"),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(1),s.nc("ngbTooltip",s.ic(2,3,e.buttonTooltip)),s.mc("disabled",e.formDisabled),s.zb(2),s.Ic(" ",s.ic(4,5,e.buttonLabel)," ")}}function A(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"app-fi-input-text",7),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).model.username=t})),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(1),s.mc("ngModel",e.model.username)("formItemDef",e.formDefs[6])("name",e.formDefs[6].domName)}}function z(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"app-fi-input-password",7),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).model.password=t})),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(1),s.mc("ngModel",e.model.password)("formItemDef",e.formDefs[7])("name",e.formDefs[7].domName)}}function P(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"app-fi-input-confirm-pass",15),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc(2).model.confirmPass=t})),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(1),s.mc("ngModel",e.model.confirmPass)("formItemDef",e.formDefs[8])("name",e.formDefs[8].domName)("password",e.model.password)}}function _(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"label"),s.Gc(2,"\xa0"),s.Rb(),s.Sb(3,"div",16),s.Sb(4,"button",17),s.ec("click",(function(){return s.wc(e),s.gc(2).onChangePass()})),s.Gc(5," \u0421\u043c\u044f\u043d\u0430 \u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u0430 "),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.gc(2);s.zb(4),s.mc("disabled",e.formDisabled)}}function j(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",5),s.Sb(1,"div",6),s.Sb(2,"app-fi-input-checkbox",10),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.loginUserPass=t}))("checkClick",(function(t){return s.wc(e),s.gc().onLoginUserPass(t)})),s.Rb(),s.Rb(),s.Ec(3,A,2,3,"div",11),s.Ec(4,z,2,3,"div",11),s.Ec(5,P,2,4,"div",11),s.Ec(6,_,6,1,"div",11),s.Rb()}if(2&e){const e=s.gc();s.zb(2),s.mc("ngModel",e.model.loginUserPass)("formItemDef",e.formDefs[5])("name",e.formDefs[5].domName),s.zb(1),s.mc("ngIf",e.model.loginUserPass),s.zb(1),s.mc("ngIf",e.model.loginUserPass&&!e.hasCredentail("U")),s.zb(1),s.mc("ngIf",e.model.loginUserPass&&!e.hasCredentail("U")),s.zb(1),s.mc("ngIf",e.model.loginUserPass&&"E"==e.mode&&e.hasCredentail("U")&&e.isCredApproved("U"))}}function U(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"app-fi-input-egn",18),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.egn=t}))("valueEmitter",(function(t){return s.wc(e),s.gc().onUinValid("EGN",t)})),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(1),s.mc("ngModel",e.model.egn)("formItemDef",e.formDefs[4])("name",e.formDefs[4].domName)}}function k(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.Sb(1,"app-fi-input-lnch",18),s.ec("ngModelChange",(function(t){return s.wc(e),s.gc().model.lnch=t}))("valueEmitter",(function(t){return s.wc(e),s.gc().onUinValid("LNCH",t)})),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(1),s.mc("ngModel",e.model.lnch)("formItemDef",e.formDefs[10])("name",e.formDefs[10].domName)}}function L(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",13),s.Sb(1,"button",14),s.ec("click",(function(){return s.wc(e),s.gc().onSaveCredentials()})),s.hc(2,"translate"),s.Gc(3),s.hc(4,"translate"),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(1),s.nc("ngbTooltip",s.ic(2,3,e.buttonTooltip)),s.mc("disabled",e.formDisabled),s.zb(2),s.Ic(" ",s.ic(4,5,e.buttonLabel)," ")}}function q(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",13),s.Sb(1,"button",14),s.ec("click",(function(){return s.wc(e),s.gc().onRegister()})),s.hc(2,"translate"),s.Gc(3),s.hc(4,"translate"),s.Rb(),s.Rb()}if(2&e){const e=s.gc(),t=s.vc(2);s.zb(1),s.nc("ngbTooltip",s.ic(2,3,e.buttonTooltip)),s.mc("disabled",t.invalid||!e.model.loginUserPass&&!e.model.loginSign||e.formDisabled),s.zb(2),s.Ic(" ",s.ic(4,5,e.buttonLabel)," ")}}let G=(()=>{class e{constructor(e,t,i,n,a,r){this.generator=e,this.authService=t,this.alertService=i,this.mmSpinnerService=n,this.crudService=a,this.sessionService=r,this.user=null,this.pFormDisabled=!1,this.formValidStatus="INVALID",this.statusSubscriber=null,this.mode=o.a.NEW,this.index="0",this.formStatusValidChanged=new s.n,this.formDefs=[]}set model(e){this.user=e}get model(){return this.user}get buttonLabel(){return this.mode===o.a.NEW?"buttons.regist\u0435r.label":"buttons.save.label"}get buttonTooltip(){return this.mode===o.a.NEW?"buttons.regist\u0435r.tooltip":"buttons.save.tooltip"}get formDisabled(){return this.pFormDisabled}set formDisabled(e){this.pFormDisabled=e,this.formDefs.forEach((t,i,s)=>{s[i].readonly=e,s[i].isDisabled=e}),e&&this.checkMode(this.formDefs)}ngOnInit(){this.formDefs=this.loadFormDef(this.index),this.sessionData=this.sessionService.getUserInfo()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(e=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}onRegister(){this.formDisabled=!0,this.registerUser()}onSaveUserData(){this.form.form.get(this.formDefs[0].domId).invalid||this.form.form.get(this.formDefs[1].domId).invalid||this.form.form.get(this.formDefs[2].domId).invalid||this.form.form.get(this.formDefs[3].domId).invalid?this.alertService.error(a.a.ERROR_MSG,null):(this.mmSpinnerService.showMainModalSpinner(),this.updateUserData())}onSaveCredentials(){this.form.form.get(this.formDefs[6].domId).invalid||this.form.form.get(this.formDefs[7].domId)&&this.form.form.get(this.formDefs[7].domId).invalid||this.form.form.get(this.formDefs[4].domId).invalid||this.form.form.get(this.formDefs[10].domId).invalid?this.alertService.error(a.a.ERROR_MSG,null):(this.mmSpinnerService.showMainModalSpinner(),this.updateCredentials())}onChangePass(){this.changePassModal.openModal()}onLoginUserPass(e){e||(this.model.username=null,this.model.password=null,this.model.confirmPass=null)}onLoginSign(e){e||(this.model.egn=null,this.model.lnch=null)}onUinValid(e,t){"EGN"===e&&(null!=t&&t.length>0?(this.formDefs[10].isRequired=!1,null!=this.model.lnch&&0!==this.model.lnch.length||null!=this.form.form.get(this.formDefs[10].domId)&&this.form.form.get(this.formDefs[10].domId).setValue(null)):this.formDefs[10].isRequired=!0),"LNCH"===e&&(null!=t&&t.length>0?(this.formDefs[4].isRequired=!1,null!=this.model.egn&&0!==this.model.egn.length||null!=this.form.form.get(this.formDefs[4].domId)&&this.form.form.get(this.formDefs[4].domId).setValue(null)):this.formDefs[4].isRequired=!0),null!=this.model.egn&&0!==this.model.egn.length||null!=this.model.lnch&&0!==this.model.lnch.length||(this.formDefs[4].isRequired=!0,this.model.egn=null,this.formDefs[10].isRequired=!0,this.model.lnch=null)}isCredApproved(e){if(null==this.userData)return!1;const t=this.userData.credentialType.find(t=>t.credType===e);return!!t&&"Y"===t.isApproved}hasCredentail(e){return null!=this.userData&&!!this.userData.credentialType.find(t=>t.credType===e)}showUserPass(){return!this.sessionData||"I"!==this.sessionData.flagIntOut}loadFormDef(e){const t=this.generator.getUserRegFormModel(e);return this.checkMode(t)}checkMode(e){return this.mode===o.a.EDIT&&(this.model.loginUserPass&&(e[5].isDisabled=!0,e[6].isDisabled=!0,e[6].helpText=""),this.model.loginSign&&(e[9].isDisabled=!0,this.model.egn&&this.isCredApproved("E")&&(e[4].readonly=!0,e[4].helpText=""),this.model.lnch&&this.isCredApproved("L")&&(e[10].readonly=!0,e[10].helpText=""))),this.mode===o.a.READ&&e.forEach((e,t,i)=>{i[t].readonly=!0,i[t].isDisabled=!0,i[t].placeHolderText=null,i[t].helpText=null}),e}registerUser(){const e=new d({firstName:this.user.firstName,secondName:this.user.midName,familyName:this.user.lastName,email:this.user.email,username:null==this.user.username||0===this.user.username.length?null:this.user.username,password:null==this.user.password||0===this.user.password.length?null:this.user.password,egn:null==this.user.egn||0===this.user.egn.length?null:this.user.egn,lnc:null==this.user.lnch||0===this.user.lnch.length?null:this.user.lnch});this.authService.register(d.urlRegistration,e).subscribe(e=>{this.alertService.success(a.a.SUCCESS_REGISTRATION)},e=>{this.formDisabled=!1})}updateUserData(){this.crudService.updateCurrentData(n.a.updateUrl,this.model).subscribe(e=>{this.mmSpinnerService.hideMainModalSpinner(),this.alertService.success(a.a.TrnUsers_UpdateUserInfo_SUCCESS)},e=>{this.mmSpinnerService.hideMainModalSpinner()})}updateCredentials(){const e=[];if(this.model.password&&this.model.password.length>0&&e.push(new l({credType:"U",identifierNo:this.model.username,passwd:this.model.password})),this.model.egn&&this.model.egn.length>0){const t=this.userData.credentialType.find(e=>"E"===e.credType);t&&t.identifierNo!==this.model.egn&&"N"===t.isApproved&&e.push(new l({credType:"E",identifierNo:this.model.egn,passwd:null})),null==t&&e.push(new l({credType:"E",identifierNo:this.model.egn,passwd:null}))}if(this.model.lnch&&this.model.lnch.length>0){const t=this.userData.credentialType.find(e=>"L"===e.credType);t&&t.identifierNo!==this.model.lnch&&"N"===t.isApproved&&e.push(new l({credType:"L",identifierNo:this.model.lnch,passwd:null})),null==t&&e.push(new l({credType:"L",identifierNo:this.model.lnch,passwd:null}))}if(0===e.length)return this.mmSpinnerService.hideMainModalSpinner(),void this.alertService.info(a.a.TrnUserCredentials_INFO_NO_DATA_FOR_UPDATE);this.crudService.updateMany(l.url,e).subscribe(e=>{this.mmSpinnerService.hideMainModalSpinner(),this.alertService.success(a.a.TrnUserCredentials_UPDATE_SUCCESS)},e=>{this.mmSpinnerService.hideMainModalSpinner()})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(m.a),s.Mb(u.a),s.Mb(b.a),s.Mb(f.a),s.Mb(h.a),s.Mb(p.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-user-registration"]],viewQuery:function(e,t){var i;1&e&&(s.Nc(O,!0),s.Nc(C,!0)),2&e&&(s.uc(i=s.fc())&&(t.form=i.first),s.uc(i=s.fc())&&(t.changePassModal=i.first))},inputs:{mode:"mode",index:"index",model:"model",userData:"userData"},outputs:{formStatusValidChanged:"formStatusValidChanged"},decls:29,vars:27,consts:[[1,"container-fluid"],["novalidate","",1,"was-validated"],["form","ngForm"],[3,"ngClass"],[4,"ngIf"],[1,"row"],[1,"col-lg-3"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","d-flex justify-content-end",4,"ngIf"],["class","row",4,"ngIf"],[3,"ngModel","formItemDef","name","ngModelChange","checkClick"],["class","col-lg-3",4,"ngIf"],["changePassModal",""],[1,"d-flex","justify-content-end"],["type","button","container","body",1,"btn","btn-outline-secondary",3,"disabled","ngbTooltip","click"],[3,"ngModel","formItemDef","name","password","ngModelChange"],[1,"d-flex","justify-content-start"],["type","button","ngbTooltip","\u0421\u043c\u044f\u043d\u0430 \u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u0430","container","body",1,"btn","btn-outline-secondary",3,"disabled","click"],[3,"ngModel","formItemDef","name","ngModelChange","valueEmitter"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"form",1,2),s.Sb(3,"div",3),s.Ec(4,M,2,0,"h6",4),s.Sb(5,"div",5),s.Sb(6,"div",6),s.Sb(7,"app-fi-input-text",7),s.ec("ngModelChange",(function(e){return t.model.firstName=e})),s.Rb(),s.Rb(),s.Sb(8,"div",6),s.Sb(9,"app-fi-input-text",7),s.ec("ngModelChange",(function(e){return t.model.midName=e})),s.Rb(),s.Rb(),s.Sb(10,"div",6),s.Sb(11,"app-fi-input-text",7),s.ec("ngModelChange",(function(e){return t.model.lastName=e})),s.Rb(),s.Rb(),s.Sb(12,"div",6),s.Sb(13,"app-fi-input-email",7),s.ec("ngModelChange",(function(e){return t.model.email=e})),s.Rb(),s.Rb(),s.Rb(),s.Ec(14,F,5,7,"div",8),s.Rb(),s.Sb(15,"div",3),s.Sb(16,"h6"),s.Gc(17),s.hc(18,"translate"),s.Rb(),s.Ec(19,j,7,7,"div",9),s.Sb(20,"div",5),s.Sb(21,"div",6),s.Sb(22,"app-fi-input-checkbox",10),s.ec("ngModelChange",(function(e){return t.model.loginSign=e}))("checkClick",(function(e){return t.onLoginSign(e)})),s.Rb(),s.Rb(),s.Ec(23,U,2,3,"div",11),s.Ec(24,k,2,3,"div",11),s.Rb(),s.Ec(25,L,5,7,"div",8),s.Rb(),s.Ec(26,q,5,7,"div",8),s.Rb(),s.Rb(),s.Nb(27,"app-change-password-modal",null,12)),2&e&&(s.zb(3),s.mc("ngClass","E"===t.mode?"border border-secondary mb-1 rounded p-2":""),s.zb(1),s.mc("ngIf","E"===t.mode),s.zb(3),s.mc("ngModel",t.model.firstName)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),s.zb(2),s.mc("ngModel",t.model.midName)("formItemDef",t.formDefs[1])("name",t.formDefs[1].domName),s.zb(2),s.mc("ngModel",t.model.lastName)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName),s.zb(2),s.mc("ngModel",t.model.email)("formItemDef",t.formDefs[3])("name",t.formDefs[3].domName),s.zb(1),s.mc("ngIf","E"===t.mode),s.zb(1),s.mc("ngClass","E"===t.mode?"border border-secondary rounded p-2":""),s.zb(2),s.Hc(s.ic(18,25,"fi.loginType.label")),s.zb(2),s.mc("ngIf",t.showUserPass()),s.zb(3),s.mc("ngModel",t.model.loginSign)("formItemDef",t.formDefs[9])("name",t.formDefs[9].domName),s.zb(1),s.mc("ngIf",t.model.loginSign),s.zb(1),s.mc("ngIf",t.model.loginSign),s.zb(1),s.mc("ngIf","E"===t.mode),s.zb(1),s.mc("ngIf","N"===t.mode))},directives:[g.D,g.p,g.q,D.r,D.u,S.a,g.o,g.r,I.a,v.a,R.a,T.ab,w.a,N.a,y.a,E.a],pipes:[x.d],styles:[""]}),e})()},RP2b:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("fXoL"),n=i("F7pt"),o=i("3Pt+"),a=i("ofXK"),r=i("sYmb");const c=["inputPwd"],d=function(e,t){return{"fa-eye-slash":e,"fa-eye":t}};let l=(()=>{class e{constructor(){this.pass=null,this.fieldPwdTextType=!1,this.errorMessage="",this.formItemDef=null,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new n.a}set password(e){this.pass=e,this.onChange(this.val),this.onTouched()}get password(){return this.pass}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){return!this.formItemDef.isRequired||null!=e.value&&0!==e.value.length?this.password!==e.value?(this.inputPwd.nativeElement.setCustomValidity("error"),this.errorMessage="fi.confirmPass.error.noMatch",{pwd:!0}):(this.inputPwd.nativeElement.setCustomValidity(""),this.errorMessage="",null):(this.inputPwd.nativeElement.setCustomValidity("error"),this.errorMessage="fi.confirmPass.error.required",{required:!0})}onClickPwdEyeBtn(){this.fieldPwdTextType=!this.fieldPwdTextType}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-confirm-pass"]],viewQuery:function(e,t){var i;1&e&&s.Nc(c,!0),2&e&&s.uc(i=s.fc())&&(t.inputPwd=i.first)},inputs:{password:"password",formItemDef:"formItemDef",value:"value"},features:[s.yb([{provide:o.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:o.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:20,vars:24,consts:[[1,"form-group"],[3,"for"],[1,"input-group","mb-1"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-lock"],["aria-label","label","autocomplete","off",1,"form-control",3,"type","id","name","placeholder","required","pattern","disabled","ngModel","ngModelChange"],["inputPwd",""],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fa",3,"ngClass"],[1,"invalid-feedback"],["id","input-text-1-Help",1,"form-text","text-muted"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"label",1),s.Gc(2),s.hc(3,"translate"),s.Rb(),s.Sb(4,"div",2),s.Sb(5,"div",3),s.Sb(6,"span",4),s.Nb(7,"i",5),s.Rb(),s.Rb(),s.Sb(8,"input",6,7),s.ec("ngModelChange",(function(e){return t.value=e})),s.hc(10,"translate"),s.Rb(),s.Sb(11,"div",8),s.Sb(12,"span",9),s.ec("click",(function(){return t.onClickPwdEyeBtn()})),s.Nb(13,"i",10),s.Rb(),s.Rb(),s.Sb(14,"div",11),s.Gc(15),s.hc(16,"translate"),s.Rb(),s.Rb(),s.Sb(17,"small",12),s.Gc(18),s.hc(19,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("for",t.formItemDef.domId),s.zb(1),s.Hc(s.ic(3,13,t.formItemDef.labelText)),s.zb(6),s.nc("placeholder",s.ic(10,15,t.formItemDef.placeHolderText)),s.mc("type",t.fieldPwdTextType?"text":"password")("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("pattern",t.formItemDef.pattern)("disabled",t.formItemDef.isDisabled)("ngModel",t.value),s.zb(5),s.mc("ngClass",s.rc(21,d,!t.fieldPwdTextType,t.fieldPwdTextType)),s.zb(2),s.Ic(" ",s.ic(16,17,t.errorMessage)," "),s.zb(3),s.Hc(s.ic(19,19,t.formItemDef.helpText)))},directives:[o.c,o.z,o.v,o.o,o.r,a.r],pipes:[r.d],styles:[""]}),e})()},XlQi:function(e,t,i){"use strict";i.d(t,"a",(function(){return ae}));var s=i("mrSG"),n=i("fXoL"),o=i("CR6u"),a=i("LlKj"),r=i("nI3r"),c=i("+QWa"),d=i("9GxP"),l=i("34DR"),m=i("KQ7d"),u=i("aTmD"),b=i("bgjn"),f=i("u1cU"),h=i("PSD3"),p=i.n(h),g=i("BYCZ"),D=i("ZRIf"),S=i("4XRX"),I=i("1kSV"),v=i("ofXK"),R=i("QCcn"),T=i("jtLl"),w=i("QJFE"),N=i("3Pt+"),y=i("TTlI"),E=i("lp4E"),x=i("Mtn9"),O=i("sYmb");const C=["orgForm"],M=["docsForm"],F=["actionList"],A=["signModal"],z=["successSwal"];function P(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.legalEntity.orgData")," "),n.zb(4),n.mc("hidden",e.isExpanded("org-data")),n.zb(1),n.mc("hidden",!e.isExpanded("org-data"))}}function _(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",24),n.Sb(1,"app-fi-input-email",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.org.email=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc(2);n.zb(1),n.mc("ngModel",e.model.org.email)("formItemDef",e.formDefs[4])("name",e.formDefs[4].domName)}}function j(e,t){if(1&e){const e=n.Tb();n.Sb(0,"form",21,22),n.Sb(2,"div",23),n.Sb(3,"div",24),n.Sb(4,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.name=t})),n.Rb(),n.Rb(),n.Sb(5,"div",24),n.Sb(6,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.bulstat=t})),n.Rb(),n.Rb(),n.Ec(7,_,2,3,"div",26),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(4),n.mc("ngModel",e.model.org.name)("formItemDef",e.formDefs[0])("name",e.formDefs[0].domName),n.zb(2),n.mc("ngModel",e.model.org.bulstat)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName),n.zb(1),n.mc("ngIf","N"===e.mode)}}function U(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",28),n.ec("click",(function(){n.wc(e);const t=n.gc(2),i=n.vc(1);return t.onAddContact(),i.expand("contacts")})),n.Nb(1,"i",29),n.Rb()}}function k(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Ec(5,U,2,0,"button",27),n.Sb(6,"button",18),n.Nb(7,"i",19),n.Nb(8,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){const e=n.gc(),t=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,4,"applications.debtors.legalEntity.contacts")," "),n.zb(3),n.mc("ngIf",!e.formDisabled&&"R"!==e.mode),n.zb(2),n.mc("hidden",t.isExpanded("contacts")),n.zb(1),n.mc("hidden",!t.isExpanded("contacts"))}}function L(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div"),n.Sb(1,"div",23),n.Sb(2,"div",32),n.Sb(3,"div",33),n.Sb(4,"span",34),n.Gc(5),n.Rb(),n.Sb(6,"button",35),n.ec("click",(function(){n.wc(e);const i=t.index;return n.gc(2).onDeleteContact(i)})),n.Nb(7,"i",36),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Nb(8,"app-contact-person-only-form",37),n.Nb(9,"hr",38),n.Rb()}if(2&e){const e=t.$implicit,i=t.index;n.zb(5),n.Hc(i+1),n.zb(3),n.mc("model",e)}}function q(e,t){if(1&e&&(n.Sb(0,"fieldset",30),n.Ec(1,L,10,2,"div",31),n.Rb()),2&e){const e=n.gc();n.mc("disabled",e.formDisabled),n.zb(1),n.mc("ngForOf",e.model.contacts)}}function G(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.legalEntity.address1")," "),n.zb(4),n.mc("hidden",e.isExpanded("headquarters")),n.zb(1),n.mc("hidden",!e.isExpanded("headquarters"))}}function V(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-address-form",39),n.ec("formStatusValidChanged",(function(t){return n.wc(e),n.gc().headquartersValid="VALID"===t})),n.Rb()}if(2&e){const e=n.gc(),t=n.vc(1);n.mc("isExpanded",t.isExpanded("headquarters"))("addressData",e.model.headquarters)}}function B(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.legalEntity.address2")," "),n.zb(4),n.mc("hidden",e.isExpanded("address")),n.zb(1),n.mc("hidden",!e.isExpanded("address"))}}function H(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-address-form",39),n.ec("formStatusValidChanged",(function(t){return n.wc(e),n.gc().addressValid="VALID"===t})),n.Rb()}if(2&e){const e=n.gc(),t=n.vc(1);n.mc("isExpanded",t.isExpanded("address"))("addressData",e.model.address)}}function W(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",42),n.ec("click",(function(){n.wc(e);const t=n.gc(3),i=n.vc(1);return t.onAddDoc(),i.expand("doc")})),n.Nb(1,"i",29),n.Rb()}}function $(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Ec(5,W,2,0,"button",41),n.Sb(6,"button",18),n.Nb(7,"i",19),n.Nb(8,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){const e=n.gc(2),t=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,4,"applications.debtors.legalEntity.doc")," "),n.zb(3),n.mc("ngIf",!e.formDisabled&&"R"!==e.mode),n.zb(2),n.mc("hidden",t.isExpanded("doc")),n.zb(1),n.mc("hidden",!t.isExpanded("doc"))}}function K(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",23),n.Sb(1,"div",45),n.Sb(2,"h6",46),n.ec("click",(function(){n.wc(e);const i=t.$implicit;return n.gc(3).downloadFile(i.id,i.fileName)})),n.Gc(3),n.Rb(),n.Rb(),n.Nb(4,"div",47),n.Sb(5,"div",48),n.Sb(6,"button",49),n.ec("click",(function(){n.wc(e);const i=t.$implicit;return n.gc(3).onDeleteDocMetaData(i.id)})),n.Nb(7,"i",36),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=t.$implicit,i=n.gc(3);n.zb(3),n.Ic(" ",e.fileName," "),n.zb(3),n.mc("hidden","R"===i.mode)}}function X(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-file-browse",52),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().$implicit.file=t})),n.Rb()}if(2&e){const e=n.gc().$implicit,t=n.gc(3);n.mc("ngModel",e.file)("formItemDef",t.getDocDef(e.index,"D"))("name",t.getDocDef(e.index,"D").domName)("showClearBtn",!1)}}function Q(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-file-browse",52),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().$implicit.signedDoc=t})),n.Rb()}if(2&e){const e=n.gc().$implicit,t=n.gc(3);n.mc("ngModel",e.signedDoc)("formItemDef",t.getDocDef(e.index,"S"))("name",t.getDocDef(e.index,"S").domName)("showClearBtn",!1)}}function Y(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div"),n.Sb(1,"div",23),n.Sb(2,"div",32),n.Sb(3,"div",33),n.Sb(4,"span",34),n.Gc(5),n.Rb(),n.Sb(6,"button",50),n.ec("click",(function(){n.wc(e);const i=t.index;return n.gc(3).onDeleteDoc(i)})),n.Nb(7,"i",36),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(8,"div",23),n.Sb(9,"div",24),n.Sb(10,"app-fi-input-text",25),n.ec("ngModelChange",(function(i){return n.wc(e),t.$implicit.descr=i})),n.Rb(),n.Rb(),n.Sb(11,"div",24),n.Ec(12,X,1,4,"app-fi-file-browse",51),n.Rb(),n.Sb(13,"div",24),n.Ec(14,Q,1,4,"app-fi-file-browse",51),n.Rb(),n.Rb(),n.Nb(15,"hr",38),n.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=n.gc(3);n.zb(5),n.Hc(i+1),n.zb(5),n.mc("ngModel",e.descr)("formItemDef",s.getDocDescrDef(e.index))("name",s.getDocDescrDef(e.index).domName),n.zb(2),n.mc("ngIf",null==e.id),n.zb(2),n.mc("ngIf",null==e.id)}}function Z(e,t){if(1&e&&(n.Sb(0,"fieldset",30),n.Ec(1,K,8,2,"div",43),n.Nb(2,"hr",38),n.Sb(3,"form",21,44),n.Ec(5,Y,16,6,"div",31),n.Rb(),n.Rb()),2&e){const e=n.gc(2);n.mc("disabled",e.formDisabled),n.zb(1),n.mc("ngForOf",e.model.docsMetaData),n.zb(4),n.mc("ngForOf",e.model.docs)}}function J(e,t){1&e&&(n.Sb(0,"ngb-panel",40),n.Ec(1,$,9,6,"ng-template",3),n.Ec(2,Z,6,3,"ng-template",4),n.Rb())}function ee(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",58),n.ec("click",(function(){return n.wc(e),n.gc(2).onCancel()})),n.Nb(1,"i",59),n.Gc(2," \u041e\u0442\u043a\u0430\u0437 "),n.Rb()}}function te(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",60),n.ec("click",(function(){return n.wc(e),n.gc(2).onBackToEdit()})),n.Nb(1,"i",61),n.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),n.Rb()}}function ie(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",62),n.ec("click",(function(){return n.wc(e),n.gc(2).onSave()})),n.Nb(1,"i",63),n.Gc(2),n.Rb()}if(2&e){const e=n.gc(2);n.mc("disabled",!e.formValid),n.zb(2),n.Ic(" ",e.saveBtnLabel," ")}}function se(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",64),n.ec("click",(function(){return n.wc(e),n.gc(2).onSign()})),n.Nb(1,"i",65),n.Gc(2," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 "),n.Rb()}}function ne(e,t){if(1&e&&(n.Sb(0,"div",53),n.Sb(1,"div"),n.Ec(2,ee,3,0,"button",54),n.Ec(3,te,3,0,"button",55),n.Rb(),n.Ec(4,ie,3,2,"button",56),n.Ec(5,se,3,0,"button",57),n.Rb()),2&e){const e=n.gc();n.zb(2),n.mc("ngIf",!e.formDisabled),n.zb(1),n.mc("ngIf",e.formDisabled&&"E"==e.mode),n.zb(1),n.mc("ngIf",!e.formDisabled),n.zb(1),n.mc("ngIf",e.formDisabled&&(!e.isSigned||"N"===e.isSigned)&&!e.isInnerUser)}}const oe=function(){return["org-data","contacts","headquarters","address","doc"]};let ae=(()=>{class e{constructor(e,t,i,s){this.defService=e,this.detector=t,this.crudService=i,this.sessionService=s,this.model={},this.mode=o.a.NEW,this.cancel=new n.n,this.isInnerUser=!1,this.formDefs=[],this.headquartersValid=!1,this.addressValid=!1,this.pFormDisabled=!1,this.isActionListReady=!1,this.isActionListSuccess=!1,this.usersSaver=new l.a(i),this.usersLoader=new b.a(i)}get formDisabled(){return this.pFormDisabled}set formDisabled(e){this.pFormDisabled=e,this.formDefs.forEach((t,i,s)=>{"le_eik"!==s[i].domId&&("le_name"===s[i].domId&&"Y"===this.isSigned||(s[i].readonly=e,s[i].isDisabled=e))}),this.addressesComponents.forEach(t=>{t.disableNonEmptyFields=e}),this.contactsComponents.forEach(t=>{t.disableNonEmptyFields=e})}get formValid(){return!!(this.orgForm&&this.orgForm.valid&&(this.isInnerUser||this.docsForm&&this.docsForm.valid)&&this.headquartersValid&&this.addressValid&&this.isContactFormsValid()&&this.isDocsValid()&&this.model.contacts&&this.model.contacts.length>0)}get saveBtnLabel(){return this.mode===o.a.NEW?"\u041f\u043e\u0434\u0430\u0439":"\u0417\u0430\u043f\u0430\u0437\u0438"}ngOnInit(){this.isOrgSigned(),this.loadFormDef(),this.setEmail(),this.setSignUrl()}ngAfterViewInit(){this.checkMode(),this.detector.detectChanges()}onCancel(){this.formDisabled=!0,this.reloadData(),this.cancel.emit()}onSave(){switch(this.formDisabled=!0,this.mode){case o.a.NEW:this.addNewData();break;case o.a.EDIT:this.editData()}}onCloseActionModal(){this.isInnerUser&&(this.isActionListSuccess?(this.successSwal.fire(),this.cancel.emit()):this.formDisabled=!1),this.isActionListSuccess||this.mode!==o.a.NEW||null!=this.model.org.id||(this.formDisabled=!1)}onSign(){this.formValid?null!=this.model.org&&null!=this.model.org.id?(this.setSignUrl(),this.signModal.open()):p.a.fire({title:"\u041d\u044f\u043c\u0430 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d \u0437\u0430\u043f\u0438\u0441. \u041c\u043e\u043b\u044f \u043e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e!",icon:"warning"}).then():p.a.fire({title:"\u041c\u043e\u043b\u044f \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435\u0442\u0430, \u0437\u0430 \u0434\u0430 \u043f\u043e\u0434\u043f\u0438\u0448\u0435\u0442\u0435!",icon:"warning"}).then()}onBackToEdit(){this.formDisabled=!1}onAddContact(){null==this.model.contacts&&(this.model.contacts=[]),this.model.contacts.push(new m.a)}onDeleteContact(e){if(null==this.model.contacts)return;const t=this.model.contacts.splice(e,1);t&&t.length>0&&t[0].id&&(null==this.model.contactsForDelete&&(this.model.contactsForDelete=[]),this.model.contactsForDelete.push(t[0].id))}onAddDoc(){null==this.model.docs&&(this.model.docs=[]),this.model.docs.push({index:Object(c.a)()})}onDeleteDoc(e){null!=this.model.docs&&this.model.docs.splice(e,1)}onDeleteDocMetaData(e){null!=this.model.docsMetaData&&(this.model.docsMetaData=this.model.docsMetaData.filter(t=>t.id!==e),null==this.model.docsForDelete&&(this.model.docsForDelete=[]),this.model.docsForDelete.push(e))}getDocDescrDef(e){return this.defService.getDocDescrDef(e)}getDocDef(e,t){return this.defService.getDocumentDef(e,t)}downloadFile(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.usersLoader.loadDocument(e);Object(f.a)(i,t)}))}isContactFormsValid(){return null==this.contactsComponents.find(e=>"INVALID"===e.formValidStatus)}isDocsValid(){return!!this.isInnerUser||this.model.docs&&this.model.docs.length>0||this.model.docsMetaData&&this.model.docsMetaData.length>0}loadFormDef(){this.formDefs=this.defService.getLegalEntityDefsModel(this.isSigned)}isOrgSigned(){if(this.mode===o.a.NEW)return void(this.isSigned=null);const e=this.sessionService.getOrganization();this.isSigned=e?e.confirmed:null}setEmail(){const e=this.sessionService.getUserInfo();e&&(this.model.org.email=e.email)}checkMode(){this.mode===o.a.EDIT&&(this.formDisabled=!0)}addNewData(){this.prepareSaveActions(),this.actionList.open(),this.usersSaver.insertData(this.model,this.actions,"E",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.setSignUrl()})}editData(){this.prepareUpdateActions(),this.actionList.open(),this.isSigned&&"N"!==this.isSigned?this.usersSaver.updateData(this.model,this.actions,"E",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.reloadData()}):this.usersSaver.updateAllData(this.model,this.actions,"E",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.reloadData()})}prepareSaveActions(){this.actions=[],this.actions.push(new d.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u043e \u043b\u0438\u0446\u0435",u.a.WORKING,!1)),this.actions.push(new d.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0430 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",u.a.WORKING,!1)),this.actions.push(new d.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",u.a.WORKING,!1)),this.actions.push(new d.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435 \u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",u.a.WORKING,!1)),this.isInnerUser||this.actions.push(new d.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",u.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}prepareUpdateActions(){this.actions=[],this.isSigned&&"N"!==this.isSigned||this.actions.push(new d.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u043e \u043b\u0438\u0446\u0435",u.a.WORKING,!1)),this.actions.push(new d.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043b\u0438\u0446\u0430 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",u.a.WORKING,!1)),this.actions.push(new d.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",u.a.WORKING,!1)),this.actions.push(new d.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435 \u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",u.a.WORKING,!1)),this.isInnerUser||this.actions.push(new d.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",u.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}reloadData(){null!=this.model.org.id&&this.usersLoader.loadData(this.model.org.id).then(e=>{this.model=e})}setSignUrl(){null!=this.model.org.id&&(this.signUrl=`TrnDocTransitions/organization/${this.model.org.id}/sign/doc`)}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(g.a),n.Mb(n.h),n.Mb(D.a),n.Mb(S.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-legal-entity-form"]],viewQuery:function(e,t){var i;1&e&&(n.Nc(C,!0),n.Nc(M,!0),n.Nc(F,!0),n.Nc(A,!0),n.Nc(z,!0),n.Nc(a.a,!0),n.Nc(r.a,!0)),2&e&&(n.uc(i=n.fc())&&(t.orgForm=i.first),n.uc(i=n.fc())&&(t.docsForm=i.first),n.uc(i=n.fc())&&(t.actionList=i.first),n.uc(i=n.fc())&&(t.signModal=i.first),n.uc(i=n.fc())&&(t.successSwal=i.first),n.uc(i=n.fc())&&(t.addressesComponents=i),n.uc(i=n.fc())&&(t.contactsComponents=i))},inputs:{model:"model",mode:"mode",isInnerUser:"isInnerUser"},outputs:{cancel:"cancel"},decls:22,vars:10,consts:[["id","accordion",3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","org-data"],["ngbPanelHeader",""],["id","body","ngbPanelContent",""],["id","contacts"],["id","headquarters"],["id","address"],["id","doc",4,"ngIf"],["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-1",4,"ngIf"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],[3,"url"],["signModal",""],["title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u0442\u043e \u0431\u0435\u0448\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0435\u043d\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e",3,"icon","showConfirmButton"],["successSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["novalidate","",1,"was-validated"],["orgForm","ngForm"],[1,"row"],[1,"col-lg-4"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","col-lg-4",4,"ngIf"],["class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",3,"click",4,"ngIf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],[1,"fas","fa-plus"],[3,"disabled"],[4,"ngFor","ngForOf"],[1,"col-lg-12"],[1,"d-flex","justify-content-between"],[1,"font-weight-bold"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[1,"fas","fa-trash-alt"],[3,"model"],[1,"border","border-primary"],[3,"isExpanded","addressData","formStatusValidChanged"],["id","doc"],["class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432 \u0440\u0435\u0434","container","body","placement","left",3,"click",4,"ngIf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432 \u0440\u0435\u0434","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],["class","row",4,"ngFor","ngForOf"],["docsForm","ngForm"],[1,"col-md-4"],[1,"doc","alert","alert-primary",3,"click"],[1,"col-md-7"],[1,"col-md-1"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","rounded-circle","mt-1","ml-4",3,"hidden","click"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange",4,"ngIf"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-1"],["type","button","class","btn btn-primary mr-2","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",3,"click",4,"ngIf"],["type","button","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-plus","text-warning"],["type","button","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-pen-fancy","mr-1"]],template:function(e,t){1&e&&(n.Sb(0,"ngb-accordion",0,1),n.Sb(2,"ngb-panel",2),n.Ec(3,P,8,5,"ng-template",3),n.Ec(4,j,8,7,"ng-template",4),n.Rb(),n.Sb(5,"ngb-panel",5),n.Ec(6,k,9,6,"ng-template",3),n.Ec(7,q,2,2,"ng-template",4),n.Rb(),n.Sb(8,"ngb-panel",6),n.Ec(9,G,8,5,"ng-template",3),n.Ec(10,V,1,2,"ng-template",4),n.Rb(),n.Sb(11,"ngb-panel",7),n.Ec(12,B,8,5,"ng-template",3),n.Ec(13,H,1,2,"ng-template",4),n.Rb(),n.Ec(14,J,3,0,"ngb-panel",8),n.Rb(),n.Ec(15,ne,6,4,"div",9),n.Sb(16,"app-action-tasks-list",10,11),n.ec("closeEvent",(function(){return t.onCloseActionModal()})),n.Rb(),n.Nb(18,"app-main-sign-modal",12,13),n.Nb(20,"swal",14,15)),2&e&&(n.mc("destroyOnHide",!1)("activeIds",n.pc(9,oe)),n.zb(14),n.mc("ngIf",!t.isInnerUser),n.zb(1),n.mc("ngIf","R"!=t.mode),n.zb(1),n.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),n.zb(2),n.mc("url",t.signUrl),n.zb(2),n.mc("icon","success")("showConfirmButton",!0))},directives:[I.a,I.I,I.K,I.J,v.u,R.a,T.a,w.a,I.M,N.D,N.p,N.q,y.a,N.o,N.r,E.a,I.ab,v.t,r.a,a.a,x.a],pipes:[O.d],styles:["[_nghost-%COMP%]     #accordion>div>div.card-header, [_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:.5rem}"]}),e})()},YQDf:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mrSG"),n=i("hnrn");let o=(()=>{class e{constructor(e){Object.assign(this,e||{})}get id(){return this.pId}set id(e){this.pId=e}get name(){return this.pName}set name(e){this.pName=e}get description(){return this.pDescription}set description(e){this.pDescription=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get validFrom(){return this.pValidFrom}set validFrom(e){this.pValidFrom=e}get validTo(){return this.pValidTo}set validTo(e){this.pValidTo=e}get altRoleId(){return this.pAltRoleId}set altRoleId(e){this.pAltRoleId=e}get flagIntOut(){return this.pFlagIntOut}set flagIntOut(e){this.pFlagIntOut=e}get isSelected(){return this.pIsSelected}set isSelected(e){this.pIsSelected=e}}return e.url="TrnRoles",e.publicUrl="Public/TrnRoles",Object(s.b)([Object(n.b)({alias:"id"})],e.prototype,"pId",void 0),Object(s.b)([Object(n.b)({alias:"name"})],e.prototype,"pName",void 0),Object(s.b)([Object(n.b)({alias:"description"})],e.prototype,"pDescription",void 0),Object(s.b)([Object(n.b)({alias:"dateCreated"})],e.prototype,"pDateCreated",void 0),Object(s.b)([Object(n.b)({alias:"validFrom"})],e.prototype,"pValidFrom",void 0),Object(s.b)([Object(n.b)({alias:"validTo"})],e.prototype,"pValidTo",void 0),Object(s.b)([Object(n.b)({alias:"altRoleId"})],e.prototype,"pAltRoleId",void 0),Object(s.b)([Object(n.b)({alias:"flagIntOut"})],e.prototype,"pFlagIntOut",void 0),e})()},bgjn:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("mrSG"),n=i("WCP0"),o=i("KQ7d"),a=i("ozDz"),r=i("xMVv"),c=i("pLGQ"),d=i("Xh5w"),l=i("+QWa");class m{constructor(e){this.crudService=e}loadData(e){return Object(s.a)(this,void 0,void 0,(function*(){const t={};if(t.org=yield this.loadOrganization(e),"I"===t.org.indOrEntity){const e=t.org.name.split(" ");switch(e.length){case 1:t.org.firstName=e[0];break;case 2:t.org.firstName=e[0],t.org.lastName=e[1];break;case 3:t.org.firstName=e[0],t.org.midName=e[1],t.org.lastName=e[2]}}return t.contacts=yield this.loadContactsByOrnId(t.org.id),t.headquarters=yield this.loadAddressByTypeAndId("D",t.org.id),t.address=yield this.loadAddressByTypeAndId("R",t.org.id),t.docsMetaData=(yield this.loadAttachedDocumentMetaData(t.org.id)).pageContent,null!=t.contacts&&0!==t.contacts.length||(t.contacts=[new o.a]),null!=t.docsMetaData&&0!==t.docsMetaData.length||(t.docs=[{index:Object(l.a)()}]),t}))}loadDocument(e){return this.crudService.loadFile(d.a.url,e).toPromise()}loadOrganization(e){return Object(s.a)(this,void 0,void 0,(function*(){return yield this.crudService.loadById(n.a,n.a.url,e).toPromise()}))}loadContactsByOrnId(e){return Object(s.a)(this,void 0,void 0,(function*(){return yield this.crudService.loadByParam(o.a,o.a.urlOrg,e).toPromise()}))}loadAddressByTypeAndId(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.crudService.loadByParam(a.a,a.a.byOrnAndTypeUrl,t+"/"+e).toPromise();if(i&&i.length>0){const e=(yield this.loadRealAddressProperties(i[0])).pageContent[0];return this.createRealAddress(i[0],e)}return new c.a}))}createRealAddress(e,t){const i=new c.a({});return i.trnOrnAddrId=e.id,i.address=e.address,i.email=e.email,i.webpage=e.webpage,i.popEknm=t.popEknm,i.distEknm=t.distEknm,i.terCode=t.terCode,i}loadRealAddressProperties(e){return Object(s.a)(this,void 0,void 0,(function*(){return this.crudService.loadByFind(r.a,r.a.publicUrl,{popEknm:e.eknm}).toPromise()}))}loadAttachedDocumentMetaData(e){return this.crudService.loadByParamsInPaging(d.a,d.a.urlOrgId,`orgId=${e}&offset=0&size=50`).toPromise()}}},"c1/s":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{static validate(e,t){const i={status:!0,message:""};return e&&0!==e.length||!t?e&&e.length>0&&!this.isNumber(e)?(i.status=!1,i.message="fi.lnch.error.numOnly",i):e&&e.length>0&&!this.validateLNCH(e)?(i.status=!1,i.message="fi.lnch.error.valid",i):i:(i.status=!1,i.message="fi.lnch.error.required",i)}static isNumber(e){return e.match(/^\d+$/)}static validateLNCH(e){return 10===e.length&&!!this.isValidLnch(e)}static isValidLnch(e){const t=parseInt(e.substr(9,1),10);return(parseInt(e.substr(0,1),10)+9*parseInt(e.substr(1,1),10)+7*parseInt(e.substr(2,1),10)+3*parseInt(e.substr(3,1),10)+parseInt(e.substr(4,1),10)+9*parseInt(e.substr(5,1),10)+7*parseInt(e.substr(6,1),10)+3*parseInt(e.substr(7,1),10)+parseInt(e.substr(8,1),10))%10===t}}},c1MP:function(e,t,i){"use strict";i.d(t,"a",(function(){return U}));var s=i("mrSG"),n=i("fXoL"),o=i("CR6u"),a=i("/iu+"),r=i("EcjI"),c=i("Xh5w"),d=i("u1cU"),l=i("9GxP"),m=i("aTmD"),u=i("lB+K"),b=i("34DR"),f=i("PSD3"),h=i.n(f),p=i("BYCZ"),g=i("ZRIf"),D=i("4XRX"),S=i("3Pt+"),I=i("TTlI"),v=i("lp4E"),R=i("Bz/w"),T=i("ofXK"),w=i("QCcn"),N=i("jtLl"),y=i("1kSV"),E=i("Mtn9");const x=["actionList"],O=["signModal"];function C(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",18),n.ec("click",(function(){n.wc(e);const t=n.gc(2);return t.onDeleteDocMetaData(t.docMetadata.id)})),n.Nb(1,"i",19),n.Rb()}if(2&e){const e=n.gc(2);n.mc("disabled",e.formDisabled)}}function M(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",14),n.Sb(1,"label"),n.Gc(2,"\u041f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e"),n.Rb(),n.Sb(3,"div",15),n.Sb(4,"h6",16),n.ec("click",(function(){n.wc(e);const t=n.gc();return t.downloadFile(t.docMetadata.id,t.docMetadata.fileName)})),n.Gc(5),n.Rb(),n.Ec(6,C,2,1,"button",17),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(5),n.Ic(" ",e.docMetadata.fileName," "),n.zb(1),n.mc("ngIf","R"!==e.mode)}}function F(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",4),n.Sb(1,"app-fi-file-browse",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().editModel.file=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.editModel.file)("formItemDef",e.formDefs[6])("name",e.formDefs[6].domName)("showClearBtn",!1)}}function A(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",4),n.Sb(1,"app-fi-file-browse",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().editModel.signedDoc=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(1),n.mc("ngModel",e.editModel.signedDoc)("formItemDef",e.formDefs[7])("name",e.formDefs[7].domName)("showClearBtn",!1)}}function z(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",27),n.ec("click",(function(){return n.wc(e),n.gc(2).onBackToEdit()})),n.Nb(1,"i",28),n.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),n.Rb()}}function P(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",29),n.ec("click",(function(){return n.wc(e),n.gc(2).onSaveForm()})),n.Nb(1,"i",30),n.Gc(2," \u0417\u0430\u043f\u0438\u0441 "),n.Rb()}}function _(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",31),n.ec("click",(function(){return n.wc(e),n.gc(2).onSignForm()})),n.Nb(1,"i",32),n.Gc(2," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 "),n.Rb()}}function j(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",21),n.Sb(1,"div"),n.Sb(2,"button",22),n.ec("click",(function(){return n.wc(e),n.gc().onCancelForm()})),n.Nb(3,"i",23),n.Gc(4," \u041e\u0442\u043a\u0430\u0437 "),n.Rb(),n.Ec(5,z,3,0,"button",24),n.Rb(),n.Ec(6,P,3,0,"button",25),n.Ec(7,_,3,0,"button",26),n.Rb()}if(2&e){const e=n.gc();n.zb(5),n.mc("ngIf",e.formDisabled&&"EE"==e.mode&&("01"==(null==e.model?null:e.model.statusCode)||"02"==(null==e.model?null:e.model.statusCode)&&"Y"===(null==e.model?null:e.model.isSigned))),n.zb(1),n.mc("ngIf",!e.formDisabled),n.zb(1),n.mc("ngIf",e.formDisabled&&"N"===e.model.isSigned)}}let U=(()=>{class e{constructor(e,t,i){this.generator=e,this.crudService=t,this.sessionService=i,this.RED="#dc3545",this.WARNING="warning",this.SUCCESS="success",this.mode=o.a.EDIT_EXTERNAL,this.model=new a.a,this.cancel=new n.n,this.updated=new n.n,this.formDefs=[],this.editModel={},this.docMetadata=null,this.isActionListReady=!1,this.isActionListSuccess=!1,this.pFormDisabled=!1,this.usersSaver=new b.a(t)}get formDisabled(){return this.pFormDisabled}set formDisabled(e){this.pFormDisabled=e,e?Object(r.c)(this.formDefs,e):this.setFormDefinitions()}ngOnInit(){this.setSignUrl(),this.loadDoc(),this.setFormDefinitions(),this.formDisabled=!0}onCancelForm(){this.cancel.emit(null)}onSuccUpdate(){this.updated.emit(null)}onSaveForm(){if(null!=this.editModel.file&&null==this.editModel.signedDoc)return void h.a.fire({title:"\u0417\u0430 \u0434\u0430 \u043a\u0430\u0447\u0438\u0442\u0435 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e, \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u043a\u0430\u0447\u0438\u0442\u0435 \u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d \u0444\u0430\u0439\u043b!",icon:"warning"}).then();if(!("03"!==this.editModel.newStatus&&"04"!==this.editModel.newStatus||null!=this.editModel.note&&0!==this.editModel.note.lenght))return void h.a.fire({title:"\u041f\u043e\u043b\u0435\u0442\u043e \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430 \u043e\u0442\u043a\u0430\u0437 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e, \u043a\u043e\u0433\u0430\u0442\u043e \u043d\u043e\u0432\u0438\u044f\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 \u0435 '\u041e\u0442\u0445\u0432\u044a\u0440\u043b\u0435\u043d\u0430' \u0438\u043b\u0438 '\u041f\u0440\u0435\u043a\u0440\u0430\u0442\u0435\u043d\u0430'!",icon:"warning"}).then();const e={trnUsrOrgId:this.model.id,file:this.editModel.file,signedFile:this.editModel.signedDoc,status:this.editModel.newStatus?this.editModel.newStatus:this.model.statusCode,notes:this.editModel.note,email:this.model.email,roleId:this.model.roleId,orgId:this.getOrgId()},t=this.editModel.file;this.prepareSaveActions(t),this.actionList.open(),this.usersSaver.updateUserOrgRel(e,this.actions,t).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.onSuccUpdate()})}onSignForm(){null!=this.model.id?this.signModal.open():h.a.fire({title:"\u041d\u044f\u043c\u0430 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d \u0437\u0430\u043f\u0438\u0441. \u041c\u043e\u043b\u044f \u043e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e!",icon:"warning"}).then()}onBackToEdit(){this.formDisabled=!1}downloadFile(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.crudService.loadFile(c.a.url,e).toPromise();Object(d.a)(i,t)}))}onDeleteDocMetaData(e){null!=this.docMetadata&&h.a.fire({title:u.a.TITLE_DELETE_FILE,text:u.a.TEXT_DELETE_FILE,icon:this.WARNING,showConfirmButton:!0,confirmButtonText:u.a.CONFIRM_BUTTON_TEXT,showCancelButton:!0,cancelButtonText:u.a.CANCEL_BUTTON_TEXT,cancelButtonColor:this.RED,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&this.usersSaver.deleteDocument(e).subscribe(e=>{this.docMetadata=null,this.editModel.file=null,this.editModel.signedDoc=null})})}onCloseActionModal(){this.onCancelForm()}loadDoc(){this.crudService.loadByParamsInPaging(c.a,c.a.urlUsrOrgId,`usrOrnId=${this.model.id}&offset=0&size=50`).subscribe(e=>{this.docMetadata=e.pageContent[0]})}setFormDefinitions(){this.formDefs=this.loadFormDef()}loadFormDef(){let e=[],t=!0;switch("admin_profile"!==this.getCurrenRole()&&(t=!1),"02"===this.model.statusCode&&"Y"===this.model.isSigned&&(t=!1),this.mode){case o.a.EDIT_EXTERNAL:default:e=this.generator.getUserOrgRelExDefs(this.model.statusCode,t)}return e}getCurrenRole(){const e=this.sessionService.getOrganization();if(!e)return null;const t=this.sessionService.getUserInfo();if(!t)return null;const i=t.activeOrganizations.find(t=>t.id===e.id);return i?i.roleName:null}getOrgId(){const e=this.sessionService.getOrganization();return e?e.id:null}prepareSaveActions(e){this.actions=[],this.actions.push(new l.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043c\u043e\u043b\u0431\u0430 \u0437\u0430 \u0432\u043a\u043b\u044e\u0447\u0432\u0430\u043d\u0435 \u0432 \u0435\u043a\u0438\u043f",m.a.WORKING,!1)),e&&this.actions.push(new l.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043f\u044a\u043b\u043d\u043e\u043c\u043e\u0449\u043d\u043e",m.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}setSignUrl(){null!=this.model.id&&(this.signUrl=`TrnDocTransitions/userOrganization/${this.model.id}/sign/doc`)}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(p.a),n.Mb(g.a),n.Mb(D.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-user-org-rel"]],viewQuery:function(e,t){var i;1&e&&(n.Nc(x,!0),n.Nc(O,!0)),2&e&&(n.uc(i=n.fc())&&(t.actionList=i.first),n.uc(i=n.fc())&&(t.signModal=i.first))},inputs:{mode:"mode",model:"model"},outputs:{cancel:"cancel",updated:"updated"},decls:31,vars:35,consts:[[1,"container-fluid"],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row"],[1,"col-lg-4"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange"],["class","col-md-4",4,"ngIf"],["class","col-lg-4",4,"ngIf"],["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-1",4,"ngIf"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],[3,"url"],["signModal",""],[1,"col-md-4"],[1,"d-flex","justify-content-between","alert","alert-primary","py-1"],[1,"doc","my-auto",3,"click"],["type","button","class","btn btn-sm btn-outline-secondary rounded-circle","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",3,"disabled","click",4,"ngIf"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"disabled","click"],[1,"fas","fa-trash-alt"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-1"],["type","button","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","class","btn btn-primary mr-2","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",3,"click",4,"ngIf"],["type","button","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","text-warning"],["type","button","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-pen-fancy","mr-1"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"form",1,2),n.Sb(3,"div",3),n.Sb(4,"div",4),n.Sb(5,"app-fi-input-text",5),n.ec("ngModelChange",(function(e){return t.model.firstName=e})),n.Rb(),n.Rb(),n.Sb(6,"div",4),n.Sb(7,"app-fi-input-text",5),n.ec("ngModelChange",(function(e){return t.model.midName=e})),n.Rb(),n.Rb(),n.Sb(8,"div",4),n.Sb(9,"app-fi-input-text",5),n.ec("ngModelChange",(function(e){return t.model.lastName=e})),n.Rb(),n.Rb(),n.Rb(),n.Sb(10,"div",3),n.Sb(11,"div",4),n.Sb(12,"app-fi-input-email",5),n.ec("ngModelChange",(function(e){return t.model.email=e})),n.Rb(),n.Rb(),n.Sb(13,"div",4),n.Sb(14,"app-fi-input-text",5),n.ec("ngModelChange",(function(e){return t.model.statusDescription=e})),n.Rb(),n.Rb(),n.Rb(),n.Sb(15,"div",3),n.Sb(16,"div",4),n.Sb(17,"app-fi-select-dropdown",6),n.ec("ngModelChange",(function(e){return t.model.roleId=e})),n.Rb(),n.Rb(),n.Ec(18,M,7,2,"div",7),n.Ec(19,F,2,4,"div",8),n.Ec(20,A,2,4,"div",8),n.Rb(),n.Sb(21,"div",3),n.Sb(22,"div",4),n.Sb(23,"app-fi-select-dropdown",6),n.ec("ngModelChange",(function(e){return t.editModel.newStatus=e})),n.Rb(),n.Rb(),n.Sb(24,"div",4),n.Sb(25,"app-fi-input-text",5),n.ec("ngModelChange",(function(e){return t.editModel.note=e})),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Ec(26,j,8,3,"div",9),n.Rb(),n.Sb(27,"app-action-tasks-list",10,11),n.ec("closeEvent",(function(){return t.onCloseActionModal()})),n.Rb(),n.Nb(29,"app-main-sign-modal",12,13)),2&e&&(n.zb(5),n.mc("ngModel",t.model.firstName)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName),n.zb(2),n.mc("ngModel",t.model.midName)("formItemDef",t.formDefs[1])("name",t.formDefs[1].domName),n.zb(2),n.mc("ngModel",t.model.lastName)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName),n.zb(3),n.mc("ngModel",t.model.email)("formItemDef",t.formDefs[3])("name",t.formDefs[3].domName),n.zb(2),n.mc("ngModel",t.model.statusDescription)("formItemDef",t.formDefs[4])("name",t.formDefs[4].domName),n.zb(3),n.mc("ngModel",t.model.roleId)("formItemDef",t.formDefs[5])("labelFieldName","description")("valueFieldName","id")("name",t.formDefs[5].domName),n.zb(1),n.mc("ngIf",t.docMetadata),n.zb(1),n.mc("ngIf",!t.docMetadata),n.zb(1),n.mc("ngIf",!t.docMetadata),n.zb(3),n.mc("ngModel",t.editModel.newStatus)("formItemDef",t.formDefs[8])("labelFieldName","description")("valueFieldName","code")("name",t.formDefs[8].domName),n.zb(2),n.mc("ngModel",t.editModel.note)("formItemDef",t.formDefs[9])("name",t.formDefs[9].domName),n.zb(1),n.mc("ngIf","R"!=t.mode),n.zb(1),n.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),n.zb(2),n.mc("url",t.signUrl))},directives:[S.D,S.p,S.q,I.a,S.o,S.r,v.a,R.a,T.u,w.a,N.a,y.ab,E.a],styles:[""]}),e})()},jRw1:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(){}get colHeader(){return this.pColHeader}set colHeader(e){this.pColHeader=e}get btnClass(){return this.pBtnClass}set btnClass(e){this.pBtnClass=e}get labelText(){return this.pLabelText}set labelText(e){this.pLabelText=e}get tooltipText(){return this.pTooltipText}set tooltipText(e){this.pTooltipText=e}get showIcon(){return this.pShowIcon}set showIcon(e){this.pShowIcon=e}get icon(){return this.pIcon}set icon(e){this.pIcon=e}get rowCondition(){return this.pRowCondition}set rowCondition(e){this.pRowCondition=e}get conditionField(){return this.pConditionField}set conditionField(e){this.pConditionField=e}get conditionValue(){return this.pConditionValue}set conditionValue(e){this.pConditionValue=e}}},mdCJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("mrSG"),n=i("hnrn"),o=i("XDeO");let a=(()=>{class e{constructor(e){e&&(this.id=e.id,this.name=e.name,this.nameEn=e.nameEn,this.bulstat=e.bulstat,this.note=e.note,this.type=e.type,this.confirmed=e.confirmed,this.dcode=e.dcode,this.egn=e.egn,this.indCode=e.indCode,this.indOrEntity=e.indOrEntity,this.riosCode=e.riosCode,this.sdtId=e.sdtId,this.dateCreated=o.a.getAnyAsTimestampModel(e.dateCreated),this.dateExpired=o.a.getAnyAsTimestampModel(e.dateExpired),this.validationType=e.validationType,this.email=e.email,this.firstName=e.firstName,this.midName=e.midName,this.lastName=e.lastName)}get id(){return this.pId}set id(e){this.pId=e}get name(){return this.pName}set name(e){this.pName=e}get nameEn(){return this.pNameEn}set nameEn(e){this.pNameEn=e}get bulstat(){return this.pBulstat}set bulstat(e){this.pBulstat=e}get note(){return this.pNote}set note(e){this.pNote=e}get type(){return this.pType}set type(e){this.pType=e}get confirmed(){return this.pConfirmed}set confirmed(e){this.pConfirmed=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get dateExpired(){return this.pDateExpired}set dateExpired(e){this.pDateExpired=e}get dcode(){return this.pDcode}set dcode(e){this.pDcode=e}get egn(){return this.pEgn}set egn(e){this.pEgn=e}get indCode(){return this.pIndCode}set indCode(e){this.pIndCode=e}get indOrEntity(){return this.pIndOrEntity}set indOrEntity(e){this.pIndOrEntity=e}get riosCode(){return this.pRiosCode}set riosCode(e){this.pRiosCode=e}get sdtId(){return this.pSdtId}set sdtId(e){this.pSdtId=e}get label(){return`${this.name}, \u0415\u0418\u041a: ${this.pBulstat}`}get fullView(){return`${this.bulstat} - ${this.name}`}get firstName(){return this.pFirstName}set firstName(e){this.pFirstName=e}get midName(){return this.pMidName}set midName(e){this.pMidName=e}get lastName(){return this.pLastName}set lastName(e){this.pLastName=e}get validationType(){return this.pValidationType}set validationType(e){this.pValidationType=e}get fullName(){let e=this.firstName.trim()+" ";return this.midName&&(e+=this.midName.trim()+" "),e+this.lastName.trim()}get email(){return this.pEmail}set email(e){this.pEmail=e}}return e.url="TrnOrganizations",Object(s.b)([Object(n.b)({alias:"name"})],e.prototype,"pName",void 0),Object(s.b)([Object(n.b)({alias:"nameEn"})],e.prototype,"pNameEn",void 0),Object(s.b)([Object(n.b)({alias:"bulstat"})],e.prototype,"pBulstat",void 0),Object(s.b)([Object(n.b)({alias:"note"})],e.prototype,"pNote",void 0),Object(s.b)([Object(n.b)({alias:"type"})],e.prototype,"pType",void 0),Object(s.b)([Object(n.b)({alias:"dCode"})],e.prototype,"pDcode",void 0),Object(s.b)([Object(n.b)({alias:"egn"})],e.prototype,"pEgn",void 0),Object(s.b)([Object(n.b)({alias:"indCode"})],e.prototype,"pIndCode",void 0),Object(s.b)([Object(n.b)({alias:"indOrEntity"})],e.prototype,"pIndOrEntity",void 0),Object(s.b)([Object(n.b)({alias:"riosCode"})],e.prototype,"pRiosCode",void 0),Object(s.b)([Object(n.b)({alias:"validationType"})],e.prototype,"pValidationType",void 0),Object(s.b)([Object(n.b)({alias:"email"})],e.prototype,"pEmail",void 0),e})()},qHdK:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var s=i("lB+K"),n=i("mrSG"),o=i("hnrn");let a=(()=>{class e{constructor(e){e&&(this.newPassword=e.newPassword,this.oldPassword=e.oldPassword)}get newPassword(){return this.pNewPassword}set newPassword(e){this.pNewPassword=e}get oldPassword(){return this.pOldPassword}set oldPassword(e){this.pOldPassword=e}}return e.url="TrnUsers/changePassword",Object(n.b)([Object(o.b)({alias:"newPassword"})],e.prototype,"pNewPassword",void 0),Object(n.b)([Object(o.b)({alias:"oldPassword"})],e.prototype,"pOldPassword",void 0),e})();var r=i("fXoL"),c=i("1kSV"),d=i("dEii"),l=i("122/"),m=i("ZRIf"),u=i("rC+L"),b=i("3Pt+"),f=i("RP2b"),h=i("ofXK"),p=i("sYmb");const g=["changePass"];function D(e,t){if(1&e){const e=r.Tb();r.Sb(0,"div",17),r.Sb(1,"div",18),r.Sb(2,"small",19),r.Sb(3,"b"),r.Gc(4,"\u0413\u0440\u0435\u0448\u043a\u0430"),r.Rb(),r.Rb(),r.Sb(5,"button",20),r.ec("click",(function(){return r.wc(e),r.gc(2).removeAlert()})),r.Sb(6,"span",4),r.Gc(7,"\xd7"),r.Rb(),r.Rb(),r.Rb(),r.Sb(8,"small"),r.Gc(9),r.Rb(),r.Rb()}if(2&e){const e=r.gc(2);r.zb(9),r.Ic(" ",e.error," ")}}function S(e,t){if(1&e){const e=r.Tb();r.Sb(0,"div",1),r.Sb(1,"h4",2),r.Gc(2,"\u0421\u043c\u044f\u043d\u0430 \u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u0430"),r.Rb(),r.Sb(3,"button",3),r.ec("click",(function(){r.wc(e);const i=t.$implicit;return r.vc(10).reset(),i.dismiss("Cross click")})),r.Sb(4,"span",4),r.Gc(5,"\xd7"),r.Rb(),r.Rb(),r.Rb(),r.Sb(6,"div",5),r.Sb(7,"fieldset",6),r.Sb(8,"app-fi-input-password",7),r.ec("ngModelChange",(function(t){return r.wc(e),r.gc().model.oldPassword=t})),r.Rb(),r.Sb(9,"form",8,9),r.Sb(11,"app-fi-input-password",10),r.ec("ngModelChange",(function(t){return r.wc(e),r.gc().model.newPassword=t})),r.Rb(),r.Sb(12,"app-fi-input-confirm-pass",11),r.ec("ngModelChange",(function(t){return r.wc(e),r.gc().model.confirmNewPassword=t})),r.Rb(),r.Rb(),r.Rb(),r.Ec(13,D,10,1,"div",12),r.Rb(),r.Sb(14,"div",13),r.Sb(15,"div",14),r.Sb(16,"button",15),r.ec("click",(function(){r.wc(e);const i=t.$implicit;return r.vc(10).reset(),i.close("Close click")})),r.hc(17,"translate"),r.Gc(18),r.hc(19,"translate"),r.Rb(),r.Sb(20,"button",16),r.ec("click",(function(){r.wc(e);const t=r.vc(10);return r.gc().onSave(t)})),r.hc(21,"translate"),r.Gc(22),r.hc(23,"translate"),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=r.vc(10),t=r.gc();r.zb(7),r.mc("disabled",t.formDisabled),r.zb(1),r.mc("ngModel",t.model.oldPassword)("formItemDef",t.formDefs[0])("name",t.formDefs[0].domName)("validateValue",!1),r.zb(3),r.mc("ngModel",t.model.newPassword)("formItemDef",t.formDefs[1])("name",t.formDefs[1].domName),r.zb(1),r.mc("ngModel",t.model.confirmNewPassword)("formItemDef",t.formDefs[2])("name",t.formDefs[2].domName)("password",t.model.newPassword),r.zb(1),r.mc("ngIf",t.error),r.zb(3),r.nc("ngbTooltip",r.ic(17,18,"buttons.cancel.tooltip")),r.zb(2),r.Hc(r.ic(19,20,"buttons.cancel.label")),r.zb(2),r.nc("ngbTooltip",r.ic(21,22,"buttons.saveChanges.tooltip")),r.mc("disabled",!e.valid||!t.model.oldPassword||0===t.model.oldPassword.length||t.formDisabled),r.zb(2),r.Ic(" ",r.ic(23,24,"buttons.saveChanges.label")," ")}}let I=(()=>{class e{constructor(e,t,i,s){this.modalService=e,this.alertService=t,this.generator=i,this.crudService=s,this.model={},this.formDefs=[],this.error=null,this.formDisabled=!1}ngOnInit(){this.formDefs=this.generator.getChangePassFormModel()}openModal(){this.removeAlert(),this.formDisabled=!1,this.modalReference=this.modalService.open(this.modal,{centered:!0,backdrop:"static",keyboard:!1})}onSave(e){if(this.error=this.checkPassword(this.model.oldPassword,this.model.newPassword,this.model.confirmNewPassword),this.error&&this.error.length>0)return;const t=new a({newPassword:this.model.newPassword,oldPassword:this.model.oldPassword});this.formDisabled=!0,this.crudService.updateCurrentData(a.url,t).subscribe(t=>{e.reset(),this.modalReference.close(),this.alertService.success(s.a.SUCCESS_MSG)},e=>{this.formDisabled=!1,this.error=s.a.ERROR_RESEST_PASS})}removeAlert(){this.error=null}checkPassword(e,t,i){return null==t?"\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0430":null!=i&&t!==i?"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0435\u043d\u0430 \u0440\u0430\u0437\u043b\u0438\u043a\u0430 \u0432\u044a\u0432 \u0432\u044a\u0432\u0435\u0434\u0435\u043d\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0438":null!=e&&e===t?"\u041d\u043e\u0432\u0430\u0442\u0430 \u0438 \u0441\u0442\u0430\u0440\u0430\u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u0430 \u0441\u0430 \u0435\u0434\u043d\u0430\u043a\u0432\u0438":null}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(c.t),r.Mb(d.a),r.Mb(l.a),r.Mb(m.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-change-password-modal"]],viewQuery:function(e,t){var i;1&e&&r.Nc(g,!0),2&e&&r.uc(i=r.fc())&&(t.modal=i.first)},decls:2,vars:0,consts:[["changePass",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"disabled"],[3,"ngModel","formItemDef","name","validateValue","ngModelChange"],["novalidate","",1,"was-validated"],["form","ngForm"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","formItemDef","name","password","ngModelChange"],["class","alert alert-danger alert-dismissable mx-0 my-2",4,"ngIf"],[1,"modal-footer","d-block"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary","mr-2",3,"ngbTooltip","click"],["type","button",1,"btn","btn-outline-secondary",3,"ngbTooltip","disabled","click"],[1,"alert","alert-danger","alert-dismissable","mx-0","my-2"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],["type","button",1,"close",3,"click"]],template:function(e,t){1&e&&r.Ec(0,S,24,26,"ng-template",null,0,r.Fc)},directives:[u.a,b.o,b.r,b.D,b.p,b.q,f.a,h.u,c.ab],pipes:[p.d],styles:[""]}),e})()},qW6x:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("uWK1"),n=i("lJxs"),o=i("JIr8"),a=i("z6cu"),r=i("lB+K"),c=i("fXoL"),d=i("dEii");let l=(()=>{class e extends s.a{constructor(e,t){super(e,""),this.alertService=t}register(e,t){return this.save(e,t).pipe(Object(n.a)(e=>e),Object(o.a)(e=>{var t;const i=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message;return this.alertService.error(i||r.a.ERROR_REGISTRATION,e),Object(a.a)(e)}))}activation(e,t){return this.save(`${e}/${t}`,{}).pipe(Object(n.a)(e=>e),Object(o.a)(e=>Object(a.a)(e)))}}return e.\u0275fac=function(t){return new(t||e)(c.ac(c.r),c.ac(d.a))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"rC+L":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("fXoL"),n=i("3Pt+"),o=i("F7pt"),a=i("ofXK"),r=i("sYmb");const c=["inputPwd"],d=function(e){return{"is-invalid":e}},l=function(e,t){return{"fa-eye-slash":e,"fa-eye":t}};let m=(()=>{class e{constructor(){this.errorMessage="",this.formItemDef=null,this.validateValue=!0,this.fieldPwdTextType=!1,this.isValid=!1,this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new o.a}set value(e){this.val=e,this.onChange(this.val),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){const t=e.value,i=class{static validate(e){if(null==e)return["\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0430"];const t=/^[A-Z]+$/,i=/^[a-z]+$/,s=/^[0-9]+$/,n=/^[!@#$%^&*()_+]+$/,o=e.length;if(o<8)return["fi.password.customErrors.minLength"];let a="";const r=[];let c=0,d=0,l=0,m=0,u=0;for(let f=0;f<o;f++){const o=e[f];o===a?c++:c>0&&(r.push(c+1),c=0),a=o,t.test(o)&&d++,i.test(o)&&l++,s.test(o)&&m++,n.test(o)&&u++}c>0&&r.push(c+1);const b=[];return Math.max(...r)>2&&b.push("fi.password.customErrors.nearChars"),d+l+m+u!==o&&b.push("fi.password.customErrors.wrongSpec"),d<2&&b.push("fi.password.customErrors.minAlphaUp"),l<1&&b.push("fi.password.customErrors.minAlphaLow"),m<2&&b.push("fi.password.customErrors.minDig"),u<1&&b.push("fi.password.customErrors.minSpec"),b}}.validate(t);return!this.formItemDef.isRequired||null!=e.value&&0!==e.value.length?i.length>0&&this.validateValue?(this.inputPwd.nativeElement.setCustomValidity("error"),this.errorMessage=i[0],this.isValid=!1,{pwd:!0}):(this.inputPwd.nativeElement.setCustomValidity(""),this.errorMessage="",this.isValid=!0,null):(this.inputPwd.nativeElement.setCustomValidity("error"),this.errorMessage="fi.confirmPass.error.required",this.isValid=!1,{required:!0})}onClickPwdEyeBtn(){this.fieldPwdTextType=!this.fieldPwdTextType}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-password"]],viewQuery:function(e,t){var i;1&e&&s.Nc(c,!0),2&e&&s.uc(i=s.fc())&&(t.inputPwd=i.first)},inputs:{formItemDef:"formItemDef",validateValue:"validateValue",value:"value"},features:[s.yb([{provide:n.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:n.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:20,vars:27,consts:[[1,"form-group"],[3,"for"],[1,"input-group","mb-1"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-lock"],["aria-label","label","autocomplete","off",1,"form-control",3,"ngClass","type","id","name","placeholder","required","pattern","disabled","ngModel","ngModelChange"],["inputPwd",""],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fa",3,"ngClass"],[1,"invalid-feedback"],["id","input-text-1-Help",1,"form-text","text-muted"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"label",1),s.Gc(2),s.hc(3,"translate"),s.Rb(),s.Sb(4,"div",2),s.Sb(5,"div",3),s.Sb(6,"span",4),s.Nb(7,"i",5),s.Rb(),s.Rb(),s.Sb(8,"input",6,7),s.ec("ngModelChange",(function(e){return t.value=e})),s.hc(10,"translate"),s.Rb(),s.Sb(11,"div",8),s.Sb(12,"span",9),s.ec("click",(function(){return t.onClickPwdEyeBtn()})),s.Nb(13,"i",10),s.Rb(),s.Rb(),s.Sb(14,"div",11),s.Gc(15),s.hc(16,"translate"),s.Rb(),s.Rb(),s.Sb(17,"small",12),s.Gc(18),s.hc(19,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("for",t.formItemDef.domId),s.zb(1),s.Hc(s.ic(3,14,t.formItemDef.labelText)),s.zb(6),s.nc("placeholder",s.ic(10,16,t.formItemDef.placeHolderText)),s.mc("ngClass",s.qc(22,d,!t.isValid))("type",t.fieldPwdTextType?"text":"password")("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("pattern",t.formItemDef.pattern)("disabled",t.formItemDef.isDisabled)("ngModel",t.value),s.zb(5),s.mc("ngClass",s.rc(24,l,!t.fieldPwdTextType,t.fieldPwdTextType)),s.zb(2),s.Ic(" ",s.ic(16,18,t.errorMessage)," "),s.zb(3),s.Hc(s.ic(19,20,t.formItemDef.helpText)))},directives:[n.c,a.r,n.z,n.v,n.o,n.r],pipes:[r.d],styles:[""]}),e})()},"s2+o":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var s=i("fXoL"),n=i("3Pt+"),o=i("F7pt"),a=i("c1/s"),r=i("r3bP"),c=i("1kSV"),d=i("ofXK"),l=i("sYmb");const m=["inputComponent"];function u(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",12),s.Sb(1,"button",13),s.ec("click",(function(){return s.wc(e),s.gc().onSearch()})),s.hc(2,"translate"),s.Nb(3,"i",14),s.Rb(),s.Rb()}if(2&e){const e=s.gc();s.zb(1),s.nc("ngbTooltip",s.ic(2,2,"fi.components.search.btnTooltip")),s.mc("disabled",e.searchDisabled)}}let b=(()=>{class e{constructor(){this.errorMessage="",this.searchEmitter=new s.n,this.searchDisabled=!1,this.isSearchable=!1,this.formItemDef=null,this.valueType="EGN",this.onChange=()=>{},this.onTouched=()=>{},this.onValidatorChange=()=>{},this.formItemDef=new o.a}set value(e){this.val=e,this.onChange(e),this.onTouched()}get value(){return this.val}ngOnInit(){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}writeValue(e){this.value=e}registerOnValidatorChange(e){}validate(e){let t,i=null,s=null;if(this.formItemDef.isRequired&&(null==e.value||0===e.value.length))return this.inputComponent.nativeElement.setCustomValidity("error"),this.errorMessage="fi.uin.error.required",{required:!0};switch(i=this.valueType,s=e.value,i){case"EGN":if(t=r.a.validate(s,this.formItemDef.isRequired),!t.status)return this.inputComponent.nativeElement.setCustomValidity("error"),this.errorMessage=t.message,{lnch:!0};break;case"LNCH":if(t=a.a.validate(s,this.formItemDef.isRequired),!t.status)return this.inputComponent.nativeElement.setCustomValidity("error"),this.errorMessage=t.message,{lnch:!0}}return this.inputComponent.nativeElement.setCustomValidity(""),this.errorMessage="",null}onChangeType(){switch(this.value=null,this.valueType){case"EGN":this.formItemDef.labelText="\u0415\u0413\u041d";break;case"LNCH":this.formItemDef.labelText="\u041b\u041d\u0427"}}onChangeValue(){this.onChange(this.val)}onSearch(){this.searchEmitter.emit(this.valueType)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-fi-input-uin"]],viewQuery:function(e,t){var i;1&e&&s.Nc(m,!0),2&e&&s.uc(i=s.fc())&&(t.inputComponent=i.first)},inputs:{searchDisabled:"searchDisabled",isSearchable:"isSearchable",formItemDef:"formItemDef",valueType:"valueType",value:"value"},outputs:{searchEmitter:"searchEmitter"},features:[s.yb([{provide:n.n,useExisting:Object(s.S)(()=>e),multi:!0},{provide:n.m,useExisting:Object(s.S)(()=>e),multi:!0}])],decls:25,vars:28,consts:[[1,"form-group"],[3,"for"],[1,"input-group","mb-1"],[1,"input-group-prepend"],["ngbRadioGroup","","name","radioBasic",1,"btn-group","btn-group-toggle",3,"ngModel","ngModelChange","change"],["ngbButtonLabel","",1,"btn-outline-secondary"],["ngbButton","","type","radio",3,"value"],["type","text","aria-label","label","autocomplete","off",1,"form-control",3,"id","name","placeholder","required","disabled","ngModel","ngModelChange","input"],["inputComponent",""],["class","input-group-append",4,"ngIf"],[1,"invalid-feedback"],["id","input-text-1-Help",1,"form-text","text-muted"],[1,"input-group-append"],["type","button","placement","top","container","body",1,"btn","btn-outline-secondary",3,"ngbTooltip","disabled","click"],[1,"fas","fa-search"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"label",1),s.Gc(2),s.hc(3,"translate"),s.Rb(),s.Sb(4,"div",2),s.Sb(5,"div",3),s.Sb(6,"div",4),s.ec("ngModelChange",(function(e){return t.valueType=e}))("change",(function(){return t.onChangeType()})),s.Sb(7,"label",5),s.Nb(8,"input",6),s.Gc(9),s.hc(10,"translate"),s.Rb(),s.Sb(11,"label",5),s.Nb(12,"input",6),s.Gc(13),s.hc(14,"translate"),s.Rb(),s.Rb(),s.Rb(),s.Sb(15,"input",7,8),s.ec("ngModelChange",(function(e){return t.val=e}))("input",(function(){return t.onChangeValue()})),s.hc(17,"translate"),s.Rb(),s.Ec(18,u,4,4,"div",9),s.Sb(19,"div",10),s.Gc(20),s.hc(21,"translate"),s.Rb(),s.Rb(),s.Sb(22,"small",11),s.Gc(23),s.hc(24,"translate"),s.Rb(),s.Rb()),2&e&&(s.zb(1),s.mc("for",t.formItemDef.domId),s.zb(1),s.Hc(s.ic(3,16,t.formItemDef.labelText)),s.zb(4),s.mc("ngModel",t.valueType),s.zb(2),s.mc("value","EGN"),s.zb(1),s.Ic(" ",s.ic(10,18,"fi.uin.egn")," "),s.zb(3),s.mc("value","LNCH"),s.zb(1),s.Ic(" ",s.ic(14,20,"fi.uin.lnch")," "),s.zb(2),s.nc("placeholder",s.ic(17,22,t.formItemDef.placeHolderText)),s.mc("id",t.formItemDef.domId)("name",t.formItemDef.domName)("required",t.formItemDef.isRequired)("disabled",t.formItemDef.isDisabled)("ngModel",t.val),s.zb(3),s.mc("ngIf",t.isSearchable),s.zb(2),s.Ic(" ",s.ic(21,24,t.errorMessage)," "),s.zb(3),s.Hc(s.ic(24,26,t.formItemDef.helpText)))},directives:[c.Q,n.o,n.r,c.c,c.P,n.c,n.z,d.u,c.ab],pipes:[l.d],styles:[""]}),e})()},t9TW:function(e,t,i){"use strict";i.d(t,"a",(function(){return ae}));var s=i("mrSG"),n=i("fXoL"),o=i("CR6u"),a=i("LlKj"),r=i("nI3r"),c=i("9GxP"),d=i("aTmD"),l=i("KQ7d"),m=i("+QWa"),u=i("34DR"),b=i("u1cU"),f=i("bgjn"),h=i("PSD3"),p=i.n(h),g=i("BYCZ"),D=i("ZRIf"),S=i("4XRX"),I=i("1kSV"),v=i("ofXK"),R=i("QCcn"),T=i("jtLl"),w=i("QJFE"),N=i("3Pt+"),y=i("TTlI"),E=i("lp4E"),x=i("Mtn9"),O=i("sYmb");const C=["orgForm"],M=["docsForm"],F=["actionList"],A=["signModal"],z=["successSwal"];function P(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.individual.header")," "),n.zb(4),n.mc("hidden",e.isExpanded("individual")),n.zb(1),n.mc("hidden",!e.isExpanded("individual"))}}function _(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",27),n.Sb(1,"app-fi-input-email",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.org.email=t})),n.Rb(),n.Rb()}if(2&e){const e=n.gc(2);n.zb(1),n.mc("ngModel",e.model.org.email)("formItemDef",e.formDefs[4])("name",e.formDefs[4].domName)}}function j(e,t){if(1&e){const e=n.Tb();n.Sb(0,"form",21,22),n.Sb(2,"div",23),n.Sb(3,"div",24),n.Sb(4,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.firstName=t})),n.Rb(),n.Rb(),n.Sb(5,"div",24),n.Sb(6,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.midName=t})),n.Rb(),n.Rb(),n.Sb(7,"div",24),n.Sb(8,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.lastName=t})),n.Rb(),n.Rb(),n.Rb(),n.Sb(9,"div",23),n.Sb(10,"div",24),n.Sb(11,"app-fi-input-text",25),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.org.egn=t})),n.Rb(),n.Rb(),n.Ec(12,_,2,3,"div",26),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.zb(4),n.mc("ngModel",e.model.org.firstName)("formItemDef",e.formDefs[0])("name",e.formDefs[0].domName),n.zb(2),n.mc("ngModel",e.model.org.midName)("formItemDef",e.formDefs[1])("name",e.formDefs[1].domName),n.zb(2),n.mc("ngModel",e.model.org.lastName)("formItemDef",e.formDefs[2])("name",e.formDefs[2].domName),n.zb(3),n.mc("ngModel",e.model.org.egn)("formItemDef",e.formDefs[3])("name",e.formDefs[3].domName),n.zb(1),n.mc("ngIf","N"===e.mode)}}function U(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",29),n.ec("click",(function(){n.wc(e);const t=n.gc(2),i=n.vc(1);return t.onAddContact(),i.expand("contacts")})),n.Nb(1,"i",30),n.Rb()}}function k(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Ec(5,U,2,0,"button",28),n.Sb(6,"button",18),n.Nb(7,"i",19),n.Nb(8,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){const e=n.gc(),t=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,4,"applications.debtors.legalEntity.contacts")," "),n.zb(3),n.mc("ngIf",!e.formDisabled&&"R"!==e.mode),n.zb(2),n.mc("hidden",t.isExpanded("contacts")),n.zb(1),n.mc("hidden",!t.isExpanded("contacts"))}}function L(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div"),n.Sb(1,"div",23),n.Sb(2,"div",33),n.Sb(3,"div",34),n.Sb(4,"span",35),n.Gc(5),n.Rb(),n.Sb(6,"button",36),n.ec("click",(function(){n.wc(e);const i=t.index;return n.gc(2).onDeleteContact(i)})),n.Nb(7,"i",37),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Nb(8,"app-contact-person-only-form",38),n.Nb(9,"hr",39),n.Rb()}if(2&e){const e=t.$implicit,i=t.index;n.zb(5),n.Hc(i+1),n.zb(3),n.mc("model",e)}}function q(e,t){if(1&e&&(n.Sb(0,"fieldset",31),n.Ec(1,L,10,2,"div",32),n.Rb()),2&e){const e=n.gc();n.mc("disabled",e.formDisabled),n.zb(1),n.mc("ngForOf",e.model.contacts)}}function G(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.legalEntity.address1")," "),n.zb(4),n.mc("hidden",e.isExpanded("headquarters")),n.zb(1),n.mc("hidden",!e.isExpanded("headquarters"))}}function V(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-address-form",40),n.ec("formStatusValidChanged",(function(t){return n.wc(e),n.gc().headquartersValid="VALID"===t})),n.Rb()}if(2&e){const e=n.gc(),t=n.vc(1);n.mc("isExpanded",t.isExpanded("headquarters"))("addressData",e.model.headquarters)}}function B(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Sb(5,"button",18),n.Nb(6,"i",19),n.Nb(7,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){n.gc();const e=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,3,"applications.debtors.legalEntity.address2")," "),n.zb(4),n.mc("hidden",e.isExpanded("address")),n.zb(1),n.mc("hidden",!e.isExpanded("address"))}}function H(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-address-form",40),n.ec("formStatusValidChanged",(function(t){return n.wc(e),n.gc().addressValid="VALID"===t})),n.Rb()}if(2&e){const e=n.gc(),t=n.vc(1);n.mc("isExpanded",t.isExpanded("address"))("addressData",e.model.address)}}function W(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",43),n.ec("click",(function(){n.wc(e);const t=n.gc(3),i=n.vc(1);return t.onAddDoc(),i.expand("doc")})),n.Nb(1,"i",30),n.Rb()}}function $(e,t){if(1&e&&(n.Sb(0,"div",16),n.Sb(1,"h6",17),n.Gc(2),n.hc(3,"translate"),n.Rb(),n.Sb(4,"div"),n.Ec(5,W,2,0,"button",42),n.Sb(6,"button",18),n.Nb(7,"i",19),n.Nb(8,"i",20),n.Rb(),n.Rb(),n.Rb()),2&e){const e=n.gc(2),t=n.vc(1);n.zb(2),n.Ic(" ",n.ic(3,4,"applications.debtors.legalEntity.doc")," "),n.zb(3),n.mc("ngIf",!e.formDisabled&&"R"!==e.mode),n.zb(2),n.mc("hidden",t.isExpanded("doc")),n.zb(1),n.mc("hidden",!t.isExpanded("doc"))}}function K(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",23),n.Sb(1,"div",24),n.Sb(2,"h6",46),n.ec("click",(function(){n.wc(e);const i=t.$implicit;return n.gc(3).downloadFile(i.id,i.fileName)})),n.Gc(3),n.Rb(),n.Rb(),n.Nb(4,"div",47),n.Sb(5,"div",48),n.Sb(6,"button",49),n.ec("click",(function(){n.wc(e);const i=t.$implicit;return n.gc(3).onDeleteDocMetaData(i.id)})),n.Nb(7,"i",37),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=t.$implicit,i=n.gc(3);n.zb(3),n.Ic(" ",e.fileName," "),n.zb(3),n.mc("hidden","R"===i.mode)}}function X(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-file-browse",52),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().$implicit.file=t})),n.Rb()}if(2&e){const e=n.gc().$implicit,t=n.gc(3);n.mc("ngModel",e.file)("formItemDef",t.getDocDef(e.index,"D"))("name",t.getDocDef(e.index,"D").domName)("showClearBtn",!1)}}function Q(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-file-browse",52),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().$implicit.signedDoc=t})),n.Rb()}if(2&e){const e=n.gc().$implicit,t=n.gc(3);n.mc("ngModel",e.signedDoc)("formItemDef",t.getDocDef(e.index,"S"))("name",t.getDocDef(e.index,"S").domName)("showClearBtn",!1)}}function Y(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div"),n.Sb(1,"div",23),n.Sb(2,"div",33),n.Sb(3,"div",34),n.Sb(4,"span",35),n.Gc(5),n.Rb(),n.Sb(6,"button",50),n.ec("click",(function(){n.wc(e);const i=t.index;return n.gc(3).onDeleteDoc(i)})),n.Nb(7,"i",37),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(8,"div",23),n.Sb(9,"div",27),n.Sb(10,"app-fi-input-text",25),n.ec("ngModelChange",(function(i){return n.wc(e),t.$implicit.descr=i})),n.Rb(),n.Rb(),n.Sb(11,"div",27),n.Ec(12,X,1,4,"app-fi-file-browse",51),n.Rb(),n.Sb(13,"div",27),n.Ec(14,Q,1,4,"app-fi-file-browse",51),n.Rb(),n.Rb(),n.Nb(15,"hr",39),n.Rb()}if(2&e){const e=t.$implicit,i=t.index,s=n.gc(3);n.zb(5),n.Hc(i+1),n.zb(5),n.mc("ngModel",e.descr)("formItemDef",s.getDocDescrDef(e.index))("name",s.getDocDescrDef(e.index).domName),n.zb(2),n.mc("ngIf",null==e.id),n.zb(2),n.mc("ngIf",null==e.id)}}function Z(e,t){if(1&e&&(n.Sb(0,"fieldset",31),n.Ec(1,K,8,2,"div",44),n.Nb(2,"hr",39),n.Sb(3,"form",21,45),n.Ec(5,Y,16,6,"div",32),n.Rb(),n.Rb()),2&e){const e=n.gc(2);n.mc("disabled",e.formDisabled),n.zb(1),n.mc("ngForOf",e.model.docsMetaData),n.zb(4),n.mc("ngForOf",e.model.docs)}}function J(e,t){1&e&&(n.Sb(0,"ngb-panel",41),n.Ec(1,$,9,6,"ng-template",3),n.Ec(2,Z,6,3,"ng-template",4),n.Rb())}function ee(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",58),n.ec("click",(function(){return n.wc(e),n.gc(2).onCancel()})),n.Nb(1,"i",59),n.Gc(2," \u041e\u0442\u043a\u0430\u0437 "),n.Rb()}}function te(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",60),n.ec("click",(function(){return n.wc(e),n.gc(2).onBackToEdit()})),n.Nb(1,"i",61),n.Gc(2," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),n.Rb()}}function ie(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",62),n.ec("click",(function(){return n.wc(e),n.gc(2).onSave()})),n.Nb(1,"i",63),n.Gc(2),n.Rb()}if(2&e){const e=n.gc(2);n.mc("disabled",!e.formValid),n.zb(2),n.Ic(" ",e.saveBtnLabel," ")}}function se(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",64),n.ec("click",(function(){return n.wc(e),n.gc(2).onSign()})),n.Nb(1,"i",65),n.Gc(2," \u041f\u043e\u0434\u043f\u0438\u0448\u0438 "),n.Rb()}}function ne(e,t){if(1&e&&(n.Sb(0,"div",53),n.Sb(1,"div"),n.Ec(2,ee,3,0,"button",54),n.Ec(3,te,3,0,"button",55),n.Rb(),n.Ec(4,ie,3,2,"button",56),n.Ec(5,se,3,0,"button",57),n.Rb()),2&e){const e=n.gc();n.zb(2),n.mc("ngIf",!e.formDisabled),n.zb(1),n.mc("ngIf",e.formDisabled&&"E"==e.mode),n.zb(1),n.mc("ngIf",!e.formDisabled),n.zb(1),n.mc("ngIf",e.formDisabled&&(!e.isSigned||"N"===e.isSigned)&&!e.isInnerUser)}}const oe=function(){return["individual","contacts","headquarters","address","doc"]};let ae=(()=>{class e{constructor(e,t,i,s){this.defService=e,this.detector=t,this.crudService=i,this.sessionService=s,this.model={},this.mode=o.a.NEW,this.cancel=new n.n,this.isInnerUser=!1,this.formDefs=[],this.headquartersValid=!1,this.addressValid=!1,this.pFormDisabled=!1,this.isActionListReady=!1,this.isActionListSuccess=!1,this.usersSaver=new u.a(i),this.usersLoader=new f.a(i)}get formDisabled(){return this.pFormDisabled}set formDisabled(e){this.pFormDisabled=e,this.formDefs.forEach((t,i,s)=>{"ind_uin"!==s[i].domId&&("ind_fName"!==s[i].domId&&"ind_sName"!==s[i].domId&&"ind_lName"!==s[i].domId||"Y"!==this.isSigned)&&(s[i].readonly=e,s[i].isDisabled=e)}),this.addressesComponents.forEach(t=>{t.disableNonEmptyFields=e}),this.contactsComponents.forEach(t=>{t.disableNonEmptyFields=e})}get formValid(){return!!(this.orgForm&&this.orgForm.valid&&(this.isInnerUser||this.docsForm&&this.docsForm.valid)&&this.headquartersValid&&this.addressValid&&this.isContactFormsValid()&&this.isDocsValid()&&this.model.contacts&&this.model.contacts.length>0)}get saveBtnLabel(){return this.mode===o.a.NEW?"\u041f\u043e\u0434\u0430\u0439":"\u0417\u0430\u043f\u0430\u0437\u0438"}ngOnInit(){this.isOrgSigned(),this.loadFormDef(),this.setEmail(),this.setSignUrl()}ngAfterViewInit(){this.checkMode(),this.detector.detectChanges()}onCancel(){this.formDisabled=!0,this.reloadData(),this.cancel.emit()}onSave(){switch(this.formDisabled=!0,this.mode){case o.a.NEW:this.addNewData();break;case o.a.EDIT:this.editData()}}onCloseActionModal(){this.isInnerUser&&(this.isActionListSuccess?(this.successSwal.fire(),this.cancel.emit()):this.formDisabled=!1),this.isActionListSuccess||this.mode!==o.a.NEW||null!=this.model.org.id||(this.formDisabled=!1)}onSign(){this.formValid?null!=this.model.org&&null!=this.model.org.id?(this.setSignUrl(),this.signModal.open()):p.a.fire({title:"\u041d\u044f\u043c\u0430 \u0441\u044a\u0437\u0434\u0430\u0434\u0435\u043d \u0437\u0430\u043f\u0438\u0441. \u041c\u043e\u043b\u044f \u043e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e!",icon:"warning"}).then():p.a.fire({title:"\u041c\u043e\u043b\u044f \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435\u0442\u0430, \u0437\u0430 \u0434\u0430 \u043f\u043e\u0434\u043f\u0438\u0448\u0435\u0442\u0435!",icon:"warning"}).then()}onBackToEdit(){this.formDisabled=!1}onAddContact(){null==this.model.contacts&&(this.model.contacts=[]),this.model.contacts.push(new l.a)}onDeleteContact(e){if(null==this.model.contacts)return;const t=this.model.contacts.splice(e,1);t&&t.length>0&&t[0].id&&(null==this.model.contactsForDelete&&(this.model.contactsForDelete=[]),this.model.contactsForDelete.push(t[0].id))}onAddDoc(){null==this.model.docs&&(this.model.docs=[]),this.model.docs.push({index:Object(m.a)()})}onDeleteDoc(e){null!=this.model.docs&&this.model.docs.splice(e,1)}onDeleteDocMetaData(e){null!=this.model.docsMetaData&&(this.model.docsMetaData=this.model.docsMetaData.filter(t=>t.id!==e),null==this.model.docsForDelete&&(this.model.docsForDelete=[]),this.model.docsForDelete.push(e))}getDocDescrDef(e){return this.defService.getDocDescrDef(e)}getDocDef(e,t){return this.defService.getDocumentDef(e,t)}downloadFile(e,t){return Object(s.a)(this,void 0,void 0,(function*(){const i=yield this.usersLoader.loadDocument(e);Object(b.a)(i,t)}))}isContactFormsValid(){return null==this.contactsComponents.find(e=>"INVALID"===e.formValidStatus)}isDocsValid(){return!!this.isInnerUser||this.model.docs&&this.model.docs.length>0||this.model.docsMetaData&&this.model.docsMetaData.length>0}loadFormDef(){this.formDefs=this.defService.getIndividualDefsModel(this.isSigned)}isOrgSigned(){if(this.mode===o.a.NEW)return void(this.isSigned=null);const e=this.sessionService.getOrganization();this.isSigned=e?e.confirmed:null}setEmail(){const e=this.sessionService.getUserInfo();e&&(this.model.org.email=e.email)}checkMode(){this.mode===o.a.EDIT&&(this.formDisabled=!0)}addNewData(){this.prepareSaveActions(),this.actionList.open(),this.usersSaver.insertData(this.model,this.actions,"I",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.setSignUrl()})}editData(){this.prepareUpdateActions(),this.actionList.open(),this.isSigned&&"N"!==this.isSigned?this.usersSaver.updateData(this.model,this.actions,"I",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.reloadData()}):this.usersSaver.updateAllData(this.model,this.actions,"I",this.isInnerUser).then(e=>{this.isActionListSuccess=e,this.isActionListReady=!0,this.formDisabled=!0,this.reloadData()})}prepareSaveActions(){this.actions=[],this.actions.push(new c.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e \u043b\u0438\u0446\u0435",d.a.WORKING,!1)),this.actions.push(new c.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0430 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",d.a.WORKING,!1)),this.actions.push(new c.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",d.a.WORKING,!1)),this.actions.push(new c.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435 \u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",d.a.WORKING,!1)),this.isInnerUser||this.actions.push(new c.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",d.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}prepareUpdateActions(){this.actions=[],this.isSigned&&"N"!==this.isSigned||this.actions.push(new c.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e \u043b\u0438\u0446\u0435",d.a.WORKING,!1)),this.actions.push(new c.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u043b\u0438\u0446\u0430 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",d.a.WORKING,!1)),this.actions.push(new c.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",d.a.WORKING,!1)),this.actions.push(new c.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0441\u0435\u0434\u0430\u043b\u0438\u0449\u0435 \u0438 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",d.a.WORKING,!1)),this.isInnerUser||this.actions.push(new c.a("\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438",d.a.WORKING,!1)),this.actionList.actionList=this.actions,this.isActionListReady=!1}reloadData(){null!=this.model.org.id&&this.usersLoader.loadData(this.model.org.id).then(e=>{this.model=e})}setSignUrl(){null!=this.model.org.id&&(this.signUrl=`TrnDocTransitions/organization/${this.model.org.id}/sign/doc`)}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(g.a),n.Mb(n.h),n.Mb(D.a),n.Mb(S.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-individual-form"]],viewQuery:function(e,t){var i;1&e&&(n.Nc(C,!0),n.Nc(M,!0),n.Nc(F,!0),n.Nc(A,!0),n.Nc(z,!0),n.Nc(a.a,!0),n.Nc(r.a,!0)),2&e&&(n.uc(i=n.fc())&&(t.orgForm=i.first),n.uc(i=n.fc())&&(t.docsForm=i.first),n.uc(i=n.fc())&&(t.actionList=i.first),n.uc(i=n.fc())&&(t.signModal=i.first),n.uc(i=n.fc())&&(t.successSwal=i.first),n.uc(i=n.fc())&&(t.addressesComponents=i),n.uc(i=n.fc())&&(t.contactsComponents=i))},inputs:{model:"model",mode:"mode",isInnerUser:"isInnerUser"},outputs:{cancel:"cancel"},decls:22,vars:10,consts:[["id","accordion",3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","individual"],["ngbPanelHeader",""],["id","body","ngbPanelContent",""],["id","contacts"],["id","headquarters"],["id","address"],["id","doc",4,"ngIf"],["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-1",4,"ngIf"],[3,"isSuccess","isReady","closeEvent"],["actionList",""],[3,"url"],["signModal",""],["title","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u0442\u043e \u0431\u0435\u0448\u0435 \u0438\u0437\u0432\u044a\u0440\u0448\u0435\u043d\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e",3,"icon","showConfirmButton"],["successSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["novalidate","",1,"was-validated"],["orgForm","ngForm"],[1,"row"],[1,"col-md-4"],[3,"ngModel","formItemDef","name","ngModelChange"],["class","col-lg-4",4,"ngIf"],[1,"col-lg-4"],["class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",3,"click",4,"ngIf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],[1,"fas","fa-plus"],[3,"disabled"],[4,"ngFor","ngForOf"],[1,"col-lg-12"],[1,"d-flex","justify-content-between"],[1,"font-weight-bold"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[1,"fas","fa-trash-alt"],[3,"model"],[1,"border","border-primary"],[3,"isExpanded","addressData","formStatusValidChanged"],["id","doc"],["class","btn btn-sm btn-outline-secondary rounded-circle mr-2","ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432 \u0440\u0435\u0434","container","body","placement","left",3,"click",4,"ngIf"],["ngbTooltip","\u0414\u043e\u0431\u0430\u0432\u044f \u043d\u043e\u0432 \u0440\u0435\u0434","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],["class","row",4,"ngFor","ngForOf"],["docsForm","ngForm"],[1,"doc","alert","alert-primary",3,"click"],[1,"col-md-7"],[1,"col-md-1"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-outline-secondary","rounded-circle","mt-1","ml-4",3,"hidden","click"],["type","button","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0432\u0430 \u0440\u0435\u0434\u0430","container","body","placement","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle",3,"click"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange",4,"ngIf"],[3,"ngModel","formItemDef","name","showClearBtn","ngModelChange"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-1"],["type","button","class","btn btn-primary mr-2","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary mr-2","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",3,"click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",3,"click",4,"ngIf"],["type","button","placement","right","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","placement","right","ngbTooltip","\u0412\u044a\u0440\u043d\u0438 \u0437\u0430 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u044f","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","left","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-plus","text-warning"],["type","button","placement","left","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",1,"btn","btn-primary",3,"click"],[1,"fas","fa-pen-fancy","mr-1"]],template:function(e,t){1&e&&(n.Sb(0,"ngb-accordion",0,1),n.Sb(2,"ngb-panel",2),n.Ec(3,P,8,5,"ng-template",3),n.Ec(4,j,13,13,"ng-template",4),n.Rb(),n.Sb(5,"ngb-panel",5),n.Ec(6,k,9,6,"ng-template",3),n.Ec(7,q,2,2,"ng-template",4),n.Rb(),n.Sb(8,"ngb-panel",6),n.Ec(9,G,8,5,"ng-template",3),n.Ec(10,V,1,2,"ng-template",4),n.Rb(),n.Sb(11,"ngb-panel",7),n.Ec(12,B,8,5,"ng-template",3),n.Ec(13,H,1,2,"ng-template",4),n.Rb(),n.Ec(14,J,3,0,"ngb-panel",8),n.Rb(),n.Ec(15,ne,6,4,"div",9),n.Sb(16,"app-action-tasks-list",10,11),n.ec("closeEvent",(function(){return t.onCloseActionModal()})),n.Rb(),n.Nb(18,"app-main-sign-modal",12,13),n.Nb(20,"swal",14,15)),2&e&&(n.mc("destroyOnHide",!1)("activeIds",n.pc(9,oe)),n.zb(14),n.mc("ngIf",!t.isInnerUser),n.zb(1),n.mc("ngIf","R"!=t.mode),n.zb(1),n.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),n.zb(2),n.mc("url",t.signUrl),n.zb(2),n.mc("icon","success")("showConfirmButton",!0))},directives:[I.a,I.I,I.K,I.J,v.u,R.a,T.a,w.a,I.M,N.D,N.p,N.q,y.a,N.o,N.r,E.a,I.ab,v.t,r.a,a.a,x.a],pipes:[O.d],styles:["[_nghost-%COMP%]     #accordion>div>div.card-header, [_nghost-%COMP%]     #accordion>div>div>div.card-body{padding:.5rem}"]}),e})()},xtxY:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mrSG"),n=i("hnrn");let o=(()=>{class e{constructor(e){e&&(this.id=e.id,this.firstName=e.firstName,this.midName=e.midName,this.lastName=e.lastName,this.email=e.email,this.loginSign=e.loginSign,this.egn=e.egn,this.lnch=e.lnch,this.loginUserPass=e.loginUserPass,this.username=e.username,this.password=e.password,this.confirmPass=e.confirmPass)}get id(){return this.pId}set id(e){this.pId=e}get firstName(){return this.pFirstName}set firstName(e){this.pFirstName=e}get midName(){return this.pMidName}set midName(e){this.pMidName=e}get lastName(){return this.pLastName}set lastName(e){this.pLastName=e}get email(){return this.pEmail}set email(e){this.pEmail=e}get loginSign(){return this.pLoginSign}set loginSign(e){this.pLoginSign=e}get egn(){return this.pEgn}set egn(e){this.pEgn=e}get lnch(){return this.pLnch}set lnch(e){this.pLnch=e}get loginUserPass(){return this.pLoginUserPass}set loginUserPass(e){this.pLoginUserPass=e}get username(){return this.pUsername}set username(e){this.pUsername=e}get password(){return this.pPassword}set password(e){this.pPassword=e}get confirmPass(){return this.pConfirmPass}set confirmPass(e){this.pConfirmPass=e}}return e.updateUrl="TrnUsers/UpdateUserInfo",Object(s.b)([Object(n.b)({alias:"firstName"})],e.prototype,"pFirstName",void 0),Object(s.b)([Object(n.b)({alias:"midName"})],e.prototype,"pMidName",void 0),Object(s.b)([Object(n.b)({alias:"lastName"})],e.prototype,"pLastName",void 0),Object(s.b)([Object(n.b)({alias:"email"})],e.prototype,"pEmail",void 0),e})()}}]);