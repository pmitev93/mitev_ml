(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+3L+":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("JFOw"),a=i("XNiG"),o=i("A2O8");class s{constructor(e){e&&(this.status=e.status,this.requestId=e.requestId,this.reportURI=e.reportURI,this.totalPages=e.totalPages,this.currentPage=e.currentPage)}}var r=i("lB+K"),d=i("PSD3"),c=i.n(d),l=i("fXoL"),m=i("ZRIf"),b=i("dEii");let u=(()=>{class e{constructor(e,t){this.crudService=e,this.alertService=t,this.STATUS="status",this.PDF="PDF",this.EXCEL="EXCEL",this.REPORT_START="JsRep/report-start-async",this.REPORT_CHECK="JsRep/report-check",this.REPORT_CANCEL="JsRep/report-cancel",this.REPORT_DATA="JsRep/report-data",this.REPORT_EXPORT_EXCEL="JsRep/report-export-excel",this.REPORT_EXPORT_PDF="JsRep/report-export-pdf",this.REPORT_EXPORT_CHECK="JsRep/report-export-check",this.REPORT_DOWNLOAD="JsRep/report-download",this.reportSource=new a.a,this.exportSource=new a.a,this.currentReportObs=this.reportSource.asObservable(),this.currentExportObs=this.exportSource.asObservable(),this.isReportCanceled=!1,this.isExportCanceled=!1}startReport(e){return this.isReportCanceled=!1,this.crudService.getByPostObject(this.REPORT_START,e)}checkReport(e){this.crudService.getObject(this.REPORT_CHECK,e).subscribe(e=>{const t=new s(e);this.isReportCanceled||(t.status===o.a.QUEUED||t.status===o.a.EXECUTION?setTimeout(()=>{this.checkReport(t.requestId)},5e3):this.reportSource.next(t))},e=>{this.alertService.error(r.a.ERROR_REGISTERS_LOAD_DATA,e)})}loadReportData(e,t,i){return this.crudService.getAll(`${this.REPORT_DATA}/${e}/${t}/${i}`)}cancelReport(e){return this.isReportCanceled=!0,this.crudService.getAll(`${this.REPORT_CANCEL}/${e}`)}startExport(e,t){return this.isReportCanceled=!1,this.crudService.getObject(t===this.PDF?this.REPORT_EXPORT_PDF:this.REPORT_EXPORT_EXCEL,e)}checkExport(e,t){this.crudService.getObject(this.REPORT_EXPORT_CHECK,`${e}/${t}`).subscribe(i=>{this.isExportCanceled||i.value!==o.a.QUEUED&&i.value!==o.a.EXECUTION?this.exportSource.next(i):setTimeout(()=>{this.checkExport(e,t)},500)},e=>{this.alertService.error(r.a.ERROR_REGISTERS_LOAD_DATA,e),c.a.close()})}downloadExportedData(e,t){return this.crudService.getBlob(`${this.REPORT_DOWNLOAD}/${e}/${t}`)}prepareJasperObject(e,t){const i=new n.a({});return i.params=Object.create(e),Object.keys(e).forEach(t=>{i.params[t]=e[t]?[e[t]]:[]}),i.orderBy=[],i.reportName=t,i}}return e.\u0275fac=function(t){return new(t||e)(l.ac(m.a),l.ac(b.a))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"1bmj":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("F7pt"),a=i("0Uwp"),o=i("WCP0"),s=i("noCF"),r=i("KQ7d"),d=i("ra4D"),c=i("CR6u");class l{addOrgAddrContactsFormFields(e,t){const i=t===c.a.READ;this.generateOrgFormItem(e,i),this.generateEikFormItem(e,i),this.generateContactFormItem(e,i),this.generateAddressFormItem(e,i)}addComplexPermitsFormFields(e,t,i){const n=t===c.a.READ;this.generatePermitFormItem(e,n||i),this.generateTypeFormItem(e,n),this.generateDateFromFormItem(e,n),this.generateDateIssuedFormItem(e,!0),this.generateTrnDateFormItem(e)}addComplexPermitsSearchFields(e){this.generateEikSearchFormItem(e),this.generateDateFromSearchFormItem(e),this.generateDateToSearchFormItem(e)}addIndividualOopFormFields(e,t){this.generatePermitIndividOopFormItem(e,t),this.generateDateIndividOopFormItem(e,t),this.generateIndividOopCheckBoxFormItem(e,t),this.generateOrgTypeFormItem(e,t),this.generateTrnDateFormItem(e)}generateOrgFormItem(e,t){const i=n.a.createDefaultTextFormItemDef();i.domId="org",i.labelText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",i.placeHolderText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",i.readonly=!0,e.organization=i}generateEikFormItem(e,t){const i=s.a.createDefaultDropDownCascadeFormItemDef();i.domId="bulstat",i.placeHolderText="\u0415\u0418\u041a",i.labelText="\u0415\u0418\u041a",i.dataSource=o.a.publicUrl,i.resultDataType=o.a,i.searchFields=[new d.a("bulstat","s")],i.parentDomName=null,i.fireEventAsParent=!0,i.isRequired=!0,i.isDisabled=t,e.bulstat=i}generateFirmFormItem(e){const t=a.a.createDefaultDropDownFormItemDef();t.domId="firm",t.labelText="\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",t.helpText="\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0442 \u0441\u043f\u0438\u0441\u044a\u043a\u0430",t.dataSource=o.a.publicUrl,t.resultDataType=o.a,t.searchFields=[new d.a("name","s")],t.readonly=!0,t.isWhere=!1,e.name=t}generateContactFormItem(e,t){const i=s.a.createDefaultDropDownCascadeFormItemDef();i.domId="contactPerson",i.labelText=null,i.helpText=null,i.placeHolderText="\u0418\u0437\u0431\u043e\u0440 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438",i.dataSource="TrnContacts",i.resultDataType=r.a,i.searchFields=[new d.a("name","s")],i.parentDomName="bulstat",i.parentFieldName="ornId",i.isRequired=!1,i.isDisabled=t,e.contactPerson=i}generateAddressFormItem(e,t){const i=a.a.createDefaultDropDownFormItemDef();i.domId="address",i.labelText=null,i.helpText=null,i.placeHolderText="\u0418\u0437\u0431\u043e\u0440 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",i.isRequired=!1,i.isDisabled=t,e.address=i}generateTypeFormItem(e,t){const i=n.a.createDefaultTextFormItemDef();i.domId="type",i.labelText="\u0412\u0438\u0434",i.helpText="\u0412\u044a\u0432\u0435\u0434\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u043d\u043e",i.showPrependPrefix=!0,i.prependPrefix="-00-",i.isRequired=!0,i.readonly=t,e.type=i}generatePermitFormItem(e,t){const i=n.a.createDefaultTextFormItemDef();i.domId="permit",i.labelText="\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u043d\u043e",i.showPrependPrefix=!0,i.helpText="\u0412\u044a\u0432\u0435\u0434\u0438 \u043d\u043e\u043c\u0435\u0440",i.prependPrefix="00-\u041a\u0420-",i.isRequired=!0,i.readonly=t,e.permit=i}generateDateIssuedFormItem(e,t){const i=n.a.createDefaultDateFormItemDef();i.domId="validTo",i.labelText="\u0414\u0430\u0442\u0430 \u043d\u0430 \u0438\u0437\u0434\u0430\u0432\u0430\u043d\u0435",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",i.isRequired=!1,i.isDisabled=t,e.dateIssued=i}generateDateFromFormItem(e,t){const i=n.a.createDefaultDateFormItemDef();i.domId="createdDate",i.labelText="\u0412\u0430\u043b\u0438\u0434\u043d\u043e \u043e\u0442",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",i.isRequired=!0,i.isDisabled=t,e.dateFrom=i}generateEikSearchFormItem(e){const t=a.a.createDefaultDropDownFormItemDef();t.domId="search-eik",t.labelText="\u0415\u0418\u041a",t.helpText="\u0422\u044a\u0440\u0441\u0438 \u043f\u043e \u0415\u0418\u041a",t.dataSource=o.a.publicUrl,t.resultDataType=o.a,t.searchFields=[new d.a("bulstat","s")],e.ornId=t}generateDateFromSearchFormItem(e){const t=n.a.createDefaultDateFormItemDef();t.domId="search-dateFrom",t.labelText="\u041e\u0442 \u0414\u0430\u0442\u0430",t.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",e.dateFrom=t}generateDateToSearchFormItem(e){const t=n.a.createDefaultDateFormItemDef();t.domId="search-date\u0422\u043e",t.labelText="\u0414\u043e \u0414\u0430\u0442\u0430",t.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",e.dateTo=t}generatePermitIndividOopFormItem(e,t){const i=n.a.createDefaultTextFormItemDef();i.domId="permit",i.labelText="\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435",i.helpText="\u0412\u044a\u0432\u0435\u0434\u0438 \u043d\u043e\u043c\u0435\u0440",i.isRequired=!0,i.readonly=t,e.permit=i}generateDateIndividOopFormItem(e,t){const i=n.a.createDefaultDateFormItemDef();i.domId="date",i.labelText="\u0414\u0430\u0442\u0430 \u043d\u0430 \u0438\u0437\u0434\u0430\u0432\u0430\u043d\u0435",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",i.isRequired=!t,i.isDisabled=t,e.dateIssued=i}generateIndividOopCheckBoxFormItem(e,t){const i=a.a.createDefaultDropDownFormItemDef();i.domId="individ-oop",i.labelText="\u0412\u043f\u0438\u0441\u0432\u0430\u043d\u0435 \u043d\u0430",i.helpText="",i.isRequired=!0,i.isDisabled=t,e.checkbox=i}generateOrgTypeFormItem(e,t){const i=a.a.createDefaultDropDownFormItemDef();i.domId="org-type",i.labelText="\u0422\u0438\u043f\u043e\u0432\u0435",i.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0442\u0438\u043f",i.isRequired=!0,i.isDisabled=t,e.type=i}generateTrnDateFormItem(e){const t=n.a.createDefaultDateFormItemDef();t.domId="trnDate",t.labelText="\u0414\u0430\u0442\u0430 \u043d\u0430 \u0438\u0437\u0434\u0430\u0432\u0430\u043d\u0435",t.helpText="\u0418\u0437\u0431\u0435\u0440\u0438 \u0434\u0430\u0442\u0430",t.isRequired=!0,t.isDisabled=!1,e.trnDate=t}}},"8H9N":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("XDeO"),a=i("mrSG"),o=i("Qlr7"),s=i("hnrn");let r=(()=>{class e{constructor(e){e&&(this.wotId=e.wotId,this.dateCreated=new o.a(e.dateCreated),this.description=e.description,this.id=e.id,this.userCreated=e.userCreated,this.roeId=e.roeId,this.fromStateId=e.fromStateId,this.toStateId=e.toStateId,this.pCommentId=e.commentId,this.pUserComment=e.userComment)}get wotId(){return this.pWotId}set wotId(e){this.pWotId=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get description(){return this.pDescription}set description(e){this.pDescription=e}get id(){return this.pId}set id(e){this.pId=e}get userCreated(){return this.pUserCreated}set userCreated(e){this.pUserCreated=e}get roeId(){return this.pRoeId}set roeId(e){this.pRoeId=e}get fromStateId(){return this.pFromStateId}set fromStateId(e){this.pFromStateId=e}get toStateId(){return this.pToStateId}set toStateId(e){this.pToStateId=e}get commentId(){return this.pCommentId}set commentId(e){this.pCommentId=e}get userComment(){return this.pUserComment}set userComment(e){this.pUserComment=e}}return e.urlHistory="TrnWorksheets/getHistoryForWot",e.url="TrnWorksheetStates",Object(a.b)([Object(s.b)({alias:"wotId"})],e.prototype,"pWotId",void 0),Object(a.b)([Object(s.b)({alias:"dateCreated"})],e.prototype,"pDateCreated",void 0),Object(a.b)([Object(s.b)({alias:"description"})],e.prototype,"pDescription",void 0),Object(a.b)([Object(s.b)({alias:"id"})],e.prototype,"pId",void 0),Object(a.b)([Object(s.b)({alias:"userCreated"})],e.prototype,"pUserCreated",void 0),Object(a.b)([Object(s.b)({alias:"roeId"})],e.prototype,"pRoeId",void 0),Object(a.b)([Object(s.b)({alias:"fromStateId"})],e.prototype,"pFromStateId",void 0),Object(a.b)([Object(s.b)({alias:"toStateId"})],e.prototype,"pToStateId",void 0),Object(a.b)([Object(s.b)({alias:"commentId"})],e.prototype,"pCommentId",void 0),Object(a.b)([Object(s.b)({alias:"userComment"})],e.prototype,"pUserComment",void 0),e})();var d=i("fXoL"),c=i("ZRIf"),l=i("1kSV"),m=i("ofXK");function b(e,t){if(1&e&&(d.Sb(0,"div"),d.Sb(1,"h5",6),d.Nb(2,"i",7),d.Gc(3),d.Rb(),d.Sb(4,"h6"),d.Gc(5),d.Rb(),d.Sb(6,"h6"),d.Gc(7),d.Rb(),d.Nb(8,"hr"),d.Rb()),2&e){const e=t.$implicit;d.zb(3),d.Ic(" ",e.state," "),d.zb(2),d.Jc("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b: ",e.firstName," ",e.lastName," "),d.zb(2),d.Mc("\u0414\u0430\u0442\u0430: ",e.date.day,".",e.date.month,".",e.date.year,"\u0433. ",e.date.hour,":",e.date.minute,"\u0447.")}}let u=(()=>{class e{constructor(e){this.crudService=e,this.DATE_UTILS=n.a}ngOnInit(){this.loadDetails()}ngOnChanges(){this.loadDetails()}loadDetails(){this.crudService.loadByParam(h,r.urlHistory,this.wotId).subscribe(e=>{this.details=e})}}return e.\u0275fac=function(t){return new(t||e)(d.Mb(c.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-wot-details"]],inputs:{wotId:"wotId"},features:[d.xb],decls:7,vars:1,consts:[["ngbDropdown","",1,"d-inline-block"],["id","history","ngbDropdownToggle","",1,"btn","btn-outline-primary"],[1,"fas","fa-info-circle","mr-1"],["ngbDropdownMenu","","aria-labelledby","history",1,"alert-primary","pb-0"],[1,"container-fluid","pl-3","pr-3","pt-3","pb-0",2,"width","400px"],[4,"ngFor","ngForOf"],[1,"mb-2"],[1,"fas","fa-chevron-circle-right","mr-2","text-primary"]],template:function(e,t){1&e&&(d.Sb(0,"div",0),d.Sb(1,"button",1),d.Nb(2,"i",2),d.Gc(3," \u0414\u0435\u0442\u0430\u0439\u043b\u0438 "),d.Rb(),d.Sb(4,"div",3),d.Sb(5,"div",4),d.Ec(6,b,9,8,"div",5),d.Rb(),d.Rb(),d.Rb()),2&e&&(d.zb(6),d.mc("ngForOf",t.details))},directives:[l.m,l.q,l.p,m.t],styles:[""]}),e})();class h{constructor(e){Object.assign(this,e||{})}}},"9k/x":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),a=i("0Uwp"),o=i("F7pt"),s=i("3Pt+"),r=i("Bz/w"),d=i("szLj"),c=i("1kSV");let l=(()=>{class e{constructor(){this.index=0,this.deleteRole=new n.n}ngOnInit(){this.generateRoles(this.roleModel),this.generateFormValidFrom(),this.generateFormValidTo()}generateRoles(e){const t=a.a.createDefaultDropDownFormItemDef();t.domId="dynamicRoleRoles",t.labelText="\u0420\u043e\u043b\u044f",this.roles=t}generateFormValidFrom(){const e=o.a.createDefaultDatePeriodFormItemDef();e.labelText="\u0412\u0430\u043b\u0438\u0434\u0435\u043d \u043e\u0442",e.domId="dynamicRoleValidFrom",e.isRequired=!0,this.validFromDate=e}generateFormValidTo(){const e=o.a.createDefaultDatePeriodFormItemDef();e.labelText="\u0412\u0430\u043b\u0438\u0434\u0435\u043d \u0434\u043e",e.domId="dynamicRoleValidTo",this.validToDate=e}onDeleteRole(){this.deleteRole.emit(this.index)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-dynamic-role"]],inputs:{index:"index",model:"model",roleModel:"roleModel",rolesList:"rolesList"},outputs:{deleteRole:"deleteRole"},decls:12,vars:13,consts:[["novalidate","",1,"was-validated"],["form","ngForm"],[1,"d-flex","align-items-center","justify-content-between"],[1,"col-lg-4"],[3,"ngModel","externalDataItems","formItemDef","labelFieldName","valueFieldName","name","ngModelChange"],[1,"col-lg-3"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"minDate","ngModel","formItemDef","name","ngModelChange"],[1,"nav-item"],["type","button","placement","left","ngbTooltip","\u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0438 \u0440\u043e\u043b\u044f","container","left",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","mr-2",3,"click"],[1,"fas","fa-trash"]],template:function(e,t){1&e&&(n.Sb(0,"form",0,1),n.Sb(2,"div",2),n.Sb(3,"div",3),n.Sb(4,"app-fi-select-dropdown",4),n.ec("ngModelChange",(function(e){return t.model.roeId=e})),n.Rb(),n.Rb(),n.Sb(5,"div",5),n.Sb(6,"app-fi-input-date",6),n.ec("ngModelChange",(function(e){return t.model.validFrom=e})),n.Rb(),n.Rb(),n.Sb(7,"div",5),n.Sb(8,"app-fi-input-date",7),n.ec("ngModelChange",(function(e){return t.model.validTo=e})),n.Rb(),n.Rb(),n.Sb(9,"div",8),n.Sb(10,"button",9),n.ec("click",(function(){return t.onDeleteRole()})),n.Nb(11,"i",10),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.zb(4),n.mc("ngModel",t.model.roeId)("externalDataItems",t.rolesList)("formItemDef",t.roles)("labelFieldName","description")("valueFieldName","id")("name",null==t.roles?null:t.roles.domName),n.zb(2),n.mc("ngModel",t.model.validFrom)("formItemDef",t.validFromDate)("name",null==t.validFromDate?null:t.validFromDate.domName),n.zb(2),n.mc("minDate",null==t.model?null:t.model.validFrom)("ngModel",t.model.validTo)("formItemDef",t.validToDate)("name",null==t.validToDate?null:t.validToDate.domName))},directives:[s.D,s.p,s.q,r.a,s.o,s.r,d.a,c.ab],styles:[""]}),e})()},A2O8:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.QUEUED="queued",e.EXECUTION="execution",e.READY="ready",e.CANCELLED="cancelled",e.FAILED="failed",e.UNKNOWN="unknown",e}({})},COAJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),a=i("ofXK"),o=i("1kSV");function s(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",9),n.ec("click",(function(){return n.wc(e),n.gc(2).onSign()})),n.Gc(1),n.Rb()}if(2&e){const e=n.gc(2);n.mc("disabled",!e.isSignButtonActive),n.zb(1),n.Ic(" ",e.signBtnLabel," ")}}const r=function(e){return{"justify-content-between":e}},d=function(e){return{"full-width justify-content-between":e}};function c(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",2),n.Ec(1,s,2,2,"button",3),n.Sb(2,"div",4),n.Sb(3,"div"),n.Sb(4,"button",5),n.ec("click",(function(){return n.wc(e),n.gc().onCancel()})),n.Nb(5,"i",6),n.Gc(6),n.Rb(),n.Rb(),n.Sb(7,"div"),n.Sb(8,"button",7),n.ec("click",(function(){return n.wc(e),n.gc().onSave()})),n.Nb(9,"i",8),n.Gc(10),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.gc();n.mc("ngClass",n.qc(6,r,e.isSignButtonVisible)),n.zb(1),n.mc("ngIf",e.isSignButtonVisible),n.zb(1),n.mc("ngClass",n.qc(8,d,!e.isSignButtonVisible)),n.zb(4),n.Ic(" ",e.cancelBtnLabel," "),n.zb(2),n.mc("disabled",!e.isFormValid),n.zb(2),n.Ic(" ",e.saveBtnLabel," ")}}function l(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",10),n.Sb(1,"button",11),n.ec("click",(function(){return n.wc(e),n.gc().onCancel()})),n.Gc(2," \u041e\u0431\u0440\u0430\u0442\u043d\u043e "),n.Rb(),n.Sb(3,"div"),n.Sb(4,"button",12),n.ec("click",(function(){return n.wc(e),n.gc().onEdit()})),n.Nb(5,"i",13),n.Gc(6," \u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f "),n.Rb(),n.Sb(7,"button",14),n.ec("click",(function(){return n.wc(e),n.gc().onDelete()})),n.Nb(8,"i",15),n.Gc(9," \u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 "),n.Rb(),n.Rb(),n.Rb()}}let m=(()=>{class e{constructor(){this.isSignButtonActive=!0,this.isSignButtonVisible=!0,this.saveBtnLabel="\u0417\u0430\u043f\u0438\u0441 \u043a\u0430\u0442\u043e \u043f\u0440\u043e\u0435\u043a\u0442",this.cancelBtnLabel="\u041e\u0442\u043a\u0430\u0436\u0438",this.signBtnLabel="\u041f\u043e\u0434\u043f\u0438\u0448\u0438",this.saveEvent=new n.n,this.cancelEvent=new n.n,this.signEvent=new n.n,this.editEvent=new n.n,this.deleteEvent=new n.n}ngOnInit(){}onSave(){this.saveEvent.emit()}onCancel(){this.cancelEvent.emit()}onSign(){this.signEvent.emit()}onEdit(){this.editEvent.emit()}onDelete(){this.deleteEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-save-and-cancel-bar"]],inputs:{mode:"mode",isFormValid:"isFormValid",isSignButtonActive:"isSignButtonActive",isSignButtonVisible:"isSignButtonVisible",saveBtnLabel:"saveBtnLabel",cancelBtnLabel:"cancelBtnLabel",signBtnLabel:"signBtnLabel"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent",signEvent:"signEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},decls:2,vars:2,consts:[["class","d-flex border border-primary alert-primary p-2 mt-1",3,"ngClass",4,"ngIf"],["class","d-flex justify-content-between border border-primary alert-primary p-2 mt-1",4,"ngIf"],[1,"d-flex","border","border-primary","alert-primary","p-2","mt-1",3,"ngClass"],["type","button","class","btn btn-primary","placement","right","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",3,"disabled","click",4,"ngIf"],[1,"d-flex",3,"ngClass"],["type","button","placement","left","ngbTooltip","\u041e\u0442\u043a\u0430\u0437","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-times","mr-1"],["type","button","placement","top","ngbTooltip","\u0417\u0430\u043f\u0438\u0441","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-plus","text-warning"],["type","button","placement","right","ngbTooltip","\u041f\u043e\u0434\u043f\u0438\u0448\u0438","container","body",1,"btn","btn-primary",3,"disabled","click"],[1,"d-flex","justify-content-between","border","border-primary","alert-primary","p-2","mt-1"],["type","button","placement","right","ngbTooltip","\u041e\u0431\u0440\u0430\u0442\u043d\u043e \u043a\u044a\u043c \u043f\u0440\u0435\u0433\u043b\u0435\u0434","container","body",1,"btn","btn-primary",3,"click"],["type","button","placement","left","ngbTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary","mr-2",3,"click"],[1,"far","fa-edit","text-warning"],["type","button","placement","top","ngbTooltip","\u0418\u0437\u0442\u0440\u0438\u0439 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e","container","body",1,"btn","btn-primary",3,"click"],[1,"far","fa-trash-alt","text-danger"]],template:function(e,t){1&e&&(n.Ec(0,c,11,10,"div",0),n.Ec(1,l,10,0,"div",1)),2&e&&(n.mc("ngIf",!("R"===t.mode)),n.zb(1),n.mc("ngIf","R"===t.mode))},directives:[a.u,a.r,o.ab],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),e})()},Eb1s:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("PSD3"),a=i.n(n);let o=(()=>{class e{static REPORT_NOT_AVAILABLE(){a.a.fire({title:"\u0412\u0430\u0448\u0438\u044f\u0442 \u043e\u0442\u0447\u0435\u0442 \u043d\u0435 \u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d! \u041c\u043e\u043b\u044f, \u0441\u0432\u044a\u0440\u0436\u0435\u0442\u0435 \u0441\u0435 \u0441 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440, \u0437\u0430 \u0434\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0438\u044f \u0434\u043e\u0441\u0442\u044a\u043f",confirmButtonColor:this.WARNING_COLOR,confirmButtonText:"\u0414\u043e\u0431\u0440\u0435"})}static ASK_FOR_NULLABLE_RECORDS(){return a.a.fire({title:"\u0412\u0441\u0438\u0447\u043a\u0438 \u0442\u0435\u043a\u0443\u0449\u0438 \u0437\u0430\u043f\u0438\u0441\u0438  \u0449\u0435 \u0431\u044a\u0434\u0430\u0442 \u0438\u0437\u0442\u0440\u0438\u0442\u0438. \u041e\u0442\u0447\u0435\u0442\u0430 \u0449\u0435 \u0441\u0435 \u043f\u0440\u0435\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0430 \u0441 \u043d\u0443\u043b\u0435\u0432\u0438 \u0434\u0430\u043d\u043d\u0438 (\u043d\u044f\u043c\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442)",icon:"warning",showCancelButton:!0,confirmButtonColor:this.WARNING_COLOR,cancelButtonColor:this.SUCCESS_COLOR,confirmButtonText:"\u0414\u0430! (\u0418\u0437\u0442\u0440\u0438\u0439 \u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0430\u0439)",cancelButtonText:"\u041d\u0435! (\u041e\u0442\u043a\u0430\u0437)"})}static askForProcessConfirm(e,t){return a.a.fire({title:e,icon:"warning",showCancelButton:!0,confirmButtonColor:"#004085",cancelButtonColor:"#d33",confirmButtonText:t,cancelButtonText:"\u041e\u0442\u043a\u0430\u0436\u0438"})}static SUCCESS(){return a.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043f\u0430\u0437\u0432\u0430\u043d\u0435 \u043d\u0430 \u0434\u0430\u043d\u043d\u0438\u0442\u0435!",showConfirmButton:!1,timer:1500})}static ERROR(e){return a.a.fire({icon:"error",title:e,showConfirmButton:!1,timer:1500})}}return e.WARNING_COLOR="#b30000",e.SUCCESS_COLOR="#004085",e})()},GYrz:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("fXoL"),a=i("lB+K"),o=i("F7pt"),s=i("1kSV"),r=i("3Pt+"),d=i("ofXK"),c=i("Pe2L"),l=i("szLj"),m=i("d+ck");const b=["commentModal"];function u(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-date",13),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.startDate=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.startDate)("formItemDef",e.defs.startDate)("name",e.defs.startDate.domId)}}function h(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-date",13),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.dateInspection=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.dateInspection)("formItemDef",e.defs.dateInspection)("name",e.defs.dateInspection.domId)}}function p(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-long-text",9),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.inspectionResult=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.inspectionResult)("name",e.defs.inspectionResult.domId)("formItemDef",e.defs.inspectionResult)}}function f(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-long-text",9),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.terminationReason=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.terminationReason)("name",e.defs.terminationReason.domId)("formItemDef",e.defs.terminationReason)}}function g(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-checkbox",13),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.absenceOfSources=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.absenceOfSources)("formItemDef",e.defs.absenceOfSources)("name",e.defs.absenceOfSources.domName)}}function D(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-checkbox",13),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.params.falseDeclAcknowledge=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.params.falseDeclAcknowledge)("formItemDef",e.defs.falseDeclAcknowledge)("name",e.defs.falseDeclAcknowledge.domName)}}function S(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",1),n.Sb(1,"form",null,2),n.Sb(3,"div",3),n.Sb(4,"h4",4),n.Gc(5,"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 (\u0442\u043e\u0437\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0435 \u0432\u0438\u0434\u0438\u043c \u0441\u0430\u043c\u043e \u0437\u0430 \u0441\u043b\u0443\u0436\u0438\u0442\u0435\u043b\u0438)"),n.Rb(),n.Sb(6,"button",5),n.ec("click",(function(){return n.wc(e),n.gc().close()})),n.Nb(7,"i",6),n.Rb(),n.Rb(),n.Sb(8,"div",7),n.Ec(9,u,1,3,"app-fi-input-date",8),n.Sb(10,"app-fi-input-long-text",9),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().model.description=t})),n.Rb(),n.Ec(11,h,1,3,"app-fi-input-date",8),n.Ec(12,p,1,3,"app-fi-input-long-text",10),n.Ec(13,f,1,3,"app-fi-input-long-text",10),n.Ec(14,g,1,3,"app-fi-input-checkbox",8),n.Ec(15,D,1,3,"app-fi-input-checkbox",8),n.Rb(),n.Sb(16,"div",11),n.Sb(17,"button",12),n.ec("click",(function(){return n.wc(e),n.gc().onComment()})),n.Gc(18),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.vc(2),t=n.gc();n.zb(9),n.mc("ngIf",t.defs.startDate),n.zb(1),n.mc("ngModel",t.model.description)("name",t.commentDef.domId)("formItemDef",t.commentDef),n.zb(1),n.mc("ngIf",t.defs.dateInspection),n.zb(1),n.mc("ngIf",t.defs.inspectionResult),n.zb(1),n.mc("ngIf",t.defs.terminationReason),n.zb(1),n.mc("ngIf",t.defs.absenceOfSources),n.zb(1),n.mc("ngIf",t.defs.falseDeclAcknowledge),n.zb(2),n.mc("disabled",e.invalid),n.zb(1),n.Ic(" ",null==t.nextState?null:t.nextState.uiButtonLabel," ")}}let I=(()=>{class e{constructor(e){this.modalService=e,this.TXT_MESSAGES=a.a,this.SYSTEM_CLOSE="system close",this.DISTRIBUTED="DISTRIBUTE",this.SHOW_DATE="SHOW_DATE",this.SHOW_TEXT="SHOW_TEXT",this.SHOW_CHECK="SHOW_CHECK",this.model={},this.defs={},this.modalDlg=null,this.commentEvent=new n.n}set actions(e){this.trnActions=e,this.checkStateAndDefs()}ngOnInit(){this.loadDefinition()}open(){this.modalDlg=this.modalService.open(this.modal,{keyboard:!1,backdrop:"static",size:"xl"})}close(){null!=this.modalDlg&&(this.modalDlg.close(this.SYSTEM_CLOSE),this.modalDlg=null)}onComment(){this.commentEvent.emit(this.model)}loadDefinition(){const e=new o.a;e.domId="comment",e.labelText=null,e.helpText=null,e.placeHolderText="\u041a\u041e\u041c\u0415\u041d\u0422\u0410\u0420",e.isRequired=!0,e.isDisabled=!1,this.commentDef=e}checkStateAndDefs(){if(this.trnActions&&this.trnActions.length){this.model.params||(this.model.params={});for(const e of this.trnActions)e.actionCode===this.SHOW_DATE&&(this.model.params[e.paramNameSrv]={});this.loadDefs()}}loadDefs(){for(const e of this.trnActions)switch(e.actionCode){case this.SHOW_DATE:const t=o.a.createDefaultDateFormItemDef();t.domId=e.paramNameSrv,t.placeHolderText=null,t.labelText=e.labelUi,t.helpText=null,t.isRequired=!0,this.defs[e.paramNameSrv]=t;break;case this.SHOW_TEXT:const i=new o.a;i.domId=e.paramNameSrv,i.labelText=e.labelUi,i.helpText=null,i.placeHolderText=null,i.isRequired=!0,i.isDisabled=!1,this.defs[e.paramNameSrv]=i;break;case this.SHOW_CHECK:const n=new o.a;n.domId=e.paramNameSrv,n.labelText=e.labelUi,n.helpText="",n.isRequired=!0,this.defs[e.paramNameSrv]=n}}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(s.t))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-wot-comment"]],viewQuery:function(e,t){var i;1&e&&n.Nc(b,!0),2&e&&n.uc(i=n.fc())&&(t.modal=i.first)},inputs:{nextState:"nextState",actions:"actions"},outputs:{commentEvent:"commentEvent"},decls:2,vars:0,consts:[["commentModal",""],[1,"container-fluid","p-3"],["form","ngForm"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],["type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"ngModel","formItemDef","name","ngModelChange",4,"ngIf"],[3,"ngModel","name","formItemDef","ngModelChange"],[3,"ngModel","name","formItemDef","ngModelChange",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"ngModel","formItemDef","name","ngModelChange"]],template:function(e,t){1&e&&n.Ec(0,S,19,11,"ng-template",null,0,n.Fc)},directives:[r.D,r.p,r.q,d.u,c.a,r.o,r.r,l.a,m.a],styles:[""]}),e})()},"UV++":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("mrSG"),a=i("hnrn");let o=(()=>{class e{constructor(e){Object.assign(this,e||{})}get id(){return this.pId}set id(e){this.pId=e}get firstName(){return this.pFirstName}set firstName(e){this.pFirstName=e}get midName(){return this.pMidName}set midName(e){this.pMidName=e}get lastName(){return this.pLastName}set lastName(e){this.pLastName=e}get email(){return this.pEmail}set email(e){this.pEmail=e}get username(){return this.pUsername}set username(e){this.pUsername=e}get passwd(){return this.pPasswd}set passwd(e){this.pPasswd=e}get isEnabled(){return this.pIsEnabled}set isEnabled(e){this.pIsEnabled=e}get dateCreated(){return this.pDateCreated}set dateCreated(e){this.pDateCreated=e}get dateExpired(){return this.pDateExpired}set dateExpired(e){this.pDateExpired=e}get outId(){return this.pOutId}set outId(e){this.pOutId=e}get flagIntOut(){return this.pFlagIntOut}set flagIntOut(e){this.pFlagIntOut=e}get deactivationReason(){return this.pDeactivationReason}set deactivationReason(e){this.pDeactivationReason=e}get label(){return`${this.firstName} ${this.lastName}`}}return e.url="TrnUsers",e.urlGetRiosOfficers="/TrnUsers/getRiosOfficer",e.urlEmail="TrnUsers/sendEmail",Object(n.b)([Object(a.b)({alias:"id"})],e.prototype,"pId",void 0),Object(n.b)([Object(a.b)({alias:"firstName"})],e.prototype,"pFirstName",void 0),Object(n.b)([Object(a.b)({alias:"midName"})],e.prototype,"pMidName",void 0),Object(n.b)([Object(a.b)({alias:"lastName"})],e.prototype,"pLastName",void 0),Object(n.b)([Object(a.b)({alias:"email"})],e.prototype,"pEmail",void 0),Object(n.b)([Object(a.b)({alias:"username"})],e.prototype,"pUsername",void 0),Object(n.b)([Object(a.b)({alias:"passwd"})],e.prototype,"pPasswd",void 0),Object(n.b)([Object(a.b)({alias:"isEnabled"})],e.prototype,"pIsEnabled",void 0),Object(n.b)([Object(a.b)({alias:"outId"})],e.prototype,"pOutId",void 0),Object(n.b)([Object(a.b)({alias:"flagIntOut"})],e.prototype,"pFlagIntOut",void 0),Object(n.b)([Object(a.b)({alias:"dateCreated"})],e.prototype,"pDateCreated",void 0),Object(n.b)([Object(a.b)({alias:"dateExpired"})],e.prototype,"pDateExpired",void 0),Object(n.b)([Object(a.b)({alias:"deactivationReason"})],e.prototype,"pDeactivationReason",void 0),e})()},WR4V:function(e,t,i){"use strict";i.d(t,"a",(function(){return z}));var n=i("mrSG"),a=i("fXoL"),o=i("WCP0"),s=i("1bmj"),r=i("ljmd"),d=i("ozDz"),c=i("xMVv"),l=i("KQ7d"),m=i("lJxs"),b=i("pLGQ"),u=i("CR6u"),h=i("4WaZ"),p=i("Eb1s"),f=i("ZRIf"),g=i("sGcX"),D=i("3Pt+"),S=i("1kSV"),I=i("lz7R"),R=i("TTlI"),v=i("LlKj"),E=i("Bz/w"),y=i("nI3r");const T=["orgAddrContForm"],C=["innerForm"];function O(e,t){if(1&e&&(a.Sb(0,"div",10),a.Sb(1,"h6",11),a.Gc(2,"\u0414\u0410\u041d\u041d\u0418 \u0417\u0410 \u041e\u0420\u0413\u0410\u041d\u0418\u0417\u0410\u0426\u0418\u042f\u0422\u0410"),a.Rb(),a.Sb(3,"div"),a.Sb(4,"button",12),a.Nb(5,"i",13),a.Nb(6,"i",14),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(3);a.zb(5),a.mc("hidden",e.isExpanded("org-dat\u0430")),a.zb(1),a.mc("hidden",!e.isExpanded("org-dat\u0430"))}}function A(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",15),a.Sb(1,"div",16),a.Sb(2,"app-fi-select-dropdown-cascade",17),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.ornId=t}))("valueEmitter",(function(t){a.wc(e);const i=a.gc();return i.onDropDownValueChange(t,i.HEADQUARTERS_NAME)})),a.Rb(),a.Rb(),a.Sb(3,"div",18),a.Sb(4,"app-fi-input-text",19),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.ornName=t})),a.Rb(),a.Rb(),a.Rb()}if(2&e){const e=a.gc();a.zb(2),a.mc("ngModel",e.model.ornId)("labelFieldName","bulstat")("valueFieldName","id")("formItemDef",e.formFields.bulstat)("name",e.formFields.bulstat.domName),a.zb(2),a.mc("ngModel",e.model.ornName)("formItemDef",e.formFields.organization)("name",e.formFields.organization.domName)}}function F(e,t){if(1&e&&(a.Sb(0,"div",10),a.Sb(1,"h6",11),a.Gc(2,"\u0421\u0415\u0414\u0410\u041b\u0418\u0429\u0415 \u0418 \u0410\u0414\u0420\u0415\u0421 \u041d\u0410 \u0423\u041f\u0420\u0410\u0412\u041b\u0415\u041d\u0418\u0415"),a.Rb(),a.Sb(3,"div"),a.Sb(4,"button",12),a.Nb(5,"i",13),a.Nb(6,"i",14),a.Rb(),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(3);a.zb(5),a.mc("hidden",e.isExpanded("headquarters")),a.zb(1),a.mc("hidden",!e.isExpanded("headquarters"))}}function w(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",20,21),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().isHeadQuartersFormValid="VALID"===t})),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(3);a.mc("type",e.HEADQUARTERS_TYPE)("ngModelBindingName",e.HEADQUARTERS_NAME)("isExpanded",t.isExpanded("headquarters"))("addressData",e.model.headquarters)}}function N(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",22),a.Sb(1,"div",23),a.Sb(2,"h6",24),a.Gc(3,"\u0410\u0414\u0420\u0415\u0421 \u0417\u0410 \u041a\u041e\u0420\u0415\u0421\u041f\u041e\u041d\u0414\u0415\u041d\u0426\u0418\u042f"),a.Rb(),a.Rb(),a.Sb(4,"div",25),a.Sb(5,"app-fi-select-dropdown",26),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.address.trnOrnAddrId=t}))("valueEmitter",(function(t){a.wc(e);const i=a.gc();return i.onDropDownValueChange(t,i.ADDRESS_NAME)})),a.Rb(),a.Rb(),a.Sb(6,"button",27),a.Nb(7,"i",13),a.Nb(8,"i",14),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(3);a.zb(5),a.mc("ngModel",e.model.address.trnOrnAddrId)("formItemDef",e.formFields.address)("externalDataItems",e.nonPrimaryAddresses)("labelFieldName","customAddressView")("valueFieldName","id")("name",e.formFields.address.domName),a.zb(2),a.mc("hidden",t.isExpanded("address")),a.zb(1),a.mc("hidden",!t.isExpanded("address"))}}function M(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",20,21),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().isAddressFormValid="VALID"===t})),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(3);a.mc("type",e.ADDRESS_TYPE)("ngModelBindingName",e.ADDRESS_NAME)("isExpanded",t.isExpanded("address"))("addressData",e.model.address)}}function x(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",22),a.Sb(1,"div",23),a.Sb(2,"h6",28),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",25),a.Sb(5,"app-fi-select-dropdown-cascade",29),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contact.id=t}))("valueEmitter",(function(t){a.wc(e);const i=a.gc();return i.onDropDownValueChange(t,i.CONTACT_NAME)})),a.Rb(),a.Rb(),a.Sb(6,"button",27),a.Nb(7,"i",13),a.Nb(8,"i",14),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(3);a.zb(5),a.mc("ngModel",e.model.contact.id)("formItemDef",e.formFields.contactPerson)("labelFieldName","fullName")("valueFieldName","id")("name",e.formFields.contactPerson.domName),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function P(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",30,21),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().isContactFormValid="VALID"===t})),a.Rb()}if(2&e){const e=a.gc();a.mc("ngModelBindingName",e.CONTACT_NAME)("model",e.model.contact)}}const L=function(){return[]};let z=(()=>{class e{constructor(e,t,i){this.service=e,this.spinnerService=t,this.detector=i,this.PRIMARY_ADDRESS_INDEX="D",this.FUNC_SUFFIX="DataLoad",this.ADDRESS_NAME="address",this.ADDRESS_TYPE=h.a.AUTH_ADDRESS,this.HEADQUARTERS_NAME="headquarters",this.HEADQUARTERS_TYPE=h.a.ORG_ADDRESS,this.CONTACT_NAME="contact",this.valueEmitter=new a.n,this.loadEmitter=new a.n,this.nonPrimaryAddresses=[],this.isAddressFormValid=!1,this.isContactFormValid=!1,this.isHeadQuartersFormValid=!1}set mode(e){this.currentMode=e||u.a.NEW,this.formFields&&(this.prepareForms(),this.detector.detectChanges())}ngOnInit(){this.prepareModels(),this.prepareForms()}prepareModels(e){return Object(n.a)(this,void 0,void 0,(function*(){if(this.model={},this.model.headquarters=new b.a,this.model.address=new b.a,this.model.contact=new l.a,!e&&this.isEditMode()){this.model.ornId=this.authorization.ornId;const e=yield this.service.loadById(o.a,o.a.url,this.model.ornId).toPromise().catch(e=>p.a.ERROR(e.error.message));this.onDropDownValueChange(e,this.HEADQUARTERS_NAME)}}))}prepareForms(){this.formFields=new r.a,(new s.a).addOrgAddrContactsFormFields(this.formFields,this.currentMode)}onDropDownValueChange(e,t){e?this[t+this.FUNC_SUFFIX](e):this.clearFields(t)}headquartersDataLoad(e){return Object(n.a)(this,void 0,void 0,(function*(){this.spinnerService.showMainModalSpinner(),e.type=this.PRIMARY_ADDRESS_INDEX,this.setOrgName(e.name),yield this.loadOrgAddressByTypeAndId(e.type,e.id,this.HEADQUARTERS_NAME),yield this.loadOrgNonPrimaryAddresses(e.id),yield this.loadContact(),this.changeFormFieldsRights(this.HEADQUARTERS_NAME,!0),this.spinnerService.hideMainModalSpinner()}))}addressDataLoad(e){this.setOrgAddressAndEmail(e,this.ADDRESS_NAME),this.loadOrgGeoAddress(e,this.ADDRESS_NAME)}contactDataLoad(e){this.model.contact=e,this.changeFormFieldsRights(this.CONTACT_NAME,!!e.id)}setOrgName(e){this.model.ornName=e}loadOrgAddressByTypeAndId(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){const i={type:e,ornId:t};yield this.service.loadByFind(d.a,d.a.url,i).toPromise().then(e=>e.pageContent.shift()||{}).then(e=>this.nestedDataLoad(e,this.HEADQUARTERS_NAME)).catch(e=>p.a.ERROR(e.error.message))}))}nestedDataLoad(e,t){return Object(n.a)(this,void 0,void 0,(function*(){Object.keys(e).length&&(this.setOrgAddressAndEmail(e,t),yield this.loadOrgGeoAddress(e,t))}))}setOrgAddressAndEmail(e,t){this.model[t].email=e.email,this.model[t].webpage=e.webpage,this.model[t].address=e.address}loadOrgGeoAddress(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i={popEknm:e.eknm};yield this.service.loadByFind(c.a,c.a.publicUrl,i).toPromise().then(e=>e.pageContent.shift()||{}).then(e=>this.setEknmFields(t,e)).catch(e=>p.a.ERROR(e.error.message))}))}loadContact(){return Object(n.a)(this,void 0,void 0,(function*(){if(this.isEditMode()){const e=yield this.service.loadById(l.a,l.a.url,this.authorization.cotId).toPromise();this.contactDataLoad(e)}else this.contactDataLoad({})}))}setEknmFields(e,t){this.model[e].terCode=t.terCode,this.model[e].distEknm=t.distEknm,this.model[e].popEknm=t.popEknm}loadOrgNonPrimaryAddresses(e){return Object(n.a)(this,void 0,void 0,(function*(){yield this.service.loadAll(d.a,d.a.nonPrimaryAddressesUrl+"/"+e).pipe(Object(m.a)(e=>e.filter(e=>e.type!==this.PRIMARY_ADDRESS_INDEX))).toPromise().then(e=>{this.nonPrimaryAddresses=e.slice();const t=this.isEditMode()&&e.length?e.find(e=>e.id===this.authorization.addrId):e.shift()||{};return this.model.address.trnOrnAddrId=t.id,t}).then(e=>{this.nestedDataLoad(e,this.ADDRESS_NAME),this.changeFormFieldsRights(this.ADDRESS_NAME,!!e.id)}).catch(e=>p.a.ERROR(e.error.message))}))}clearFields(e,t){e===this.HEADQUARTERS_NAME?(this.prepareModels(t),this.components.forEach(e=>this.changeFormFieldsRights(e.ngModelBindingName,!1))):(this.model[e]={},this.changeFormFieldsRights(e,!1))}changeFormFieldsRights(e,t){var i;const n=null===(i=this.components)||void 0===i?void 0:i.find(t=>t.ngModelBindingName===e);n&&(n.mode=t?u.a.READ:u.a.NEW,n.disableNonEmptyFields=t)}isEditMode(){return!!this.authorization}clearAllFields(e){this.clearFields(this.HEADQUARTERS_NAME,!0)}processModel(){this.valueEmitter.emit(this.model)}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(f.a),a.Mb(g.a),a.Mb(a.h))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-org-addr-contact"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(T,!0),a.Nc(C,!0)),2&e&&(a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.components=i))},inputs:{mode:"mode",authorization:"authorization"},outputs:{valueEmitter:"valueEmitter",loadEmitter:"loadEmitter"},decls:16,vars:3,consts:[["novalidate","",1,"was-validated"],["orgAddrContForm","ngForm"],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","org-dat\u0430"],["ngbPanelHeader",""],["ngbPanelContent",""],["id","headquarters"],["id","address"],["id","contact-person"],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-2"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],[1,"row"],[1,"col-md-4"],[3,"ngModel","labelFieldName","valueFieldName","formItemDef","name","ngModelChange","valueEmitter"],[1,"col-md-8"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"type","ngModelBindingName","isExpanded","addressData","formStatusValidChanged"],["innerForm",""],[1,"d-flex"],[1,"pl-0","col-lg-3"],[1,"mt-2","mb-0","mr-3"],[1,"col-lg-6"],[3,"ngModel","formItemDef","externalDataItems","labelFieldName","valueFieldName","name","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[1,"mt-2","mb-0"],[3,"ngModel","formItemDef","labelFieldName","valueFieldName","name","ngModelChange","valueEmitter"],[3,"ngModelBindingName","model","formStatusValidChanged"]],template:function(e,t){1&e&&(a.Sb(0,"form",0,1),a.Sb(2,"ngb-accordion",2,3),a.Sb(4,"ngb-panel",4),a.Ec(5,O,7,2,"ng-template",5),a.Ec(6,A,5,8,"ng-template",6),a.Rb(),a.Sb(7,"ngb-panel",7),a.Ec(8,F,7,2,"ng-template",5),a.Ec(9,w,2,4,"ng-template",6),a.Rb(),a.Sb(10,"ngb-panel",8),a.Ec(11,N,9,8,"ng-template",5),a.Ec(12,M,2,4,"ng-template",6),a.Rb(),a.Sb(13,"ngb-panel",9),a.Ec(14,x,9,7,"ng-template",5),a.Ec(15,P,2,2,"ng-template",6),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.zb(2),a.mc("destroyOnHide",!1)("activeIds",a.pc(2,L)))},directives:[D.D,D.p,D.q,S.a,S.I,S.K,S.J,S.M,I.a,D.o,D.r,R.a,v.a,E.a,y.a],styles:["[_nghost-%COMP%]     .accordion>div>div.card-header{padding:.5rem}[_nghost-%COMP%]     #org-dat\u0430>div.card-body{padding-bottom:.3rem}[_nghost-%COMP%]     #address-header.card-header, [_nghost-%COMP%]     #contact-person-header.card-header{padding-bottom:0}"]}),e})()},dWe5:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("mrSG"),a=i("hnrn");let o=(()=>{class e{constructor(e){Object.assign(this,e||{})}get dateFrom(){return this.pDateFrom}set dateFrom(e){this.pDateFrom=e}get dateTo(){return this.pDateTo}set dateTo(e){this.pDateTo=e}get id(){return this.pId}set id(e){this.pId=e}get code(){return this.pCode}set code(e){this.pCode=e}get description(){return this.pDescription}set description(e){this.pDescription=e}get type(){return this.pType}set type(e){this.pType=e}get clientMaping(){return this.pClientMaping}set clientMaping(e){this.pClientMaping=e}get tcDescrType(){return this.pDescrType}set tcDescrType(e){this.pDescrType=e}get descrType(){return this.pDescrType}set descrType(e){this.pDescrType=e}}return e.url="TcDocuments",Object(n.b)([Object(a.b)({alias:"id"})],e.prototype,"pId",void 0),Object(n.b)([Object(a.b)({alias:"code"})],e.prototype,"pCode",void 0),Object(n.b)([Object(a.b)({alias:"description"})],e.prototype,"pDescription",void 0),Object(n.b)([Object(a.b)({alias:"type"})],e.prototype,"pType",void 0),Object(n.b)([Object(a.b)({alias:"dateFrom"})],e.prototype,"pDateFrom",void 0),Object(n.b)([Object(a.b)({alias:"dateTo"})],e.prototype,"pDateTo",void 0),e})()},dkYm:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("fXoL"),a=i("lB+K"),o=i("UV++"),s=i("XDeO"),r=i("1kSV"),d=i("pHeu"),c=i("4XRX"),l=i("ZRIf"),m=i("3Pt+"),b=i("Bz/w"),u=i("TTlI"),h=i("Pe2L");const p=["distributeModal"];function f(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",16),n.Sb(1,"app-fi-select-dropdown",17),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).params.userProcessed=t}))("valueEmitter",(function(t){return n.wc(e),n.gc(2).onUserChosen(t)}))("clearItemEmitter",(function(){return n.wc(e),n.gc(2).onClearUser()})),n.Rb(),n.Rb()}if(2&e){const e=n.gc(2);n.zb(1),n.mc("ngModel",e.params.userProcessed)("formItemDef",e.formDefinitions[0])("name",e.formDefinitions[0].domId)("externalDataItems",e.riosOfficers)}}function g(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",18),n.Sb(1,"div",19),n.Sb(2,"app-fi-input-text",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).chosenUser.firstName=t})),n.Rb(),n.Rb(),n.Sb(3,"div",19),n.Sb(4,"app-fi-input-text",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).chosenUser.midName=t})),n.Rb(),n.Rb(),n.Sb(5,"div",19),n.Sb(6,"app-fi-input-text",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).chosenUser.lastName=t})),n.Rb(),n.Rb(),n.Rb(),n.Sb(7,"div",18),n.Sb(8,"div",19),n.Sb(9,"app-fi-input-text",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).chosenUser.email=t})),n.Rb(),n.Rb(),n.Sb(10,"div",19),n.Sb(11,"app-fi-input-text",20),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.riosName=t})),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.gc(2);n.zb(2),n.mc("ngModel",e.chosenUser.firstName)("formItemDef",e.formDefinitions[1])("name",e.formDefinitions[1].domName),n.zb(2),n.mc("ngModel",e.chosenUser.midName)("formItemDef",e.formDefinitions[2])("name",e.formDefinitions[2].domName),n.zb(2),n.mc("ngModel",e.chosenUser.lastName)("formItemDef",e.formDefinitions[3])("name",e.formDefinitions[3].domName),n.zb(3),n.mc("ngModel",e.chosenUser.email)("formItemDef",e.formDefinitions[4])("name",e.formDefinitions[4].domName),n.zb(2),n.mc("ngModel",e.model.riosName)("formItemDef",e.formDefinitions[5])("name",e.formDefinitions[5].domName)}}function D(e,t){1&e&&n.Gc(0," \u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 (\u0442\u043e\u0437\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0435 \u0432\u0438\u0434\u0438\u043c \u0441\u0430\u043c\u043e \u0437\u0430 \u0441\u043b\u0443\u0436\u0438\u0442\u0435\u043b\u0438) ")}function S(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-long-text",21),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).model.comments=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.model.comments)("name",e.formDefinitions[6].domId)("formItemDef",e.formDefinitions[6])}}const I=function(){return["servant"]};function R(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",1),n.Sb(1,"form",null,2),n.Sb(3,"div",3),n.Sb(4,"h4",4),n.Gc(5),n.Rb(),n.Sb(6,"button",5),n.ec("click",(function(){return n.wc(e),n.gc().close()})),n.Nb(7,"i",6),n.Rb(),n.Rb(),n.Sb(8,"div",7),n.Sb(9,"ngb-accordion",8,9),n.Sb(11,"ngb-panel",10),n.Ec(12,f,2,4,"ng-template",11),n.Ec(13,g,12,15,"ng-template",12),n.Rb(),n.Sb(14,"ngb-panel",10),n.Ec(15,D,1,0,"ng-template",11),n.Ec(16,S,1,3,"ng-template",13),n.Rb(),n.Rb(),n.Rb(),n.Sb(17,"div",14),n.Sb(18,"button",15),n.ec("click",(function(){return n.wc(e),n.gc().onDistribute()})),n.Gc(19," \u0420\u0430\u0437\u043f\u0440\u0435\u0434\u0435\u043b\u0438 "),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.vc(2),t=n.gc();n.zb(5),n.Hc(t.title),n.zb(4),n.mc("destroyOnHide",!1)("activeIds",n.pc(4,I)),n.zb(9),n.mc("disabled",e.invalid)}}let v=(()=>{class e{constructor(e,t,i,s){this.modalService=e,this.defsService=t,this.sessionInfo=i,this.crudService=s,this.TXT_MESSAGES=a.a,this.SYSTEM_CLOSE="system close",this.title="\u0420\u0410\u0417\u041f\u0420\u0415\u0414\u0415\u041b\u042f\u041d\u0415 \u041d\u0410 \u041f\u0420\u0415\u041f\u0418\u0421\u041a\u0410",this.model={},this.params={},this.chosenUser=new o.a({}),this.modalDlg=null,this.distributeEvent=new n.n}ngOnInit(){this.loadDefinitions(),this.setParams(),this.loadRiosOfficers()}loadDefinitions(){this.formDefinitions=this.defsService.getDistributeComponentDefinitions()}loadRiosOfficers(){var e,t;const i=null===(t=null===(e=this.sessionInfo.getUserInfo())||void 0===e?void 0:e.rios)||void 0===t?void 0:t.riosCode;i&&this.crudService.loadByParam(o.a,o.a.urlGetRiosOfficers,i).subscribe(e=>{this.riosOfficers=e,this.riosOfficers=this.riosOfficers.filter(e=>e.id!==this.sessionInfo.getUserInfo().id)})}open(){this.modalDlg=this.modalService.open(this.signModal,{keyboard:!1,backdrop:"static",size:"xl"})}close(){null!=this.modalDlg&&(this.modalDlg.close(this.SYSTEM_CLOSE),this.modalDlg=null)}onDistribute(){this.distributeEvent.emit({description:this.model.comments,params:this.params})}setParams(){const e=this.sessionInfo.getUserInfo().id,t=this.getNowAsTimestamp();this.params={userAssigner:e,userProcessed:null,dateAssigned:t}}onUserChosen(e){var t,i;this.model.riosName=null===(i=null===(t=this.sessionInfo.getUserInfo())||void 0===t?void 0:t.rios)||void 0===i?void 0:i.cityName,this.chosenUser=e}onClearUser(){this.chosenUser=new o.a({}),this.model.riosName=null}getNowAsTimestamp(){const e=s.a.getNow();return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),hour:e.getHours(),minute:e.getMinutes(),second:0,nanos:0}}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(r.t),n.Mb(d.a),n.Mb(c.a),n.Mb(l.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-distribute-auth"]],viewQuery:function(e,t){var i;1&e&&n.Nc(p,!0),2&e&&n.uc(i=n.fc())&&(t.signModal=i.first)},outputs:{distributeEvent:"distributeEvent"},decls:2,vars:0,consts:[["distributeModal",""],[1,"container-fluid","p-3"],["form","ngForm"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],["type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","servant"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","body","ngbPanelContent",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"d-flex","align-items-center","justify-content-between"],["labelFieldName","label","valueFieldName","id",3,"ngModel","formItemDef","name","externalDataItems","ngModelChange","valueEmitter","clearItemEmitter"],[1,"row"],[1,"col-md-4"],[3,"ngModel","formItemDef","name","ngModelChange"],[3,"ngModel","name","formItemDef","ngModelChange"]],template:function(e,t){1&e&&n.Ec(0,R,20,5,"ng-template",null,0,n.Fc)},directives:[m.D,m.p,m.q,r.a,r.I,r.K,r.J,b.a,m.o,m.r,u.a,h.a],styles:[""]}),e})()},"l6d+":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("XDeO");function a(e){return e.map(e=>(Object.keys(e).forEach(t=>{const i=e[t];if(r(i)){const a=n.a.getDateFromServerModel(i);e[t]=n.a.getDateAsString(a)}}),e))}function o(e){return e.map(e=>{for(const t in e)e[t]=s(e,t);return e})}function s(e,t){const i=e[t];if(r(i)){const a=n.a.getDateFromServerModel(i);e[t]=n.a.getDateAsString(a)}else if(i instanceof Object)for(const n of Object.keys(i))e[n]=s(i,n);return e[t]}function r(e){return e instanceof Object&&e.hasOwnProperty("day")&&e.hasOwnProperty("month")&&e.hasOwnProperty("year")}},ljmd:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}},pBfu:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("2z9z"),a=i("XDeO"),o=i("fXoL"),s=i("ZRIf"),r=i("1kSV"),d=i("ofXK");function c(e,t){if(1&e&&(o.Sb(0,"div"),o.Sb(1,"h5",6),o.Nb(2,"i",7),o.Gc(3),o.Rb(),o.Sb(4,"h6"),o.Gc(5),o.Rb(),o.Sb(6,"h6"),o.Gc(7),o.Rb(),o.Nb(8,"hr"),o.Rb()),2&e){const e=t.$implicit;o.zb(3),o.Ic(" ",e.state," "),o.zb(2),o.Jc("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b: ",e.firstName," ",e.lastName," "),o.zb(2),o.Mc("\u0414\u0430\u0442\u0430: ",e.date.day,".",e.date.month,".",e.date.year,"\u0433. ",e.date.hour,":",e.date.minute,"\u0447.")}}let l=(()=>{class e{constructor(e){this.crudService=e,this.DATE_UTILS=a.a}ngOnInit(){this.loadDetails()}ngOnChanges(){this.loadDetails()}loadDetails(){this.crudService.loadByParam(m,n.a.urlHistory,this.aunId).subscribe(e=>{this.details=e})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(s.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-history-details"]],inputs:{aunId:"aunId"},features:[o.xb],decls:7,vars:1,consts:[["ngbDropdown","",1,"d-inline-block"],["id","history","ngbDropdownToggle","",1,"btn","btn-outline-primary"],[1,"fas","fa-info-circle","mr-1"],["ngbDropdownMenu","","aria-labelledby","history",1,"alert-primary","pb-0"],[1,"container-fluid","pl-3","pr-3","pt-3","pb-0",2,"width","400px"],[4,"ngFor","ngForOf"],[1,"mb-2"],[1,"fas","fa-chevron-circle-right","mr-2","text-primary"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Sb(1,"button",1),o.Nb(2,"i",2),o.Gc(3," \u0414\u0435\u0442\u0430\u0439\u043b\u0438 "),o.Rb(),o.Sb(4,"div",3),o.Sb(5,"div",4),o.Ec(6,c,9,8,"div",5),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.zb(6),o.mc("ngForOf",t.details))},directives:[r.m,r.q,r.p,d.t],styles:[""]}),e})();class m{constructor(e){Object.assign(this,e||{})}}},pU5N:function(e,t,i){"use strict";i.d(t,"a",(function(){return $}));var n=i("mrSG"),a=i("fXoL"),o=i("CR6u"),s=i("pLGQ"),r=i("KQ7d"),d=i("GJdz"),c=i("WCP0"),l=i("xgdq"),m=i("Qlr7");class b{constructor(e){e&&(this.id=e.id,this.orgAddressData=e.orgAddressData,this.mailingAddressData=e.mailingAddressData,this.contact=e.contact,this.legalEntity=e.legalEntity,this.byProdType=e.byProdType,this.date=e.date,this.organization=e.organization,this.regId=e.regId,this.riosCode=e.riosCode)}initialize(){this.legalEntity=new d.a,this.orgAddressData=new s.a({}),this.mailingAddressData=new s.a({}),this.contact=new r.a({}),this.organization=new c.a({})}getTrnAunSeModel(){const e=new m.a(Object.assign(Object.assign({},this.date),{minute:0,hour:0,second:0,nanos:0}));return new l.a({sideEffect:this.byProdType,statementFrom:e,aunId:this.id})}}var u=i("ozDz"),h=i("ROb3"),p=i("Hi78"),f=i("yEue"),g=i("4m0f"),D=i("9GxP"),S=i("aTmD"),I=i("tyNb"),R=i("z9XM"),v=i("ZRIf"),E=i("4XRX"),y=i("sGcX"),T=i("3Pt+"),C=i("TTlI"),O=i("szLj"),A=i("BXZV"),F=i("1kSV"),w=i("QCcn"),N=i("QJFE"),M=i("LlKj"),x=i("ofXK"),P=i("Bz/w"),L=i("nI3r"),z=i("sYmb");const j=["contactApp"],_=["address"],k=["form"],B=["actionList"],U=["errorLoadSwal"];function V(e,t){if(1&e&&(a.Sb(0,"div",21),a.Sb(1,"h6",22),a.Gc(2),a.hc(3,"translate"),a.Rb(),a.Sb(4,"button",23),a.Nb(5,"i",24),a.Nb(6,"i",25),a.Rb(),a.Rb()),2&e){a.gc();const e=a.vc(11);a.zb(2),a.Ic(" ",a.ic(3,3,"applications.wasteEnd.orgAddress")," "),a.zb(3),a.mc("hidden",e.isExpanded("organization-address")),a.zb(1),a.mc("hidden",!e.isExpanded("organization-address"))}}function G(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",26),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onHeadquartersValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.orgAddressData)("mode",e.mode)}}const H=function(e){return{"mb-0":e}};function X(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",27),a.Sb(1,"div",28),a.Sb(2,"h6",29),a.Gc(3),a.hc(4,"translate"),a.Rb(),a.Rb(),a.Sb(5,"div",30),a.Sb(6,"app-fi-select-dropdown",31),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.mailingAddress=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onAddressChanged(t)})),a.Rb(),a.Rb(),a.Sb(7,"button",32),a.Nb(8,"i",24),a.Nb(9,"i",25),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(11);a.zb(2),a.mc("ngClass",a.qc(11,H,"R"!==e.mode)),a.zb(1),a.Ic(" ",a.ic(4,9,"applications.wasteEnd.mailingAddress"),""),a.zb(3),a.mc("ngModel",e.model.mailingAddress)("formItemDef",e.formDefinitions[2])("externalDataItems",e.addresses)("name",e.formDefinitions[2].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("mailing-address")),a.zb(1),a.mc("hidden",!t.isExpanded("mailing-address"))}}function q(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-address-form",33,34),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactAddressValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("isExpanded",!0)("addressData",e.application.mailingAddressData)("mode",e.mode)}}function W(e,t){if(1&e){const e=a.Tb();a.Sb(0,"div",27),a.Sb(1,"div",28),a.Sb(2,"h6",29),a.Gc(3,"\u041b\u0418\u0426\u0415 \u0417\u0410 \u041a\u041e\u041d\u0422\u0410\u041a\u0422\u0418"),a.Rb(),a.Rb(),a.Sb(4,"div",30),a.Sb(5,"app-fi-select-dropdown",35),a.ec("ngModelChange",(function(t){return a.wc(e),a.gc().model.contactPerson=t}))("valueEmitter",(function(t){return a.wc(e),a.gc().onContactChanged(t)})),a.Rb(),a.Rb(),a.Sb(6,"button",32),a.Nb(7,"i",24),a.Nb(8,"i",25),a.Rb(),a.Rb()}if(2&e){const e=a.gc(),t=a.vc(11);a.zb(2),a.mc("ngClass",a.qc(8,H,"R"!==e.mode)),a.zb(3),a.mc("ngModel",e.model.contactPerson)("formItemDef",e.formDefinitions[3])("externalDataItems",e.contacts)("name",e.formDefinitions[3].domName)("hidden","R"===e.mode),a.zb(2),a.mc("hidden",t.isExpanded("contact-person")),a.zb(1),a.mc("hidden",!t.isExpanded("contact-person"))}}function K(e,t){if(1&e){const e=a.Tb();a.Sb(0,"app-contact-person-only-form",36,37),a.ec("formStatusValidChanged",(function(t){return a.wc(e),a.gc().onContactPersonValidityChange(t)})),a.Rb()}if(2&e){const e=a.gc();a.mc("model",e.application.contact)("mode",e.mode)}}const Q=function(){return["contact-app","organization-address","mailing-address","contact-person"]};let $=(()=>{class e{constructor(e,t,i,n,s){this.router=e,this.defsGenerator=t,this.crudService=i,this.sessionInfoService=n,this.mmSpinnerService=s,this.model={},this.contacts=[],this.addresses=[],this.headquartersValidity=!1,this.contactAddressValidity=!1,this.contactPersonValidity=!1,this.isActionListReady=!1,this.isActionListSuccess=!1,this.formValidStatus="INVALID",this.statusSubscriber=null,this.mode=o.a.READ,this.areInnerFormsValid=!1,this.areInnerFormsValidChange=new a.n,this.formStatusValidChanged=new a.n,this.isFormLoading=new a.n,this.authLoader=new p.a(i),this.authSaver=new f.a(i)}ngOnInit(){this.loadDefinitions(),this.prepareApplication(),this.handleMode(),this.setRegId()}ngAfterViewInit(){this.statusSubscriber=this.form.valueChanges.subscribe(()=>{this.formValidStatus!==this.form.status&&(this.formValidStatus=this.form.status,this.formStatusValidChanged.emit(this.formValidStatus))})}ngOnDestroy(){null!=this.statusSubscriber&&this.statusSubscriber.unsubscribe()}ngOnChanges(e){var t,i,n,a,o,s;(null===(t=e.mode)||void 0===t?void 0:t.firstChange)&&(null===(i=e.type)||void 0===i?void 0:i.firstChange)||(null===(n=e.mode)||void 0===n?void 0:n.firstChange)===(null===(a=e.mode)||void 0===a?void 0:a.previousValue)&&(null===(o=e.type)||void 0===o?void 0:o.firstChange)===(null===(s=e.type)||void 0===s?void 0:s.previousValue)||(this.loadDefinitions(),this.prepareApplication(),this.handleMode(),this.setRegId())}loadTcRegByCode(e){return this.crudService.loadByFind(g.a,g.a.publicUrl,{code:e}).toPromise()}checkAddress(){this.addresses.forEach((e,t)=>{e.id===this.application.mailingAddressData.trnOrnAddrId&&(this.model.mailingAddress=this.addresses[t],this.addressForm.disableNonEmptyFields=!0)})}checkContacts(){this.contacts.forEach((e,t)=>{e.id===this.application.contact.id&&(this.model.contactPerson=this.contacts[t],this.contactForm.disableNonEmptyFields=!0)})}loadDefinitions(){this.formDefinitions=this.defsGenerator.getByProductDefinitions()}loadContactsByOrnId(e){this.crudService.loadByParam(r.a,r.a.urlOrg,e).subscribe(e=>{this.contacts=e,this.mode===o.a.EDIT&&this.checkContacts()})}loadAdressesByOrnId(e){this.crudService.loadByParam(u.a,u.a.nonPrimaryAddressesUrl,`${e}?addrTypes=R,A`).subscribe(e=>{this.addresses=e,this.mode===o.a.EDIT&&this.checkAddress()})}onHeadquartersValidityChange(e){this.headquartersValidity="VALID"===e,this.setInnerFormsValidity()}onContactAddressValidityChange(e){this.contactAddressValidity="VALID"===e,this.setInnerFormsValidity()}onContactPersonValidityChange(e){this.contactPersonValidity="VALID"===e,this.setInnerFormsValidity()}setInnerFormsValidity(){var e;this.areInnerFormsValid=this.headquartersValidity&&this.contactAddressValidity&&this.contactPersonValidity&&!!(null===(e=this.application.legalEntity)||void 0===e?void 0:e.eik),this.areInnerFormsValidChange.emit(this.areInnerFormsValid)}handleMode(){return Object(n.a)(this,void 0,void 0,(function*(){switch(this.mode!==o.a.READ&&this.mode!==o.a.EDIT||this.isFormLoading.emit(!0),this.mode){case o.a.READ:this.disableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}));break;case o.a.NEW:this.enableFields(),this.loadAuthBasicData(),this.checkUserRiosv();break;case o.a.EDIT:this.enableFields(),this.aunId&&(this.mmSpinnerService.showMainModalSpinner(),this.loadData(this.aunId).then(()=>{this.mmSpinnerService.hideMainModalSpinner(),this.isFormLoading.emit(!1)}))}}))}onOrgChanged(e){this.setInnerFormsValidity(),this.loadAuthBasicData(e)}onContactChanged(e){e?(this.application.contact=e,this.contactForm.disableNonEmptyFields=!0):(this.application.contact=new r.a({}),this.contactForm.disableNonEmptyFields=!1)}onAddressChanged(e){return Object(n.a)(this,void 0,void 0,(function*(){if(e){const t=(yield this.authLoader.loadRealAddressProperties(e)).pageContent[0];this.application.mailingAddressData=this.authLoader.createRealAddress(e,t),this.addressForm.disableNonEmptyFields=!0}else this.application.mailingAddressData=new s.a({}),this.addressForm.disableNonEmptyFields=!1}))}redirectOnError(){this.router.navigate(this.isInnerUser?[`/${h.a.ADMIN}/${h.a.WORKSPACE}/${h.a.REGISTERIES}/${h.a.REG_VIEW}`]:[`${h.a.APPLICATIONS}/${h.a.MRO_VIEW}`])}onActionListClose(){if(this.responseAunId){let e;this.isInnerUser?(e=`/${h.a.ADMIN}/${h.a.WORKSPACE}/${h.a.REGISTERIES}/${h.a.REG_VIEW}`,this.router.navigate([e])):(e=`${h.a.APPLICATIONS}/${h.a.M35_READ}`,this.router.navigate([e,this.type,this.responseAunId]))}}checkUserRiosv(){if(this.isInnerUser){const e=this.sessionInfoService.getRiosv();this.application.riosCode=null==e?void 0:e.riosCode}}disableFields(){this.formDefinitions.forEach(e=>{e.isDisabled=!0})}enableFields(){this.formDefinitions.forEach(e=>{e.isDisabled=!1})}loadAuthBasicData(e){return Object(n.a)(this,void 0,void 0,(function*(){let t;t=this.isInnerUser?e:yield this.getUserOrganization(),t?(this.application.organization=t,this.loadContactsAndAddresses(),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(t.id),this.fillLegalEntityData(t)):(this.application.organization=new c.a({}),this.application.orgAddressData=new s.a({}),this.application.mailingAddressData=new s.a({}),this.application.contact=new r.a({}),this.model.mailingAddress=null,this.model.contactPerson=null,this.application.legalEntity=new d.a,this.contacts=[],this.addresses=[])}))}loadContactsAndAddresses(){this.loadContactsByOrnId(this.application.organization.id),this.loadAdressesByOrnId(this.application.organization.id)}getUserOrganization(){return Object(n.a)(this,void 0,void 0,(function*(){return this.sessionInfoService.getOrganization()}))}fillLegalEntityData(e){this.application.legalEntity={eik:e.bulstat,legalEntity:e.name}}prepareApplication(){this.application=new b({}),this.application.initialize()}setRegId(){var e;return Object(n.a)(this,void 0,void 0,(function*(){const t=null===(e=(yield this.getRegisterId()).pageContent[0])||void 0===e?void 0:e.id;this.application.regId=t}))}getRegisterId(){return this.loadTcRegByCode("SE")}loadData(e){return Object(n.a)(this,void 0,void 0,(function*(){try{const t=yield this.authLoader.loadAuthorizationById(e);this.application.id=t.id,this.application.mailingAddressData=yield this.authLoader.loadMailingAddressByAddrId(t.addrId),this.application.contact=yield this.authLoader.loadContactByCotId(t.cotId),this.application.organization=yield this.authLoader.loadOrganizationByOrnIn(t.ornId),this.fillLegalEntityData(this.application.organization),this.application.orgAddressData=yield this.authLoader.loadOrganizationAddressByOrnId(this.application.organization.id);const i=(yield this.authLoader.loadTrnAunSe(this.application.id)).pageContent[0];this.application.byProdType=i.sideEffect,this.application.date=i.statementFrom}catch(t){console.error(t),this.errorLoadSwal.fire()}}))}onSave(){return Object(n.a)(this,void 0,void 0,(function*(){this.prepareSaveActions(),this.actionList.open();const e=yield this.authSaver.saveByProductAuthorization(this.application,this.actions);this.responseAunId=e.aunId,this.isActionListSuccess=e.status,this.isActionListReady=!0}))}prepareSaveActions(){return Object(n.a)(this,void 0,void 0,(function*(){this.actions=[],this.application.contact.id||this.actions.push(new D.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442",S.a.WORKING,!1)),this.application.mailingAddressData.trnOrnAddrId||this.actions.push(new D.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0437\u0430 \u043a\u043e\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0446\u0438\u044f",S.a.WORKING,!1)),this.actions.push(new D.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",S.a.WORKING,!1)),this.actions.push(new D.a("\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0434\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435",S.a.WORKING,!1)),this.actionList.actionList=this.actions}))}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(I.c),a.Mb(R.a),a.Mb(v.a),a.Mb(E.a),a.Mb(y.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-by-product"]],viewQuery:function(e,t){var i;1&e&&(a.Nc(j,!0),a.Nc(_,!0),a.Nc(k,!0),a.Nc(B,!0),a.Nc(U,!0)),2&e&&(a.uc(i=a.fc())&&(t.contactForm=i.first),a.uc(i=a.fc())&&(t.addressForm=i.first),a.uc(i=a.fc())&&(t.form=i.first),a.uc(i=a.fc())&&(t.actionList=i.first),a.uc(i=a.fc())&&(t.errorLoadSwal=i.first))},inputs:{mode:"mode",type:"type",aunId:"aunId",subHeader:"subHeader",mainHeader:"mainHeader",state:"state",isInnerUser:"isInnerUser",areInnerFormsValid:"areInnerFormsValid"},outputs:{areInnerFormsValidChange:"areInnerFormsValidChange",formStatusValidChanged:"formStatusValidChanged",isFormLoading:"isFormLoading"},features:[a.xb],decls:25,vars:15,consts:[[1,"container-fluid","p-3"],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"row"],[1,"col-md-8"],[3,"ngModel","formItemDef","name","ngModelChange"],[1,"col-md-4"],[3,"isReadonly","model","isInnerUser","orgEmitter"],["basicInfo",""],[3,"destroyOnHide","activeIds"],["acc","ngbAccordion"],["id","organization-address"],["ngbPanelHeader",""],["id","body","ngbPanelContent","","class","p-0"],["id","mailing-address"],["id","contact-person"],["ngbPanelContent",""],[3,"isSuccess","isReady","closeEvent"],["actionList",""],["title","\u0413\u0440\u0435\u0448\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0440\u0435\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435","icon","error",3,"showConfirmButton","confirm"],["errorLoadSwal",""],[1,"d-flex","align-items-center","justify-content-between"],[1,"m-0"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle"],[1,"fas","fa-chevron-right",3,"hidden"],[1,"fas","fa-chevron-down",3,"hidden"],["type","D",3,"isExpanded","addressData","mode","formStatusValidChanged"],[1,"d-flex"],[1,"col-lg-3","pl-0"],[1,"mt-2","mb-3","mr-3",3,"ngClass"],[1,"col-lg-5"],["labelFieldName","address",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],["ngbPanelToggle","",1,"btn","btn-sm","btn-outline-secondary","rounded-circle","ml-auto",2,"height","30px"],[3,"isExpanded","addressData","mode","formStatusValidChanged"],["address",""],["labelFieldName","fullName",3,"ngModel","formItemDef","externalDataItems","name","hidden","ngModelChange","valueEmitter"],[3,"model","mode","formStatusValidChanged"],["contactApp",""]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"form",1,2),a.Sb(3,"div",3),a.Sb(4,"div",4),a.Sb(5,"app-fi-input-text",5),a.ec("ngModelChange",(function(e){return t.application.byProdType=e})),a.Rb(),a.Rb(),a.Sb(6,"div",6),a.Sb(7,"app-fi-input-date",5),a.ec("ngModelChange",(function(e){return t.application.date=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(8,"app-basic-app-info",7,8),a.ec("orgEmitter",(function(e){return t.onOrgChanged(e)})),a.Rb(),a.Sb(10,"ngb-accordion",9,10),a.Sb(12,"ngb-panel",11),a.Ec(13,V,7,5,"ng-template",12),a.Ec(14,G,1,3,"ng-template",13),a.Rb(),a.Sb(15,"ngb-panel",14),a.Ec(16,X,10,13,"ng-template",12),a.Ec(17,q,2,3,"ng-template",13),a.Rb(),a.Sb(18,"ngb-panel",15),a.Ec(19,W,9,10,"ng-template",12),a.Ec(20,K,2,2,"ng-template",16),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(21,"app-action-tasks-list",17,18),a.ec("closeEvent",(function(){return t.onActionListClose()})),a.Rb(),a.Sb(23,"swal",19,20),a.ec("confirm",(function(){return t.redirectOnError()})),a.Rb()),2&e&&(a.zb(5),a.mc("ngModel",t.application.byProdType)("formItemDef",t.formDefinitions[0])("name",t.formDefinitions[0].domName),a.zb(2),a.mc("ngModel",t.application.date)("formItemDef",t.formDefinitions[1])("name",t.formDefinitions[1].domName),a.zb(1),a.mc("isReadonly",!t.isInnerUser||"R"===t.mode)("model",t.application.legalEntity)("isInnerUser",t.isInnerUser),a.zb(2),a.mc("destroyOnHide",!1)("activeIds",a.pc(14,Q)),a.zb(11),a.mc("isSuccess",t.isActionListSuccess)("isReady",t.isActionListReady),a.zb(2),a.mc("showConfirmButton",!0))},directives:[T.D,T.p,T.q,C.a,T.o,T.r,O.a,A.a,F.a,F.I,F.K,F.J,w.a,N.a,F.M,M.a,x.r,P.a,L.a],pipes:[z.d],styles:[""]}),e})()},tpm7:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.INDIVIDUAL="I",e.ENTITY="E",e}({})},wi1e:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("fXoL"),a=i("F7pt"),o=i("lB+K"),s=i("mXJ+"),r=i("1kSV"),d=i("tyNb"),c=i("QJFE"),l=i("3Pt+"),m=i("ofXK"),b=i("Pe2L"),u=i("szLj");const h=["processModal"],p=["onExecuteSwal"];function f(e,t){if(1&e){const e=n.Tb();n.Sb(0,"app-fi-input-date",14),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc(2).date=t})),n.Rb()}if(2&e){const e=n.gc(2);n.mc("ngModel",e.date)("formItemDef",e.dateDef)("name",e.dateDef.domId)}}function g(e,t){if(1&e){const e=n.Tb();n.Sb(0,"form",3,4),n.Sb(2,"div",5),n.Sb(3,"h4",6),n.Gc(4),n.Rb(),n.Sb(5,"button",7),n.ec("click",(function(){return n.wc(e),n.gc().close()})),n.Nb(6,"i",8),n.Rb(),n.Rb(),n.Sb(7,"div",9),n.Ec(8,f,1,3,"app-fi-input-date",10),n.Sb(9,"app-fi-input-long-text",11),n.ec("ngModelChange",(function(t){return n.wc(e),n.gc().comment=t})),n.Rb(),n.Rb(),n.Sb(10,"div",12),n.Sb(11,"button",13),n.ec("click",(function(){return n.wc(e),n.gc().onExecute()})),n.Gc(12),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.vc(1),t=n.gc();n.zb(4),n.Hc(t.title),n.zb(4),n.mc("ngIf",t.stateNeedsDate()),n.zb(1),n.mc("ngModel",t.comment)("name",t.commentDef.domId)("formItemDef",t.commentDef),n.zb(2),n.mc("disabled",e.invalid),n.zb(1),n.Ic(" ",t.buttonText," ")}}let D=(()=>{class e{constructor(e,t){this.modalService=e,this.router=t,this.TXT_MESSAGES=o.a,this.SYSTEM_CLOSE="system close",this.WARNING="warning",this.RED="#dc3545",this.SUCCESS="success",this.ERROR="error",this.modalDlg=null,this.makeTransitionEvent=new n.n}ngOnInit(){this.loadDefs()}open(e,t,i){this.state=i,this.title=e,this.buttonText=t,this.modalDlg=this.modalService.open(this.signModal,{keyboard:!1,backdrop:"static",size:"lg"})}close(){null!=this.modalDlg&&(this.comment=null,this.modalDlg.close(this.SYSTEM_CLOSE),this.modalDlg=null)}onExecute(){this.onExecuteSwal.fire()}onExecuteComplete(){this.makeTransitionEvent.emit({comments:this.comment,date:this.date}),this.close()}stateNeedsDate(){return this.state.code===s.a.ENTERED||this.state.code===s.a.REJECTED}getCommentDef(){const e=new a.a;return e.domId="comment",e.helpText=null,e.labelText="\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 (\u0442\u043e\u0437\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0435 \u0432\u0438\u0434\u0438\u043c \u0437\u0430 \u043b\u0438\u0446\u0435\u0442\u043e \u043f\u043e\u0434\u0430\u043b\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\u0442\u043e)",e.isRequired=!0,e}getDateDef(){const e=new a.a;return e.domId="date",e.helpText=null,e.labelText="\u0421\u0447\u0438\u0442\u0430\u043d\u043e \u043e\u0442:",e.isRequired=!0,e}loadDefs(){this.commentDef=this.getCommentDef(),this.dateDef=this.getDateDef()}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(r.t),n.Mb(d.c))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-process-modal"]],viewQuery:function(e,t){var i;1&e&&(n.Nc(h,!0),n.Nc(p,!0)),2&e&&(n.uc(i=n.fc())&&(t.signModal=i.first),n.uc(i=n.fc())&&(t.onExecuteSwal=i.first))},outputs:{makeTransitionEvent:"makeTransitionEvent"},decls:4,vars:8,consts:[["processModal",""],[3,"title","text","showCancelButton","showConfirmButton","confirmButtonText","cancelButtonText","icon","cancelButtonColor","confirm"],["onExecuteSwal",""],["novalidate","",1,"was-validated"],["form","ngForm"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],["type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"ngModel","formItemDef","name","ngModelChange",4,"ngIf"],[3,"ngModel","name","formItemDef","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"ngModel","formItemDef","name","ngModelChange"]],template:function(e,t){1&e&&(n.Ec(0,g,13,7,"ng-template",null,0,n.Fc),n.Sb(2,"swal",1,2),n.ec("confirm",(function(){return t.onExecuteComplete()})),n.Rb()),2&e&&(n.zb(2),n.mc("title",t.title)("text",t.TXT_MESSAGES.TEXT_WRITE_SUBMIT_AUTH)("showCancelButton",!0)("showConfirmButton",!0)("confirmButtonText",t.TXT_MESSAGES.CONFIRM_BUTTON_TEXT)("cancelButtonText",t.TXT_MESSAGES.CANCEL_BUTTON_TEXT)("icon",t.WARNING)("cancelButtonColor",t.RED))},directives:[c.a,l.D,l.p,l.q,m.u,b.a,l.o,l.r,u.a],styles:[""]}),e})()}}]);